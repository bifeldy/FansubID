<div class="container" *ngIf="fansubData">
  <div class="fansub-info align-items-center">
    <div class="media row py-3 px-2">

      <!-- Information -->
      <div class="col-md-4 col-xl-3 px-3">
        <div class="row sticky-top pt-3">
          <div class="col-12">
            <img class="w-100" [src]="fansubData.image_url" />
          </div>
          <div class="col-12 text-center pt-3">
            <button mat-button class="w-100" color="warn" matTooltip="Berdiri Sejak">
              <mat-icon>calendar_today</mat-icon> {{ fansubData.born | date:'d MMMM y' }}
            </button>
            <button mat-button class="w-100" color="accent" matTooltip="Status Fansub">
              <mat-icon>history</mat-icon> {{ fansubData.active ? 'Aktif' : 'Tidak Aktif' }}
            </button>
          </div>
          <div class="col-12 text-center pt-3" *ngIf="getUrlByName('facebook')">
            <a [href]="getUrlByName('facebook')" mat-stroked-button class="w-100" matTooltip="Kunjungi Halaman Fanpage" style="color: rgb(114, 137, 218);">
              <mat-icon>facebook</mat-icon>
              Facebook Fanpage
            </a>
          </div>
          <div class="col-12 text-center pt-3" *ngIf="getUrlByName('discord')">
            <a [href]="getUrlByName('discord')" mat-stroked-button class="w-100" matTooltip="Kunjungi Ruang Obrolan" style="color: rgb(114, 137, 218);">
              <img src="/assets/img/discord-blue.png" width="24px" />
              Ruang Obrolan Discord
            </a>
          </div>
          <div class="col-12 text-center pt-3">
            <button mat-button class="w-100 text-success" (click)="editFansubData()" style="color: rgb(255, 64, 129) !important;"
              matTooltip="{{ fansubData.user_ ? 'Terakhir Di Ubah Oleh :: ' + fansubData.user_.username : 'Perbaharui Data Fansub' }}">
              <mat-icon>edit</mat-icon>
              Perbaharui Informasi
            </button>
          </div>
        </div>
      </div>

      <!-- Content -->
      <div class="col-md-8 col-xl-9 pt-3">
        <div class="row py-3 px-0 mt-auto">
          <h1 class="m-0">
            <b>{{ fansubData.name }}</b>
          </h1>
        </div>
        <div class="row py-3">
          <app-material-chip (chipClicked)="openTag($event)" [chipData]="chipData"></app-material-chip>
        </div>
        <div class="row">
          <app-notifications class="px-0"></app-notifications>
        </div>
        <div class="row py-3" *ngIf="panelData.length > 0">
          <app-material-expansion-panel [panelData]="panelData"></app-material-expansion-panel>
        </div>
        <div class="row py-3" *ngIf="rssFeedData">
          <div class="col-12 sticky-top bg-bifeldy">
            <h2 class="pt-3 border-bottom-dotted">
              <span class="float-end text-warning" style="font-size: small; cursor: pointer;" (click)="getRssFeed()">
                Refresh
              </span>
              <b class="text-bifeldy">RSS Feed Fansub</b>
            </h2>
          </div>
          <div class="col-12" *ngIf="rssFeedData.items.length > 0">
            <mat-selection-list [multiple]="false">
              <mat-list-option *ngFor="let r of rssFeedData.items | slice:0:5" class="h-100">
                <mat-icon mat-list-icon class="ps-3">rss_feed</mat-icon>
                <a class="text-truncate text-decoration-none" href="{{ $any(r).link }}">
                  <span class="bg-bifeldy ps-3 pe-2 me-1 text-danger" style="position: absolute; right: 0;">{{ ($any(r).published || $any(r).created) | dateAgo }}</span>
                  <span class="text-warning">{{ $any(r).title }}</span>
                </a>
              </mat-list-option>
            </mat-selection-list>
          </div>
          <div class="col-12 p-3" *ngIf="rssFeedData.items.length <= 0"
            style="background-image: url('/assets/img/404-no-data.png'); background-size: contain; background-position: center; background-repeat: no-repeat; height: 256px;">
            <div class="row align-items-center h-100">
              <div class="col-8 mx-auto text-light text-center rounded py-3" style="background-color: rgba(128, 128, 128, 0.875);">
                <h3 class="m-0">
                  Tidak Ada Data ¯\_(ツ)_/¯
                </h3>
              </div>
            </div>
          </div>
        </div>
        <div class="row py-3" *ngIf="SS.mySocket?.id">
          <div class="col-12">
            <app-report></app-report>
          </div>
        </div>
        <div class="row py-3">
          <div class="col-12">
            <app-material-tab (listClicked)="openAnime($event)" (gridClicked)="openDorama($event)" (tableRowClicked)="openFile($event)" (paginatorClicked)="onPaginatorClicked($event)"
              [tabData]="tabData" [count]="count" [serverSide]="true" (serverSideFilter)="onServerSideFilter($event)" (serverSideOrder)="onServerSideOrder($event)"
              [gridPageFinished]="doramaPageFinished" (gridLoadNextPage)="onDoramaLoadNextPage()"
              [listPageFinished]="animePageFinished" (listLoadNextPage)="onAnimeLoadNextPage()"></app-material-tab>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="fansub-banner fansub-banner-1 align-items-center" [style.background-image]="'url(' + fansubData.image_url + ')'"></div>
  <div class="fansub-banner fansub-banner-2 align-items-center"></div>
</div>
