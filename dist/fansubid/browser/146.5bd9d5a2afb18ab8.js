(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[146],{1146:(z,S,d)=>{"use strict";d.r(S),d.d(S,{TorrentModule:()=>$t});var f=d(9808),H=d(8406),U=d(3075),x=d(1777),A=d(4847),w=d(4999),D=d(4327),s=d(5934),n=d(5e3),F=d(7261);class b{constructor(T,o){this._document=o;const c=this._textarea=this._document.createElement("textarea"),g=c.style;g.position="fixed",g.top=g.opacity="0",g.left="-999em",c.setAttribute("aria-hidden","true"),c.value=T,this._document.body.appendChild(c)}copy(){const T=this._textarea;let o=!1;try{if(T){const c=this._document.activeElement;T.select(),T.setSelectionRange(0,T.value.length),o=this._document.execCommand("copy"),c&&c.focus()}}catch(c){}return o}destroy(){const T=this._textarea;T&&(T.remove(),this._textarea=void 0)}}let Z=(()=>{class l{constructor(o){this._document=o}copy(o){const c=this.beginCopy(o),g=c.copy();return c.destroy(),g}beginCopy(o){return new b(o,this._document)}}return l.\u0275fac=function(o){return new(o||l)(n.LFG(f.K0))},l.\u0275prov=n.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var Q=d(8696),V=d(5861),P=d(9076),h=d.n(P),m=d(1135),_=d(8202),C=d(3172),v=d(9731),k=d(6925),O=d(3379);let y=(()=>{class l{constructor(o,c,g,B){this.gs=o,this.api=c,this.toast=g,this.ls=B,this.trackerAnnounce=s.N.trackerAnnounce,this.clientOptions={maxConns:64,tracker:{announce:this.trackerAnnounce,rtcConfig:{iceServers:s.N.iceServers}}},this.torrentsQueue={},this.torrentOptions={announce:this.trackerAnnounce,maxWebConns:16,store:h()},this.webClient=null,this.expandedRow=null,this.tableDataRowSubject=new m.X([]),this.tableDataRow=this.tableDataRowSubject.asObservable(),this.error=null,this.refCallback=null,this.flagResurrected=!1,this.gs.isBrowser&&(this.torrentsQueue=this.ls.getItem(this.gs.localStorageKeys.Torrents,!0)||this.torrentsQueue,WebTorrent.WEBRTC_SUPPORT?(this.webClient=new WebTorrent(this.clientOptions),this.gs.log("[TORRENT_CLIENT_WEB_MODE_INITIALIZED]",this.webClient),this.handleWebClient()):this.toast.error("WebRTC Not Supported!","Whoops!",null,!0))}get tableDataRowValue(){var o;return(null===(o=this.tableDataRowSubject)||void 0===o?void 0:o.value)||[]}checkHealthOnTracker(o){return this.api.postData("/torrent",o)}handleWebClient(){this.webClient.on("torrent",o=>{this.gs.log("[TORRENT_CLIENT_ADD_TORRENT_FILE]",o),this.toast.info(o.infoHash,"Woaw, Antrian Baru!",null,!0),this.tableDataRowValue.push(o),this.tableDataRowSubject.next(this.tableDataRowValue),this.refCallback&&this.refCallback(null,o)}),this.webClient.on("error",o=>{this.gs.log("[TORRENT_CLIENT_ERROR]",o),this.toast.error(o.toString(),"Whoops!",null,!0),this.error=o,this.refCallback&&this.refCallback(this.error,null)})}handleWebTorrent(o,c){o.on("done",()=>{this.gs.log("[TORRENT_FILE_DONE]",o),this.toast.success("Ada Torrent Yang Sudah Selesai Di Download","Yeay, Selesai!",null,!0),this.torrentsQueue[o.infoHash].completed=!0,this.ls.setItem(this.gs.localStorageKeys.Torrents,this.torrentsQueue),c&&c(null,null)}),o.on("warning",g=>{this.gs.log("[TORRENT_FILE_WARNING]",g),this.toast.info(g.toString(),"Yuhuu!",null,!0),c&&c(g,null)}),o.on("error",g=>{this.gs.log("[TORRENT_FILE_ERROR]",g),this.toast.error(g.toString(),"Whoops!",null,!0),c&&c(g,null)})}handleWebWire(o,c){this.gs.log("[TORRENT_WIRE_CONNECT]",o);let g=o.peerId||"Unknown!";o.remoteAddress&&o.remotePort&&(g=`${o.remoteAddress}:${o.remotePort}`),o.on("close",()=>{this.gs.log("[TORRENT_WIRE_DISCONNECT]",g),c&&c(null,o)}),c&&c(null,o)}resurrectFiles(o){var c=this;if(!this.flagResurrected){this.flagResurrected=!0;for(const g in this.torrentsQueue)this.gs.log("[TORRENT_CLIENT_QUEUE_RESURRECT]",this.torrentsQueue[g]),this.torrentsQueue[g].completed?(0,_.openDB)(this.torrentsQueue[g].indexedDb,1).then(function(){var B=(0,V.Z)(function*($){const Ot=yield $.transaction("chunks","readonly").objectStore("chunks").getAll(),Qt=C.lW.concat(Ot),Nt=[];for(const Yt of c.torrentsQueue[g].files){const Ct=Yt;Nt.push(new File([Qt.slice(Ct.offset,Ct.offset+Ct.length)],Ct.name))}c.uploadFiles(c.torrentsQueue[g].name,Nt,o)});return function($){return B.apply(this,arguments)}}()).catch(B=>this.gs.log("[INDEXDB-OPEN_FAILED]",B,"error")):this.downloadFiles(this.torrentsQueue[g].infoHash,o,{...this.torrentOptions,name:this.torrentsQueue[g].name})}o(null,null)}processTorrent(o,c,g){o.on("wire",B=>this.handleWebWire(B,g)),this.torrentsQueue[o.infoHash]={completed:c,indexedDb:o.name+" - "+o.infoHash.slice(0,8),infoHash:o.infoHash,name:o.name,files:[]};for(const B of o.files)this.torrentsQueue[o.infoHash].files.push({name:B.name,offset:B.offset,length:B.length});this.ls.setItem(this.gs.localStorageKeys.Torrents,this.torrentsQueue),this.handleWebTorrent(o,g)}downloadFiles(o,c,g=this.torrentOptions){this.gs.log("[TORRENT_CLIENT_QUEUE_DOWNLOAD]",o),this.refCallback=c,this.checkHealthOnTracker({magnetHash:o,trackTimeout:1234}).subscribe({next:B=>{this.gs.log("[TORRENT_CLIENT_HEALTH_SUCCESS]",B.result),B.result.seeds<=0?(this.toast.info("Tidak Ada Seeder!","Whoops!",null,!0),c&&c(null,B.result)):this.webClient.add(o,g,$=>{this.gs.log("[TORRENT_FILE_DOWNLOAD_READY]",$),this.toast.info("Memulai Download ...","Download!",null,!0),this.processTorrent($,!1,c)})},error:B=>{this.gs.log("[TORRENT_CLIENT_HEALTH_ERROR]",B,"error"),c&&c(B,null)}})}uploadFiles(o,c,g){this.gs.log("[TORRENT_CLIENT_QUEUE_UPLOAD]",c),this.gs.log("[TORRENT_CLIENT_QUEUE_UPLOAD]",o),this.refCallback=g,this.webClient.seed(c,{...this.torrentOptions,name:o},B=>{this.gs.log("[TORRENT_FILE_SEED_READY]",B),this.toast.info("Memulai Seeding ...","Seeding",null,!0),this.processTorrent(B,!0,g)})}removeTorrent(o,c,g=!0){this.tableDataRowSubject.next(this.tableDataRowValue.filter(B=>B.infoHash!==o)),this.webClient.remove(o,{destroyStore:!0},B=>{B&&this.gs.log("[TORRENT_FILE_REMOVE_ERROR]",B),delete this.torrentsQueue[o],g&&this.ls.setItem(this.gs.localStorageKeys.Torrents,this.torrentsQueue),c&&c(B)})}pauseTorrent(o,c){const g=this.webClient.get(o);g&&(g.pause(),c&&c(g))}resumeTorrent(o,c){const g=this.webClient.get(o);g&&(g.resume(),c&&c(g))}removeAll(){for(const o of this.webClient.torrents)this.removeTorrent(o.infoHash,c=>{c||this.gs.log("[TORRENT_FILE_REMOVE_SUCCESS]",o.infoHash)},!1)}}return l.\u0275fac=function(o){return new(o||l)(n.LFG(Q.U),n.LFG(v.s),n.LFG(k.k),n.LFG(O.n))},l.\u0275prov=n.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var I=d(7845),L=d(8381),q=d(3e3);let X=(()=>{class l{constructor(){this.fileDropped=new n.vpe}onDragOver(o){o.preventDefault(),o.stopPropagation(),this.fileOver=!0}onDragLeave(o){o.preventDefault(),o.stopPropagation(),this.fileOver=!1}ondrop(o){o.preventDefault(),o.stopPropagation(),this.fileOver=!1;let c=o.dataTransfer.files;c.length>0&&this.fileDropped.emit(c)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=n.lG2({type:l,selectors:[["","appDragDrop",""]],hostVars:2,hostBindings:function(o,c){1&o&&n.NdJ("dragover",function(B){return c.onDragOver(B)})("dragleave",function(B){return c.onDragLeave(B)})("drop",function(B){return c.ondrop(B)}),2&o&&n.ekj("fileover",c.fileOver)},outputs:{fileDropped:"fileDropped"}}),l})();var tt=d(8616),K=d(7322),ot=d(7531),nt=d(5245),lt=d(5899),ut=d(7238),It=d(7423),j=d(4623),et=d(3626);function mt(l,T){1&l&&n._UZ(0,"mat-progress-bar",26)}function gt(l,T){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f516} NAME"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function _t(l,T){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f4be} SIZE"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function xt(l,T){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f4bf} DOWNLOADED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function yt(l,T){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f4c0} UPLOADED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function st(l,T){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f504} PROGRESS"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function ft(l,T){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f53d} SPEED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function Et(l,T){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f53c} SPEED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function Dt(l,T){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f551} ~ETA."),n.qZA()),2&l&&n.Udp("color","#ff4081")}function Tt(l,T){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f9f2} PEERS"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function at(l,T){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f310} RATIO"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function ct(l,T){if(1&l&&(n.TgZ(0,"th",30)(1,"h3",31),n.YNc(2,gt,2,2,"span",32),n.YNc(3,_t,2,2,"span",32),n.YNc(4,xt,2,2,"span",32),n.YNc(5,yt,2,2,"span",32),n.YNc(6,st,2,2,"span",32),n.YNc(7,ft,2,2,"span",32),n.YNc(8,Et,2,2,"span",32),n.YNc(9,Dt,2,2,"span",32),n.YNc(10,Tt,2,2,"span",32),n.YNc(11,at,2,2,"span",32),n.qZA()()),2&l){const o=n.oxw().$implicit;n.xp6(2),n.Q6J("ngIf","NAME"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","LENGTH"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","PROGRESS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","TIMEREMAINING"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","NUMPEERS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","RATIO"===o.toUpperCase())}}function Rt(l,T){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(o[c])}}function At(l,T){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,o[c]))}}function ht(l,T){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,o[c]))}}function bt(l,T){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,o[c]))}}function Bt(l,T){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"number"),n.qZA()),2&l){const o=n.oxw().$implicit;n.xp6(1),n.hij("",n.xi3(2,1,o.downloaded/o.length*100,"1.2-2")," %")}}function wt(l,T){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.hij("",n.lcZ(2,1,o[c]),"/s")}}function pt(l,T){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.hij("",n.lcZ(2,1,o[c]),"/s")}}function rt(l,T){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"number"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(o[c]<=0?"COMPLETED":n.xi3(2,1,o[c]/1e3,"1.0-0")+" s")}}function dt(l,T){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(o[c])}}function vt(l,T){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"number"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.xi3(2,1,o[c],"1.4-4"))}}function it(l,T){if(1&l&&(n.TgZ(0,"td",33)(1,"h3"),n.YNc(2,Rt,2,1,"span",34),n.YNc(3,At,3,3,"span",34),n.YNc(4,ht,3,3,"span",34),n.YNc(5,bt,3,3,"span",34),n.YNc(6,Bt,3,4,"span",34),n.YNc(7,wt,3,3,"span",34),n.YNc(8,pt,3,3,"span",34),n.YNc(9,rt,3,4,"span",34),n.YNc(10,dt,2,1,"span",34),n.YNc(11,vt,3,4,"span",34),n.qZA()()),2&l){const o=n.oxw().$implicit;n.xp6(1),n.Gre("m-0 ","NAME"===o.toUpperCase()?"text-start":"",""),n.xp6(1),n.Q6J("ngIf","NAME"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","LENGTH"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","PROGRESS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","TIMEREMAINING"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","NUMPEERS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","RATIO"===o.toUpperCase())}}function Ut(l,T){1&l&&(n.ynx(0,27),n.YNc(1,ct,12,10,"th",28),n.YNc(2,it,12,13,"td",29),n.BQk()),2&l&&n.s9C("matColumnDef",T.$implicit)}function r(l,T){if(1&l&&(n.TgZ(0,"p",41),n._uU(1," Info Hash :: "),n.TgZ(2,"span",52),n._uU(3),n.qZA()()),2&l){const o=n.oxw().$implicit;n.xp6(3),n.hij(" ",o.infoHash," ")}}function t(l,T){if(1&l){const o=n.EpF();n.TgZ(0,"p",41),n._uU(1," Magnet URI :: "),n.TgZ(2,"span",53),n.NdJ("click",function(){n.CHM(o);const g=n.oxw().$implicit;return n.oxw().copyMagnetHashToClipboard(g.magnetURI)}),n._uU(3),n.qZA()()}if(2&l){const o=n.oxw().$implicit;n.xp6(3),n.hij(" ",o.magnetURI," ")}}function e(l,T){if(1&l&&(n.TgZ(0,"li"),n._uU(1),n.qZA()),2&l){const o=T.$implicit;n.xp6(1),n.hij(" ",o," ")}}function i(l,T){if(1&l){const o=n.EpF();n.TgZ(0,"button",45),n.NdJ("click",function(){n.CHM(o);const g=n.oxw().$implicit;return n.oxw().resumeTorrent(g)}),n.TgZ(1,"mat-icon",46),n._uU(2,"play_arrow"),n.qZA(),n._uU(3," Resume "),n.qZA()}}function a(l,T){if(1&l){const o=n.EpF();n.TgZ(0,"button",45),n.NdJ("click",function(){n.CHM(o);const g=n.oxw().$implicit;return n.oxw().pauseTorrent(g)}),n.TgZ(1,"mat-icon",46),n._uU(2,"pause"),n.qZA(),n._uU(3," Pause "),n.qZA()}}function u(l,T){if(1&l){const o=n.EpF();n.TgZ(0,"mat-list-option",54)(1,"mat-icon",55),n._uU(2,"file_present"),n.qZA(),n.TgZ(3,"div",56),n.NdJ("click",function(){const B=n.CHM(o).$implicit;return n.oxw(2).saveFile(B)}),n.TgZ(4,"span"),n._uU(5),n.qZA(),n._uU(6," -- "),n.TgZ(7,"span",57),n._uU(8),n.ALo(9,"number"),n.qZA(),n._uU(10," :: "),n.TgZ(11,"span",52),n._uU(12),n.ALo(13,"bytes"),n.ALo(14,"bytes"),n.qZA()()()}if(2&l){const o=T.$implicit;n.xp6(4),n.Gre("text-",o.downloaded/o.length>=1?"primary":"bifeldy",""),n.xp6(1),n.hij(" ",o.name," "),n.xp6(3),n.hij(" ",n.xi3(9,7,o.downloaded/o.length*100,"1.2-2")," % "),n.xp6(4),n.AsE(" ",n.lcZ(13,10,o.downloaded)," / ",n.lcZ(14,12,o.length)," ")}}function p(l,T){if(1&l){const o=n.EpF();n.TgZ(0,"td",35)(1,"div",36)(2,"div",37)(3,"div",38),n._UZ(4,"div"),n.qZA(),n.TgZ(5,"div",39),n.YNc(6,r,4,1,"p",40),n.YNc(7,t,4,1,"p",40),n.TgZ(8,"div",41),n._uU(9," Announce Trackers :: "),n.TgZ(10,"ul",42),n.YNc(11,e,2,1,"li",43),n.qZA()(),n.TgZ(12,"div",44)(13,"button",45),n.NdJ("click",function(){const B=n.CHM(o).$implicit;return n.oxw().refreshGraph(B)}),n.TgZ(14,"mat-icon",46),n._uU(15,"refresh"),n.qZA(),n._uU(16," Refresh Graph "),n.qZA(),n.TgZ(17,"button",45),n.NdJ("click",function(){const B=n.CHM(o).$implicit;return n.oxw().removeTorrent(B)}),n.TgZ(18,"mat-icon",46),n._uU(19,"delete_outline"),n.qZA(),n._uU(20," Remove "),n.qZA(),n.YNc(21,i,4,0,"button",47),n.YNc(22,a,4,0,"button",47),n.qZA(),n.TgZ(23,"div",48)(24,"div",49),n._uU(25,"Rincian Isi Berkas \u2728"),n.qZA(),n.TgZ(26,"mat-selection-list",50),n.YNc(27,u,15,14,"mat-list-option",51),n.qZA()()()()()()}if(2&l){const o=T.$implicit,c=n.oxw();n.uIk("colspan",c.tableDataColumn.length),n.xp6(1),n.Q6J("@detailExpand",o===c.TORRENT.expandedRow?"expanded":"collapsed"),n.xp6(3),n.Gre("p2p-graph graphP2p-",o.infoHash,""),n.xp6(2),n.Q6J("ngIf",o.infoHash),n.xp6(1),n.Q6J("ngIf",o.magnetURI),n.xp6(4),n.Q6J("ngForOf",o.announce),n.xp6(10),n.Q6J("ngIf",o.paused),n.xp6(1),n.Q6J("ngIf",!o.paused),n.xp6(4),n.Q6J("multiple",!1),n.xp6(1),n.Q6J("ngForOf",o.files)}}function M(l,T){1&l&&n._UZ(0,"tr",58)}function W(l,T){if(1&l){const o=n.EpF();n.TgZ(0,"tr",59),n.NdJ("click",function(){const B=n.CHM(o).$implicit;return n.oxw().toggleExpanded(B)}),n.qZA()}if(2&l){const o=T.$implicit,c=n.oxw();n.ekj("expanded-row",c.TORRENT.expandedRow===o)}}function Y(l,T){1&l&&n._UZ(0,"tr",60)}function J(l,T){if(1&l&&(n.TgZ(0,"tr",61)(1,"td",62)(2,"div",63)(3,"div",64)(4,"h3",31),n._uU(5," Tidak Ada Data \xaf\\_(\u30c4)_/\xaf "),n.qZA()()()()()),2&l){const o=n.oxw();n.xp6(1),n.uIk("colspan",o.tableDataColumn.length)}}const G=function(){return["expandedDetail"]};let Mt=(()=>{class l{constructor(o,c,g,B,$,Ft,Lt,Ot){this.snackBar=o,this.clipboard=c,this.gs=g,this.torrent=B,this.toast=$,this.ds=Ft,this.ss=Lt,this.bs=Ot,this.isProcessing=!1,this.magnetHash=null,this.torrentsGraph={},this.tableDataColumn=["name","length","downloaded","uploaded","progress","downloadSpeed","uploadSpeed","timeRemaining","numPeers","ratio"],this.files=[],this.subsDialog=null,this.subsUser=null,this.subsTableDataRow=null,this.timedOut=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get ENV(){return s.N}get TORRENT(){return this.torrent}ngOnInit(){this.dataSource=new w.by,this.gs.isBrowser&&(this.dataSource.sort=this.sort,this.subsTableDataRow=this.torrent.tableDataRow.subscribe({next:o=>{this.dataSource.data=o,this.refreshAllGraph()}}),this.reviveTorrent())}ngOnDestroy(){var o,c,g,B,$;null===(c=null===(o=this.sort)||void 0===o?void 0:o.sortChange)||void 0===c||c.unsubscribe(),null===(g=this.subsDialog)||void 0===g||g.unsubscribe(),null===(B=this.subsUser)||void 0===B||B.unsubscribe(),null===($=this.subsTableDataRow)||void 0===$||$.unsubscribe(),this.timedOut&&(clearTimeout(this.timedOut),this.timedOut=null)}copyMagnetHashToClipboard(o){this.clipboard.copy(o)&&this.snackBar.open("Link Magnet Hash Berhasil Disalin!","Ok")}toggleExpanded(o){this.gs.log("[TORRENT_CLICKED]",o),this.torrent.expandedRow=this.torrent.expandedRow===o?null:o,this.refreshGraph(o)}saveFile(o){o.downloaded/o.length>=1?(this.bs.busy(),o.getBlobURL((c,g)=>{c||(this.gs.log("[TORRENT_FILE_BLOBURL]",g),(0,D.saveAs)(g,o.name),this.bs.idle())})):this.toast.info("Berkas Sedang Dalam Proses Unduhan!","Yah, File Belum Siap!",null,!0)}reviveTorrent(){this.torrent.resurrectFiles((o,c)=>{this.refreshAllGraph()})}resumeTorrent(o){this.torrent.resumeTorrent(o.infoHash,c=>{this.refreshAllGraph()})}pauseTorrent(o){this.torrent.pauseTorrent(o.infoHash,c=>{c||this.gs.log("[TORRENT_FILE_PAUSE_SUCCESS]",o.infoHash),this.refreshAllGraph()})}removeTorrent(o){this.torrent.removeTorrent(o.infoHash,c=>{c||this.gs.log("[TORRENT_FILE_REMOVE_SUCCESS]",o.infoHash),this.torrentsGraph[o.infoHash].destroy(),delete this.torrentsGraph[o.infoHash],this.refreshAllGraph()})}downloadFiles(o){this.isProcessing=!0,this.torrent.downloadFiles(this.magnetHash,(c,g)=>{this.magnetHash=null,this.isProcessing=!1,this.refreshAllGraph()})}uploadFiles(o){this.gs.log("[TORRENT_SEED_USER_INFORMATION]",o),this.isProcessing=!0,this.torrent.uploadFiles(o,this.files,(c,g)=>{this.isProcessing=!1,this.refreshAllGraph()})}prepareFilesList(o){this.files=[];for(const g of o)this.files.push(g);const c={torrent_name:{inputLabel:"Nama Torrent",inputPlaceholder:`Torrent # ${this.ss.mySocket.id} @ ${(new Date).toUTCString()}`,inputValue:null,inputRequired:!0}};1===this.files.length?(c.torrent_name.inputPlaceholder=this.files[0].name,this.uploadFiles(c.torrent_name.inputPlaceholder)):this.files.length>1&&(this.subsDialog=this.ds.openInputDialog({data:{title:"Silahkan Masukkan Nama Untuk Torrent Kamu!",input:c,confirmText:"Ya, Mulai SEED",cancelText:"Tidak, Batal"}}).afterClosed().subscribe({next:g=>{this.gs.log("[INPUT_DIALOG_CLOSED]",g),g&&this.uploadFiles(g.torrent_name),this.subsDialog.unsubscribe()}}))}onFileDropped(o){this.prepareFilesList(o)}fileBrowseHandler(o){this.prepareFilesList(o.target.files)}initGraph(o){!this.torrentsGraph[o.infoHash]&&this.dataSource.data.length>0&&(this.gs.log("[TORRENT_WIRE_INIT_GRAPH]",o),this.torrentsGraph[o.infoHash]=new P2PGraph(`.graphP2p-${o.infoHash}`),this.torrentsGraph[o.infoHash].add({id:this.torrent.webClient.peerId,me:!0,name:"Kamu!"}))}addAllGraph(o){this.gs.log("[TORRENT_WIRE_RELOAD_GRAPH]",o);for(const c of o.wires){let g=c.peerId||"Anonim!";c.remoteAddress&&c.remotePort&&(g=`${c.remoteAddress}:${c.remotePort}`),this.torrentsGraph[o.infoHash].add({id:c.peerId,name:g}),this.torrentsGraph[o.infoHash].connect(this.torrent.webClient.peerId,c.peerId)}}deleteAllGraph(o){this.gs.log("[TORRENT_WIRE_DELETE_GRAPH]",o);const c=this.torrentsGraph[o.infoHash].list().filter(g=>g.id!==this.torrent.webClient.peerId);for(const g of c)this.torrentsGraph[o.infoHash].disconnect(this.torrent.webClient.peerId,g.id),this.torrentsGraph[o.infoHash].remove(g.id)}refreshGraph(o){this.gs.log("[TORRENT_WIRE_REFRESH_GRAPH]",o),this.torrentsGraph[o.infoHash]?(this.deleteAllGraph(o),this.addAllGraph(o)):this.initGraph(o)}refreshAllGraph(){for(const o of this.dataSource.data)this.timedOut=setTimeout(()=>{this.refreshGraph(o)},1234)}}return l.\u0275fac=function(o){return new(o||l)(n.Y36(F.ux),n.Y36(Z),n.Y36(Q.U),n.Y36(y),n.Y36(k.k),n.Y36(I.x),n.Y36(L.R),n.Y36(q.z))},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-torrent"]],viewQuery:function(o,c){if(1&o&&n.Gf(A.YE,7),2&o){let g;n.iGM(g=n.CRH())&&(c.sort=g.first)}},decls:37,vars:13,consts:[["appDragDrop","",1,"h-100",3,"fileDropped"],[1,"container"],[1,"row","pb-3","px-0"],[1,"col-12"],[1,"row"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"text-bifeldy"],["hintLabel","Isi Lalu Tekan 'Enter' Untuk Mencari Torrent ...",1,"col-12","col-md-6","col-lg-4","px-3","mb-3",3,"color"],["matInput","","placeholder","Ex. magnet:123qwe...!@#",3,"ngModel","disabled","keyup.enter","ngModelChange"],["input",""],["matSuffix",""],["color","warn","mode","indeterminate",4,"ngIf"],[1,"row","mx-2"],[1,"col-12",2,"overflow-x","auto"],["mat-table","","matSort","","multiTemplateDataRows","",1,"bg-transparent",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","element-row",3,"expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","detail-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["type","file","id","fileDropRef","multiple","",2,"visibility","hidden",3,"disabled","change"],["fileDropRef",""],["mat-fab","","color","warn","matTooltip","Seed Berkas",1,"me-3","mb-5","fab-button","animate__animated","animate__bounce","animate__infinite","animate__slow",2,"position","fixed","bottom","0","right","0",3,"disabled","click"],["color","warn","mode","indeterminate"],[3,"matColumnDef"],["mat-header-cell","","class","px-3 text-center","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","px-3 text-center","style","cursor: pointer;",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"px-3","text-center"],[1,"m-0"],[3,"color",4,"ngIf"],["mat-cell","",1,"px-3","text-center",2,"cursor","pointer"],[4,"ngIf"],["mat-cell",""],[1,"element-detail"],[1,"py-3","row"],[1,"col-3"],[1,"col-9"],["class","px-2 text-truncate",4,"ngIf"],[1,"px-2","text-truncate"],[1,"text-success","m-0"],[4,"ngFor","ngForOf"],[1,"p-2"],["mat-stroked-button","",1,"m-1","text-warning",3,"click"],[1,"me-1"],["mat-stroked-button","","class","m-1 text-warning",3,"click",4,"ngIf"],[1,"px-2"],["mat-subheader","",1,"p-0"],[3,"multiple"],["class","h-100",4,"ngFor","ngForOf"],[1,"text-success"],["matTooltip","Klik Untuk Menyalin!",1,"text-primary","text-decoration-none",3,"click"],[1,"h-100"],["mat-list-icon","",1,"ps-3"],[2,"cursor","pointer",3,"click"],[1,"text-warning"],["mat-header-row",""],["mat-row","",1,"element-row",3,"click"],["mat-row","",1,"detail-row"],[1,"mat-row"],[1,"mat-cell","text-center","align-items-center","p-0",2,"background-image","url('/assets/img/404/no-data.png')","background-size","contain","background-position","center","background-repeat","no-repeat","height","256px"],[1,"row","align-items-center","h-100"],[1,"col-8","mx-auto","text-light","text-center","rounded","py-3",2,"background-color","rgba(128, 128, 128, 0.875)"]],template:function(o,c){if(1&o){const g=n.EpF();n.TgZ(0,"div",0),n.NdJ("fileDropped",function($){return c.onFileDropped($)}),n._UZ(1,"app-notifications"),n.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h2",6)(8,"b",7),n._uU(9,"Web-SocketRTC Torrent"),n.qZA()()(),n.TgZ(10,"div",3)(11,"mat-form-field",8)(12,"mat-label"),n._uU(13,"Unduh Dari Info Hash / Magnet URI"),n.qZA(),n.TgZ(14,"input",9,10),n.NdJ("keyup.enter",function($){return c.downloadFiles($)})("ngModelChange",function($){return c.magnetHash=$}),n.qZA(),n.TgZ(16,"mat-icon",11),n._uU(17,"cloud_download"),n.qZA(),n.YNc(18,mt,1,0,"mat-progress-bar",12),n.qZA(),n.TgZ(19,"div",13)(20,"div",14)(21,"table",15),n.YNc(22,Ut,3,1,"ng-container",16),n.ynx(23,17),n.YNc(24,p,28,12,"td",18),n.BQk(),n.YNc(25,M,1,0,"tr",19),n.YNc(26,W,1,2,"tr",20),n.YNc(27,Y,1,0,"tr",21),n.YNc(28,J,6,1,"tr",22),n.qZA()(),n.TgZ(29,"div",3)(30,"marquee"),n._uU(31),n.qZA()()()()()()()(),n.TgZ(32,"input",23,24),n.NdJ("change",function($){return c.fileBrowseHandler($)}),n.qZA(),n.TgZ(34,"button",25),n.NdJ("click",function(){return n.CHM(g),n.MAs(33).click()}),n.TgZ(35,"mat-icon"),n._uU(36,"cloud_upload"),n.qZA()()()}2&o&&(n.xp6(11),n.Q6J("color","accent"),n.xp6(3),n.Q6J("ngModel",c.magnetHash)("disabled",c.isProcessing),n.xp6(4),n.Q6J("ngIf",c.isProcessing),n.xp6(3),n.Q6J("dataSource",c.dataSource),n.xp6(1),n.Q6J("ngForOf",c.tableDataColumn),n.xp6(3),n.Q6J("matHeaderRowDef",c.tableDataColumn),n.xp6(1),n.Q6J("matRowDefColumns",c.tableDataColumn),n.xp6(1),n.Q6J("matRowDefColumns",n.DdM(12,G)),n.xp6(4),n.hij("Terhubung Dengan Tracker :: ",c.ENV.trackerAnnounce.join(" :: "),""),n.xp6(1),n.Q6J("disabled",c.isProcessing),n.xp6(2),n.Q6J("disabled",c.isProcessing))},directives:[X,tt.t,K.KE,K.hX,ot.Nt,U.Fj,U.JJ,U.On,nt.Hw,K.R9,f.O5,lt.pW,w.BZ,A.YE,f.sg,w.w1,w.fO,w.ge,A.nU,w.Dz,w.ev,ut.gM,It.lW,j.gs,j.Ub,j.vS,j.Nh,w.as,w.XQ,w.nj,w.Gk,w.Ee],pipes:[et.$,f.JJ],styles:[".p2p-graph[_ngcontent-%COMP%]{background-color:#8d8d8d80!important}tr.detail-row[_ngcontent-%COMP%]{height:0}tr.element-row[_ngcontent-%COMP%]:not(.expanded-row):hover{background-color:#ffffffdf}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.fileover[_ngcontent-%COMP%]{animation:shake 1s;animation-iteration-count:infinite}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}"],data:{animation:[(0,x.X$)("detailExpand",[(0,x.SB)("collapsed",(0,x.oB)({height:"0px",minHeight:"0"})),(0,x.SB)("expanded",(0,x.oB)({height:"*"})),(0,x.eR)("expanded <=> collapsed",(0,x.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),l})();var St=d(210),Pt=d(7355),Zt=d(8613),kt=d(4946),Ht=d(7956);const Gt=[{path:"",pathMatch:"full",component:Mt}];let $t=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=n.oAB({type:l}),l.\u0275inj=n.cJS({imports:[[f.ez,H.Bz.forChild(Gt),U.u5,Ht.C,Zt.F,St.m,kt.P,Pt.T]]}),l})()},4946:(z,S,d)=>{"use strict";d.d(S,{P:()=>x});var f=d(9808),H=d(210),U=d(5e3);let x=(()=>{class A{}return A.\u0275fac=function(D){return new(D||A)},A.\u0275mod=U.oAB({type:A}),A.\u0275inj=U.cJS({imports:[[f.ez,H.m]]}),A})()},8616:(z,S,d)=>{"use strict";d.d(S,{t:()=>F});var f=d(5e3),H=d(8406),U=d(8696),x=d(7140),A=d(9808);function w(b,Z){if(1&b&&f._UZ(0,"div",4),2&b){const E=f.oxw();f.Udp("background-size",E.GS.sizeContain?"contain":"cover")("background-image","url("+E.GS.bannerImg+")")("background-repeat",E.GS.bgRepeat?"repeat-x":"no-repeat")("height","/home"===E.ROUTER.url||"/berkas"===E.ROUTER.url?"192px":"128px")("background-position-y","/berkas"===E.ROUTER.url?"22.5%":"")}}function D(b,Z){if(1&b&&(f.TgZ(0,"strong",10),f._uU(1," -- "),f.TgZ(2,"i")(3,"a",11),f._uU(4),f.qZA()()()),2&b){const E=f.oxw().$implicit;f.xp6(3),f.MGl("routerLink","/user/",E.notifCreator,""),f.xp6(1),f.hij(" ",E.notifCreator," ")}}function s(b,Z){if(1&b){const E=f.EpF();f.TgZ(0,"button",12),f.NdJ("click",function(){f.CHM(E);const N=f.oxw().$implicit;return f.oxw().removeNotif(N.notifData.id)}),f.qZA()}}function n(b,Z){if(1&b&&(f.TgZ(0,"div",5)(1,"div")(2,"strong",6),f._uU(3),f.qZA(),f._UZ(4,"span",7),f.YNc(5,D,5,2,"strong",8),f.YNc(6,s,1,0,"button",9),f.qZA()()),2&b){const E=Z.$implicit;f.xp6(1),f.Gre("alert alert-",E.notifData.type," alert-dismissible fade show"),f.xp6(2),f.Oqu(E.notifData.title),f.xp6(1),f.Q6J("innerHTML",E.notifData.content,f.oJD),f.xp6(1),f.Q6J("ngIf",E.notifCreator),f.xp6(1),f.Q6J("ngIf",E.notifData.dismissible)}}let F=(()=>{class b{constructor(E,R,N){this.router=E,this.gs=R,this.notif=N}ngOnInit(){}get GS(){return this.gs}get ROUTER(){return this.router}get NOTIF(){return this.notif}removeNotif(E){this.notif.removeNotif(E)}}return b.\u0275fac=function(E){return new(E||b)(f.Y36(H.F0),f.Y36(U.U),f.Y36(x.T))},b.\u0275cmp=f.Xpm({type:b,selectors:[["app-notifications"]],decls:4,vars:2,consts:[["class","container-fluid notif-banner align-items-center",3,"background-size","background-image","background-repeat","height","background-position-y",4,"ngIf"],[1,"container"],[1,"row","pt-3"],["class","col-12",4,"ngFor","ngForOf"],[1,"container-fluid","notif-banner","align-items-center"],[1,"col-12"],[1,"me-1"],[3,"innerHTML"],["class","ms-1",4,"ngIf"],["type","button","class","btn-close","data-dismiss","alert",3,"click",4,"ngIf"],[1,"ms-1"],[1,"text-decoration-none",3,"routerLink"],["type","button","data-dismiss","alert",1,"btn-close",3,"click"]],template:function(E,R){1&E&&(f.YNc(0,w,1,10,"div",0),f.TgZ(1,"div",1)(2,"div",2),f.YNc(3,n,7,7,"div",3),f.qZA()()),2&E&&(f.Q6J("ngIf",R.GS.bannerImg&&("/home"===R.ROUTER.url||"/berkas"===R.ROUTER.url||"/fansub"===R.ROUTER.url||"/berkas"===R.ROUTER.url||"/anime"===R.ROUTER.url||R.ROUTER.url.includes("/anime?")||"/dorama"===R.ROUTER.url||R.ROUTER.url.includes("/dorama?"))),f.xp6(3),f.Q6J("ngForOf",R.NOTIF.notifications))},directives:[A.O5,A.sg,H.yS],styles:[".notif-banner[_ngcontent-%COMP%]{width:100%;background-size:cover;background-position:75% 50%;background-image:url(/assets/img/home-banner.png)}"]}),b})()},8613:(z,S,d)=>{"use strict";d.d(S,{F:()=>x});var f=d(9808),H=d(8406),U=d(5e3);let x=(()=>{class A{}return A.\u0275fac=function(D){return new(D||A)},A.\u0275mod=U.oAB({type:A}),A.\u0275inj=U.cJS({imports:[[f.ez,H.Bz]]}),A})()},7956:(z,S,d)=>{"use strict";d.d(S,{C:()=>U});var f=d(9808),H=d(5e3);let U=(()=>{class x{}return x.\u0275fac=function(w){return new(w||x)},x.\u0275mod=H.oAB({type:x}),x.\u0275inj=H.cJS({imports:[[f.ez]]}),x})()},5343:(z,S)=>{"use strict";S.byteLength=function D(E){var R=w(E),Q=R[1];return 3*(R[0]+Q)/4-Q},S.toByteArray=function n(E){var R,_,N=w(E),Q=N[0],V=N[1],P=new H(function s(E,R,N){return 3*(R+N)/4-N}(0,Q,V)),h=0,m=V>0?Q-4:Q;for(_=0;_<m;_+=4)R=f[E.charCodeAt(_)]<<18|f[E.charCodeAt(_+1)]<<12|f[E.charCodeAt(_+2)]<<6|f[E.charCodeAt(_+3)],P[h++]=R>>16&255,P[h++]=R>>8&255,P[h++]=255&R;return 2===V&&(R=f[E.charCodeAt(_)]<<2|f[E.charCodeAt(_+1)]>>4,P[h++]=255&R),1===V&&(R=f[E.charCodeAt(_)]<<10|f[E.charCodeAt(_+1)]<<4|f[E.charCodeAt(_+2)]>>2,P[h++]=R>>8&255,P[h++]=255&R),P},S.fromByteArray=function Z(E){for(var R,N=E.length,Q=N%3,V=[],P=16383,h=0,m=N-Q;h<m;h+=P)V.push(b(E,h,h+P>m?m:h+P));return 1===Q?V.push(d[(R=E[N-1])>>2]+d[R<<4&63]+"=="):2===Q&&V.push(d[(R=(E[N-2]<<8)+E[N-1])>>10]+d[R>>4&63]+d[R<<2&63]+"="),V.join("")};for(var d=[],f=[],H="undefined"!=typeof Uint8Array?Uint8Array:Array,U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,A=U.length;x<A;++x)d[x]=U[x],f[U.charCodeAt(x)]=x;function w(E){var R=E.length;if(R%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=E.indexOf("=");return-1===N&&(N=R),[N,N===R?0:4-N%4]}function F(E){return d[E>>18&63]+d[E>>12&63]+d[E>>6&63]+d[63&E]}function b(E,R,N){for(var V=[],P=R;P<N;P+=3)V.push(F((E[P]<<16&16711680)+(E[P+1]<<8&65280)+(255&E[P+2])));return V.join("")}f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},3172:(z,S,d)=>{"use strict";const H=d(5343),U=d(8461),x="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;S.lW=s,S.h2=50;const A=2147483647;function D(r){if(r>A)throw new RangeError('The value "'+r+'" is invalid for option "size"');const t=new Uint8Array(r);return Object.setPrototypeOf(t,s.prototype),t}function s(r,t,e){if("number"==typeof r){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return Z(r)}return n(r,t,e)}function n(r,t,e){if("string"==typeof r)return function E(r,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const e=0|m(r,t);let i=D(e);const a=i.write(r,t);return a!==e&&(i=i.slice(0,a)),i}(r,t);if(ArrayBuffer.isView(r))return function N(r){if(rt(r,Uint8Array)){const t=new Uint8Array(r);return Q(t.buffer,t.byteOffset,t.byteLength)}return R(r)}(r);if(null==r)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(rt(r,ArrayBuffer)||r&&rt(r.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(rt(r,SharedArrayBuffer)||r&&rt(r.buffer,SharedArrayBuffer)))return Q(r,t,e);if("number"==typeof r)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=r.valueOf&&r.valueOf();if(null!=i&&i!==r)return s.from(i,t,e);const a=function V(r){if(s.isBuffer(r)){const t=0|P(r.length),e=D(t);return 0===e.length||r.copy(e,0,0,t),e}return void 0!==r.length?"number"!=typeof r.length||dt(r.length)?D(0):R(r):"Buffer"===r.type&&Array.isArray(r.data)?R(r.data):void 0}(r);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof r[Symbol.toPrimitive])return s.from(r[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function F(r){if("number"!=typeof r)throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Z(r){return F(r),D(r<0?0:0|P(r))}function R(r){const t=r.length<0?0:0|P(r.length),e=D(t);for(let i=0;i<t;i+=1)e[i]=255&r[i];return e}function Q(r,t,e){if(t<0||r.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===e?new Uint8Array(r):void 0===e?new Uint8Array(r,t):new Uint8Array(r,t,e),Object.setPrototypeOf(i,s.prototype),i}function P(r){if(r>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return 0|r}function m(r,t){if(s.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||rt(r,ArrayBuffer))return r.byteLength;if("string"!=typeof r)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const e=r.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===e)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return ht(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return wt(r).length;default:if(a)return i?-1:ht(r).length;t=(""+t).toLowerCase(),a=!0}}function _(r,t,e){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(t>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return ut(this,t,e);case"utf8":case"utf-8":return tt(this,t,e);case"ascii":return nt(this,t,e);case"latin1":case"binary":return lt(this,t,e);case"base64":return X(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return It(this,t,e);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),i=!0}}function C(r,t,e){const i=r[t];r[t]=r[e],r[e]=i}function v(r,t,e,i,a){if(0===r.length)return-1;if("string"==typeof e?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),dt(e=+e)&&(e=a?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(a)return-1;e=r.length-1}else if(e<0){if(!a)return-1;e=0}if("string"==typeof t&&(t=s.from(t,i)),s.isBuffer(t))return 0===t.length?-1:k(r,t,e,i,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):k(r,[t],e,i,a);throw new TypeError("val must be string, number or Buffer")}function k(r,t,e,i,a){let Y,u=1,p=r.length,M=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(r.length<2||t.length<2)return-1;u=2,p/=2,M/=2,e/=2}function W(J,G){return 1===u?J[G]:J.readUInt16BE(G*u)}if(a){let J=-1;for(Y=e;Y<p;Y++)if(W(r,Y)===W(t,-1===J?0:Y-J)){if(-1===J&&(J=Y),Y-J+1===M)return J*u}else-1!==J&&(Y-=Y-J),J=-1}else for(e+M>p&&(e=p-M),Y=e;Y>=0;Y--){let J=!0;for(let G=0;G<M;G++)if(W(r,Y+G)!==W(t,G)){J=!1;break}if(J)return Y}return-1}function O(r,t,e,i){e=Number(e)||0;const a=r.length-e;i?(i=Number(i))>a&&(i=a):i=a;const u=t.length;let p;for(i>u/2&&(i=u/2),p=0;p<i;++p){const M=parseInt(t.substr(2*p,2),16);if(dt(M))return p;r[e+p]=M}return p}function y(r,t,e,i){return pt(ht(t,r.length-e),r,e,i)}function I(r,t,e,i){return pt(function bt(r){const t=[];for(let e=0;e<r.length;++e)t.push(255&r.charCodeAt(e));return t}(t),r,e,i)}function L(r,t,e,i){return pt(wt(t),r,e,i)}function q(r,t,e,i){return pt(function Bt(r,t){let e,i,a;const u=[];for(let p=0;p<r.length&&!((t-=2)<0);++p)e=r.charCodeAt(p),i=e>>8,a=e%256,u.push(a),u.push(i);return u}(t,r.length-e),r,e,i)}function X(r,t,e){return H.fromByteArray(0===t&&e===r.length?r:r.slice(t,e))}function tt(r,t,e){e=Math.min(r.length,e);const i=[];let a=t;for(;a<e;){const u=r[a];let p=null,M=u>239?4:u>223?3:u>191?2:1;if(a+M<=e){let W,Y,J,G;switch(M){case 1:u<128&&(p=u);break;case 2:W=r[a+1],128==(192&W)&&(G=(31&u)<<6|63&W,G>127&&(p=G));break;case 3:W=r[a+1],Y=r[a+2],128==(192&W)&&128==(192&Y)&&(G=(15&u)<<12|(63&W)<<6|63&Y,G>2047&&(G<55296||G>57343)&&(p=G));break;case 4:W=r[a+1],Y=r[a+2],J=r[a+3],128==(192&W)&&128==(192&Y)&&128==(192&J)&&(G=(15&u)<<18|(63&W)<<12|(63&Y)<<6|63&J,G>65535&&G<1114112&&(p=G))}}null===p?(p=65533,M=1):p>65535&&(p-=65536,i.push(p>>>10&1023|55296),p=56320|1023&p),i.push(p),a+=M}return function ot(r){const t=r.length;if(t<=K)return String.fromCharCode.apply(String,r);let e="",i=0;for(;i<t;)e+=String.fromCharCode.apply(String,r.slice(i,i+=K));return e}(i)}!(s.TYPED_ARRAY_SUPPORT=function w(){try{const r=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(r,t),42===r.foo()}catch(r){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(r,t,e){return n(r,t,e)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(r,t,e){return function b(r,t,e){return F(r),r<=0?D(r):void 0!==t?"string"==typeof e?D(r).fill(t,e):D(r).fill(t):D(r)}(r,t,e)},s.allocUnsafe=function(r){return Z(r)},s.allocUnsafeSlow=function(r){return Z(r)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(rt(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),rt(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,a=e.length;for(let u=0,p=Math.min(i,a);u<p;++u)if(t[u]!==e[u]){i=t[u],a=e[u];break}return i<a?-1:a<i?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const a=s.allocUnsafe(e);let u=0;for(i=0;i<t.length;++i){let p=t[i];if(rt(p,Uint8Array))u+p.length>a.length?(s.isBuffer(p)||(p=s.from(p)),p.copy(a,u)):Uint8Array.prototype.set.call(a,p,u);else{if(!s.isBuffer(p))throw new TypeError('"list" argument must be an Array of Buffers');p.copy(a,u)}u+=p.length}return a},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)C(this,e,e+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)C(this,e,e+3),C(this,e+1,e+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)C(this,e,e+7),C(this,e+1,e+6),C(this,e+2,e+5),C(this,e+3,e+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?tt(this,0,t):_.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){let t="";const e=S.h2;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},x&&(s.prototype[x]=s.prototype.inspect),s.prototype.compare=function(t,e,i,a,u){if(rt(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===a&&(a=0),void 0===u&&(u=this.length),e<0||i>t.length||a<0||u>this.length)throw new RangeError("out of range index");if(a>=u&&e>=i)return 0;if(a>=u)return-1;if(e>=i)return 1;if(this===t)return 0;let p=(u>>>=0)-(a>>>=0),M=(i>>>=0)-(e>>>=0);const W=Math.min(p,M),Y=this.slice(a,u),J=t.slice(e,i);for(let G=0;G<W;++G)if(Y[G]!==J[G]){p=Y[G],M=J[G];break}return p<M?-1:M<p?1:0},s.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},s.prototype.indexOf=function(t,e,i){return v(this,t,e,i,!0)},s.prototype.lastIndexOf=function(t,e,i){return v(this,t,e,i,!1)},s.prototype.write=function(t,e,i,a){if(void 0===e)a="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)a=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===a&&(a="utf8")):(a=i,i=void 0)}const u=this.length-e;if((void 0===i||i>u)&&(i=u),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");let p=!1;for(;;)switch(a){case"hex":return O(this,t,e,i);case"utf8":case"utf-8":return y(this,t,e,i);case"ascii":case"latin1":case"binary":return I(this,t,e,i);case"base64":return L(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,t,e,i);default:if(p)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),p=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const K=4096;function nt(r,t,e){let i="";e=Math.min(r.length,e);for(let a=t;a<e;++a)i+=String.fromCharCode(127&r[a]);return i}function lt(r,t,e){let i="";e=Math.min(r.length,e);for(let a=t;a<e;++a)i+=String.fromCharCode(r[a]);return i}function ut(r,t,e){const i=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>i)&&(e=i);let a="";for(let u=t;u<e;++u)a+=vt[r[u]];return a}function It(r,t,e){const i=r.slice(t,e);let a="";for(let u=0;u<i.length-1;u+=2)a+=String.fromCharCode(i[u]+256*i[u+1]);return a}function j(r,t,e){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}function et(r,t,e,i,a,u){if(!s.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<u)throw new RangeError('"value" argument is out of bounds');if(e+i>r.length)throw new RangeError("Index out of range")}function mt(r,t,e,i,a){Tt(t,i,a,r,e,7);let u=Number(t&BigInt(4294967295));r[e++]=u,u>>=8,r[e++]=u,u>>=8,r[e++]=u,u>>=8,r[e++]=u;let p=Number(t>>BigInt(32)&BigInt(4294967295));return r[e++]=p,p>>=8,r[e++]=p,p>>=8,r[e++]=p,p>>=8,r[e++]=p,e}function gt(r,t,e,i,a){Tt(t,i,a,r,e,7);let u=Number(t&BigInt(4294967295));r[e+7]=u,u>>=8,r[e+6]=u,u>>=8,r[e+5]=u,u>>=8,r[e+4]=u;let p=Number(t>>BigInt(32)&BigInt(4294967295));return r[e+3]=p,p>>=8,r[e+2]=p,p>>=8,r[e+1]=p,p>>=8,r[e]=p,e+8}function _t(r,t,e,i,a,u){if(e+i>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function xt(r,t,e,i,a){return t=+t,e>>>=0,a||_t(r,0,e,4),U.write(r,t,e,i,23,4),e+4}function yt(r,t,e,i,a){return t=+t,e>>>=0,a||_t(r,0,e,8),U.write(r,t,e,i,52,8),e+8}s.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const a=this.subarray(t,e);return Object.setPrototypeOf(a,s.prototype),a},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||j(t,e,this.length);let a=this[t],u=1,p=0;for(;++p<e&&(u*=256);)a+=this[t+p]*u;return a},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||j(t,e,this.length);let a=this[t+--e],u=1;for(;e>0&&(u*=256);)a+=this[t+--e]*u;return a},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&ct(t,this.length-8);const a=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,u=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(a)+(BigInt(u)<<BigInt(32))}),s.prototype.readBigUInt64BE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&ct(t,this.length-8);const a=e*2**24+65536*this[++t]+256*this[++t]+this[++t],u=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(a)<<BigInt(32))+BigInt(u)}),s.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||j(t,e,this.length);let a=this[t],u=1,p=0;for(;++p<e&&(u*=256);)a+=this[t+p]*u;return u*=128,a>=u&&(a-=Math.pow(2,8*e)),a},s.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||j(t,e,this.length);let a=e,u=1,p=this[t+--a];for(;a>0&&(u*=256);)p+=this[t+--a]*u;return u*=128,p>=u&&(p-=Math.pow(2,8*e)),p},s.prototype.readInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||j(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt16BE=function(t,e){t>>>=0,e||j(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];return(void 0===e||void 0===i)&&ct(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),s.prototype.readBigInt64BE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&ct(t,this.length-8);const a=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(a)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)}),s.prototype.readFloatLE=function(t,e){return t>>>=0,e||j(t,4,this.length),U.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||j(t,4,this.length),U.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||j(t,8,this.length),U.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||j(t,8,this.length),U.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,i,a){t=+t,e>>>=0,i>>>=0,a||et(this,t,e,i,Math.pow(2,8*i)-1,0);let u=1,p=0;for(this[e]=255&t;++p<i&&(u*=256);)this[e+p]=t/u&255;return e+i},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,i,a){t=+t,e>>>=0,i>>>=0,a||et(this,t,e,i,Math.pow(2,8*i)-1,0);let u=i-1,p=1;for(this[e+u]=255&t;--u>=0&&(p*=256);)this[e+u]=t/p&255;return e+i},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigUInt64LE=it(function(t,e=0){return mt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=it(function(t,e=0){return gt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(t,e,i,a){if(t=+t,e>>>=0,!a){const W=Math.pow(2,8*i-1);et(this,t,e,i,W-1,-W)}let u=0,p=1,M=0;for(this[e]=255&t;++u<i&&(p*=256);)t<0&&0===M&&0!==this[e+u-1]&&(M=1),this[e+u]=(t/p>>0)-M&255;return e+i},s.prototype.writeIntBE=function(t,e,i,a){if(t=+t,e>>>=0,!a){const W=Math.pow(2,8*i-1);et(this,t,e,i,W-1,-W)}let u=i-1,p=1,M=0;for(this[e+u]=255&t;--u>=0&&(p*=256);)t<0&&0===M&&0!==this[e+u+1]&&(M=1),this[e+u]=(t/p>>0)-M&255;return e+i},s.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigInt64LE=it(function(t,e=0){return mt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=it(function(t,e=0){return gt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeFloatLE=function(t,e,i){return xt(this,t,e,!0,i)},s.prototype.writeFloatBE=function(t,e,i){return xt(this,t,e,!1,i)},s.prototype.writeDoubleLE=function(t,e,i){return yt(this,t,e,!0,i)},s.prototype.writeDoubleBE=function(t,e,i){return yt(this,t,e,!1,i)},s.prototype.copy=function(t,e,i,a){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!a&&0!==a&&(a=this.length),e>=t.length&&(e=t.length),e||(e=0),a>0&&a<i&&(a=i),a===i||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-e<a-i&&(a=t.length-e+i);const u=a-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,a):Uint8Array.prototype.set.call(t,this.subarray(i,a),e),u},s.prototype.fill=function(t,e,i,a){if("string"==typeof t){if("string"==typeof e?(a=e,e=0,i=this.length):"string"==typeof i&&(a=i,i=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===t.length){const p=t.charCodeAt(0);("utf8"===a&&p<128||"latin1"===a)&&(t=p)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let u;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(u=e;u<i;++u)this[u]=t;else{const p=s.isBuffer(t)?t:s.from(t,a),M=p.length;if(0===M)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(u=0;u<i-e;++u)this[u+e]=p[u%M]}return this};const st={};function ft(r,t,e){st[r]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,delete this.name}get code(){return r}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}function Et(r){let t="",e=r.length;const i="-"===r[0]?1:0;for(;e>=i+4;e-=3)t=`_${r.slice(e-3,e)}${t}`;return`${r.slice(0,e)}${t}`}function Tt(r,t,e,i,a,u){if(r>e||r<t){const p="bigint"==typeof t?"n":"";let M;throw M=u>3?0===t||t===BigInt(0)?`>= 0${p} and < 2${p} ** ${8*(u+1)}${p}`:`>= -(2${p} ** ${8*(u+1)-1}${p}) and < 2 ** ${8*(u+1)-1}${p}`:`>= ${t}${p} and <= ${e}${p}`,new st.ERR_OUT_OF_RANGE("value",M,r)}!function Dt(r,t,e){at(t,"offset"),(void 0===r[t]||void 0===r[t+e])&&ct(t,r.length-(e+1))}(i,a,u)}function at(r,t){if("number"!=typeof r)throw new st.ERR_INVALID_ARG_TYPE(t,"number",r)}function ct(r,t,e){throw Math.floor(r)!==r?(at(r,e),new st.ERR_OUT_OF_RANGE(e||"offset","an integer",r)):t<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,r)}ft("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ft("ERR_INVALID_ARG_TYPE",function(r,t){return`The "${r}" argument must be of type number. Received type ${typeof t}`},TypeError),ft("ERR_OUT_OF_RANGE",function(r,t,e){let i=`The value of "${r}" is out of range.`,a=e;return Number.isInteger(e)&&Math.abs(e)>2**32?a=Et(String(e)):"bigint"==typeof e&&(a=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(a=Et(a)),a+="n"),i+=` It must be ${t}. Received ${a}`,i},RangeError);const Rt=/[^+/0-9A-Za-z-_]/g;function ht(r,t){let e;t=t||1/0;const i=r.length;let a=null;const u=[];for(let p=0;p<i;++p){if(e=r.charCodeAt(p),e>55295&&e<57344){if(!a){if(e>56319){(t-=3)>-1&&u.push(239,191,189);continue}if(p+1===i){(t-=3)>-1&&u.push(239,191,189);continue}a=e;continue}if(e<56320){(t-=3)>-1&&u.push(239,191,189),a=e;continue}e=65536+(a-55296<<10|e-56320)}else a&&(t-=3)>-1&&u.push(239,191,189);if(a=null,e<128){if((t-=1)<0)break;u.push(e)}else if(e<2048){if((t-=2)<0)break;u.push(e>>6|192,63&e|128)}else if(e<65536){if((t-=3)<0)break;u.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;u.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return u}function wt(r){return H.toByteArray(function At(r){if((r=(r=r.split("=")[0]).trim().replace(Rt,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(r))}function pt(r,t,e,i){let a;for(a=0;a<i&&!(a+e>=t.length||a>=r.length);++a)t[a+e]=r[a];return a}function rt(r,t){return r instanceof t||null!=r&&null!=r.constructor&&null!=r.constructor.name&&r.constructor.name===t.name}function dt(r){return r!=r}const vt=function(){const r="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){const i=16*e;for(let a=0;a<16;++a)t[i+a]=r[e]+r[a]}return t}();function it(r){return"undefined"==typeof BigInt?Ut:r}function Ut(){throw new Error("BigInt not supported")}},9069:z=>{"use strict";var f,S="object"==typeof Reflect?Reflect:null,d=S&&"function"==typeof S.apply?S.apply:function(m,_,C){return Function.prototype.apply.call(m,_,C)};f=S&&"function"==typeof S.ownKeys?S.ownKeys:Object.getOwnPropertySymbols?function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:function(m){return Object.getOwnPropertyNames(m)};var U=Number.isNaN||function(m){return m!=m};function x(){x.init.call(this)}z.exports=x,z.exports.once=function Q(h,m){return new Promise(function(_,C){function v(O){h.removeListener(m,k),C(O)}function k(){"function"==typeof h.removeListener&&h.removeListener("error",v),_([].slice.call(arguments))}P(h,m,k,{once:!0}),"error"!==m&&function V(h,m,_){"function"==typeof h.on&&P(h,"error",m,_)}(h,v,{once:!0})})},x.EventEmitter=x,x.prototype._events=void 0,x.prototype._eventsCount=0,x.prototype._maxListeners=void 0;var A=10;function w(h){if("function"!=typeof h)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)}function D(h){return void 0===h._maxListeners?x.defaultMaxListeners:h._maxListeners}function s(h,m,_,C){var v,k,O;if(w(_),void 0===(k=h._events)?(k=h._events=Object.create(null),h._eventsCount=0):(void 0!==k.newListener&&(h.emit("newListener",m,_.listener?_.listener:_),k=h._events),O=k[m]),void 0===O)O=k[m]=_,++h._eventsCount;else if("function"==typeof O?O=k[m]=C?[_,O]:[O,_]:C?O.unshift(_):O.push(_),(v=D(h))>0&&O.length>v&&!O.warned){O.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=h,y.type=m,y.count=O.length,function H(h){console&&console.warn&&console.warn(h)}(y)}return h}function n(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F(h,m,_){var C={fired:!1,wrapFn:void 0,target:h,type:m,listener:_},v=n.bind(C);return v.listener=_,C.wrapFn=v,v}function b(h,m,_){var C=h._events;if(void 0===C)return[];var v=C[m];return void 0===v?[]:"function"==typeof v?_?[v.listener||v]:[v]:_?function N(h){for(var m=new Array(h.length),_=0;_<m.length;++_)m[_]=h[_].listener||h[_];return m}(v):E(v,v.length)}function Z(h){var m=this._events;if(void 0!==m){var _=m[h];if("function"==typeof _)return 1;if(void 0!==_)return _.length}return 0}function E(h,m){for(var _=new Array(m),C=0;C<m;++C)_[C]=h[C];return _}function P(h,m,_,C){if("function"==typeof h.on)C.once?h.once(m,_):h.on(m,_);else{if("function"!=typeof h.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof h);h.addEventListener(m,function v(k){C.once&&h.removeEventListener(m,v),_(k)})}}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return A},set:function(h){if("number"!=typeof h||h<0||U(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");A=h}}),x.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},x.prototype.setMaxListeners=function(m){if("number"!=typeof m||m<0||U(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this},x.prototype.getMaxListeners=function(){return D(this)},x.prototype.emit=function(m){for(var _=[],C=1;C<arguments.length;C++)_.push(arguments[C]);var v="error"===m,k=this._events;if(void 0!==k)v=v&&void 0===k.error;else if(!v)return!1;if(v){var O;if(_.length>0&&(O=_[0]),O instanceof Error)throw O;var y=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw y.context=O,y}var I=k[m];if(void 0===I)return!1;if("function"==typeof I)d(I,this,_);else{var L=I.length,q=E(I,L);for(C=0;C<L;++C)d(q[C],this,_)}return!0},x.prototype.on=x.prototype.addListener=function(m,_){return s(this,m,_,!1)},x.prototype.prependListener=function(m,_){return s(this,m,_,!0)},x.prototype.once=function(m,_){return w(_),this.on(m,F(this,m,_)),this},x.prototype.prependOnceListener=function(m,_){return w(_),this.prependListener(m,F(this,m,_)),this},x.prototype.off=x.prototype.removeListener=function(m,_){var C,v,k,O,y;if(w(_),void 0===(v=this._events))return this;if(void 0===(C=v[m]))return this;if(C===_||C.listener===_)0==--this._eventsCount?this._events=Object.create(null):(delete v[m],v.removeListener&&this.emit("removeListener",m,C.listener||_));else if("function"!=typeof C){for(k=-1,O=C.length-1;O>=0;O--)if(C[O]===_||C[O].listener===_){y=C[O].listener,k=O;break}if(k<0)return this;0===k?C.shift():function R(h,m){for(;m+1<h.length;m++)h[m]=h[m+1];h.pop()}(C,k),1===C.length&&(v[m]=C[0]),void 0!==v.removeListener&&this.emit("removeListener",m,y||_)}return this},x.prototype.removeAllListeners=function(m){var _,C,v;if(void 0===(C=this._events))return this;if(void 0===C.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==C[m]&&(0==--this._eventsCount?this._events=Object.create(null):delete C[m]),this;if(0===arguments.length){var O,k=Object.keys(C);for(v=0;v<k.length;++v)"removeListener"!==(O=k[v])&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(_=C[m]))this.removeListener(m,_);else if(void 0!==_)for(v=_.length-1;v>=0;v--)this.removeListener(m,_[v]);return this},x.prototype.listeners=function(m){return b(this,m,!0)},x.prototype.rawListeners=function(m){return b(this,m,!1)},x.listenerCount=function(h,m){return"function"==typeof h.listenerCount?h.listenerCount(m):Z.call(h,m)},x.prototype.listenerCount=Z,x.prototype.eventNames=function(){return this._eventsCount>0?f(this._events):[]}},9076:(z,S,d)=>{"use strict";var f=d(8926).default;const H=d(8202),U=d(9069).EventEmitter,x=d(6643);z.exports=class A extends U{constructor(D,s){if(s||(s={}),super(),this.chunkLength=Number(D),!this.chunkLength)throw new Error("First argument must be a chunk length");this.closed=!1,this.destroyed=!1,this.length=Number(s.length)||1/0,this.name=s.name||"idb-chunk-store",this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1),this.dbPromise=H.openDB(this.name,void 0,{upgrade:n=>{n.createObjectStore("chunks")},blocking:()=>{this.close()},terminated:()=>{this.closed=!0,this.emit("error",new Error("Database unexpectedly closed"))}})}put(D,s,n=(()=>{})){var F=this;if(this.closed)return x(()=>n(new Error("Storage is closed")));const b=D===this.lastChunkIndex;return b&&s.length!==this.lastChunkLength?x(()=>n(new Error("Last chunk length must be "+this.lastChunkLength))):b||s.length===this.chunkLength?((0!==(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)).byteOffset||s.byteLength!==s.buffer.byteLength)&&(s=s.slice()),void f(function*(){try{yield(yield F.dbPromise).put("chunks",s,D)}catch(Z){return void n(Z)}n(null)})()):x(()=>n(new Error("Chunk length must be "+this.chunkLength)))}get(D,s,n=(()=>{})){var F=this;return"function"==typeof s?this.get(D,{},s):(s||(s={}),this.closed?x(()=>n(new Error("Storage is closed"))):void f(function*(){let b;try{b=yield(yield F.dbPromise).get("chunks",D)}catch(N){return void n(N)}if(null==b){const N=new Error("Chunk not found");return N.notFound=!0,void n(N)}let Z=Buffer.from(b.buffer,b.byteOffset,b.byteLength);const E=s.offset||0,R=s.length||Z.length-E;(0!==E||R!==Z.length)&&(Z=Z.slice(E,R+E)),n(null,Z)})())}close(D=(()=>{})){var s=this;if(this.closed)return x(()=>D(new Error("Storage is closed")));this.closed=!0,f(function*(){try{(yield s.dbPromise).close()}catch(n){return void D(n)}D(null)})()}destroy(D=(()=>{})){var s=this;return this.closed?x(()=>D(new Error("Storage is closed"))):this.destroyed?x(()=>D(new Error("Storage is destroyed"))):(this.destroyed=!0,void this.close(function(){var n=f(function*(F){if(F)D(F);else{try{yield H.deleteDB(s.name)}catch(b){return void D(b)}D(null)}});return function(F){return n.apply(this,arguments)}}()))}}},8202:(z,S,d)=>{"use strict";d.r(S),d.d(S,{deleteDB:()=>_,openDB:()=>m,unwrap:()=>h,wrap:()=>P});var f=d(5861);let U,x;const D=new WeakMap,s=new WeakMap,n=new WeakMap,F=new WeakMap,b=new WeakMap;let R={get(y,I,L){if(y instanceof IDBTransaction){if("done"===I)return s.get(y);if("objectStoreNames"===I)return y.objectStoreNames||n.get(y);if("store"===I)return L.objectStoreNames[1]?void 0:L.objectStore(L.objectStoreNames[0])}return P(y[I])},set:(y,I,L)=>(y[I]=L,!0),has:(y,I)=>y instanceof IDBTransaction&&("done"===I||"store"===I)||I in y};function V(y){return"function"==typeof y?function Q(y){return y!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function w(){return x||(x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(y)?function(...I){return y.apply(h(this),I),P(D.get(this))}:function(...I){return P(y.apply(h(this),I))}:function(I,...L){const q=y.call(h(this),I,...L);return n.set(q,I.sort?I.sort():[I]),P(q)}}(y):(y instanceof IDBTransaction&&function E(y){if(s.has(y))return;const I=new Promise((L,q)=>{const X=()=>{y.removeEventListener("complete",tt),y.removeEventListener("error",K),y.removeEventListener("abort",K)},tt=()=>{L(),X()},K=()=>{q(y.error||new DOMException("AbortError","AbortError")),X()};y.addEventListener("complete",tt),y.addEventListener("error",K),y.addEventListener("abort",K)});s.set(y,I)}(y),((y,I)=>I.some(L=>y instanceof L))(y,function A(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(y,R):y)}function P(y){if(y instanceof IDBRequest)return function Z(y){const I=new Promise((L,q)=>{const X=()=>{y.removeEventListener("success",tt),y.removeEventListener("error",K)},tt=()=>{L(P(y.result)),X()},K=()=>{q(y.error),X()};y.addEventListener("success",tt),y.addEventListener("error",K)});return I.then(L=>{L instanceof IDBCursor&&D.set(L,y)}).catch(()=>{}),b.set(I,y),I}(y);if(F.has(y))return F.get(y);const I=V(y);return I!==y&&(F.set(y,I),b.set(I,y)),I}const h=y=>b.get(y);function m(y,I,{blocked:L,upgrade:q,blocking:X,terminated:tt}={}){const K=indexedDB.open(y,I),ot=P(K);return q&&K.addEventListener("upgradeneeded",nt=>{q(P(K.result),nt.oldVersion,nt.newVersion,P(K.transaction))}),L&&K.addEventListener("blocked",()=>L()),ot.then(nt=>{tt&&nt.addEventListener("close",()=>tt()),X&&nt.addEventListener("versionchange",()=>X())}).catch(()=>{}),ot}function _(y,{blocked:I}={}){const L=indexedDB.deleteDatabase(y);return I&&L.addEventListener("blocked",()=>I()),P(L).then(()=>{})}const C=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],k=new Map;function O(y,I){if(!(y instanceof IDBDatabase)||I in y||"string"!=typeof I)return;if(k.get(I))return k.get(I);const L=I.replace(/FromIndex$/,""),q=I!==L,X=v.includes(L);if(!(L in(q?IDBIndex:IDBObjectStore).prototype)||!X&&!C.includes(L))return;const tt=function(){var K=(0,f.Z)(function*(ot,...nt){const lt=this.transaction(ot,X?"readwrite":"readonly");let ut=lt.store;return q&&(ut=ut.index(nt.shift())),(yield Promise.all([ut[L](...nt),X&&lt.done]))[0]});return function(nt){return K.apply(this,arguments)}}();return k.set(I,tt),tt}!function N(y){R=y(R)}(y=>({...y,get:(I,L,q)=>O(I,L)||y.get(I,L,q),has:(I,L)=>!!O(I,L)||y.has(I,L)}))},8461:(z,S)=>{S.read=function(d,f,H,U,x){var A,w,D=8*x-U-1,s=(1<<D)-1,n=s>>1,F=-7,b=H?x-1:0,Z=H?-1:1,E=d[f+b];for(b+=Z,A=E&(1<<-F)-1,E>>=-F,F+=D;F>0;A=256*A+d[f+b],b+=Z,F-=8);for(w=A&(1<<-F)-1,A>>=-F,F+=U;F>0;w=256*w+d[f+b],b+=Z,F-=8);if(0===A)A=1-n;else{if(A===s)return w?NaN:1/0*(E?-1:1);w+=Math.pow(2,U),A-=n}return(E?-1:1)*w*Math.pow(2,A-U)},S.write=function(d,f,H,U,x,A){var w,D,s,n=8*A-x-1,F=(1<<n)-1,b=F>>1,Z=23===x?Math.pow(2,-24)-Math.pow(2,-77):0,E=U?0:A-1,R=U?1:-1,N=f<0||0===f&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(D=isNaN(f)?1:0,w=F):(w=Math.floor(Math.log(f)/Math.LN2),f*(s=Math.pow(2,-w))<1&&(w--,s*=2),(f+=w+b>=1?Z/s:Z*Math.pow(2,1-b))*s>=2&&(w++,s/=2),w+b>=F?(D=0,w=F):w+b>=1?(D=(f*s-1)*Math.pow(2,x),w+=b):(D=f*Math.pow(2,b-1)*Math.pow(2,x),w=0));x>=8;d[H+E]=255&D,E+=R,D/=256,x-=8);for(w=w<<x|D,n+=x;n>0;d[H+E]=255&w,E+=R,w/=256,n-=8);d[H+E-R]|=128*N}},6643:z=>{let S;z.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:global):d=>(S||(S=Promise.resolve())).then(d).catch(f=>setTimeout(()=>{throw f},0))},8926:z=>{function S(f,H,U,x,A,w,D){try{var s=f[w](D),n=s.value}catch(F){return void U(F)}s.done?H(n):Promise.resolve(n).then(x,A)}z.exports=function d(f){return function(){var H=this,U=arguments;return new Promise(function(x,A){var w=f.apply(H,U);function D(n){S(w,x,A,D,s,"next",n)}function s(n){S(w,x,A,D,s,"throw",n)}D(void 0)})}},z.exports.__esModule=!0,z.exports.default=z.exports}}]);