"use strict";(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[960],{5960:(B,v,r)=>{r.r(v),r.d(v,{ResetPasswordModule:()=>Q});var p=r(9808),h=r(8406),o=r(3075),m=r(3290),b=r(210),T=r(4004),U=r(5934),d=r(6271),e=r(5e3),C=r(5113),Z=r(8058),E=r(3e3),A=r(7845),y=r(8696),w=r(4137),N=r(8379),f=r(5615),R=r(7423),O=r(5245);function I(s,i){1&s&&e._uU(0,"Cari & Cek Akun")}function P(s,i){1&s&&(e.TgZ(0,"strong"),e._uU(1," Username / Email Tidak Boleh Kosong! "),e._UZ(2,"br"),e.qZA())}function S(s,i){1&s&&(e.TgZ(0,"strong"),e._uU(1," Username / Email Hanya Boleh Huruf Standar Papan Ketik "),e._UZ(2,"br"),e.qZA())}function x(s,i){1&s&&e._uU(0,"Ubah Kata Sandi")}function k(s,i){1&s&&(e.TgZ(0,"strong"),e._uU(1," Token Tidak Boleh Kosong "),e._UZ(2,"br"),e.qZA())}function Y(s,i){1&s&&(e.TgZ(0,"strong"),e._uU(1," Token Hanya Boleh Huruf Standar Papan Ketik "),e._UZ(2,"br"),e.qZA())}function K(s,i){1&s&&(e.TgZ(0,"strong"),e._uU(1," Password Tidak Boleh Kosong "),e._UZ(2,"br"),e.qZA())}function L(s,i){1&s&&(e.TgZ(0,"strong"),e._uU(1," Password Minimal 8 Huruf "),e._UZ(2,"br"),e.qZA())}function J(s,i){1&s&&(e.TgZ(0,"strong"),e._uU(1," Password Hanya Boleh Huruf Standar Papan Ketik "),e._UZ(2,"br"),e.qZA())}const _=[{path:"",pathMatch:"full",component:(()=>{class s{constructor(n,t,a,u,l,g,c,H,F,G){this.breakpointObserver=n,this.fb=t,this.router=a,this.us=u,this.bs=l,this.ds=g,this.gs=c,this.route=H,this.as=F,this.cs=G,this.submitted=!1,this.returnUrl="/",this.resetInfo="",this.subsFindLostAccount=null,this.subsResetLostAccount=null,this.subsVerify=null,this.subsDialog=null,this.stepperOrientation=this.breakpointObserver.observe("(min-width: 767px)").pipe((0,T.U)(({matches:M})=>M?"horizontal":"vertical")),this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get ENV(){return U.N}ngOnInit(){var n;this.returnUrl=this.route.snapshot.queryParams.returnUrl||this.gs.previousUrl||"/home",this.returnUrl.includes("/login")&&(this.returnUrl="/"),this.gs.isBrowser&&(this.initForm(),(null===(n=this.as.currentUserSubject)||void 0===n?void 0:n.value)&&this.router.navigateByUrl(this.returnUrl))}get G_CAPTCHA_SITE_KEY(){return d.t.gCaptchaSiteKey}initForm(){this.fg1=this.fb.group({userNameOrEmail:[null,[o.kI.required,o.kI.pattern(d.t.regexEnglishKeyboardKeys)]],"g-recaptcha-response":[null,[o.kI.required,o.kI.pattern(d.t.regexEnglishKeyboardKeys)]]}),this.fg2=this.fb.group({token:[null,[o.kI.required,o.kI.pattern(d.t.regexEnglishKeyboardKeys)]],password:[null,[o.kI.required,o.kI.minLength(8),o.kI.pattern(d.t.regexEnglishKeyboardKeys)]]})}findLostAccount(n,t,a){this.gs.log(`[GOOGLE_CAPTCHA] ${n}`),n&&(this.fg1.controls["g-recaptcha-response"].patchValue(n),this.subsFindLostAccount=this.us.findLostAccount({userNameOrEmail:this.fg1.value.userNameOrEmail,"g-recaptcha-response":this.fg1.value["g-recaptcha-response"]}).subscribe({next:u=>{var l;this.gs.log("[USER_FIND_LOST_ACCOUNT_SUCCESS]",u),this.subsDialog=this.ds.openInfoDialog({data:{title:(null===(l=u.result)||void 0===l?void 0:l.title)||"Whoops, Terjadi Kesalahan!",htmlMessage:u.result.message,confirmText:"Tutup"}}).afterClosed().subscribe({next:g=>{this.gs.log("[INFO_DIALOG_CLOSED]",g),this.subsDialog.unsubscribe()}}),a.next(),t.reset()},error:u=>{var l;this.gs.log("[USER_FIND_LOST_ACCOUNT_ERROR]",u),this.resetInfo=(null===(l=u.result)||void 0===l?void 0:l.message)||u.info,t.reset()}}))}resetAccount(n){this.bs.busy(),this.submitted=!0,this.subsResetLostAccount=this.us.resetLostAccount({token:this.fg2.value.token,password:this.cs.hashPassword(this.fg2.value.password)}).subscribe({next:t=>{this.gs.log("[USER_RESET_LOST_ACCOUNT_SUCCESS]",t),this.bs.idle(),this.submitted=!1,this.as.removeUser(),this.bs.busy(),this.subsVerify=this.as.verify(this.as.token).subscribe({next:a=>{this.gs.log("[VERIFY_LOGIN_SUCCESS]",a),this.bs.idle(),this.router.navigateByUrl(this.returnUrl)},error:a=>{this.gs.log("[VERIFY_LOGIN_ERROR]",a,"error"),this.bs.idle(),this.as.removeUser(),this.router.navigateByUrl(this.returnUrl)}})},error:t=>{var a;this.gs.log("[USER_RESET_LOST_ACCOUNT_ERROR]",t,"error"),this.bs.idle(),this.submitted=!1,this.resetInfo=(null===(a=t.result)||void 0===a?void 0:a.message)||t.info,n.reset()}})}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(C.Yg),e.Y36(o.qu),e.Y36(h.F0),e.Y36(Z.K),e.Y36(E.z),e.Y36(A.x),e.Y36(y.U),e.Y36(h.gz),e.Y36(w.e),e.Y36(N.$))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-reset-password"]],decls:60,vars:29,consts:[[1,"container-fluid","align-items-center","w-100","h-100"],[1,"row","align-items-center","h-100","m-0"],[1,"col-12","col-md-10","m-auto","py-3"],[1,"row","rgb-border","rounded","bg-bifeldy"],[1,"col-12","me-auto","p-0"],[1,"card","bg-transparent","border-0"],[1,"card-body","p-0"],[1,"text-center","p-3"],[1,"mb-4",2,"max-width","192px",3,"src"],[1,"h3","mb-3","font-weight-normal"],[1,"text-warning"],[2,"background-color","transparent",3,"orientation"],["stepper",""],[3,"stepControl","editable"],["matStepLabel",""],[1,"m-2",3,"formGroup"],[1,"form-group","row","py-2"],["for","userNameOrEmail",1,"col-md-4","col-form-label","text-md-end"],[1,"col-md-8"],["type","text","id","userNameOrEmail","placeholder","Username / E-Mail","required","","autofocus","","formControlName","userNameOrEmail","autocomplete","email, username"],["role","alert",1,"invalid-feedback"],[4,"ngIf"],[1,"form-group","row","mb-0","py-2"],[1,"col","offset-md-4"],["formControlName","g-recaptcha-response",3,"siteKey","resolved"],["captchaRef",""],["for","token",1,"col-md-4","col-form-label","text-md-end"],["rows","3","type","text","id","token","placeholder","Token","required","","autofocus","","formControlName","token","autocomplete","token"],["for","password",1,"col-md-4","col-form-label","text-md-end"],["type","text","id","password","placeholder","Kata Sandi","required","","autofocus","","formControlName","password","autocomplete","password"],[1,"col-md-8","offset-md-4"],[1,"row"],[1,"col-12"],["mat-flat-button","","color","primary","type","button",1,"w-100",3,"disabled","click"],[1,"ms-1"]],template:function(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"img",8),e.TgZ(9,"h1",9),e._uU(10,"Hikz, Akun Kamu Kenapa (?)"),e.qZA(),e.TgZ(11,"p",10),e._uU(12),e.qZA()(),e.TgZ(13,"mat-vertical-stepper",11,12),e.ALo(15,"async"),e.TgZ(16,"mat-step",13),e.YNc(17,I,1,0,"ng-template",14),e.TgZ(18,"form",15)(19,"div",16)(20,"label",17),e._uU(21,"Surel / Nama Pengguna"),e.qZA(),e.TgZ(22,"div",18),e._UZ(23,"input",19),e.TgZ(24,"span",20),e.YNc(25,P,3,0,"strong",21),e.YNc(26,S,3,0,"strong",21),e.qZA()()(),e.TgZ(27,"div",22)(28,"div",23)(29,"re-captcha",24,25),e.NdJ("resolved",function(l){e.CHM(a);const g=e.MAs(30),c=e.MAs(14);return t.findLostAccount(l,g,c)}),e.qZA()()()()(),e.TgZ(31,"mat-step",13),e.YNc(32,x,1,0,"ng-template",14),e.TgZ(33,"form",15)(34,"div",16)(35,"label",26),e._uU(36,"Token"),e.qZA(),e.TgZ(37,"div",18)(38,"textarea",27),e._uU(39,"                        "),e.qZA(),e.TgZ(40,"span",20),e.YNc(41,k,3,0,"strong",21),e.YNc(42,Y,3,0,"strong",21),e.qZA()()(),e.TgZ(43,"div",16)(44,"label",28),e._uU(45,"Password Baru"),e.qZA(),e.TgZ(46,"div",18),e._UZ(47,"input",29),e.TgZ(48,"span",20),e.YNc(49,K,3,0,"strong",21),e.YNc(50,L,3,0,"strong",21),e.YNc(51,J,3,0,"strong",21),e.qZA()()(),e.TgZ(52,"div",22)(53,"div",30)(54,"div",31)(55,"div",32)(56,"button",33),e.NdJ("click",function(){e.CHM(a);const l=e.MAs(14);return t.resetAccount(l)}),e._uU(57," Atur Ulang Akun "),e.TgZ(58,"mat-icon",34),e._uU(59,"check_circle_outline"),e.qZA()()()()()()()()()()()()()()()()}2&n&&(e.xp6(8),e.MGl("src","",t.ENV.baseUrl,"/assets/img/logo/reset-password.png",e.LSH),e.xp6(4),e.Oqu(t.resetInfo),e.xp6(1),e.Q6J("orientation",e.lcZ(15,27,t.stepperOrientation)),e.xp6(3),e.Q6J("stepControl",t.fg1)("editable",!1),e.xp6(2),e.Q6J("formGroup",t.fg1),e.xp6(5),e.Gre("text-bifeldy form-control ",!t.fg1.get("userNameOrEmail").valid&&t.fg1.get("userNameOrEmail").touched?"is-invalid":"",""),e.xp6(2),e.Q6J("ngIf",t.fg1.get("userNameOrEmail").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.fg1.get("userNameOrEmail").hasError("pattern")),e.xp6(3),e.Q6J("siteKey",t.G_CAPTCHA_SITE_KEY),e.xp6(2),e.Q6J("stepControl",t.fg2)("editable",!1),e.xp6(2),e.Q6J("formGroup",t.fg2),e.xp6(5),e.Gre("text-bifeldy form-control ",!t.fg2.get("token").valid&&t.fg2.get("token").touched?"is-invalid":"",""),e.xp6(3),e.Q6J("ngIf",t.fg2.get("token").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.fg2.get("token").hasError("pattern")),e.xp6(5),e.Gre("text-bifeldy form-control ",!t.fg2.get("password").valid&&t.fg2.get("password").touched?"is-invalid":"",""),e.xp6(2),e.Q6J("ngIf",t.fg2.get("password").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.fg2.get("password").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.fg2.get("password").hasError("pattern")),e.xp6(5),e.Q6J("disabled",t.submitted))},directives:[f.Vq,f.C0,f.VY,o._Y,o.JL,o.sg,o.Fj,o.Q7,o.JJ,o.u,p.O5,m.wT,m.Vd,R.lW,O.Hw],pipes:[p.Ov],styles:[""]}),s})()}];let Q=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[p.ez,h.Bz.forChild(_),o.u5,o.UX,b.m,m.a,m.lQ]]}),s})()}}]);