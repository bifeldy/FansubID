"use strict";(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[900],{3147:(O,F,l)=>{l.r(F),l.d(F,{FansubModule:()=>xe});var p=l(9808),u=l(8406),o=l(3075),Z=l(9345),f=l(9215),D=l(1385),h=l(4249),y=l(2731),q=l(210),P=l(7355),_=l(6436),v=l(4946),b=l(8613),T=l(6020),S=l(4167),t=l(5e3),R=l(8696),J=l(3e3),z=l(6382),w=l(6781),V=l(8020),B=l(8616),j=l(8757);function ot(i,r){if(1&i&&(t.TgZ(0,"div",5),t._UZ(1,"canvas",6),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("data",e.barChartAnimeData)("labels",e.barChartAnimeLabels)("chartType",e.barChartType)("options",e.barChartAnimeOptions)("plugins",e.chartPlugins)("legend",!1)}}function rt(i,r){if(1&i&&(t.TgZ(0,"div",5),t._UZ(1,"canvas",6),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("data",e.barChartDoramaData)("labels",e.barChartDoramaLabels)("chartType",e.barChartType)("options",e.barChartDoramaOptions)("plugins",e.chartPlugins)("legend",!1)}}function lt(i,r){if(1&i&&(t.TgZ(0,"div",5),t._UZ(1,"canvas",6),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("data",e.pieChartStatusData)("labels",e.pieChartStatusLabels)("chartType",e.pieChartType)("options",e.pieChartStatusOptions)("plugins",e.chartPlugins)("legend",!0)}}function ut(i,r){if(1&i&&(t.TgZ(0,"div",5),t._UZ(1,"canvas",6),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("data",e.doughnutChartGarapanData)("labels",e.doughnutChartGarapanLabels)("chartType",e.doughnutChartType)("options",e.doughnutChartGarapanOptions)("plugins",e.chartPlugins)("legend",!0)}}let gt=(()=>{class i{constructor(e,s,a,n,g,c){this.router=e,this.gs=s,this.bs=a,this.fs=n,this.fansub=g,this.wb=c,this.allFansubId=[],this.fansubData=[],this.tabData=[{name:"Katalog Fansub",icon:"closed_caption",type:"table",data:{column:["Status","Logo","Nama Fansub","Anime","Dorama","Tautan Komunitas"],row:[]}}],this.pieChartStatusOptions={title:{display:!0,text:"Kondisi Fansub Terkini"},responsive:!0,legend:{position:"right"}},this.doughnutChartGarapanOptions={title:{display:!0,text:"Total Garapan Fansub"},responsive:!0,legend:{position:"right"}},this.barChartAnimeOptions={title:{display:!0,text:"Garapan Anime Terbanyak"},responsive:!0,legend:{position:"right"},scales:{xAxes:[{ticks:{beginAtZero:!0},gridLines:{color:"rgba(92,92,92,1)"}}],yAxes:[{gridLines:{color:"rgba(92,92,92,1)"}}]}},this.barChartDoramaOptions={title:{display:!0,text:"Garapan Dorama Terbanyak"},responsive:!0,legend:{position:"right"},scales:{xAxes:[{ticks:{beginAtZero:!0},gridLines:{color:"rgba(92,92,92,1)"}}],yAxes:[{gridLines:{color:"rgba(92,92,92,1)"}}]}},this.chartPlugins=[],this.pieChartStatusData=[],this.pieChartStatusLabels=[],this.doughnutChartGarapanData=[],this.doughnutChartGarapanLabels=[],this.barChartAnimeData=[],this.barChartAnimeLabels=[],this.barChartDoramaData=[],this.barChartDoramaLabels=[],this.pieChartType="pie",this.doughnutChartType="doughnut",this.barChartType="horizontalBar",this.fansubActive=0,this.fansubInActive=0,this.subsFansub=null,this.subsAnime=null,this.subsDorama=null,this.gs.bannerImg="/assets/img/fansub-banner.png",this.gs.sizeContain=!1,this.gs.bgRepeat=!1,this.gs.isBrowser&&((0,f.Dy)(),(0,f.bF)())}ngOnDestroy(){var e,s;null===(e=this.subsFansub)||void 0===e||e.unsubscribe(),null===(s=this.subsAnime)||void 0===s||s.unsubscribe()}ngOnInit(){this.gs.isBrowser&&this.getFansubData()}getFansubData(){this.bs.busy(),this.subsFansub=this.fansub.getAllFansub().subscribe({next:e=>{this.gs.log("[FANSUB_LIST_SUCCESS]",e);for(const s of e.results){this.allFansubId.push(s.id);const a=[];if(Array.isArray(s.urls))for(const n of s.urls)a.push({type:"button",icon:"discord"===n.name?void 0:n.name,image:"discord"===n.name?"/assets/img/discord-blue.png":void 0,url:n.url,name:n.name});this.fansubData.push({id:s.id,slug:s.slug,Logo:s.image_url,Status:s.active?"AKTIF":"TIDAK AKTIF","Nama Fansub":s.name,"Tautan Komunitas":a}),s.active?this.fansubActive++:s.active||this.fansubInActive++}this.pieChartStatusLabels=["Fansub Aktif","Fansub Tidak Aktif"],this.pieChartStatusData=[this.fansubActive,this.fansubInActive],this.tabData[0].data.row=this.fansubData,this.getAnimeFansub(),this.getDoramaFansub(),this.fs.initializeFab("add",null,"Tambahkan Fansub Baru","/fansub/create",!1),this.bs.idle()},error:e=>{this.gs.log("[FANSUB_LIST_ERROR]",e,"error"),this.bs.idle()}})}getAnimeFansub(){this.bs.busy(),this.subsAnime=this.fansub.getAnimeFansub(this.allFansubId).subscribe({next:e=>{this.gs.log("[FANSUB_ANIME_SUCCESS]",e);for(const a of this.fansubData)a.Anime=e.results[a.id];this.doughnutChartGarapanLabels.push("Berkas Anime"),this.doughnutChartGarapanData.push(e.count);const s=[...this.fansubData].sort((a,n)=>n.Anime-a.Anime).slice(0,10);for(const a of s)this.barChartAnimeLabels.push(a["Nama Fansub"]),this.barChartAnimeData.push(a.Anime);this.bs.idle()},error:e=>{this.gs.log("[FANSUB_ANIME_ERROR]",e,"error"),this.bs.idle()}})}getDoramaFansub(){this.bs.busy(),this.subsDorama=this.fansub.getDoramaFansub(this.allFansubId).subscribe({next:e=>{this.gs.log("[FANSUB_DORAMA_SUCCESS]",e);for(const a of this.fansubData)a.Dorama=e.results[a.id];this.doughnutChartGarapanLabels.push("Berkas Dorama"),this.doughnutChartGarapanData.push(e.count);const s=[...this.fansubData].sort((a,n)=>n.Dorama-a.Dorama).slice(0,10);for(const a of s)this.barChartDoramaLabels.push(a["Nama Fansub"]),this.barChartDoramaData.push(a.Dorama);this.bs.idle()},error:e=>{this.gs.log("[FANSUB_DORAMA_ERROR]",e,"error"),this.bs.idle()}})}openFansub(e){this.gs.log("[FANSUB_LIST_OPEN_FANSUB]",e),this.router.navigateByUrl(`/fansub/${e.slug}`)}openUrl(e){this.gs.log("[FANSUB_LIST_OPEN_URL]",e),this.wb.winboxOpenUri(e.url)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.F0),t.Y36(R.U),t.Y36(J.z),t.Y36(z.r),t.Y36(w.T),t.Y36(V.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-fansub-list"]],decls:9,vars:5,consts:[[1,"container"],[1,"row","p-3"],["class","col-12 col-md-6 py-1 bg-bifeldy",4,"ngIf"],[1,"row","pt-3"],[3,"tabData","tableRowClicked","buttonClicked"],[1,"col-12","col-md-6","py-1","bg-bifeldy"],["baseChart","",3,"data","labels","chartType","options","plugins","legend"]],template:function(e,s){1&e&&(t._UZ(0,"app-notifications"),t.TgZ(1,"div",0)(2,"div",1),t.YNc(3,ot,2,6,"div",2),t.YNc(4,rt,2,6,"div",2),t.YNc(5,lt,2,6,"div",2),t.YNc(6,ut,2,6,"div",2),t.qZA(),t.TgZ(7,"div",3)(8,"app-material-tab",4),t.NdJ("tableRowClicked",function(n){return s.openFansub(n)})("buttonClicked",function(n){return s.openUrl(n)}),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",s.barChartAnimeData.length>0&&s.barChartAnimeLabels.length>0),t.xp6(1),t.Q6J("ngIf",s.barChartDoramaData.length>0&&s.barChartDoramaLabels.length>0),t.xp6(1),t.Q6J("ngIf",2===s.pieChartStatusData.length&&2===s.pieChartStatusLabels.length),t.xp6(1),t.Q6J("ngIf",2===s.doughnutChartGarapanData.length&&2===s.doughnutChartGarapanLabels.length),t.xp6(2),t.Q6J("tabData",s.tabData))},directives:[B.t,p.O5,f.jh,j.H],styles:[""]}),i})();var ct=l(5934),mt=l(1217),Q=l(4137),pt=l(7845),Y=l(8745),dt=l(8381),H=l(2290),I=l(7423),bt=l(7238),K=l(5245),L=l(4623),ht=l(4028),_t=l(7567),ft=l(325),vt=l(6766);function xt(i,r){if(1&i&&(t.TgZ(0,"div",8)(1,"a",33)(2,"mat-icon",10),t._uU(3,"facebook"),t.qZA(),t._uU(4," Facebook Fanpage "),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("href",e.getUrlByName("facebook"),t.LSH)}}function Tt(i,r){if(1&i&&(t.TgZ(0,"div",8)(1,"a",34),t._UZ(2,"img",35),t._uU(3," Ruang Obrolan Discord "),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("href",e.getUrlByName("discord"),t.LSH)}}function At(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).joinLeaveMember()}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.joinedAsMember?"Keluar":"Gabung"," ")}}function Ct(i,r){1&i&&(t.TgZ(0,"div",37)(1,"div",38)(2,"div",39)(3,"h3",25),t._uU(4," Tidak Ada Data \xaf\\_(\u30c4)_/\xaf "),t.qZA()()()())}function Ft(i,r){if(1&i&&(t.TgZ(0,"mat-list-option",42),t._UZ(1,"img",43),t.TgZ(2,"a",44)(3,"span",45),t._uU(4),t.qZA(),t.TgZ(5,"span",46),t._uU(6),t.qZA()()()),2&i){const e=r.$implicit;t.MGl("routerLink","/user/",e.user_.username,""),t.xp6(1),t.s9C("src",e.user_.image_url,t.LSH),t.xp6(3),t.hij(" ",e.keterangan," "),t.xp6(2),t.Oqu(e.user_.username)}}function Zt(i,r){if(1&i&&(t.TgZ(0,"mat-selection-list",40),t.YNc(1,Ft,7,4,"mat-list-option",41),t.qZA()),2&i){const e=t.oxw(2);t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",e.approvedMembers)}}function Ut(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"mat-list-option",48),t._UZ(1,"img",43),t.TgZ(2,"a",44)(3,"span",49)(4,"small",50),t.NdJ("click",function(){const n=t.CHM(e).$implicit;return t.oxw(3).approveMember(n)}),t._uU(5," Terima "),t.qZA(),t._uU(6," | "),t.TgZ(7,"small",51),t.NdJ("click",function(){const n=t.CHM(e).$implicit;return t.oxw(3).rejectMember(n)}),t._uU(8," Tolak "),t.qZA()(),t.TgZ(9,"span",52),t._uU(10),t.qZA()()()}if(2&i){const e=r.$implicit;t.xp6(1),t.s9C("src",e.user_.image_url,t.LSH),t.xp6(8),t.MGl("routerLink","/user/",e.user_.username,""),t.xp6(1),t.hij(" ",e.user_.username," ")}}function Dt(i,r){if(1&i&&(t.TgZ(0,"mat-selection-list",40),t.YNc(1,Ut,11,3,"mat-list-option",47),t.qZA()),2&i){const e=t.oxw(2);t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",e.pendingMembers)}}function St(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",8)(1,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).getSubDomain()}),t.TgZ(2,"mat-icon",10),t._uU(3,"dns"),t.qZA(),t._uU(4),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(4),t.AsE(" 'https://",e.fansubData.slug,".",e.ENV.domain,"' ")}}function Et(i,r){if(1&i&&(t.TgZ(0,"div",14),t._UZ(1,"app-material-expansion-panel",54),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("panelData",e.panelData)}}function It(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"mat-list-option",48)(1,"mat-icon",59),t._uU(2,"rss_feed"),t.qZA(),t.TgZ(3,"a",60),t.NdJ("click",function(){const n=t.CHM(e).$implicit;return t.oxw(3).openRssFeed(n.link)}),t.TgZ(4,"span",61),t._uU(5),t.ALo(6,"dateAgo"),t.qZA(),t._UZ(7,"span",62),t.qZA()()}if(2&i){const e=r.$implicit;t.xp6(5),t.Oqu(t.lcZ(6,2,e.created||e.published)),t.xp6(2),t.Q6J("innerHtml",e.title,t.oJD)}}function kt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",14)(1,"div",55)(2,"h2",56)(3,"span",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).getRssFeed()}),t._uU(4," Refresh "),t.qZA(),t.TgZ(5,"b",58),t._uU(6,"RSS Feed Fansub"),t.qZA()()(),t.TgZ(7,"div",6)(8,"mat-selection-list",40),t.YNc(9,It,8,4,"mat-list-option",47),t.ALo(10,"slice"),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(8),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",t.Dn7(10,2,e.rssFeedData.items,0,5))}}function Mt(i,r){1&i&&(t.TgZ(0,"div",14)(1,"div",6),t._UZ(2,"app-report"),t.qZA()())}function Nt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),t._UZ(6,"img",7),t.qZA(),t.TgZ(7,"div",8)(8,"button",9)(9,"mat-icon",10),t._uU(10,"calendar_today"),t.qZA(),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"button",11)(14,"mat-icon",10),t._uU(15,"history"),t.qZA(),t._uU(16),t.qZA()(),t.YNc(17,xt,5,1,"div",12),t.YNc(18,Tt,4,1,"div",12),t.TgZ(19,"div",8)(20,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().editFansubData()}),t.TgZ(21,"mat-icon",10),t._uU(22,"edit"),t.qZA(),t._uU(23," Perbaharui Informasi "),t.qZA()(),t.TgZ(24,"div",6)(25,"div",14)(26,"div",15)(27,"h2",16),t.YNc(28,At,2,1,"a",17),t.TgZ(29,"b",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().togglePendingMembers()}),t._uU(30),t.qZA()()(),t.TgZ(31,"div",19)(32,"div",20),t.YNc(33,Ct,5,0,"div",21),t.YNc(34,Zt,2,2,"mat-selection-list",22),t.YNc(35,Dt,2,2,"mat-selection-list",22),t.qZA()()()(),t.YNc(36,St,5,2,"div",12),t.qZA()(),t.TgZ(37,"div",23)(38,"div",24)(39,"h1",25)(40,"b"),t._uU(41),t.qZA()()(),t.TgZ(42,"div",14)(43,"app-material-chip",26),t.NdJ("chipClicked",function(a){return t.CHM(e),t.oxw().openTag(a)}),t.qZA()(),t.TgZ(44,"div",27),t._UZ(45,"app-notifications",28),t.qZA(),t.YNc(46,Et,2,1,"div",29),t.YNc(47,kt,11,6,"div",29),t.YNc(48,Mt,3,0,"div",29),t.TgZ(49,"div",14)(50,"div",6)(51,"app-material-tab",30),t.NdJ("listClicked",function(a){return t.CHM(e),t.oxw().openAnime(a)})("gridClicked",function(a){return t.CHM(e),t.oxw().openDorama(a)})("tableRowClicked",function(a){return t.CHM(e),t.oxw().openFile(a)})("paginatorClicked",function(a){return t.CHM(e),t.oxw().onPaginatorClicked(a)})("serverSideFilter",function(a){return t.CHM(e),t.oxw().onServerSideFilter(a)})("serverSideOrder",function(a){return t.CHM(e),t.oxw().onServerSideOrder(a)})("gridLoadNextPage",function(){return t.CHM(e),t.oxw().onDoramaLoadNextPage()})("listLoadNextPage",function(){return t.CHM(e),t.oxw().onAnimeLoadNextPage()}),t.qZA()()()()()(),t._UZ(52,"div",31)(53,"div",32),t.qZA()}if(2&i){const e=t.oxw();t.xp6(6),t.Q6J("src",e.fansubData.image_url,t.LSH),t.xp6(5),t.hij(" ",t.xi3(12,24,e.fansubData.born,"d MMMM y")," "),t.xp6(5),t.hij(" ",e.fansubData.active?"Aktif":"Tidak Aktif"," "),t.xp6(1),t.Q6J("ngIf",e.getUrlByName("facebook")),t.xp6(1),t.Q6J("ngIf",e.getUrlByName("discord")),t.xp6(2),t.s9C("matTooltip",e.fansubData.user_?"Terakhir Di Ubah Oleh :: "+e.fansubData.user_.username:"Perbaharui Data Fansub"),t.xp6(8),t.Q6J("ngIf",!e.showPendingMember),t.xp6(2),t.hij(" ",e.showPendingMember?"Permintaan Gabung":"Anggota"," "),t.xp6(3),t.Q6J("ngIf",!e.showPendingMember&&e.approvedMembers.length<=0||e.showPendingMember&&e.pendingMembers.length<=0),t.xp6(1),t.Q6J("ngIf",!e.showPendingMember&&e.approvedMembers.length>0),t.xp6(1),t.Q6J("ngIf",e.showPendingMember&&e.pendingMembers.length>0),t.xp6(1),t.Q6J("ngIf",!e.fansubData.dns_id),t.xp6(5),t.Oqu(e.fansubData.name),t.xp6(2),t.Q6J("chipData",e.chipData),t.xp6(3),t.Q6J("ngIf",e.panelData.length>0),t.xp6(1),t.Q6J("ngIf",(null==e.rssFeedData?null:e.rssFeedData.items.length)>0&&"null"!==e.fansubSlug),t.xp6(1),t.Q6J("ngIf",null==e.SS.mySocket?null:e.SS.mySocket.id),t.xp6(3),t.Q6J("tabData",e.tabData)("count",e.count)("serverSide",!0)("gridPageFinished",e.doramaPageFinished)("listPageFinished",e.animePageFinished),t.xp6(1),t.Udp("background-image","url("+e.fansubData.cover_url+")")}}let yt=(()=>{class i{constructor(e,s,a,n,g,c,d,A,C,E,M,N){this.activatedRoute=e,this.router=s,this.bs=a,this.as=n,this.ds=g,this.gs=c,this.fs=d,this.pi=A,this.fansub=C,this.ss=E,this.toast=M,this.wb=N,this.fansubSlug="",this.fansubData=null,this.rssFeedData=null,this.approvedMembers=[],this.pendingMembers=[],this.joinedAsMember=null,this.showPendingMember=!1,this.count=0,this.page=1,this.row=10,this.q="",this.sort="",this.order="",this.animeFansub=[],this.doramaFansub=[],this.berkasFansub=[],this.animePageFinished=!1,this.doramaPageFinished=!1,this.animePage=1,this.doramaPage=1,this.chipData=[],this.panelData=[],this.tabData=[{name:"Anime",icon:"live_tv",type:"list",data:[]},{name:"Dorama",icon:"movie",type:"grid",data:[]},{name:"Berkas Terkait",icon:"file_copy",type:"table",data:{column:["Tanggal","Image","Nama Berkas","Pemilik"],row:[]}}],this.subsActRoute=null,this.subsFansub=null,this.subsBerkas=null,this.subsAnime=null,this.subsDorama=null,this.subsParam=null,this.subsRssFeed=null,this.subsFansubMemberGet=null,this.subsFansubMemberJoin=null,this.subsFansubMemberApproveReject=null,this.subsFansubMemberLeave=null,this.subsDialog=null,this.subsClaimSubDomain=null,this.gs.bannerImg="/assets/img/fansub-banner.png",this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get SS(){return this.ss}get ENV(){return ct.N}ngOnDestroy(){var e,s,a,n,g,c,d,A,C,E,M,N,G;null===(e=this.subsActRoute)||void 0===e||e.unsubscribe(),null===(s=this.subsFansub)||void 0===s||s.unsubscribe(),null===(a=this.subsBerkas)||void 0===a||a.unsubscribe(),null===(n=this.subsAnime)||void 0===n||n.unsubscribe(),null===(g=this.subsDorama)||void 0===g||g.unsubscribe(),null===(c=this.subsParam)||void 0===c||c.unsubscribe(),null===(d=this.subsRssFeed)||void 0===d||d.unsubscribe(),null===(A=this.subsFansubMemberGet)||void 0===A||A.unsubscribe(),null===(C=this.subsFansubMemberJoin)||void 0===C||C.unsubscribe(),null===(E=this.subsFansubMemberApproveReject)||void 0===E||E.unsubscribe(),null===(M=this.subsFansubMemberLeave)||void 0===M||M.unsubscribe(),null===(N=this.subsDialog)||void 0===N||N.unsubscribe(),null===(G=this.subsClaimSubDomain)||void 0===G||G.unsubscribe()}ngOnInit(){this.subsParam=this.activatedRoute.params.subscribe({next:e=>{this.fansubSlug=e.fansubSlug,this.getFansubDetail()}})}getFansubDetail(){this.bs.busy(),this.subsFansub=this.fansub.getFansub(this.fansubSlug).subscribe({next:e=>{if(this.gs.log("[FANSUB_DETAIL_SUCCESS]",e),this.fansubData=e.result,this.pi.updatePageMetaData(`${this.fansubData.name}`,`${this.fansubData.description}`,`${Array.isArray(this.fansubData.tags)?this.fansubData.tags.join(", "):this.fansubData.name}`,this.fansubData.image_url,this.fansubData.user_.username),this.bs.idle(),this.gs.isBrowser){if(Array.isArray(this.fansubData.tags))for(let a=0;a<this.fansubData.tags.length;a++)this.chipData.push({id_tag:a,name:this.fansubData.tags[a],color:mt.s.BIRU,selected:!0});this.panelData=[],this.panelData.push({title:"Informasi",icon:"notification_important",text:this.fansubData.description}),this.getUrlByName("web")&&this.fs.initializeFab("web",null,"Buka Halaman Website Fansub",this.getUrlByName("web"),!0),this.getAnimeFansub(),this.getDoramaFansub(),this.getBerkasFansub(),this.getRssFeed(),this.getFansubMember()}},error:e=>{this.gs.log("[FANSUB_DETAIL_ERROR]",e,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:"/fansub"}})}})}getUrlByName(e){const s=this.fansubData.urls.find(a=>a.name===e);return s?s.url:null}getRssFeed(){this.bs.busy(),this.subsRssFeed=this.fansub.getRssFeedFansub(this.fansubSlug).subscribe({next:e=>{this.gs.log("[RSS_FEED_LIST_SUCCESS]",e),this.rssFeedData=e.result,this.bs.idle()},error:e=>{this.gs.log("[RSS_FEED_LIST_ERROR]",e,"error"),this.bs.idle()}})}openRssFeed(e){this.wb.winboxOpenUri(this.gs.rssLink(e))}getBerkasFansub(){this.bs.busy(),this.subsBerkas=this.fansub.getBerkasFansub([this.fansubData.id],this.q,this.page,this.row,this.sort,this.order).subscribe({next:e=>{this.gs.log("[BERKAS_ANIME_SUCCESS]",e),this.count=e.count,this.berkasFansub=[];for(const s of e.results[this.fansubData.id])this.berkasFansub.push({id:s.id,private:s.private,foto:s.user_.image_url,Pemilik:s.user_.username,Image:s.image_url,Tanggal:s.created_at,"Nama Berkas":s.name});this.tabData[2].data.row=this.berkasFansub,this.bs.idle()},error:e=>{this.gs.log("[BERKAS_FANSUB_ERROR]",e,"error"),this.bs.idle()}})}getAnimeFansub(){this.bs.busy(),this.subsAnime=this.fansub.getAnimeFansub([this.fansubData.id],this.animePage).subscribe({next:e=>{this.gs.log("[FANSUB_ANIME_SUCCESS]",e);for(const s of e.results[this.fansubData.id])this.animeFansub.push({id:s.id,image:s.image_url,title:s.name});this.tabData[0].data=this.animeFansub,e.results[this.fansubData.id].length<=0&&(this.animePageFinished=!0),this.bs.idle()},error:e=>{this.gs.log("[FANSUB_ANIME_ERROR]",e,"error"),this.bs.idle()}})}getDoramaFansub(){this.bs.busy(),this.subsDorama=this.fansub.getDoramaFansub([this.fansubData.id],this.doramaPage).subscribe({next:e=>{this.gs.log("[FANSUB_DORAMA_SUCCESS]",e);for(const s of e.results[this.fansubData.id])this.doramaFansub.push({id:s.id,image:s.image_url,title:s.name,slug:s.slug});this.tabData[1].data=this.doramaFansub,e.results[this.fansubData.id].length<=0&&(this.doramaPageFinished=!0),this.bs.idle()},error:e=>{this.gs.log("[FANSUB_DORAMA_ERROR]",e,"error"),this.bs.idle()}})}editFansubData(){this.router.navigateByUrl(`/fansub/${this.fansubSlug}/edit`)}onServerSideFilter(e){this.gs.log("[BERKAS_FANSUB_ENTER_FILTER]",e),this.q=e,this.getBerkasFansub()}onServerSideOrder(e){this.gs.log("[BERKAS_FANSUB_CLICK_ORDER]",e),this.q=e.q,this.sort=e.active,this.order=e.direction,this.getBerkasFansub()}onPaginatorClicked(e){this.gs.log("[FANSUB_DETAIL_CLICK_PAGINATOR]",e),this.page=e.pageIndex+1,this.row=e.pageSize,this.getBerkasFansub()}openFile(e){this.gs.log("[FANSUB_DETAIL_OPEN_FILE]",e),this.router.navigateByUrl(`/berkas/${e.id}`)}openAnime(e){this.gs.log("[FANSUB_DETAIL_OPEN_ANIME]",e);const s=e.title.replace(/[^a-zA-Z0-9]/g,"-");this.router.navigateByUrl(`/anime/${e.id}-${s}`)}openDorama(e){this.gs.log("[FANSUB_DETAIL_OPEN_DORAMA]",e),this.router.navigateByUrl(`/dorama/${e.slug}`)}openTag(e){this.gs.log("[FANSUB_DETAIL_OPEN_TAG]",e)}onAnimeLoadNextPage(){this.animePageFinished||(this.animePage++,this.getAnimeFansub())}onDoramaLoadNextPage(){this.doramaPageFinished||(this.doramaPage++,this.getDoramaFansub())}togglePendingMembers(){this.showPendingMember=!this.showPendingMember,this.getFansubMember()}getFansubMember(){this.bs.busy(),this.subsFansubMemberGet=this.fansub.getFansubMember(this.fansubSlug).subscribe({next:e=>{this.gs.log("[FANSUB_DETAIL_MEMBER_LIST_SUCCESS]",e),this.approvedMembers=[],this.pendingMembers=[];for(const s of e.results)s.approved?this.approvedMembers.push(s):this.pendingMembers.push(s);if(this.as.currentUserValue){const s=this.approvedMembers.findIndex(a=>a.user_.id===this.as.currentUserValue.id);this.joinedAsMember=s>=0?this.approvedMembers[s]:null}this.bs.idle()},error:e=>{this.gs.log("[FANSUB_DETAIL_MEMBER_LIST_ERROR]",e,"error"),this.bs.idle()}})}joinLeaveMember(){this.bs.busy(),this.joinedAsMember?this.subsFansubMemberLeave=this.fansub.leaveFansubMember(this.joinedAsMember.id).subscribe({next:e=>{this.gs.log("[FANSUB_DETAIL_MEMBER_LEAVE_SUCCESS]",e),this.getFansubMember(),this.bs.idle()},error:e=>{this.gs.log("[FANSUB_DETAIL_MEMBER_LEAVE_ERROR]",e,"error"),this.getFansubMember(),this.bs.idle()}}):this.subsFansubMemberJoin=this.fansub.requestJoinFansubMember({slug:this.fansubSlug}).subscribe({next:e=>{this.gs.log("[FANSUB_DETAIL_MEMBER_JOIN_SUCCESS]",e),this.bs.idle(),this.subsDialog=this.ds.openInfoDialog({data:{title:"Permintaan Gabung Berhasil",htmlMessage:"Silahkan Menghubungi Anggota Yang Sudah Tergabung / Admin / Moderator Fansub Untuk Menerima Permintaan Anda.",confirmText:"Tutup"},disableClose:!0}).afterClosed().subscribe({next:s=>{this.gs.log("[INFO_DIALOG_CLOSED]",s),this.getFansubMember(),this.subsDialog.unsubscribe()}})},error:e=>{this.gs.log("[FANSUB_DETAIL_MEMBER_JOIN_ERROR]",e,"error"),this.getFansubMember(),this.bs.idle()}})}approveOrRejectFansubMember(e,s){this.bs.busy(),this.subsFansubMemberApproveReject=this.fansub.approveRejectFansubMember(e.id,{approved:s}).subscribe({next:a=>{this.gs.log("[FANSUB_DETAIL_MEMBER_APPROVE_REJECT_SUCCESS]",a),this.getFansubMember(),this.bs.idle()},error:a=>{this.gs.log("[FANSUB_DETAIL_MEMBER_APPROVE_REJECT_ERROR]",a,"error"),this.getFansubMember(),this.bs.idle()}})}approveMember(e){this.approveOrRejectFansubMember(e,!0)}rejectMember(e){this.approveOrRejectFansubMember(e,!1)}getSubDomain(){this.as.currentUserValue?this.joinedAsMember||this.as.currentUserValue.role===h.yS.ADMIN||this.as.currentUserValue.role===h.yS.MODERATOR?this.subsDialog=this.ds.openInputDialog({data:{title:"CNAME / A IPv4",input:{server_target:{inputLabel:"Server Target",inputText:"ghs.google.com"}},confirmText:"OK",cancelText:"Batal"},disableClose:!0}).afterClosed().subscribe({next:s=>{var a;this.gs.log("[INPUT_DIALOG_CLOSED]",s),s&&(this.bs.busy(),this.subsClaimSubDomain=this.fansub.claimSubDomain({slug:this.fansubSlug,server_target:(null===(a=s.server_target)||void 0===a?void 0:a.inputText)||null}).subscribe({next:n=>{this.gs.log("[FANSUB_CLAIM_SUBDOMAIN_SUCCESS]",n),this.bs.idle(),this.subsDialog=this.ds.openInfoDialog({data:{title:"Klaim Berhasil",htmlMessage:`\n                        Domain '${n.result.name}' sudah didaftarkan dan dapat digunakan,\n                        silahkan migrasi domain pada situs penyedia layanan anda (ex. Blogger / Wordpress / etc.)\n                        kemudian tunggu hingga propagasi DNS selesai.\n                        Terima Kasih.\n                      `,confirmText:"Tutup"},disableClose:!0}).afterClosed().subscribe({next:g=>{this.gs.log("[INFO_DIALOG_CLOSED]",g),this.getFansubDetail(),this.subsDialog.unsubscribe()}})},error:n=>{this.gs.log("[FANSUB_CLAIM_SUBDOMAIN_ERROR]",n,"error"),this.bs.idle(),this.getFansubDetail()}})),this.subsDialog.unsubscribe()}}):this.toast.warning("Anda Harus Menjadi Anggota Untuk Klaim SubDomain!","Whoops!"):this.router.navigate(["/login"],{queryParams:{returnUrl:this.router.url}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(J.z),t.Y36(Q.e),t.Y36(pt.x),t.Y36(R.U),t.Y36(z.r),t.Y36(Y.Z),t.Y36(w.T),t.Y36(dt.R),t.Y36(H._W),t.Y36(V.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-fansub-detail"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"fansub-info","align-items-center"],[1,"media","row","py-3","px-2"],[1,"col-md-4","col-xl-3","px-3"],[1,"row","sticky-top","pt-3"],[1,"col-12"],[1,"w-100",3,"src"],[1,"col-12","text-center","pt-3"],["mat-button","","color","warn","matTooltip","Berdiri Sejak",1,"w-100"],[1,"me-1"],["mat-button","","color","accent","matTooltip","Status Fansub",1,"w-100"],["class","col-12 text-center pt-3",4,"ngIf"],["mat-button","",1,"w-100","text-success",2,"color","rgb(255, 64, 129) !important",3,"matTooltip","click"],[1,"row","py-3"],[1,"col-12","pt-3","sticky-top","bg-bifeldy"],[1,"border-bottom-dotted"],["class","float-end text-decoration-none text-warning","style","font-size: small; cursor: pointer;",3,"click",4,"ngIf"],["matTooltip","Lihat Permintaan Gabung Keanggotaan",1,"text-bifeldy",2,"cursor","pointer",3,"click"],[1,"col-12",2,"max-height","288px"],[1,"h-100",2,"overflow-y","auto"],["style","background-image: url('/assets/img/404-no-data.png'); background-size: contain; background-position: center; background-repeat: no-repeat; height: 256px; overflow: hidden;",4,"ngIf"],[3,"multiple",4,"ngIf"],[1,"col-md-8","col-xl-9","pt-3"],[1,"row","py-3","px-0","mt-auto"],[1,"m-0"],[3,"chipData","chipClicked"],[1,"row"],[1,"px-0"],["class","row py-3",4,"ngIf"],[3,"tabData","count","serverSide","gridPageFinished","listPageFinished","listClicked","gridClicked","tableRowClicked","paginatorClicked","serverSideFilter","serverSideOrder","gridLoadNextPage","listLoadNextPage"],[1,"fansub-banner","fansub-banner-1","align-items-center"],[1,"fansub-banner","fansub-banner-2","align-items-center"],["mat-stroked-button","","matTooltip","Kunjungi Halaman Fanpage",1,"w-100",2,"color","rgb(114, 137, 218)",3,"href"],["mat-stroked-button","","matTooltip","Kunjungi Ruang Obrolan",1,"w-100",2,"color","rgb(114, 137, 218)",3,"href"],["src","/assets/img/discord-blue.png","width","24px"],[1,"float-end","text-decoration-none","text-warning",2,"font-size","small","cursor","pointer",3,"click"],[2,"background-image","url('/assets/img/404-no-data.png')","background-size","contain","background-position","center","background-repeat","no-repeat","height","256px","overflow","hidden"],[1,"row","align-items-center","h-100"],[1,"col-8","mx-auto","text-light","text-center","rounded","py-3",2,"background-color","rgba(128, 128, 128, 0.875)"],[3,"multiple"],["class","h-100",3,"routerLink",4,"ngFor","ngForOf"],[1,"h-100",3,"routerLink"],["matListAvatar","",1,"ms-3",3,"src"],[1,"text-truncate","text-decoration-none"],[1,"bg-bifeldy","ps-3","pe-2","me-1","text-warning",2,"position","absolute","right","0"],[1,"text-success"],["class","h-100",4,"ngFor","ngForOf"],[1,"h-100"],[1,"bg-bifeldy","ps-3","pe-2","me-1",2,"position","absolute","right","0"],[1,"text-success",2,"cursor","pointer",3,"click"],[1,"text-danger",2,"cursor","pointer",3,"click"],[1,"text-warning",3,"routerLink"],["mat-button","","color","accent","matTooltip","Ambil / Klaim / Dapatkan SubDomain Ini",1,"w-100",3,"click"],[3,"panelData"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"float-end","text-warning",2,"font-size","small","cursor","pointer",3,"click"],[1,"text-bifeldy"],["mat-list-icon","",1,"ps-3"],[1,"text-truncate","text-decoration-none",3,"click"],[1,"bg-bifeldy","ps-3","pe-2","me-1","text-danger",2,"position","absolute","right","0"],[1,"text-warning",3,"innerHtml"]],template:function(e,s){1&e&&t.YNc(0,Nt,54,27,"div",0),2&e&&t.Q6J("ngIf",s.fansubData)},directives:[p.O5,I.lW,bt.gM,K.Hw,I.zs,L.Ub,p.sg,L.vS,u.rH,L.eA,ht.G,B.t,_t.Q,L.Nh,ft.Y,j.H],pipes:[p.uU,p.OU,vt.R],styles:[".fansub-banner[_ngcontent-%COMP%]{height:128px;width:100%;background-size:cover;background-position:center;background-repeat:no-repeat;filter:blur(5px) brightness(100%);opacity:.5}.fansub-banner-1[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.fansub-banner-2[_ngcontent-%COMP%]{position:absolute;top:128px;left:0}.fansub-info[_ngcontent-%COMP%]{position:relative;height:256px;z-index:1}"]}),i})();var $=l(8372),W=l(9094),X=l(8505),tt=l(3900),et=l(5625),m=l(6271),at=l(7902),x=l(7322),st=l(7531),k=l(6856),it=l(4107),nt=l(508),U=l(6688);function Rt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",6)(1,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).submitImage()}),t.TgZ(2,"mat-icon",54),t._uU(3,"add_photo_alternate"),t.qZA(),t._uU(4," Unggah "),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function Jt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",58)(1,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).submitCover()}),t.TgZ(2,"mat-icon",54),t._uU(3,"add_photo_alternate"),t.qZA(),t._uU(4," Unggah "),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function wt(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Nama Fansub Tidak Boleh Kosong"),t.qZA())}function Bt(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Nama Fansub Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function Lt(i,r){if(1&i&&(t.TgZ(0,"small",59)(1,"strong"),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.slugInfo)}}function Ot(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Singkatan Tidak Boleh Kosong"),t.qZA())}function qt(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Singkatan Hanya Boleh Huruf Dan \u4e00"),t.qZA())}function Pt(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Tanggal Harus Diisi Secara Valid"),t.qZA())}function Qt(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Tanggal Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function Yt(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Mohon Pilih Salah Satu"),t.qZA())}function Ht(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Status Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function Kt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"mat-chip",60),t.NdJ("removed",function(){const n=t.CHM(e).$implicit;return t.oxw(2).removeTag(n)}),t._uU(1),t.TgZ(2,"mat-icon",61),t._uU(3,"cancel"),t.qZA()()}if(2&i){const e=r.$implicit;t.Q6J("removable",!0),t.xp6(1),t.hij(" ",e," ")}}function Gt(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Website Tidak Boleh Kosong"),t.qZA())}function zt(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Website Link Tidak Valid"),t.qZA())}function Vt(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Facebook Link Tidak Valid"),t.qZA())}function jt(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Discord Link Tidak Valid"),t.qZA())}function $t(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"RSS Link Tidak Valid"),t.qZA())}function Wt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"app-notifications"),t.TgZ(5,"div",5)(6,"div",6)(7,"form",7),t.NdJ("submit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(8,"div",8)(9,"div",9)(10,"h2",10)(11,"b",11),t._uU(12,"Tambah Data Fansub Baru"),t.qZA()()(),t.TgZ(13,"div",6)(14,"div",12)(15,"div",13)(16,"div",12)(17,"div",6),t._UZ(18,"img",14),t.TgZ(19,"mat-form-field",15)(20,"mat-label"),t._uU(21,"Foto"),t.qZA(),t.TgZ(22,"ngx-mat-file-input",16,17),t.NdJ("change",function(a){t.CHM(e);const n=t.MAs(23);return t.oxw().uploadImage(a,n)}),t.qZA(),t.TgZ(24,"mat-icon",18),t._uU(25,"image"),t.qZA()(),t.TgZ(26,"mat-error",19)(27,"small")(28,"strong"),t._uU(29),t.qZA()()()(),t.YNc(30,Rt,5,1,"div",20),t.qZA()(),t.TgZ(31,"div",21)(32,"div",12)(33,"mat-form-field",22)(34,"mat-label"),t._uU(35,"Cover"),t.qZA(),t.TgZ(36,"ngx-mat-file-input",16,23),t.NdJ("change",function(a){t.CHM(e);const n=t.MAs(37);return t.oxw().uploadCover(a,n)}),t.qZA(),t.TgZ(38,"mat-icon",18),t._uU(39,"image"),t.qZA()(),t.TgZ(40,"mat-error",19)(41,"small")(42,"strong"),t._uU(43),t.qZA()()(),t.YNc(44,Jt,5,1,"div",24),t.TgZ(45,"mat-form-field",25)(46,"mat-label"),t._uU(47,"Nama Fansub"),t.qZA(),t._UZ(48,"input",26),t.TgZ(49,"mat-icon",18),t._uU(50,"wysiwyg"),t.qZA(),t.TgZ(51,"mat-error"),t.YNc(52,wt,2,0,"strong",27),t.YNc(53,Bt,2,0,"strong",27),t.qZA()(),t.TgZ(54,"mat-form-field",28)(55,"mat-label"),t._uU(56,"Singkatan"),t.qZA(),t._UZ(57,"input",29),t.TgZ(58,"mat-icon",18),t._uU(59,"short_text"),t.qZA(),t.YNc(60,Lt,3,1,"small",30),t.TgZ(61,"mat-error"),t.YNc(62,Ot,2,0,"strong",27),t.YNc(63,qt,2,0,"strong",27),t.qZA()(),t._UZ(64,"angular-editor",31),t.TgZ(65,"mat-form-field",32)(66,"mat-label"),t._uU(67,"Mulai Ada Sejak"),t.qZA(),t.TgZ(68,"input",33),t.NdJ("focus",function(){return t.CHM(e),t.MAs(72).open()}),t.ALo(69,"date"),t.qZA(),t._UZ(70,"mat-datepicker-toggle",34)(71,"mat-datepicker",35,36),t.TgZ(73,"mat-error"),t.YNc(74,Pt,2,0,"strong",27),t.YNc(75,Qt,2,0,"strong",27),t.qZA()(),t.TgZ(76,"mat-form-field",32)(77,"mat-label"),t._uU(78,"Status"),t.qZA(),t.TgZ(79,"mat-select",37)(80,"mat-option",38),t._uU(81,"Tidak Aktif"),t.qZA(),t.TgZ(82,"mat-option",39),t._uU(83,"Aktif"),t.qZA()(),t.TgZ(84,"mat-hint",40),t._uU(85,"Status Kehidupan Fansub Saat Ini"),t.qZA(),t.TgZ(86,"mat-error"),t.YNc(87,Yt,2,0,"strong",27),t.YNc(88,Ht,2,0,"strong",27),t.qZA()()()()(),t.TgZ(89,"div",12)(90,"div",6)(91,"div",12)(92,"mat-form-field",41)(93,"mat-label"),t._uU(94,"Tags & Kategori"),t.qZA(),t.TgZ(95,"mat-chip-list",null,42),t.YNc(97,Kt,4,2,"mat-chip",43),t.TgZ(98,"input",44),t.NdJ("matChipInputTokenEnd",function(a){return t.CHM(e),t.oxw().addTag(a)}),t.qZA(),t.TgZ(99,"mat-icon",18),t._uU(100,"loyalty"),t.qZA()(),t.TgZ(101,"mat-hint",40),t._uU(102,"Isi Dengan Bebas, Pisahkan Dengan Koma"),t.qZA()()()()(),t.TgZ(103,"div",12)(104,"div",6)(105,"div",12)(106,"mat-form-field",45)(107,"mat-label"),t._uU(108,"Tautan Website"),t.qZA(),t._UZ(109,"input",46),t.TgZ(110,"mat-icon",18),t._uU(111,"web"),t.qZA(),t.TgZ(112,"mat-error"),t.YNc(113,Gt,2,0,"strong",27),t.YNc(114,zt,2,0,"strong",27),t.qZA()(),t.TgZ(115,"mat-form-field",45)(116,"mat-label"),t._uU(117,"Facebook Fanpage"),t.qZA(),t._UZ(118,"input",47),t.TgZ(119,"mat-icon",18),t._uU(120,"facebook"),t.qZA(),t.TgZ(121,"mat-error"),t.YNc(122,Vt,2,0,"strong",27),t.qZA()(),t.TgZ(123,"mat-form-field",45)(124,"mat-label"),t._uU(125,"Tautan Discord"),t.qZA(),t._UZ(126,"input",48),t.TgZ(127,"mat-icon",18),t._UZ(128,"img",49),t.qZA(),t.TgZ(129,"mat-error"),t.YNc(130,jt,2,0,"strong",27),t.qZA()()()()(),t.TgZ(131,"div",12)(132,"mat-form-field",41)(133,"mat-label"),t._uU(134,"URI / URL RSS v2.0 Feed"),t.qZA(),t._UZ(135,"input",50),t.TgZ(136,"mat-icon",18),t._uU(137,"rss_feed"),t.qZA(),t.TgZ(138,"mat-error"),t.YNc(139,$t,2,0,"strong",27),t.qZA()()(),t.TgZ(140,"div",12)(141,"div",6)(142,"div",12),t._UZ(143,"div",51),t.TgZ(144,"div",52)(145,"a",53)(146,"mat-icon",54),t._uU(147,"undo"),t.qZA(),t._uU(148," Batal "),t.qZA()(),t.TgZ(149,"div",52)(150,"button",55),t._uU(151," Simpan "),t.TgZ(152,"mat-icon",56),t._uU(153,"save"),t.qZA()()()()()()()()()()()()}if(2&i){const e=t.MAs(72),s=t.MAs(96),a=t.oxw();t.xp6(1),t.Udp("background-image","url("+a.cover_url+")"),t.xp6(6),t.Q6J("formGroup",a.fg),t.xp6(11),t.Q6J("src",a.image_url,t.LSH),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("disabled",a.fg.value.image)("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(7),t.Oqu(a.imageErrorText),t.xp6(1),t.Q6J("ngIf",a.image&&!a.fg.value.image),t.xp6(3),t.Q6J("color","accent"),t.xp6(3),t.Q6J("disabled",a.fg.value.cover)("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(7),t.Oqu(a.coverErrorText),t.xp6(1),t.Q6J("ngIf",a.cover&&!a.fg.value.cover),t.xp6(1),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",a.fg.get("name").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.fg.get("name").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(6),t.Q6J("ngIf",a.slugInfo),t.xp6(2),t.Q6J("ngIf",a.fg.get("slug").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.fg.get("slug").hasError("pattern")),t.xp6(1),t.Q6J("config",a.GS.angularEditorConfig),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.s9C("placeholder",t.xi3(69,48,a.currentDate,"d MMMM y")),t.Q6J("matDatepicker",e),t.xp6(2),t.Q6J("for",e),t.xp6(4),t.Q6J("ngIf",a.fg.get("born").hasError("required")||a.fg.get("born").hasError("matDatepickerParse")),t.xp6(1),t.Q6J("ngIf",a.fg.get("born").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(11),t.Q6J("ngIf",a.fg.get("active").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.fg.get("active").hasError("pattern")),t.xp6(4),t.Q6J("color","accent"),t.xp6(5),t.Q6J("ngForOf",a.fg.value.tags),t.xp6(1),t.Q6J("matChipInputSeparatorKeyCodes",a.GS.separatorKeysCodes)("matChipInputFor",s)("matChipInputAddOnBlur",!0),t.xp6(8),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",a.fg.get("web").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.fg.get("web").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",a.fg.get("facebook").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(5),t.MGl("src","/assets/img/discord-",a.GS.isDarkMode?"white":"black",".png",t.LSH),t.xp6(2),t.Q6J("ngIf",a.fg.get("discord").hasError("pattern")),t.xp6(2),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",a.fg.get("rss_feed").hasError("pattern")),t.xp6(6),t.Q6J("disabled",a.submitted),t.xp6(5),t.Q6J("disabled",a.submitted||a.fg.invalid)}}function te(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",6)(1,"button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).submitImage()}),t.TgZ(2,"mat-icon",55),t._uU(3,"add_photo_alternate"),t.qZA(),t._uU(4," Unggah "),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function ee(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",59)(1,"button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).submitCover()}),t.TgZ(2,"mat-icon",55),t._uU(3,"add_photo_alternate"),t.qZA(),t._uU(4," Unggah "),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function ae(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Nama Fansub Tidak Boleh Kosong"),t.qZA())}function se(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Nama Fansub Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function ie(i,r){if(1&i&&(t.TgZ(0,"small",60)(1,"strong"),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.slugInfo)}}function ne(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Singkatan Tidak Boleh Kosong"),t.qZA())}function oe(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Singkatan Hanya Boleh Huruf Dan \u4e00"),t.qZA())}function re(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Tanggal Harus Diisi Secara Valid"),t.qZA())}function le(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Tanggal Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function ue(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Mohon Pilih Salah Satu"),t.qZA())}function ge(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Status Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function ce(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"mat-chip",61),t.NdJ("removed",function(){const n=t.CHM(e).$implicit;return t.oxw(2).removeTag(n)}),t._uU(1),t.TgZ(2,"mat-icon",62),t._uU(3,"cancel"),t.qZA()()}if(2&i){const e=r.$implicit;t.Q6J("removable",!0),t.xp6(1),t.hij(" ",e," ")}}function me(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Website Tidak Boleh Kosong"),t.qZA())}function pe(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Website Link Tidak Valid"),t.qZA())}function de(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Facebook Link Tidak Valid"),t.qZA())}function be(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Discord Link Tidak Valid"),t.qZA())}function he(i,r){1&i&&(t.TgZ(0,"strong"),t._uU(1,"Discord Link Tidak Valid"),t.qZA())}function _e(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"app-notifications"),t.TgZ(5,"div",5)(6,"div",6)(7,"form",7),t.NdJ("submit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(8,"div",8)(9,"div",9)(10,"h2",10)(11,"b",11),t._uU(12,"Perbaharui Data Fansub"),t.qZA()()(),t.TgZ(13,"div",6)(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",6),t._UZ(18,"img",15),t.TgZ(19,"mat-form-field",16)(20,"mat-label"),t._uU(21,"Foto"),t.qZA(),t.TgZ(22,"ngx-mat-file-input",17,18),t.NdJ("change",function(a){t.CHM(e);const n=t.MAs(23);return t.oxw().uploadImage(a,n)}),t.qZA(),t.TgZ(24,"mat-icon",19),t._uU(25,"image"),t.qZA()(),t.TgZ(26,"mat-error",20)(27,"small")(28,"strong"),t._uU(29),t.qZA()()()(),t.YNc(30,te,5,1,"div",21),t.qZA()(),t.TgZ(31,"div",22)(32,"div",12)(33,"mat-form-field",23)(34,"mat-label"),t._uU(35,"Cover"),t.qZA(),t.TgZ(36,"ngx-mat-file-input",17,24),t.NdJ("change",function(a){t.CHM(e);const n=t.MAs(37);return t.oxw().uploadCover(a,n)}),t.qZA(),t.TgZ(38,"mat-icon",19),t._uU(39,"image"),t.qZA()(),t.TgZ(40,"mat-error",20)(41,"small")(42,"strong"),t._uU(43),t.qZA()()(),t.YNc(44,ee,5,1,"div",25),t.TgZ(45,"mat-form-field",26)(46,"mat-label"),t._uU(47,"Nama Fansub"),t.qZA(),t._UZ(48,"input",27),t.TgZ(49,"mat-icon",19),t._uU(50,"wysiwyg"),t.qZA(),t.TgZ(51,"mat-error"),t.YNc(52,ae,2,0,"strong",28),t.YNc(53,se,2,0,"strong",28),t.qZA()(),t.TgZ(54,"mat-form-field",29)(55,"mat-label"),t._uU(56,"Singkatan"),t.qZA(),t._UZ(57,"input",30),t.TgZ(58,"mat-icon",19),t._uU(59,"short_text"),t.qZA(),t.YNc(60,ie,3,1,"small",31),t.TgZ(61,"mat-error"),t.YNc(62,ne,2,0,"strong",28),t.YNc(63,oe,2,0,"strong",28),t.qZA()(),t._UZ(64,"angular-editor",32),t.TgZ(65,"mat-form-field",33)(66,"mat-label"),t._uU(67,"Mulai Ada Sejak"),t.qZA(),t.TgZ(68,"input",34),t.NdJ("focus",function(){return t.CHM(e),t.MAs(72).open()}),t.ALo(69,"date"),t.qZA(),t._UZ(70,"mat-datepicker-toggle",35)(71,"mat-datepicker",36,37),t.TgZ(73,"mat-error"),t.YNc(74,re,2,0,"strong",28),t.YNc(75,le,2,0,"strong",28),t.qZA()(),t.TgZ(76,"mat-form-field",33)(77,"mat-label"),t._uU(78,"Status"),t.qZA(),t.TgZ(79,"mat-select",38)(80,"mat-option",39),t._uU(81,"Tidak Aktif"),t.qZA(),t.TgZ(82,"mat-option",40),t._uU(83,"Aktif"),t.qZA()(),t.TgZ(84,"mat-hint",41),t._uU(85,"Status Kehidupan Fansub Saat Ini"),t.qZA(),t.TgZ(86,"mat-error"),t.YNc(87,ue,2,0,"strong",28),t.YNc(88,ge,2,0,"strong",28),t.qZA()()()()(),t.TgZ(89,"div",12)(90,"div",6)(91,"div",12)(92,"mat-form-field",42)(93,"mat-label"),t._uU(94,"Tags & Kategori"),t.qZA(),t.TgZ(95,"mat-chip-list",null,43),t.YNc(97,ce,4,2,"mat-chip",44),t.TgZ(98,"input",45),t.NdJ("matChipInputTokenEnd",function(a){return t.CHM(e),t.oxw().addTag(a)}),t.qZA(),t.TgZ(99,"mat-icon",19),t._uU(100,"loyalty"),t.qZA()(),t.TgZ(101,"mat-hint",41),t._uU(102,"Isi Dengan Bebas, Pisahkan Dengan Koma"),t.qZA()()()()(),t.TgZ(103,"div",12)(104,"div",6)(105,"div",12)(106,"mat-form-field",46)(107,"mat-label"),t._uU(108,"Tautan Website"),t.qZA(),t._UZ(109,"input",47),t.TgZ(110,"mat-icon",19),t._uU(111,"web"),t.qZA(),t.TgZ(112,"mat-error"),t.YNc(113,me,2,0,"strong",28),t.YNc(114,pe,2,0,"strong",28),t.qZA()(),t.TgZ(115,"mat-form-field",46)(116,"mat-label"),t._uU(117,"Facebook Fanpage"),t.qZA(),t._UZ(118,"input",48),t.TgZ(119,"mat-icon",19),t._uU(120,"facebook"),t.qZA(),t.TgZ(121,"mat-error"),t.YNc(122,de,2,0,"strong",28),t.qZA()(),t.TgZ(123,"mat-form-field",46)(124,"mat-label"),t._uU(125,"Tautan Discord"),t.qZA(),t._UZ(126,"input",49),t.TgZ(127,"mat-icon",19),t._UZ(128,"img",50),t.qZA(),t.TgZ(129,"mat-error"),t.YNc(130,be,2,0,"strong",28),t.qZA()()()()(),t.TgZ(131,"div",12)(132,"mat-form-field",42)(133,"mat-label"),t._uU(134,"URI / URL RSS v2.0 Feed"),t.qZA(),t._UZ(135,"input",51),t.TgZ(136,"mat-icon",19),t._uU(137,"rss_feed"),t.qZA(),t.TgZ(138,"mat-error"),t.YNc(139,he,2,0,"strong",28),t.qZA()()(),t.TgZ(140,"div",12)(141,"div",6)(142,"div",12),t._UZ(143,"div",52),t.TgZ(144,"div",53)(145,"a",54)(146,"mat-icon",55),t._uU(147,"undo"),t.qZA(),t._uU(148," Batal "),t.qZA()(),t.TgZ(149,"div",53)(150,"button",56),t._uU(151," Simpan "),t.TgZ(152,"mat-icon",57),t._uU(153,"save"),t.qZA()()()()()()()()()()()()}if(2&i){const e=t.MAs(72),s=t.MAs(96),a=t.oxw();t.xp6(1),t.Udp("background-image","url("+a.cover_url+")"),t.xp6(6),t.Q6J("formGroup",a.fg),t.xp6(11),t.Q6J("src",a.image_url,t.LSH),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("disabled",a.fg.value.image)("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(7),t.Oqu(a.imageErrorText),t.xp6(1),t.Q6J("ngIf",a.image&&!a.fg.value.image),t.xp6(3),t.Q6J("color","accent"),t.xp6(3),t.Q6J("disabled",a.fg.value.cover)("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(7),t.Oqu(a.coverErrorText),t.xp6(1),t.Q6J("ngIf",a.cover&&!a.fg.value.cover),t.xp6(1),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",a.fg.get("name").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.fg.get("name").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(6),t.Q6J("ngIf",a.slugInfo),t.xp6(2),t.Q6J("ngIf",a.fg.get("slug").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.fg.get("slug").hasError("pattern")),t.xp6(1),t.Q6J("config",a.GS.angularEditorConfig),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.s9C("placeholder",t.xi3(69,48,a.currentDate,"d MMMM y")),t.Q6J("matDatepicker",e),t.xp6(2),t.Q6J("for",e),t.xp6(4),t.Q6J("ngIf",a.fg.get("born").hasError("required")||a.fg.get("born").hasError("matDatepickerParse")),t.xp6(1),t.Q6J("ngIf",a.fg.get("born").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(11),t.Q6J("ngIf",a.fg.get("active").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.fg.get("active").hasError("pattern")),t.xp6(4),t.Q6J("color","accent"),t.xp6(5),t.Q6J("ngForOf",a.fg.value.tags),t.xp6(1),t.Q6J("matChipInputSeparatorKeyCodes",a.GS.separatorKeysCodes)("matChipInputFor",s)("matChipInputAddOnBlur",!0),t.xp6(8),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",a.fg.get("web").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.fg.get("web").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",a.fg.get("facebook").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(5),t.MGl("src","/assets/img/discord-",a.GS.isDarkMode?"white":"black",".png",t.LSH),t.xp6(2),t.Q6J("ngIf",a.fg.get("discord").hasError("pattern")),t.xp6(2),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",a.fg.get("rss_feed").hasError("pattern")),t.xp6(6),t.Q6J("disabled",a.submitted),t.xp6(5),t.Q6J("disabled",a.submitted||a.fg.invalid||!a.fg.dirty)}}const ve=[{path:"",pathMatch:"full",component:gt},{path:"create",component:(()=>{class i{constructor(e,s,a,n,g,c,d,A,C){this.fb=e,this.router=s,this.bs=a,this.pi=n,this.imgbb=g,this.fansub=c,this.toast=d,this.as=A,this.gs=C,this.submitted=!1,this.image=null,this.imageErrorText=null,this.image_url="/assets/img/form-no-image.png",this.cover=null,this.coverErrorText=null,this.cover_url="/assets/img/form-no-image.png",this.urls=[],this.currentDate=new Date,this.gambar=null,this.gambar_=null,this.subsImgbb=null,this.subsFansub=null,this.subsCekFansubSlug=null,this.slugInfo="",this.gs.bannerImg="/assets/img/fansub-banner.png",this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get GS(){return this.gs}ngOnDestroy(){var e,s;null===(e=this.subsImgbb)||void 0===e||e.unsubscribe(),null===(s=this.subsFansub)||void 0===s||s.unsubscribe()}ngOnInit(){this.pi.updatePageMetaData("Fansub - Buat Baru","Halaman Menambahkan Fansub Baru","Create Fansub"),this.gs.isBrowser&&(this.as.currentUserValue&&this.as.currentUserValue.verified?this.initForm():(this.toast.warning("Khusus Pengguna Terverifikasi","Whoops!"),this.router.navigate(["/verify"],{queryParams:{returnUrl:"/fansub"}})))}initForm(){this.fg=this.fb.group({name:[null,o.kI.compose([o.kI.required,o.kI.pattern(m.t.regexEnglishKeyboardKeys)])],description:[null,o.kI.compose([o.kI.required,o.kI.pattern(m.t.regexEnglishKeyboardKeys)])],born:[null,o.kI.compose([o.kI.required,o.kI.pattern(m.t.regexEnglishKeyboardKeys)])],active:[null,o.kI.compose([o.kI.required,o.kI.pattern(m.t.regexEnglishKeyboardKeys)])],slug:[null,o.kI.compose([o.kI.required,o.kI.pattern(/^[a-zA-Z-]*$/)])],tags:[[],o.kI.compose([])],image:[null,o.kI.compose([o.kI.pattern(m.t.regexUrl)])],cover:[null,o.kI.compose([o.kI.pattern(m.t.regexUrl)])],web:[null,o.kI.compose([o.kI.pattern(m.t.regexUrl)])],facebook:[null,o.kI.compose([o.kI.pattern(m.t.regexUrl)])],discord:[null,o.kI.compose([o.kI.pattern(m.t.regexUrl)])],rss_feed:[null,o.kI.compose([o.kI.pattern(m.t.regexUrl)])]}),this.subsCekFansubSlug=this.fg.get("slug").valueChanges.pipe((0,$.b)(500),(0,W.x)(),(0,X.b)(()=>this.slugInfo="Mengecek ..."),(0,tt.w)(e=>this.fansub.cekSlug({slug:e})),(0,et.X)(-1)).subscribe({next:e=>{this.gs.log("[FANSUB_CEK_SLUG_RESULT]",e),this.slugInfo=e.result.message}})}addTag(e){const s=e.input,a=e.value;(a||"").trim()&&this.fg.value.tags.push(a.trim()),s&&(s.value=""),this.fg.controls.tags.patchValue(this.fg.value.tags.filter((n,g,c)=>c.findIndex(d=>d===n)===g))}removeTag(e){const s=this.fg.value.tags.indexOf(e);s>=0&&this.fg.value.tags.splice(s,1)}uploadImage(e,s){this.gambar=s,this.image=null,this.fg.controls.image.patchValue(null);const a=e.target.files[0];try{const n=new FileReader;n.readAsDataURL(a),n.onload=g=>{if(this.gs.log("[IMAGE_SELECTED]",g),a.size<=m.t.fileSizeImageLimit){const c=this.gs.document.createElement("img");c.onload=()=>{this.image=a,this.image_url=n.result.toString()},c.src=n.result.toString(),this.imageErrorText=null}else this.image=null,this.image_url="/assets/img/form-image-error.png",this.imageErrorText=`Ukuran Upload Melebihi Batas ${m.t.fileSizeImageLimit} Bytes!`,this.gambar.clear(e)}}catch(n){this.image=null,this.imageErrorText=null,this.image_url="/assets/img/form-no-image.png",this.gambar.clear(e)}}submitImage(){this.submitted=!0,this.subsImgbb=this.imgbb.uploadImage({file:this.image}).subscribe({next:e=>{this.gs.log("[IMAGE_SUCCESS]",e),this.fg.controls.image.patchValue(e.result.url),this.submitted=!1},error:e=>{this.gs.log("[IMAGE_ERROR]",e,"error"),this.fg.controls.image.patchValue(null),this.submitted=!1}})}uploadCover(e,s){this.gambar=s,this.cover=null,this.fg.controls.cover.patchValue(null);const a=e.target.files[0];try{const n=new FileReader;n.readAsDataURL(a),n.onload=g=>{if(this.gs.log("[COVER_SELECTED]",g),a.size<=m.t.fileSizeImageLimit){const c=this.gs.document.createElement("img");c.onload=()=>{this.cover=a,this.cover_url=n.result.toString()},c.src=n.result.toString(),this.coverErrorText=null}else this.cover=null,this.cover_url="/assets/img/form-image-error.png",this.coverErrorText=`Ukuran Upload Melebihi Batas ${m.t.fileSizeImageLimit} Bytes!`,this.gambar.clear(e)}}catch(n){this.cover=null,this.coverErrorText=null,this.cover_url="/assets/img/form-no-image.png",this.gambar.clear(e)}}submitCover(){this.submitted=!0,this.subsImgbb=this.imgbb.uploadImage({file:this.cover}).subscribe({next:e=>{this.gs.log("[COVER_SUCCESS]",e),this.fg.controls.cover.patchValue(e.result.url),this.submitted=!1},error:e=>{this.gs.log("[COVER_ERROR]",e,"error"),this.fg.controls.cover.patchValue(null),this.submitted=!1}})}onSubmit(){this.bs.busy();const e=[];if(this.fg.value.web&&e.push({name:"web",url:this.fg.value.web}),this.fg.value.facebook&&e.push({name:"facebook",url:this.fg.value.facebook}),this.fg.value.discord&&e.push({name:"discord",url:this.fg.value.discord}),this.submitted=!0,this.fg.invalid||0===e.length)return 0===e.length&&this.toast.warning("Harap Isi Salah Satu URL","Form Tidak lengkap (Web/FB/DC)"),this.submitted=!1,void this.bs.idle();this.subsFansub=this.fansub.createFansub({image:this.fg.value.image,cover:this.fg.value.cover,name:this.fg.value.name,description:this.fg.value.description,born:this.fg.value.born.getTime(),active:this.fg.value.active,tags:this.fg.value.tags,slug:this.fg.value.slug,urls:e,rss_feed:this.fg.value.rss_feed}).subscribe({next:s=>{this.gs.log("[FANSUB_CREATE_SUCCESS]",s),this.submitted=!1,this.bs.idle(),this.router.navigateByUrl("/fansub")},error:s=>{this.gs.log("[FANSUB_CREATE_ERROR]",s,"error"),this.submitted=!1,this.bs.idle()}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(o.qu),t.Y36(u.F0),t.Y36(J.z),t.Y36(Y.Z),t.Y36(at.X),t.Y36(w.T),t.Y36(H._W),t.Y36(Q.e),t.Y36(R.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-fansub-create"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"fansub-banner","fansub-banner-1","align-items-center"],[1,"fansub-banner","fansub-banner-2","align-items-center"],[2,"margin-top","160px"],[1,"row","px-3"],[1,"col-12"],[3,"formGroup","submit"],[1,"row","mt-3","mb-3"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"text-bifeldy"],[1,"row"],[1,"col-12","col-md-5","col-xl-4","p-3"],[1,"w-100","border",3,"src"],["appearance","outline",1,"pt-3","w-100",3,"color"],[1,"w-100",3,"disabled","accept","change"],["gambar",""],["matSuffix",""],[1,"px-3","w-100"],["class","col-12",4,"ngIf"],[1,"col-12","col-md-7","col-xl-8","pt-3"],["appearance","outline",1,"px-3","pt-3","w-100",3,"color"],["gambar_",""],["class","col-12 p-3",4,"ngIf"],["appearance","outline",1,"p-3","col-12","col-md-7",3,"color"],["matInput","","formControlName","name","placeholder","Fansub Jalanan"],[4,"ngIf"],["appearance","outline",1,"p-3","col-12","col-md-5",3,"color"],["matInput","","formControlName","slug","placeholder","Jalsub"],["class","text-info",4,"ngIf"],["formControlName","description",1,"p-3","w-100",3,"config"],["appearance","outline",1,"p-3","col-12","col-md-6",3,"color"],["matInput","","formControlName","born",3,"matDatepicker","placeholder","focus"],["matSuffix","",3,"for"],["disabled","false"],["kalender",""],["formControlName","active","placeholder","Aktif / Non-Aktif"],["value","0"],["value","1"],["align","end"],["appearance","outline",1,"p-3","col-12",3,"color"],["tag",""],["color","accent","selected","",3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","Label Tag / Kategori",3,"matChipInputSeparatorKeyCodes","matChipInputFor","matChipInputAddOnBlur","matChipInputTokenEnd"],["appearance","outline",1,"p-3","col-12","col-md-4",3,"color"],["matInput","","formControlName","web","placeholder","http://www.domain.id"],["matInput","","formControlName","facebook","placeholder","http://www.facebook.com"],["matInput","","formControlName","discord","placeholder","http://www.discord.gg"],["width","24px",3,"src"],["matInput","","formControlName","rss_feed","placeholder","http://my-site.blogspot.com/feeds/posts/default?alt=rss"],[1,"col"],[1,"col-12","col-md-3","pb-3"],["mat-stroked-button","","routerLink","../",1,"w-100",3,"disabled"],[1,"me-1"],["mat-flat-button","","color","accent","type","submit",1,"w-100",3,"disabled"],[1,"ms-1"],["mat-raised-button","","color","primary","type","button",1,"w-100",3,"disabled","click"],[1,"col-12","p-3"],[1,"text-info"],["color","accent","selected","",3,"removable","removed"],["matChipRemove",""]],template:function(e,s){1&e&&t.YNc(0,Wt,154,51,"div",0),2&e&&t.Q6J("ngIf",s.fg)},directives:[p.O5,B.t,o._Y,o.JL,o.sg,x.KE,x.hX,D.Yh,K.Hw,x.R9,x.TO,I.lW,st.Nt,o.Fj,o.JJ,o.u,Z.s6,k.hl,k.nW,k.Mq,it.gD,nt.ey,x.bx,U.qn,p.sg,U.HS,U.qH,U.oH,I.zs,u.yS],pipes:[p.uU],styles:[".fansub-banner[_ngcontent-%COMP%]{height:128px;width:100%;background-size:cover;background-position:center;background-repeat:no-repeat;filter:blur(5px) brightness(100%);opacity:.5}.fansub-banner-1[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.fansub-banner-2[_ngcontent-%COMP%]{position:absolute;top:128px;left:0}.fansub-info[_ngcontent-%COMP%]{position:relative;height:256px;z-index:1}"]}),i})(),canActivate:[y.a],data:{title:"Fansub - Buat Baru",description:"Halaman Menambahkan Fansub Baru",keywords:"Create Fansub",roles:[h.yS.ADMIN,h.yS.MODERATOR,h.yS.FANSUBBER,h.yS.USER]}},{path:":fansubSlug",children:[{path:"",pathMatch:"full",component:yt},{path:"edit",component:(()=>{class i{constructor(e,s,a,n,g,c,d,A,C,E){this.fb=e,this.router=s,this.bs=a,this.activatedRoute=n,this.pi=g,this.imgbb=c,this.fansub=d,this.toast=A,this.as=C,this.gs=E,this.fansubSlug="",this.submitted=!1,this.image=null,this.imageErrorText=null,this.image_url="/assets/img/form-no-image.png",this.image_url_original=null,this.cover=null,this.coverErrorText=null,this.cover_url="/assets/img/form-no-image.png",this.cover_url_original=null,this.urls=[],this.currentDate=new Date,this.gambar=null,this.gambar_=null,this.subsActRoute=null,this.subsFansubUpdate=null,this.subsFansubDetail=null,this.subsImgbb=null,this.subsCekFansubSlug=null,this.subsFansubMemberGet=null,this.slugInfo="",this.editable=!0,this.approvedMembers=[],this.gs.bannerImg="/assets/img/fansub-banner.png",this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get GS(){return this.gs}ngOnDestroy(){var e,s,a,n,g;null===(e=this.subsActRoute)||void 0===e||e.unsubscribe(),null===(s=this.subsFansubUpdate)||void 0===s||s.unsubscribe(),null===(a=this.subsFansubDetail)||void 0===a||a.unsubscribe(),null===(n=this.subsImgbb)||void 0===n||n.unsubscribe(),null===(g=this.subsFansubMemberGet)||void 0===g||g.unsubscribe()}ngOnInit(){this.pi.updatePageMetaData("Fansub - Ubah Data","Halaman Pembaharuan Data Fansub","Ubah Fansub"),this.gs.isBrowser&&(this.fansubSlug=this.activatedRoute.snapshot.paramMap.get("fansubSlug"),this.as.currentUserValue&&this.as.currentUserValue.verified?(this.bs.busy(),this.subsFansubDetail=this.fansub.getFansub(this.fansubSlug).subscribe({next:e=>{this.gs.log("[FANSUB_DETAIL_SUCCESS]",e),this.bs.idle(),this.editable=e.result.editable,this.editable?(this.bs.busy(),this.subsFansubMemberGet=this.fansub.getFansubMember(this.fansubSlug).subscribe({next:s=>{this.gs.log("[FANSUB_EDIT_MEMBER_LIST_SUCCESS]",s),this.bs.idle(),this.approvedMembers=[];for(const n of s.results)n.approved&&this.approvedMembers.push(n);this.approvedMembers.findIndex(n=>n.user_.id===this.as.currentUserValue.id)>=0||this.as.currentUserValue.role===h.yS.ADMIN||this.as.currentUserValue.role===h.yS.MODERATOR||this.as.currentUserValue.id===e.result.user_.id?this.initForm(e.result):(this.toast.warning("Anda Harus Menjadi Anggota Untuk Mengubah Data!","Whoops!"),this.router.navigateByUrl(`/fansub/${this.fansubSlug}`))},error:s=>{this.gs.log("[FANSUB_EDIT_MEMBER_LIST_ERROR]",s,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:`/fansub/${this.fansubSlug}`}})}})):(this.toast.warning("Data Fansub Ini Tidak Dapat Diubah","Whoops!"),this.router.navigateByUrl(`/fansub/${this.fansubSlug}`))},error:e=>{this.gs.log("[FANSUB_DETAIL_ERROR]",e,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:`/fansub/${this.fansubSlug}`}})}})):(this.toast.warning("Khusus Pengguna Terverifikasi","Whoops!"),this.router.navigate(["/verify"],{queryParams:{returnUrl:`/fansub/${this.fansubSlug}`}})))}initForm(e){this.image_url=e.image_url,this.image_url_original=this.image_url,this.cover_url=e.cover_url,this.cover_url_original=this.cover_url;const s=e.urls,a=s.find(d=>"web"===d.name),n=s.find(d=>"facebook"===d.name),g=s.find(d=>"discord"===d.name),c=!0===e.active?"1":"0";this.fg=this.fb.group({name:[e.name,o.kI.compose([o.kI.required,o.kI.pattern(m.t.regexEnglishKeyboardKeys)])],description:[e.description,o.kI.compose([o.kI.required,o.kI.pattern(m.t.regexEnglishKeyboardKeys)])],born:[e.born,o.kI.compose([o.kI.required,o.kI.pattern(m.t.regexEnglishKeyboardKeys)])],active:[c,o.kI.compose([o.kI.required,o.kI.pattern(m.t.regexEnglishKeyboardKeys)])],slug:[{value:e.slug,disabled:e.dns_id},o.kI.compose([o.kI.required,o.kI.pattern(/^[a-zA-Z-]*$/)])],tags:[e.tags,o.kI.compose([])],image:[null,o.kI.compose([o.kI.pattern(m.t.regexUrl)])],cover:[null,o.kI.compose([o.kI.pattern(m.t.regexUrl)])],web:[(null==a?void 0:a.url)||null,o.kI.compose([o.kI.pattern(m.t.regexUrl)])],facebook:[(null==n?void 0:n.url)||null,o.kI.compose([o.kI.pattern(m.t.regexUrl)])],discord:[(null==g?void 0:g.url)||null,o.kI.compose([o.kI.pattern(m.t.regexUrl)])],rss_feed:[e.rss_feed,o.kI.compose([o.kI.pattern(m.t.regexUrl)])]}),this.subsCekFansubSlug=this.fg.get("slug").valueChanges.pipe((0,$.b)(500),(0,W.x)(),(0,X.b)(()=>this.slugInfo="Mengecek ..."),(0,tt.w)(d=>this.fansub.cekSlug({slug:d})),(0,et.X)(-1)).subscribe({next:d=>{this.gs.log("[FANSUB_CEK_SLUG_RESULT]",d),this.slugInfo=d.result.message}})}addTag(e){const s=e.input,a=e.value;(a||"").trim()&&this.fg.value.tags.push(a.trim()),s&&(s.value=""),this.fg.controls.tags.patchValue(this.fg.value.tags.filter((n,g,c)=>c.findIndex(d=>d===n)===g)),this.fg.controls.tags.markAsDirty()}removeTag(e){const s=this.fg.value.tags.indexOf(e);s>=0&&this.fg.value.tags.splice(s,1)}uploadImage(e,s){this.gambar=s,this.image=null,this.fg.controls.image.patchValue(null),this.fg.controls.image.markAsPristine();const a=e.target.files[0];try{const n=new FileReader;n.readAsDataURL(a),n.onload=g=>{if(this.gs.log("[IMAGE_SELECTED]",g),a.size<=m.t.fileSizeImageLimit){const c=this.gs.document.createElement("img");c.onload=()=>{this.image=a,this.image_url=n.result.toString()},c.src=n.result.toString(),this.imageErrorText=null}else this.image=null,this.image_url="/assets/img/form-image-error.png",this.imageErrorText=`Ukuran Upload Melebihi Batas ${m.t.fileSizeImageLimit} Bytes!`,this.gambar.clear(e)}}catch(n){this.image=null,this.imageErrorText=null,this.image_url=this.image_url_original,this.gambar.clear(e)}}submitImage(){this.submitted=!0,this.subsImgbb=this.imgbb.uploadImage({file:this.image}).subscribe({next:e=>{this.gs.log("[IMAGE_SUCCESS]",e),this.fg.controls.image.patchValue(e.result.url),this.fg.controls.image.markAsDirty(),this.submitted=!1},error:e=>{this.gs.log("[IMAGE_ERROR]",e,"error"),this.fg.controls.image.patchValue(null),this.fg.controls.image.markAsPristine(),this.submitted=!1}})}uploadCover(e,s){this.gambar_=s,this.cover=null,this.fg.controls.cover.patchValue(null),this.fg.controls.cover.markAsPristine();const a=e.target.files[0];try{const n=new FileReader;n.readAsDataURL(a),n.onload=g=>{if(this.gs.log("[COVER_SELECTED]",g),a.size<=m.t.fileSizeImageLimit){const c=this.gs.document.createElement("img");c.onload=()=>{this.cover=a,this.cover_url=n.result.toString()},c.src=n.result.toString(),this.coverErrorText=null}else this.cover=null,this.cover_url="/assets/img/form-image-error.png",this.coverErrorText=`Ukuran Upload Melebihi Batas ${m.t.fileSizeImageLimit} Bytes!`,this.gambar.clear(e)}}catch(n){this.cover=null,this.coverErrorText=null,this.cover_url=this.cover_url_original,this.gambar.clear(e)}}submitCover(){this.submitted=!0,this.subsImgbb=this.imgbb.uploadImage({file:this.cover}).subscribe({next:e=>{this.gs.log("[COVER_SUCCESS]",e),this.fg.controls.cover.patchValue(e.result.url),this.fg.controls.cover.markAsDirty(),this.submitted=!1},error:e=>{this.gs.log("[COVER_ERROR]",e,"error"),this.fg.controls.cover.patchValue(null),this.fg.controls.cover.markAsPristine(),this.submitted=!1}})}onSubmit(){this.bs.busy();const e=[];this.fg.value.web&&e.push({name:"web",url:this.fg.value.web}),this.fg.value.facebook&&e.push({name:"facebook",url:this.fg.value.facebook}),this.fg.value.discord&&e.push({name:"discord",url:this.fg.value.discord});const s=this.gs.getDirtyValues(this.fg);if("web"in s&&delete s.web,"facebook"in s&&delete s.facebook,"discord"in s&&delete s.discord,s.urls=e,this.gs.log("[FANSUB_EDIT_DIRTY]",s),this.submitted=!0,this.fg.invalid||0===e.length)return 0===e.length&&this.toast.warning("Harap Isi Salah Satu URL","Form Tidak lengkap (Web/FB/DC)"),this.submitted=!1,void this.bs.idle();this.subsFansubUpdate=this.fansub.updateFansub(this.fansubSlug,{...s}).subscribe({next:a=>{this.gs.log("[FANSUB_EDIT_SUCCESS]",a),this.submitted=!1,this.bs.idle(),this.router.navigateByUrl(`/fansub/${a.result.slug}`)},error:a=>{this.gs.log("[FANSUB_EDIT_ERROR]",a,"error"),this.submitted=!1,this.bs.idle()}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(o.qu),t.Y36(u.F0),t.Y36(J.z),t.Y36(u.gz),t.Y36(Y.Z),t.Y36(at.X),t.Y36(w.T),t.Y36(H._W),t.Y36(Q.e),t.Y36(R.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-fansub-edit"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"fansub-banner","fansub-banner-1","align-items-center"],[1,"fansub-banner","fansub-banner-2","align-items-center"],[2,"margin-top","160px"],[1,"row","px-3"],[1,"col-12"],[3,"formGroup","submit"],[1,"row","mt-3","mb-3"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"text-bifeldy"],[1,"row"],[1,"col-12","col-md-5","col-xl-4","p-3"],[1,"row","mb-3"],[1,"w-100","border",3,"src"],["appearance","outline",1,"pt-3","w-100",3,"color"],[1,"w-100",3,"disabled","accept","change"],["gambar",""],["matSuffix",""],[1,"px-3","w-100"],["class","col-12",4,"ngIf"],[1,"col-12","col-md-7","col-xl-8","pt-3"],["appearance","outline",1,"px-3","pt-3","w-100",3,"color"],["gambar_",""],["class","col-12 p-3",4,"ngIf"],["appearance","outline",1,"p-3","col-12","col-md-7",3,"color"],["matInput","","formControlName","name","placeholder","Fansub Jalanan"],[4,"ngIf"],["appearance","outline",1,"p-3","col-12","col-md-5",3,"color"],["matInput","","formControlName","slug","placeholder","Jalsub"],["class","text-info",4,"ngIf"],["formControlName","description",1,"p-3","w-100",3,"config"],["appearance","outline",1,"p-3","col-12","col-md-6",3,"color"],["matInput","","formControlName","born",3,"matDatepicker","placeholder","focus"],["matSuffix","",3,"for"],["disabled","false"],["kalender",""],["formControlName","active","placeholder","Aktif / Non-Aktif"],["value","0"],["value","1"],["align","end"],["appearance","outline",1,"p-3","col-12",3,"color"],["tag",""],["color","accent","selected","",3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","Label Tag / Kategori",3,"matChipInputSeparatorKeyCodes","matChipInputFor","matChipInputAddOnBlur","matChipInputTokenEnd"],["appearance","outline",1,"p-3","col-12","col-md-4",3,"color"],["matInput","","formControlName","web","placeholder","http://www.domain.id"],["matInput","","formControlName","facebook","placeholder","http://www.facebook.com"],["matInput","","formControlName","discord","placeholder","http://www.discord.gg"],["width","24px",3,"src"],["matInput","","formControlName","rss_feed","placeholder","http://my-site.blogspot.com/feeds/posts/default?alt=rss"],[1,"col"],[1,"col-12","col-md-3","pb-3"],["mat-stroked-button","","routerLink","../",1,"w-100",3,"disabled"],[1,"me-1"],["mat-flat-button","","color","accent","type","submit",1,"w-100",3,"disabled"],[1,"ms-1"],["mat-raised-button","","color","primary","type","button",1,"w-100",3,"disabled","click"],[1,"col-12","p-3"],[1,"text-info"],["color","accent","selected","",3,"removable","removed"],["matChipRemove",""]],template:function(e,s){1&e&&t.YNc(0,_e,154,51,"div",0),2&e&&t.Q6J("ngIf",s.fg)},directives:[p.O5,B.t,o._Y,o.JL,o.sg,x.KE,x.hX,D.Yh,K.Hw,x.R9,x.TO,I.lW,st.Nt,o.Fj,o.JJ,o.u,Z.s6,k.hl,k.nW,k.Mq,it.gD,nt.ey,x.bx,U.qn,p.sg,U.HS,U.qH,U.oH,I.zs,u.yS],pipes:[p.uU],styles:[".fansub-banner[_ngcontent-%COMP%]{height:128px;width:100%;background-size:cover;background-position:center;background-repeat:no-repeat;filter:blur(5px) brightness(100%);opacity:.5}.fansub-banner-1[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.fansub-banner-2[_ngcontent-%COMP%]{position:absolute;top:128px;left:0}.fansub-info[_ngcontent-%COMP%]{position:relative;height:256px;z-index:1}"]}),i})(),canActivate:[y.a],data:{title:"Fansub - Ubah Data",description:"Halaman Pembaharuan Data Fansub",keywords:"Ubah Fansub",roles:[h.yS.ADMIN,h.yS.MODERATOR,h.yS.FANSUBBER,h.yS.USER]}}]}];let xe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.ez,u.Bz.forChild(ve),q.m,_.L,T.$,v.P,f.m9,b.F,o.u5,o.UX,D.Ad,Z.UM,S.b,P.T]]}),i})()},7567:(O,F,l)=>{l.d(F,{Q:()=>P});var p=l(1125),u=l(5e3),o=l(8696),Z=l(9808),f=l(7238),D=l(5245);function h(_,v){if(1&_&&u._UZ(0,"h3",8),2&_){const b=u.oxw().$implicit;u.Q6J("innerHTML",b.text,u.oJD)}}function y(_,v){if(1&_&&(u.TgZ(0,"mat-expansion-panel",3)(1,"mat-expansion-panel-header")(2,"mat-panel-title",4)(3,"span",5),u._uU(4),u.qZA()(),u.TgZ(5,"mat-panel-description")(6,"mat-icon",6),u._uU(7),u.qZA()()(),u.YNc(8,h,1,1,"ng-template",7),u.qZA()),2&_){const b=v.$implicit,T=v.first,S=u.oxw(2);u.Q6J("expanded",S.GS.isDesktop&&T),u.xp6(3),u.s9C("matTooltip",b.tooltip),u.Q6J("matTooltipPosition","above"),u.xp6(1),u.hij(" ",b.title," "),u.xp6(3),u.Oqu(b.icon)}}function q(_,v){if(1&_&&(u.TgZ(0,"mat-accordion",1),u.YNc(1,y,9,5,"mat-expansion-panel",2),u.qZA()),2&_){const b=u.oxw();u.xp6(1),u.Q6J("ngForOf",b.panelData)}}let P=(()=>{class _{constructor(b){this.gs=b,this.panelData=[{title:"Title",icon:"warning",text:"Lorem ipsum ...",tooltip:"Info"}]}onResize(b){this.gs.onResize(b,"MATERIAL_EXPANSION_PANEL"),this.gs.isDesktop?this.accordion.openAll():this.accordion.closeAll()}get GS(){return this.gs}ngOnInit(){}}return _.\u0275fac=function(b){return new(b||_)(u.Y36(o.U))},_.\u0275cmp=u.Xpm({type:_,selectors:[["app-material-expansion-panel"]],viewQuery:function(b,T){if(1&b&&u.Gf(p.pp,5),2&b){let S;u.iGM(S=u.CRH())&&(T.accordion=S.first)}},hostBindings:function(b,T){1&b&&u.NdJ("resize",function(t){return T.onResize(t)},!1,u.Jf7)},inputs:{panelData:"panelData"},decls:1,vars:1,consts:[["class","example-headers-align","multi","",4,"ngIf"],["multi","",1,"example-headers-align"],[3,"expanded",4,"ngFor","ngForOf"],[3,"expanded"],[1,"font-weight-bold"],[3,"matTooltip","matTooltipPosition"],[1,"ms-auto"],["matExpansionPanelContent",""],[1,"m-0","text-justify",2,"white-space","pre-line !important",3,"innerHTML"]],template:function(b,T){1&b&&u.YNc(0,q,2,1,"mat-accordion",0),2&b&&u.Q6J("ngIf",T.panelData.length>0)},directives:[Z.O5,p.pp,Z.sg,p.ib,p.yz,p.yK,f.gM,p.u4,D.Hw,p.HS],styles:[""]}),_})()},6020:(O,F,l)=>{l.d(F,{$:()=>Z});var p=l(9808),u=l(210),o=l(5e3);let Z=(()=>{class f{}return f.\u0275fac=function(h){return new(h||f)},f.\u0275mod=o.oAB({type:f}),f.\u0275inj=o.cJS({imports:[[p.ez,u.m]]}),f})()},1217:(O,F,l)=>{l.d(F,{s:()=>p});var p=(()=>{return(u=p||(p={})).BIRU="#7289DA",u.UNGU="#3F51B5",u.HITAM="#343A40",u.ABU="#A9A9A9",u.MERAH="#DC3545",u.PINK="#FF4081",u.OREN="#F44336",u.KUNING="#FFC107",u.HIJAU="#28A745",p;var u})()}}]);