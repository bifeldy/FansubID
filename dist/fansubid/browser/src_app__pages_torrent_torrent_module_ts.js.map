{"version":3,"file":"src_app__pages_torrent_torrent_module_ts.js","mappings":"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AA,oDAAAA,GAAAA,uDAAAA,CAAAA,wDAAAA,GAAAA,uDAAAA,CAAAA,uEAAAA;AAAA;;;SAAdxG;AAAcyG,WAAdzG,cAAc;AAAA0G,cAFb;;;;;;;;;;;;ACrBd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,sBAAsB;AACxC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,eAAe;AACf;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;;AAEA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,QAAQ;AACR;AACA,uCAAuC,QAAQ;AAC/C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;;AAEA;AACA,SAAS,yBAAyB;AAClC;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,8DAA8D,YAAY;AAC1E;AACA,8DAA8D,YAAY;AAC1E;AACA,GAAG;AACH;;AAEA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AAA,oBAANP,MAAM;AAAA;AAAA;AAAA,KAAZ;;AAgBAd,EAAAA,aAAa,CAACsB,GAAd,CAAkBlB,IAAlB,EAAwBU,MAAxB;AACA,SAAOA,MAAP;AACH;;AACD9B,qDAAY,CAAEuC,QAAD,KAAe,EACxB,GAAGA,QADqB;AAExB3F,EAAAA,GAAG,EAAE,CAACuE,MAAD,EAASC,IAAT,EAAeoB,QAAf,KAA4BtB,SAAS,CAACC,MAAD,EAASC,IAAT,CAAT,IAA2BmB,QAAQ,CAAC3F,GAAT,CAAauE,MAAb,EAAqBC,IAArB,EAA2BoB,QAA3B,CAFpC;AAGxBC,EAAAA,GAAG,EAAE,CAACtB,MAAD,EAASC,IAAT,KAAkB,CAAC,CAACF,SAAS,CAACC,MAAD,EAASC,IAAT,CAAX,IAA6BmB,QAAQ,CAACE,GAAT,CAAatB,MAAb,EAAqBC,IAArB;AAH5B,CAAf,CAAD,CAAZ;;;;;;;;;;;;;;;;;;;;ACjFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEqG;;;;;;;;;;;ACxLrG;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qCAAqC,WAAW;;;;;;;;;;;ACRhD;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA,oCAAoC,yBAAyB,SAAS,yBAAyB","sources":["./src/app/_pages/torrent/torrent.component.ts","./src/app/_pages/torrent/torrent.component.html","./src/app/_pages/torrent/torrent.module.ts","./src/app/_shared/services/torrent.service.ts","./node_modules/events/events.js","./node_modules/idb-chunk-store/index.js","./node_modules/idb/build/esm/index.js","./node_modules/idb/build/esm/wrap-idb-value.js","./node_modules/queue-microtask/index.js","./node_modules/@babel/runtime/helpers/asyncToGenerator.js"],"sourcesContent":["import { Component, OnInit, ViewChild, OnDestroy } from '@angular/core';\nimport { animate, state, style, transition, trigger } from '@angular/animations';\nimport { Clipboard } from '@angular/cdk/clipboard';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\nimport { saveAs } from 'file-saver';\n\nimport { environment } from '../../../environments/app/environment';\n\nimport { GlobalService } from '../../_shared/services/global.service';\nimport { TorrentService } from '../../_shared/services/torrent.service';\nimport { DialogService } from '../../_shared/services/dialog.service';\nimport { StatsServerService } from '../../_shared/services/stats-server.service';\nimport { BusyService } from '../../_shared/services/busy.service';\nimport { ToastService } from '../../_shared/services/toast.service';\n\ndeclare const P2PGraph: any;\n\n@Component({\n  selector: 'app-torrent',\n  templateUrl: './torrent.component.html',\n  styleUrls: ['./torrent.component.css'],\n  animations: [\n    trigger('detailExpand', [\n      state('collapsed', style({ height: '0px', minHeight: '0' })),\n      state('expanded', style({ height: '*' })),\n      transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),\n    ])\n  ]\n})\nexport class TorrentComponent implements OnInit, OnDestroy {\n\n  @ViewChild(MatSort, { static: true }) sort: MatSort;\n\n  dataSource: MatTableDataSource<any>;\n\n  isProcessing = false;\n  magnetHash = null;\n\n  torrentsGraph: any = {\n    // 'magnet:!@#123...zxc': new Graph('magnet:!@#123...zxc')\n  };\n\n  tableDataColumn: string[] = [\n    'name',\n    'length',\n    'downloaded',\n    'uploaded',\n    'progress',\n    'downloadSpeed',\n    'uploadSpeed',\n    'timeRemaining',\n    'numPeers',\n    'ratio',\n  ];\n\n  files: any[] = [];\n\n  subsDialog = null;\n  subsUser = null;\n  subsTableDataRow = null;\n\n  timedOut = null;\n\n  constructor(\n    private snackBar: MatSnackBar,\n    private clipboard: Clipboard,\n    private gs: GlobalService,\n    private torrent: TorrentService,\n    private toast: ToastService,\n    private ds: DialogService,\n    private ss: StatsServerService,\n    private bs: BusyService\n  ) {\n    this.gs.bannerImg = null;\n    this.gs.sizeContain = false;\n    this.gs.bgRepeat = false;\n  }\n\n  get ENV(): any {\n    return environment;\n  }\n\n  get TORRENT(): TorrentService {\n    return this.torrent;\n  }\n\n  ngOnInit(): void {\n    this.dataSource = new MatTableDataSource();\n    if (this.gs.isBrowser) {\n      this.dataSource.sort = this.sort;\n      this.subsTableDataRow = this.torrent.tableDataRow.subscribe({\n        next: tableDataRow => {\n          this.dataSource.data = tableDataRow;\n          this.refreshAllGraph();\n        }\n      });\n      this.reviveTorrent();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.sort?.sortChange?.unsubscribe();\n    this.subsDialog?.unsubscribe();\n    this.subsUser?.unsubscribe();\n    this.subsTableDataRow?.unsubscribe();\n    if (this.timedOut) {\n      clearTimeout(this.timedOut);\n      this.timedOut = null;\n    }\n  }\n\n  copyMagnetHashToClipboard(magnetHash: string): void {\n    if (this.clipboard.copy(magnetHash)) {\n      this.snackBar.open('Magnet Link Hash :: Telah Di Salin Pada Clipboard', 'Ok');\n    }\n  }\n\n  toggleExpanded(row: any): void {\n    this.gs.log('[TORRENT_CLICKED]', row);\n    this.torrent.expandedRow = this.torrent.expandedRow === row ? null : row;\n    this.refreshGraph(row);\n  }\n\n  saveFile(file): void {\n    if (file.downloaded / file.length >= 1) {\n      this.bs.busy();\n      file.getBlobURL((err, blobUrl: string) => {\n        if (!err) {\n          this.gs.log('[TORRENT_FILE_BLOBURL]', blobUrl);\n          saveAs(blobUrl, file.name);\n          this.bs.idle();\n        }\n      });\n    } else {\n      this.toast.info('Berkas Sedang Dalam Proses Unduhan!', 'Yah, File Belum Siap!', null, true);\n    }\n  }\n\n  reviveTorrent(): void {\n    this.torrent.resurrectFiles((error, result) => {\n      this.refreshAllGraph();\n    });\n  }\n\n  resumeTorrent(torrent: any): void {\n    this.torrent.resumeTorrent(torrent.infoHash, error => {\n      this.refreshAllGraph();\n    });\n  }\n\n  pauseTorrent(torrent: any): void {\n    this.torrent.pauseTorrent(torrent.infoHash, error => {\n      if (!error) {\n        this.gs.log('[TORRENT_FILE_PAUSE_SUCCESS]', torrent.infoHash);\n      }\n      this.refreshAllGraph();\n    });\n  }\n\n  removeTorrent(torrent: any): void {\n    this.torrent.removeTorrent(torrent.infoHash, error => {\n      if (!error) {\n        this.gs.log('[TORRENT_FILE_REMOVE_SUCCESS]', torrent.infoHash);\n      }\n      this.torrentsGraph[torrent.infoHash].destroy();\n      delete this.torrentsGraph[torrent.infoHash];\n      this.refreshAllGraph();\n    });\n  }\n\n  downloadFiles(event: Event): void {\n    this.isProcessing = true;\n    this.torrent.downloadFiles(this.magnetHash, (error, result) => {\n      this.magnetHash = null;\n      this.isProcessing = false;\n      this.refreshAllGraph();\n    });\n  }\n\n  uploadFiles(torrentName: string): void {\n    this.gs.log('[TORRENT_SEED_USER_INFORMATION]', torrentName);\n    this.isProcessing = true;\n    this.torrent.uploadFiles(torrentName, this.files, (error, result) => {\n      this.isProcessing = false;\n      this.refreshAllGraph();\n    });\n  }\n\n  prepareFilesList(berkas: Array<any>) {\n    this.files = [];\n    for (const b of berkas) {\n      this.files.push(b);\n    }\n    const userInput = {\n      torrent_name: {\n        inputLabel: 'Nama Torrent',\n        inputPlaceholder: `Torrent # ${this.ss.mySocket.id} @ ${new Date().toUTCString()}`,\n        inputValue: null,\n        inputRequired: true\n      }\n    };\n    if (this.files.length === 1) {\n      userInput.torrent_name.inputPlaceholder = this.files[0].name;\n      this.uploadFiles(userInput.torrent_name.inputPlaceholder);\n    } else if (this.files.length > 1) {\n      this.subsDialog = this.ds.openInputDialog({\n        data: {\n          title: `Silahkan Masukkan Nama Untuk Torrent Kamu!`,\n          input: userInput,\n          confirmText: 'Ya, Mulai SEED',\n          cancelText: 'Tidak, Batal'\n        }\n      }).afterClosed().subscribe({\n        next: re => {\n          this.gs.log('[INPUT_DIALOG_CLOSED]', re);\n          if (re) {\n            this.uploadFiles(re.torrent_name);\n          }\n          this.subsDialog.unsubscribe();\n        }\n      });\n    }\n  }\n\n  onFileDropped($event) {\n    this.prepareFilesList($event);\n  }\n\n  fileBrowseHandler($event) {\n    this.prepareFilesList($event.target.files);\n  }\n\n  initGraph(torrent: any): void {\n    if (!this.torrentsGraph[torrent.infoHash] && this.dataSource.data.length > 0) {\n      this.gs.log('[TORRENT_WIRE_INIT_GRAPH]', torrent);\n      this.torrentsGraph[torrent.infoHash] = new P2PGraph(`.graphP2p-${torrent.infoHash}`);\n      this.torrentsGraph[torrent.infoHash].add({\n        id: (this.torrent.webClient as any).peerId,\n        me: true,\n        name: 'Kamu!'\n      });\n    }\n  }\n\n  addAllGraph(torrent: any): void {\n    this.gs.log('[TORRENT_WIRE_RELOAD_GRAPH]', torrent);\n    for (const w of torrent.wires) {\n      let wireName = w.peerId || 'Anonim!';\n      if (w.remoteAddress && w.remotePort) {\n        wireName = `${w.remoteAddress}:${w.remotePort}`;\n      }\n      this.torrentsGraph[torrent.infoHash].add({ id: w.peerId, name: wireName });\n      this.torrentsGraph[torrent.infoHash].connect((this.torrent.webClient as any).peerId, w.peerId);\n    }\n  }\n\n  deleteAllGraph(torrent: any): void {\n    this.gs.log('[TORRENT_WIRE_DELETE_GRAPH]', torrent);\n    const torrentWireList = this.torrentsGraph[torrent.infoHash].list().filter(w => w.id !== (this.torrent.webClient as any).peerId);\n    for (const w of torrentWireList) {\n      this.torrentsGraph[torrent.infoHash].disconnect((this.torrent.webClient as any).peerId, w.id);\n      this.torrentsGraph[torrent.infoHash].remove(w.id);\n    }\n  }\n\n  refreshGraph(torrent: any): void {\n    this.gs.log('[TORRENT_WIRE_REFRESH_GRAPH]', torrent);\n    if (this.torrentsGraph[torrent.infoHash]) {\n      this.deleteAllGraph(torrent);\n      this.addAllGraph(torrent);\n    } else {\n      this.initGraph(torrent);\n    }\n  }\n\n  refreshAllGraph(): void {\n    for (const d of this.dataSource.data) {\n      this.timedOut = setTimeout(() => {\n        this.refreshGraph(d);\n      }, 1234);\n    }\n  }\n\n}\n","<div appDragDrop class=\"h-100\" (fileDropped)=\"onFileDropped($event)\">\n\n  <!-- Notification -->\n  <app-notifications></app-notifications>\n\n  <!-- Content -->\n  <div class=\"container\">\n\n    <!-- Detail -->\n    <div class=\"row pb-3 px-0\">\n      <div class=\"col-12\">\n        <div class=\"row\">\n          <div class=\"col-12 sticky-top bg-bifeldy\">\n            <h2 class=\"pt-3 border-bottom-dotted\">\n              <b class=\"text-bifeldy\">Web-SocketRTC Torrent</b>\n            </h2>\n          </div>\n          <div class=\"col-12\">\n\n            <!-- Input Form Filter -->\n            <mat-form-field hintLabel=\"Isi Lalu Tekan 'Enter' Untuk Mencari Torrent ...\" class=\"col-12 col-md-6 col-lg-4 px-3 mb-3\" [color]=\"'accent'\">\n              <mat-label>Unduh Dari Info Hash / Magnet URI</mat-label>\n              <input matInput #input placeholder=\"Ex. magnet:123qwe...!@#\" (keyup.enter)=\"downloadFiles($event)\" [(ngModel)]=\"magnetHash\" [disabled]=\"isProcessing\" />\n              <mat-icon matSuffix>cloud_download</mat-icon>\n              <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isProcessing\"></mat-progress-bar>\n            </mat-form-field>\n\n            <!-- Table -->\n            <div class=\"row mx-2\">\n              <div class=\"col-12\" style=\"overflow-x: auto;\">\n                <table mat-table matSort multiTemplateDataRows [dataSource]=\"dataSource\" class=\"bg-transparent\">\n\n                  <!-- Content Row -->\n                  <ng-container matColumnDef=\"{{ tdc }}\" *ngFor=\"let tdc of tableDataColumn\">\n                    <th mat-header-cell *matHeaderCellDef class=\"px-3 text-center\" mat-sort-header>\n                      <h3 class=\"m-0\">\n                        <span [style.color]=\"'#ff4081'\" *ngIf=\"tdc.toUpperCase() === 'NAME'\">🔖 NAME</span>\n                        <span [style.color]=\"'#ff4081'\" *ngIf=\"tdc.toUpperCase() === 'LENGTH'\">💾 SIZE</span>\n                        <span [style.color]=\"'#ff4081'\" *ngIf=\"tdc.toUpperCase() === 'DOWNLOADED'\">💿 DOWNLOADED</span>\n                        <span [style.color]=\"'#ff4081'\" *ngIf=\"tdc.toUpperCase() === 'UPLOADED'\">📀 UPLOADED</span>\n                        <span [style.color]=\"'#ff4081'\" *ngIf=\"tdc.toUpperCase() === 'PROGRESS'\">🔄 PROGRESS</span>\n                        <span [style.color]=\"'#ff4081'\" *ngIf=\"tdc.toUpperCase() === 'DOWNLOADSPEED'\">🔽 SPEED</span>\n                        <span [style.color]=\"'#ff4081'\" *ngIf=\"tdc.toUpperCase() === 'UPLOADSPEED'\">🔼 SPEED</span>\n                        <span [style.color]=\"'#ff4081'\" *ngIf=\"tdc.toUpperCase() === 'TIMEREMAINING'\">🕑 ~ETA.</span>\n                        <span [style.color]=\"'#ff4081'\" *ngIf=\"tdc.toUpperCase() === 'NUMPEERS'\">🧲 PEERS</span>\n                        <span [style.color]=\"'#ff4081'\" *ngIf=\"tdc.toUpperCase() === 'RATIO'\">🌐 RATIO</span>\n                      </h3>\n                    </th>\n                    <td mat-cell *matCellDef=\"let row\" class=\"px-3 text-center\" style=\"cursor: pointer;\">\n                      <h3 class=\"m-0 {{ tdc.toUpperCase() === 'NAME' ? 'text-start' : '' }}\">\n                        <span *ngIf=\"tdc.toUpperCase() === 'NAME'\">{{ row[tdc] }}</span>\n                        <span *ngIf=\"tdc.toUpperCase() === 'LENGTH'\">{{ row[tdc] | bytes }}</span>\n                        <span *ngIf=\"tdc.toUpperCase() === 'DOWNLOADED'\">{{ row[tdc] | bytes }}</span>\n                        <span *ngIf=\"tdc.toUpperCase() === 'UPLOADED'\">{{ row[tdc] | bytes }}</span>\n                        <span *ngIf=\"tdc.toUpperCase() === 'PROGRESS'\">{{ row['downloaded'] / row['length'] * 100 | number:'1.2-2' }} %</span>\n                        <span *ngIf=\"tdc.toUpperCase() === 'DOWNLOADSPEED'\">{{ row[tdc] | bytes }}/s</span>\n                        <span *ngIf=\"tdc.toUpperCase() === 'UPLOADSPEED'\">{{ row[tdc] | bytes }}/s</span>\n                        <span *ngIf=\"tdc.toUpperCase() === 'TIMEREMAINING'\">{{ row[tdc] <= 0 ? 'COMPLETED' : (row[tdc] / 1000 | number:'1.0-0') + ' s' }}</span>\n                        <span *ngIf=\"tdc.toUpperCase() === 'NUMPEERS'\">{{ row[tdc] }}</span>\n                        <span *ngIf=\"tdc.toUpperCase() === 'RATIO'\">{{ row[tdc] | number:'1.4-4' }}</span>\n                      </h3>\n                    </td>\n                  </ng-container>\n\n                  <!-- Expanded Content Row -->\n                  <ng-container matColumnDef=\"expandedDetail\">\n                    <td mat-cell *matCellDef=\"let row\" [attr.colspan]=\"tableDataColumn.length\">\n                      <div class=\"element-detail\" [@detailExpand]=\"row === TORRENT.expandedRow ? 'expanded' : 'collapsed'\">\n                        <div class=\"py-3 row\">\n                          <div class=\"col-3\">\n                            <div class=\"p2p-graph graphP2p-{{ row.infoHash }}\"></div>\n                          </div>\n                          <div class=\"col-9\">\n                            <p class=\"px-2 text-truncate\" *ngIf=\"row.infoHash\">\n                              Info Hash ::\n                              <span class=\"text-success\">\n                                {{ row.infoHash }}\n                              </span>\n                            </p>\n                            <p class=\"px-2 text-truncate\" *ngIf=\"row.magnetURI\">\n                              Magnet URI ::\n                              <span class=\"text-primary text-decoration-none\" matTooltip=\"Klik Untuk Menyalin!\" (click)=\"copyMagnetHashToClipboard(row.magnetURI)\">\n                                {{ row.magnetURI }}\n                              </span>\n                            </p>\n                            <div class=\"px-2 text-truncate\">\n                              Announce Trackers ::\n                              <ul class=\"text-success m-0\">\n                                <li *ngFor=\"let a of row.announce\">\n                                  {{ a }}\n                                </li>\n                              </ul>\n                            </div>\n                            <div class=\"p-2\">\n                              <button type=\"button\" mat-stroked-button class=\"m-1 text-warning\" (click)=\"refreshGraph(row)\">\n                                <mat-icon class=\"me-1\">refresh</mat-icon>\n                                Refresh Graph\n                              </button>\n                              <button type=\"button\" mat-stroked-button class=\"m-1 text-warning\" (click)=\"removeTorrent(row)\">\n                                <mat-icon class=\"me-1\">delete_outline</mat-icon>\n                                Remove\n                              </button>\n                              <button type=\"button\" mat-stroked-button class=\"m-1 text-warning\" (click)=\"resumeTorrent(row)\" *ngIf=\"row.paused\">\n                                <mat-icon class=\"me-1\">play_arrow</mat-icon>\n                                Resume\n                              </button>\n                              <button type=\"button\" mat-stroked-button class=\"m-1 text-warning\" (click)=\"pauseTorrent(row)\" *ngIf=\"!row.paused\">\n                                <mat-icon class=\"me-1\">pause</mat-icon>\n                                Pause\n                              </button>\n                            </div>\n                            <div class=\"px-2\">\n                              <div mat-subheader class=\"p-0\">Rincian Isi Berkas ✨</div>\n                              <mat-selection-list [multiple]=\"false\">\n                                <mat-list-option *ngFor=\"let f of row.files\" class=\"h-100\">\n                                  <mat-icon mat-list-icon class=\"ps-3\">file_present</mat-icon>\n                                  <div (click)=\"saveFile(f)\" style=\"cursor: pointer;\">\n                                    <span class=\"text-{{ f.downloaded / f.length >= 1 ? 'primary' : 'bifeldy' }}\">\n                                      {{ f.name }}\n                                    </span>\n                                    --\n                                    <span class=\"text-warning\">\n                                      {{ f.downloaded / f.length * 100 | number:'1.2-2' }} %\n                                    </span>\n                                    ::\n                                    <span class=\"text-success\">\n                                      {{ f.downloaded | bytes }} / {{ f.length | bytes }}\n                                    </span>\n                                  </div>\n                                </mat-list-option>\n                              </mat-selection-list>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </td>\n                  </ng-container>\n\n                  <tr mat-header-row *matHeaderRowDef=\"tableDataColumn\"></tr>\n                  <tr mat-row *matRowDef=\"let row; columns: tableDataColumn;\"\n                    class=\"element-row\" [class.expanded-row]=\"TORRENT.expandedRow === row\"\n                    (click)=\"toggleExpanded(row)\"></tr>\n                  <tr mat-row *matRowDef=\"let row; columns: ['expandedDetail']\" class=\"detail-row\"></tr>\n                  <tr class=\"mat-row\" *matNoDataRow>\n                    <td class=\"mat-cell text-center align-items-center p-0\" [attr.colspan]=\"tableDataColumn.length\"\n                      style=\"background-image: url('/assets/img/404/no-data.png'); background-size: contain; background-position: center; background-repeat: no-repeat; height: 256px;\">\n                      <div class=\"row align-items-center h-100\">\n                        <div class=\"col-8 mx-auto text-light text-center rounded py-3\" style=\"background-color: rgba(128, 128, 128, 0.875);\">\n                          <h3 class=\"m-0\">\n                            Tidak Ada Data ¯\\_(ツ)_/¯\n                          </h3>\n                        </div>\n                      </div>\n                    </td>\n                  </tr>\n                </table>\n              </div>\n              <div class=\"col-12\">\n                <marquee>Terhubung Dengan Tracker :: {{ ENV.torrent.trackerAnnounce.join(' :: ') }}</marquee>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n  \n  <input type=\"file\" #fileDropRef id=\"fileDropRef\" multiple\n  (change)=\"fileBrowseHandler($event)\" [disabled]=\"isProcessing\" style=\"visibility: hidden;\" />\n  \n  <button type=\"button\" (click)=\"fileDropRef.click()\" mat-fab color=\"warn\" class=\"me-3 mb-5 fab-button animate__animated animate__bounce animate__infinite animate__slow\" matTooltip=\"Seed Berkas\"\n  style=\"position: fixed; bottom: 0; right: 0;\" [disabled]=\"isProcessing\">\n  <mat-icon>cloud_upload</mat-icon>\n  </button>\n\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\n\nimport { TorrentComponent } from './torrent.component';\n\nimport { SharedMaterialModule } from '../../_shared/modules/shared-material.module';\n\nimport { CustomPipeModule } from '../../_shared/pipes/custom-pipe.module';\n\nimport { NotificationsModule } from '../../_shared/components/notifications/notifications.module';\nimport { MaterialChipModule } from '../../_shared/components/material-chip/material-chip.module';\n\nimport { CustomDirectivesModule } from '../../_shared/directives/custom-directive.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    pathMatch: 'full',\n    component: TorrentComponent\n  }\n];\n\n@NgModule({\n  declarations: [\n    TorrentComponent\n  ],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    FormsModule,\n    CustomDirectivesModule,\n    NotificationsModule,\n    SharedMaterialModule,\n    MaterialChipModule,\n    CustomPipeModule\n  ]\n})\nexport class TorrentModule { }\n","import idbChunkStore from 'idb-chunk-store';\r\nimport webTorrent from 'webtorrent';\r\n\r\nimport { Injectable } from '@angular/core';\r\n\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { Options, Instance, Torrent, TorrentOptions } from 'webtorrent';\r\nimport { Wire } from 'bittorrent-protocol';\r\nimport { openDB } from 'idb';\r\nimport { Buffer } from 'buffer'; \r\n\r\nimport { environment } from '../../../environments/app/environment';\r\n\r\nimport { GlobalService } from './global.service';\r\nimport { LocalStorageService } from './local-storage.service';\r\nimport { ApiService } from './api.service';\r\nimport { ToastService } from './toast.service';\r\n\r\ndeclare const WebTorrent: typeof webTorrent;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TorrentService {\r\n\r\n  trackerAnnounce = environment.torrent.trackerAnnounce;\r\n\r\n  clientOptions: Options = {\r\n    maxConns: 64,\r\n    tracker: {\r\n      announce: this.trackerAnnounce,\r\n      rtcConfig: {\r\n        iceServers: environment.torrent.iceServers\r\n      }\r\n    }\r\n  };\r\n\r\n  torrentsQueue: any = {\r\n    // 'magnet:!@#123...zxc': {\r\n    //   completed?: boolean;\r\n    //   indexedDb?: string;\r\n    //   infoHash?: string;\r\n    //   name?: string;\r\n    //   files?: any[];\r\n    // }\r\n  };\r\n\r\n  torrentOptions: TorrentOptions = {\r\n    announce: this.trackerAnnounce,\r\n    maxWebConns: 16,\r\n    store: idbChunkStore\r\n  };\r\n\r\n  webClient: Instance = null;\r\n  expandedRow: Torrent = null;\r\n\r\n  tableDataRowSubject: BehaviorSubject<Torrent[]> = new BehaviorSubject<Torrent[]>([]);\r\n  tableDataRow: Observable<Torrent[]> = this.tableDataRowSubject.asObservable();\r\n\r\n  error = null;\r\n  refCallback = null;\r\n\r\n  flagResurrected = false;\r\n\r\n  constructor(\r\n    private gs: GlobalService,\r\n    private api: ApiService,\r\n    private toast: ToastService,\r\n    private ls: LocalStorageService\r\n  ) {\r\n    if (this.gs.isBrowser) {\r\n      this.torrentsQueue = this.ls.getItem(this.gs.localStorageKeys.Torrents, true) || this.torrentsQueue;\r\n      if (WebTorrent.WEBRTC_SUPPORT) {\r\n        this.webClient = new WebTorrent(this.clientOptions);\r\n        this.gs.log('[TORRENT_CLIENT_WEB_MODE_INITIALIZED]', this.webClient);\r\n        this.handleWebClient();\r\n      } else {\r\n        this.toast.error('WebRTC Not Supported!', 'Whoops!', null, true);\r\n      }\r\n    }\r\n  }\r\n\r\n  private get tableDataRowValue(): Torrent[] {\r\n    return this.tableDataRowSubject?.value || [];\r\n  }\r\n\r\n  checkHealthOnTracker(torrentInfo: any): Observable<any> {\r\n    return this.api.postData(`/torrent`, torrentInfo);\r\n  }\r\n\r\n  handleWebClient(): void {\r\n    this.webClient.on('torrent', torrent => {\r\n      this.gs.log('[TORRENT_CLIENT_ADD_TORRENT_FILE]', torrent);\r\n      this.toast.info(torrent.infoHash, 'Woaw, Antrian Baru!', null, true);\r\n      this.tableDataRowValue.push(torrent);\r\n      this.tableDataRowSubject.next(this.tableDataRowValue);\r\n      if (this.refCallback) {\r\n        this.refCallback(null, torrent);\r\n      }\r\n    });\r\n    this.webClient.on('error', err => {\r\n      this.gs.log('[TORRENT_CLIENT_ERROR]', err, 'error');\r\n      this.toast.error(err.toString(), 'Whoops!', null, true);\r\n      this.error = err;\r\n      if (this.refCallback) {\r\n        this.refCallback(this.error, null);\r\n      }\r\n    });\r\n  }\r\n\r\n  handleWebTorrent(torrent: Torrent, callback): void {\r\n    torrent.on('done', () => {\r\n      this.gs.log('[TORRENT_FILE_DONE]', torrent);\r\n      this.toast.success(`Ada Torrent Yang Sudah Selesai Di Download`, 'Yeay, Selesai!', null, true);\r\n      this.torrentsQueue[torrent.infoHash].completed = true;\r\n      this.ls.setItem(this.gs.localStorageKeys.Torrents, this.torrentsQueue);\r\n      if (callback) {\r\n        callback(null, null);\r\n      }\r\n    });\r\n    torrent.on('warning', warn => {\r\n      this.gs.log('[TORRENT_FILE_WARNING]', warn);\r\n      this.toast.info(warn.toString(), 'Yuhuu!', null, true);\r\n      if (callback) {\r\n        callback(warn, null);\r\n      }\r\n    });\r\n    torrent.on('error', err => {\r\n      this.gs.log('[TORRENT_FILE_ERROR]', err, 'error');\r\n      this.toast.error(err.toString(), 'Whoops!', null, true);\r\n      if (callback) {\r\n        callback(err, null);\r\n      }\r\n    });\r\n  }\r\n\r\n  handleWebWire(wire: Wire, callback): any {\r\n    this.gs.log('[TORRENT_WIRE_CONNECT]', wire);\r\n    let wireName = wire.peerId || 'Unknown!';\r\n    if (wire['remoteAddress'] && wire['remotePort']) {\r\n      wireName = `${wire['remoteAddress']}:${wire['remotePort']}`;\r\n    }\r\n    wire.on('close', () => {\r\n      this.gs.log('[TORRENT_WIRE_DISCONNECT]', wireName);\r\n      if (callback) {\r\n        callback(null, wire);\r\n      }\r\n    });\r\n    if (callback) {\r\n      callback(null, wire);\r\n    }\r\n  }\r\n\r\n  resurrectFiles(callback): void {\r\n    if (!this.flagResurrected) {\r\n      this.flagResurrected = true;\r\n      for (const key in this.torrentsQueue) {\r\n        this.gs.log('[TORRENT_CLIENT_QUEUE_RESURRECT]', this.torrentsQueue[key]);\r\n        if (!this.torrentsQueue[key].completed) {\r\n          this.downloadFiles(this.torrentsQueue[key].infoHash, callback, ({\r\n            ...this.torrentOptions,\r\n            name: this.torrentsQueue[key].name\r\n          } as any));\r\n        } else {\r\n          openDB(this.torrentsQueue[key].indexedDb, 1).then(async db => {\r\n            const trx = db.transaction('chunks', 'readonly');\r\n            const store = trx.objectStore('chunks');\r\n            const uint8Array: Uint8Array[] = await store.getAll();\r\n            const buffer: Buffer = Buffer.concat(uint8Array);\r\n            const files: File[] = [];\r\n            for (const file of this.torrentsQueue[key].files) {\r\n              const tf: any = file;\r\n              files.push(\r\n                new File(\r\n                  [buffer.slice(tf.offset, tf.offset + tf.length)],\r\n                  tf.name\r\n                )\r\n              );\r\n            }\r\n            this.uploadFiles(this.torrentsQueue[key].name, files, callback);\r\n          }).catch(err => this.gs.log('[INDEXDB-OPEN_FAILED]', err, 'error'));\r\n        }\r\n      }\r\n    }\r\n    callback(null, null);\r\n  }\r\n\r\n  processTorrent(torrent: Torrent, completed: boolean, callback): void {\r\n    torrent.on('wire', wire => this.handleWebWire(wire, callback));\r\n    this.torrentsQueue[torrent.infoHash] = {\r\n      completed: completed,\r\n      indexedDb: torrent.name + ' - ' + torrent.infoHash.slice(0, 8),\r\n      infoHash: torrent.infoHash,\r\n      name: torrent.name,\r\n      files: []\r\n    };\r\n    for (const file of torrent.files) {\r\n      const tf: any = file;\r\n      this.torrentsQueue[torrent.infoHash].files.push({\r\n        name: tf.name,\r\n        offset: tf.offset,\r\n        length: tf.length\r\n      });\r\n    }\r\n    this.ls.setItem(this.gs.localStorageKeys.Torrents, this.torrentsQueue);\r\n    this.handleWebTorrent(torrent, callback);\r\n  }\r\n\r\n  downloadFiles(magnetHash: string, callback, opts = this.torrentOptions): void {\r\n    this.gs.log('[TORRENT_CLIENT_QUEUE_DOWNLOAD]', magnetHash);\r\n    this.refCallback = callback;\r\n    this.checkHealthOnTracker({\r\n      magnetHash,\r\n      trackTimeout: 1234\r\n    }).subscribe({\r\n      next: (res: any) => {\r\n        this.gs.log('[TORRENT_CLIENT_HEALTH_SUCCESS]', res.result);\r\n        if (res.result.seeds <= 0) {\r\n          this.toast.info('Tidak Ada Seeder!', 'Whoops!', null, true);\r\n          if (callback) {\r\n            callback(null, res.result);\r\n          }\r\n        } else {\r\n          this.webClient.add(magnetHash, opts, torrent => {\r\n            this.gs.log('[TORRENT_FILE_DOWNLOAD_READY]', torrent);\r\n            this.toast.info('Memulai Download ...', 'Download!', null, true);\r\n            this.processTorrent(torrent, false, callback);\r\n          });\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        this.gs.log('[TORRENT_CLIENT_HEALTH_ERROR]', err, 'error');\r\n        if (callback) {\r\n          callback(err, null);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  uploadFiles(torrentName: string, files: Array<File>, callback): void {\r\n    this.gs.log('[TORRENT_CLIENT_QUEUE_UPLOAD]', files);\r\n    this.gs.log('[TORRENT_CLIENT_QUEUE_UPLOAD]', torrentName);\r\n    this.refCallback = callback;\r\n    this.webClient.seed(files, ({\r\n      ...this.torrentOptions,\r\n      name: torrentName\r\n    } as any), torrent => {\r\n      this.gs.log('[TORRENT_FILE_SEED_READY]', torrent);\r\n      this.toast.info('Memulai Seeding ...', 'Seeding', null, true);\r\n      this.processTorrent(torrent, true, callback);\r\n    });\r\n  }\r\n\r\n  removeTorrent(torrentId, callback, saveLocalStorage = true): void {\r\n    this.tableDataRowSubject.next(this.tableDataRowValue.filter(el => el.infoHash !== torrentId));\r\n    this.webClient.remove(torrentId, {\r\n      destroyStore: true\r\n    }, err => {\r\n      if (err) {\r\n        this.gs.log('[TORRENT_FILE_REMOVE_ERROR]', err, 'error');\r\n      }\r\n      delete this.torrentsQueue[torrentId];\r\n      if (saveLocalStorage) {\r\n        this.ls.setItem(this.gs.localStorageKeys.Torrents, this.torrentsQueue);\r\n      }\r\n      if (callback) {\r\n        callback(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  pauseTorrent(torrentId, callback): void {\r\n    const torrent = this.webClient.get(torrentId);\r\n    if (torrent) {\r\n      torrent.pause();\r\n      if (callback) {\r\n        callback(torrent);\r\n      }\r\n    }\r\n  }\r\n\r\n  resumeTorrent(torrentId, callback): void {\r\n    const torrent = this.webClient.get(torrentId);\r\n    if (torrent) {\r\n      torrent.resume();\r\n      if (callback) {\r\n        callback(torrent);\r\n      }\r\n    }\r\n  }\r\n\r\n  removeAll(): void {\r\n    for (const t of this.webClient.torrents) {\r\n      this.removeTorrent(t.infoHash, error => {\r\n        if (!error) {\r\n          this.gs.log('[TORRENT_FILE_REMOVE_SUCCESS]', t.infoHash);\r\n        }\r\n      }, false);\r\n    }\r\n  }\r\n\r\n}\r\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","'use strict'\nconst idb = require('idb')\n\nconst EventEmitter = require('events').EventEmitter\nconst queueMicrotask = require('queue-microtask')\n\nclass Storage extends EventEmitter {\n  constructor (chunkLength, opts) {\n    if (!opts) opts = {}\n    super()\n\n    this.chunkLength = Number(chunkLength)\n    if (!this.chunkLength) throw new Error('First argument must be a chunk length')\n\n    this.closed = false\n    this.destroyed = false\n    this.length = Number(opts.length) || Infinity\n    this.name = opts.name || 'idb-chunk-store'\n\n    if (this.length !== Infinity) {\n      this.lastChunkLength = (this.length % this.chunkLength) || this.chunkLength\n      this.lastChunkIndex = Math.ceil(this.length / this.chunkLength) - 1\n    }\n\n    this.dbPromise = idb.openDB(this.name, undefined, {\n      upgrade: (db) => {\n        db.createObjectStore('chunks')\n      },\n      blocking: () => {\n        // Fires if the database is deleted from outside this Storage object\n        this.close()\n      },\n      terminated: () => {\n        this.closed = true\n        this.emit('error', new Error('Database unexpectedly closed'))\n      }\n    })\n  }\n\n  put (index, buf, cb = () => {}) {\n    if (this.closed) return queueMicrotask(() => cb(new Error('Storage is closed')))\n\n    const isLastChunk = (index === this.lastChunkIndex)\n    if (isLastChunk && buf.length !== this.lastChunkLength) {\n      return queueMicrotask(() => cb(new Error('Last chunk length must be ' + this.lastChunkLength)))\n    }\n    if (!isLastChunk && buf.length !== this.chunkLength) {\n      return queueMicrotask(() => cb(new Error('Chunk length must be ' + this.chunkLength)))\n    }\n\n    // Zero-copy coerce Buffer to Uint8Array\n    buf = new Uint8Array(buf.buffer, buf.byteOffset, buf.byteLength)\n\n    // If the backing buffer is larger, copy out only the relevant slice\n    // so extra data doesn't get saved to indexeddb\n    if (buf.byteOffset !== 0 || buf.byteLength !== buf.buffer.byteLength) {\n      buf = buf.slice()\n    }\n\n    ;(async () => {\n      try {\n        const db = await this.dbPromise\n        await db.put('chunks', buf, index)\n      } catch (err) {\n        cb(err)\n        return\n      }\n\n      cb(null)\n    })()\n  }\n\n  get (index, opts, cb = () => {}) {\n    if (typeof opts === 'function') return this.get(index, {}, opts)\n    if (!opts) opts = {}\n    if (this.closed) return queueMicrotask(() => cb(new Error('Storage is closed')))\n\n    ;(async () => {\n      let rawResult\n      try {\n        const db = await this.dbPromise\n        rawResult = await db.get('chunks', index)\n      } catch (err) {\n        cb(err)\n        return\n      }\n\n      // rawResult should be undefined if the chunk is not found,\n      // but some old browsers occasionally return null\n      if (rawResult == null) {\n        const err = new Error('Chunk not found')\n        err.notFound = true\n        cb(err)\n        return\n      }\n\n      let buf = Buffer.from(rawResult.buffer, rawResult.byteOffset, rawResult.byteLength)\n\n      const offset = opts.offset || 0\n      const len = opts.length || (buf.length - offset)\n\n      if (offset !== 0 || len !== buf.length) {\n        buf = buf.slice(offset, len + offset)\n      }\n\n      cb(null, buf)\n    })()\n  }\n\n  close (cb = () => {}) {\n    if (this.closed) return queueMicrotask(() => cb(new Error('Storage is closed')))\n    this.closed = true\n\n    ;(async () => {\n      try {\n        const db = await this.dbPromise\n        db.close()\n      } catch (err) {\n        cb(err)\n        return\n      }\n\n      cb(null)\n    })()\n  }\n\n  destroy (cb = () => {}) {\n    if (this.closed) return queueMicrotask(() => cb(new Error('Storage is closed')))\n    if (this.destroyed) return queueMicrotask(() => cb(new Error('Storage is destroyed')))\n    this.destroyed = true\n\n    this.close(async (err) => {\n      if (err) {\n        cb(err)\n        return\n      }\n\n      try {\n        await idb.deleteDB(this.name)\n      } catch (err) {\n        cb(err)\n        return\n      }\n\n      cb(null)\n    })\n  }\n}\nmodule.exports = Storage\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction));\n        });\n    }\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking)\n            db.addEventListener('versionchange', () => blocking());\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nlet promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask.bind(typeof window !== 'undefined' ? window : global)\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;"],"names":["idbChunkStore","BehaviorSubject","openDB","Buffer","environment","TorrentService","constructor","gs","api","toast","ls","torrent","trackerAnnounce","maxConns","tracker","announce","rtcConfig","iceServers","maxWebConns","store","tableDataRowSubject","asObservable","isBrowser","torrentsQueue","getItem","localStorageKeys","Torrents","WebTorrent","WEBRTC_SUPPORT","webClient","clientOptions","log","handleWebClient","error","tableDataRowValue","_a","value","checkHealthOnTracker","torrentInfo","postData","on","info","infoHash","push","next","refCallback","err","toString","handleWebTorrent","callback","success","completed","setItem","warn","handleWebWire","wire","wireName","peerId","resurrectFiles","flagResurrected","key","downloadFiles","torrentOptions","name","indexedDb","then","db","trx","transaction","objectStore","uint8Array","getAll","buffer","concat","files","file","tf","File","slice","offset","length","uploadFiles","catch","processTorrent","magnetHash","opts","trackTimeout","subscribe","res","result","seeds","add","torrentName","seed","removeTorrent","torrentId","saveLocalStorage","filter","el","remove","destroyStore","pauseTorrent","get","pause","resumeTorrent","resume","removeAll","t","torrents","i0","factory","providedIn","idb","require","EventEmitter","queueMicrotask","Storage","chunkLength","Number","Error","closed","destroyed","Infinity","lastChunkLength","lastChunkIndex","Math","ceil","dbPromise","undefined","upgrade","createObjectStore","blocking","close","terminated","emit","put","index","buf","cb","isLastChunk","Uint8Array","byteOffset","byteLength","rawResult","notFound","from","len","destroy","deleteDB","module","exports","w","wrap","r","replaceTraps","u","unwrap","version","blocked","request","indexedDB","open","openPromise","addEventListener","event","oldVersion","newVersion","deleteDatabase","readMethods","writeMethods","cachedMethods","Map","getMethod","target","prop","IDBDatabase","targetFuncName","replace","useIndex","isWrite","includes","IDBIndex","IDBObjectStore","prototype","method","storeName","args","tx","shift","Promise","all","done","set","oldTraps","receiver","has"],"sourceRoot":"webpack:///"}