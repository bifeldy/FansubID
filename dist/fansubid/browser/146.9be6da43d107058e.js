(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[146],{1146:(V,P,h)=>{"use strict";h.r(P),h.d(P,{TorrentModule:()=>$t});var p=h(9808),H=h(8406),O=h(3075),_=h(1777),B=h(4847),T=h(4999),R=h(4327),s=h(5934),n=h(5e3),L=h(7261);class S{constructor(w,o){this._document=o;const c=this._textarea=this._document.createElement("textarea"),g=c.style;g.position="fixed",g.top=g.opacity="0",g.left="-999em",c.setAttribute("aria-hidden","true"),c.value=w,this._document.body.appendChild(c)}copy(){const w=this._textarea;let o=!1;try{if(w){const c=this._document.activeElement;w.select(),w.setSelectionRange(0,w.value.length),o=this._document.execCommand("copy"),c&&c.focus()}}catch(c){}return o}destroy(){const w=this._textarea;w&&(w.remove(),this._textarea=void 0)}}let U=(()=>{class l{constructor(o){this._document=o}copy(o){const c=this.beginCopy(o),g=c.copy();return c.destroy(),g}beginCopy(o){return new S(o,this._document)}}return l.\u0275fac=function(o){return new(o||l)(n.LFG(p.K0))},l.\u0275prov=n.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var G=h(8696),z=h(5861),Z=h(9076),d=h.n(Z),m=h(1135),x=h(8202),I=h(3172),v=h(9731),k=h(6925),F=h(3379);let y=(()=>{class l{constructor(o,c,g,A){this.gs=o,this.api=c,this.toast=g,this.ls=A,this.trackerAnnounce=s.N.trackerAnnounce,this.clientOptions={maxConns:64,tracker:{announce:this.trackerAnnounce,rtcConfig:{iceServers:s.N.iceServers}}},this.torrentsQueue={},this.torrentOptions={announce:this.trackerAnnounce,maxWebConns:16,store:d()},this.webClient=null,this.expandedRow=null,this.tableDataRowSubject=new m.X([]),this.tableDataRow=this.tableDataRowSubject.asObservable(),this.error=null,this.refCallback=null,this.flagResurrected=!1,this.gs.isBrowser&&(this.torrentsQueue=this.ls.getItem(this.gs.localStorageKeys.Torrents,!0)||this.torrentsQueue,WebTorrent.WEBRTC_SUPPORT?(this.webClient=new WebTorrent(this.clientOptions),this.gs.log("[TORRENT_CLIENT_WEB_MODE_INITIALIZED]",this.webClient),this.handleWebClient()):this.toast.error("WebRTC Not Supported!","Whoops!",null,!0))}get tableDataRowValue(){var o;return(null===(o=this.tableDataRowSubject)||void 0===o?void 0:o.value)||[]}checkHealthOnTracker(o){return this.api.postData("/torrent",o)}handleWebClient(){this.webClient.on("torrent",o=>{this.gs.log("[TORRENT_CLIENT_ADD_TORRENT_FILE]",o),this.toast.info(o.infoHash,"Woaw, Antrian Baru!",null,!0),this.tableDataRowValue.push(o),this.tableDataRowSubject.next(this.tableDataRowValue),this.refCallback&&this.refCallback(null,o)}),this.webClient.on("error",o=>{this.gs.log("[TORRENT_CLIENT_ERROR]",o),this.toast.error(o.toString(),"Whoops!",null,!0),this.error=o,this.refCallback&&this.refCallback(this.error,null)})}handleWebTorrent(o,c){o.on("done",()=>{this.gs.log("[TORRENT_FILE_DONE]",o),this.toast.success("Ada Torrent Yang Sudah Selesai Di Download","Yeay, Selesai!",null,!0),this.torrentsQueue[o.infoHash].completed=!0,this.ls.setItem(this.gs.localStorageKeys.Torrents,this.torrentsQueue),c&&c(null,null)}),o.on("warning",g=>{this.gs.log("[TORRENT_FILE_WARNING]",g),this.toast.info(g.toString(),"Yuhuu!",null,!0),c&&c(g,null)}),o.on("error",g=>{this.gs.log("[TORRENT_FILE_ERROR]",g),this.toast.error(g.toString(),"Whoops!",null,!0),c&&c(g,null)})}handleWebWire(o,c){this.gs.log("[TORRENT_WIRE_CONNECT]",o);let g=o.peerId||"Unknown!";o.remoteAddress&&o.remotePort&&(g=`${o.remoteAddress}:${o.remotePort}`),o.on("close",()=>{this.gs.log("[TORRENT_WIRE_DISCONNECT]",g),c&&c(null,o)}),c&&c(null,o)}resurrectFiles(o){var c=this;if(!this.flagResurrected){this.flagResurrected=!0;for(const g in this.torrentsQueue)this.gs.log("[TORRENT_CLIENT_QUEUE_RESURRECT]",this.torrentsQueue[g]),this.torrentsQueue[g].completed?(0,x.openDB)(this.torrentsQueue[g].indexedDb,1).then(function(){var A=(0,z.Z)(function*(W){const Ot=yield W.transaction("chunks","readonly").objectStore("chunks").getAll(),Wt=I.lW.concat(Ot),Nt=[];for(const Qt of c.torrentsQueue[g].files){const Ct=Qt;Nt.push(new File([Wt.slice(Ct.offset,Ct.offset+Ct.length)],Ct.name))}c.uploadFiles(c.torrentsQueue[g].name,Nt,o)});return function(W){return A.apply(this,arguments)}}()).catch(A=>this.gs.log("[INDEXDB-OPEN_FAILED]",A,"error")):this.downloadFiles(this.torrentsQueue[g].infoHash,o,{...this.torrentOptions,name:this.torrentsQueue[g].name})}o(null,null)}processTorrent(o,c,g){o.on("wire",A=>this.handleWebWire(A,g)),this.torrentsQueue[o.infoHash]={completed:c,indexedDb:o.name+" - "+o.infoHash.slice(0,8),infoHash:o.infoHash,name:o.name,files:[]};for(const A of o.files)this.torrentsQueue[o.infoHash].files.push({name:A.name,offset:A.offset,length:A.length});this.ls.setItem(this.gs.localStorageKeys.Torrents,this.torrentsQueue),this.handleWebTorrent(o,g)}downloadFiles(o,c,g=this.torrentOptions){this.gs.log("[TORRENT_CLIENT_QUEUE_DOWNLOAD]",o),this.refCallback=c,this.checkHealthOnTracker({magnetHash:o,trackTimeout:1234}).subscribe({next:A=>{this.gs.log("[TORRENT_CLIENT_HEALTH_SUCCESS]",A.result),A.result.seeds<=0?(this.toast.info("Tidak Ada Seeder!","Whoops!",null,!0),c&&c(null,A.result)):this.webClient.add(o,g,W=>{this.gs.log("[TORRENT_FILE_DOWNLOAD_READY]",W),this.toast.info("Memulai Download ...","Download!",null,!0),this.processTorrent(W,!1,c)})},error:A=>{this.gs.log("[TORRENT_CLIENT_HEALTH_ERROR]",A,"error"),c&&c(A,null)}})}uploadFiles(o,c,g){this.gs.log("[TORRENT_CLIENT_QUEUE_UPLOAD]",c),this.gs.log("[TORRENT_CLIENT_QUEUE_UPLOAD]",o),this.refCallback=g,this.webClient.seed(c,{...this.torrentOptions,name:o},A=>{this.gs.log("[TORRENT_FILE_SEED_READY]",A),this.toast.info("Memulai Seeding ...","Seeding",null,!0),this.processTorrent(A,!0,g)})}removeTorrent(o,c,g=!0){this.tableDataRowSubject.next(this.tableDataRowValue.filter(A=>A.infoHash!==o)),this.webClient.remove(o,{destroyStore:!0},A=>{A&&this.gs.log("[TORRENT_FILE_REMOVE_ERROR]",A),delete this.torrentsQueue[o],g&&this.ls.setItem(this.gs.localStorageKeys.Torrents,this.torrentsQueue),c&&c(A)})}pauseTorrent(o,c){const g=this.webClient.get(o);g&&(g.pause(),c&&c(g))}resumeTorrent(o,c){const g=this.webClient.get(o);g&&(g.resume(),c&&c(g))}removeAll(){for(const o of this.webClient.torrents)this.removeTorrent(o.infoHash,c=>{c||this.gs.log("[TORRENT_FILE_REMOVE_SUCCESS]",o.infoHash)},!1)}}return l.\u0275fac=function(o){return new(o||l)(n.LFG(G.U),n.LFG(v.s),n.LFG(k.k),n.LFG(F.n))},l.\u0275prov=n.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var D=h(7845),N=h(8381),q=h(3e3);let X=(()=>{class l{constructor(){this.fileDropped=new n.vpe}onDragOver(o){o.preventDefault(),o.stopPropagation(),this.fileOver=!0}onDragLeave(o){o.preventDefault(),o.stopPropagation(),this.fileOver=!1}ondrop(o){o.preventDefault(),o.stopPropagation(),this.fileOver=!1;let c=o.dataTransfer.files;c.length>0&&this.fileDropped.emit(c)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=n.lG2({type:l,selectors:[["","appDragDrop",""]],hostVars:2,hostBindings:function(o,c){1&o&&n.NdJ("dragover",function(A){return c.onDragOver(A)})("dragleave",function(A){return c.onDragLeave(A)})("drop",function(A){return c.ondrop(A)}),2&o&&n.ekj("fileover",c.fileOver)},outputs:{fileDropped:"fileDropped"}}),l})();var tt=h(8616),K=h(7322),ot=h(7531),nt=h(5245),lt=h(5899),ut=h(7238),It=h(7423),j=h(4623),et=h(3626);function mt(l,w){1&l&&n._UZ(0,"mat-progress-bar",26)}function gt(l,w){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f516} NAME"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function _t(l,w){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f4be} SIZE"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function xt(l,w){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f4bf} DOWNLOADED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function yt(l,w){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f4c0} UPLOADED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function st(l,w){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f504} PROGRESS"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function ft(l,w){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f53d} SPEED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function Et(l,w){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f53c} SPEED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function Dt(l,w){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f551} ~ETA."),n.qZA()),2&l&&n.Udp("color","#ff4081")}function Tt(l,w){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f9f2} PEERS"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function at(l,w){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f310} RATIO"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function ct(l,w){if(1&l&&(n.TgZ(0,"th",30)(1,"h3",31),n.YNc(2,gt,2,2,"span",32),n.YNc(3,_t,2,2,"span",32),n.YNc(4,xt,2,2,"span",32),n.YNc(5,yt,2,2,"span",32),n.YNc(6,st,2,2,"span",32),n.YNc(7,ft,2,2,"span",32),n.YNc(8,Et,2,2,"span",32),n.YNc(9,Dt,2,2,"span",32),n.YNc(10,Tt,2,2,"span",32),n.YNc(11,at,2,2,"span",32),n.qZA()()),2&l){const o=n.oxw().$implicit;n.xp6(2),n.Q6J("ngIf","NAME"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","LENGTH"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","PROGRESS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","TIMEREMAINING"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","NUMPEERS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","RATIO"===o.toUpperCase())}}function Rt(l,w){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(o[c])}}function At(l,w){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,o[c]))}}function ht(l,w){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,o[c]))}}function Bt(l,w){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,o[c]))}}function bt(l,w){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"number"),n.qZA()),2&l){const o=n.oxw().$implicit;n.xp6(1),n.hij("",n.xi3(2,1,o.downloaded/o.length*100,"1.2-2")," %")}}function wt(l,w){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.hij("",n.lcZ(2,1,o[c]),"/s")}}function pt(l,w){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.hij("",n.lcZ(2,1,o[c]),"/s")}}function rt(l,w){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"number"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(o[c]<=0?"COMPLETED":n.xi3(2,1,o[c]/1e3,"1.0-0")+" s")}}function dt(l,w){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(o[c])}}function vt(l,w){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"number"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.xi3(2,1,o[c],"1.4-4"))}}function it(l,w){if(1&l&&(n.TgZ(0,"td",33)(1,"h3"),n.YNc(2,Rt,2,1,"span",34),n.YNc(3,At,3,3,"span",34),n.YNc(4,ht,3,3,"span",34),n.YNc(5,Bt,3,3,"span",34),n.YNc(6,bt,3,4,"span",34),n.YNc(7,wt,3,3,"span",34),n.YNc(8,pt,3,3,"span",34),n.YNc(9,rt,3,4,"span",34),n.YNc(10,dt,2,1,"span",34),n.YNc(11,vt,3,4,"span",34),n.qZA()()),2&l){const o=n.oxw().$implicit;n.xp6(1),n.Gre("m-0 ","NAME"===o.toUpperCase()?"text-start":"",""),n.xp6(1),n.Q6J("ngIf","NAME"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","LENGTH"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","PROGRESS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","TIMEREMAINING"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","NUMPEERS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","RATIO"===o.toUpperCase())}}function Ut(l,w){1&l&&(n.ynx(0,27),n.YNc(1,ct,12,10,"th",28),n.YNc(2,it,12,13,"td",29),n.BQk()),2&l&&n.s9C("matColumnDef",w.$implicit)}function r(l,w){if(1&l&&(n.TgZ(0,"p",41),n._uU(1," Info Hash :: "),n.TgZ(2,"span",52),n._uU(3),n.qZA()()),2&l){const o=n.oxw().$implicit;n.xp6(3),n.hij(" ",o.infoHash," ")}}function t(l,w){if(1&l){const o=n.EpF();n.TgZ(0,"p",41),n._uU(1," Magnet URI :: "),n.TgZ(2,"span",53),n.NdJ("click",function(){n.CHM(o);const g=n.oxw().$implicit;return n.oxw().copyMagnetHashToClipboard(g.magnetURI)}),n._uU(3),n.qZA()()}if(2&l){const o=n.oxw().$implicit;n.xp6(3),n.hij(" ",o.magnetURI," ")}}function e(l,w){if(1&l&&(n.TgZ(0,"li"),n._uU(1),n.qZA()),2&l){const o=w.$implicit;n.xp6(1),n.hij(" ",o," ")}}function i(l,w){if(1&l){const o=n.EpF();n.TgZ(0,"button",45),n.NdJ("click",function(){n.CHM(o);const g=n.oxw().$implicit;return n.oxw().resumeTorrent(g)}),n.TgZ(1,"mat-icon",46),n._uU(2,"play_arrow"),n.qZA(),n._uU(3," Resume "),n.qZA()}}function a(l,w){if(1&l){const o=n.EpF();n.TgZ(0,"button",45),n.NdJ("click",function(){n.CHM(o);const g=n.oxw().$implicit;return n.oxw().pauseTorrent(g)}),n.TgZ(1,"mat-icon",46),n._uU(2,"pause"),n.qZA(),n._uU(3," Pause "),n.qZA()}}function u(l,w){if(1&l){const o=n.EpF();n.TgZ(0,"mat-list-option",54)(1,"mat-icon",55),n._uU(2,"file_present"),n.qZA(),n.TgZ(3,"div",56),n.NdJ("click",function(){const A=n.CHM(o).$implicit;return n.oxw(2).saveFile(A)}),n.TgZ(4,"span"),n._uU(5),n.qZA(),n._uU(6," -- "),n.TgZ(7,"span",57),n._uU(8),n.ALo(9,"number"),n.qZA(),n._uU(10," :: "),n.TgZ(11,"span",52),n._uU(12),n.ALo(13,"bytes"),n.ALo(14,"bytes"),n.qZA()()()}if(2&l){const o=w.$implicit;n.xp6(4),n.Gre("text-",o.downloaded/o.length>=1?"primary":"bifeldy",""),n.xp6(1),n.hij(" ",o.name," "),n.xp6(3),n.hij(" ",n.xi3(9,7,o.downloaded/o.length*100,"1.2-2")," % "),n.xp6(4),n.AsE(" ",n.lcZ(13,10,o.downloaded)," / ",n.lcZ(14,12,o.length)," ")}}function f(l,w){if(1&l){const o=n.EpF();n.TgZ(0,"td",35)(1,"div",36)(2,"div",37)(3,"div",38),n._UZ(4,"div"),n.qZA(),n.TgZ(5,"div",39),n.YNc(6,r,4,1,"p",40),n.YNc(7,t,4,1,"p",40),n.TgZ(8,"div",41),n._uU(9," Announce Trackers :: "),n.TgZ(10,"ul",42),n.YNc(11,e,2,1,"li",43),n.qZA()(),n.TgZ(12,"div",44)(13,"button",45),n.NdJ("click",function(){const A=n.CHM(o).$implicit;return n.oxw().refreshGraph(A)}),n.TgZ(14,"mat-icon",46),n._uU(15,"refresh"),n.qZA(),n._uU(16," Refresh Graph "),n.qZA(),n.TgZ(17,"button",45),n.NdJ("click",function(){const A=n.CHM(o).$implicit;return n.oxw().removeTorrent(A)}),n.TgZ(18,"mat-icon",46),n._uU(19,"delete_outline"),n.qZA(),n._uU(20," Remove "),n.qZA(),n.YNc(21,i,4,0,"button",47),n.YNc(22,a,4,0,"button",47),n.qZA(),n.TgZ(23,"div",48)(24,"div",49),n._uU(25,"Rincian Isi Berkas \u2728"),n.qZA(),n.TgZ(26,"mat-selection-list",50),n.YNc(27,u,15,14,"mat-list-option",51),n.qZA()()()()()()}if(2&l){const o=w.$implicit,c=n.oxw();n.uIk("colspan",c.tableDataColumn.length),n.xp6(1),n.Q6J("@detailExpand",o===c.TORRENT.expandedRow?"expanded":"collapsed"),n.xp6(3),n.Gre("p2p-graph graphP2p-",o.infoHash,""),n.xp6(2),n.Q6J("ngIf",o.infoHash),n.xp6(1),n.Q6J("ngIf",o.magnetURI),n.xp6(4),n.Q6J("ngForOf",o.announce),n.xp6(10),n.Q6J("ngIf",o.paused),n.xp6(1),n.Q6J("ngIf",!o.paused),n.xp6(4),n.Q6J("multiple",!1),n.xp6(1),n.Q6J("ngForOf",o.files)}}function M(l,w){1&l&&n._UZ(0,"tr",58)}function Y(l,w){if(1&l){const o=n.EpF();n.TgZ(0,"tr",59),n.NdJ("click",function(){const A=n.CHM(o).$implicit;return n.oxw().toggleExpanded(A)}),n.qZA()}if(2&l){const o=w.$implicit,c=n.oxw();n.ekj("expanded-row",c.TORRENT.expandedRow===o)}}function Q(l,w){1&l&&n._UZ(0,"tr",60)}function J(l,w){if(1&l&&(n.TgZ(0,"tr",61)(1,"td",62)(2,"div",63)(3,"div",64)(4,"h3",31),n._uU(5," Tidak Ada Data \xaf\\_(\u30c4)_/\xaf "),n.qZA()()()()()),2&l){const o=n.oxw();n.xp6(1),n.uIk("colspan",o.tableDataColumn.length)}}const $=function(){return["expandedDetail"]};let Mt=(()=>{class l{constructor(o,c,g,A,W,Ft,Lt,Ot){this.snackBar=o,this.clipboard=c,this.gs=g,this.torrent=A,this.toast=W,this.ds=Ft,this.ss=Lt,this.bs=Ot,this.isProcessing=!1,this.magnetHash=null,this.torrentsGraph={},this.tableDataColumn=["name","length","downloaded","uploaded","progress","downloadSpeed","uploadSpeed","timeRemaining","numPeers","ratio"],this.files=[],this.subsDialog=null,this.subsUser=null,this.subsTableDataRow=null,this.timedOut=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get ENV(){return s.N}get TORRENT(){return this.torrent}ngOnInit(){this.dataSource=new T.by,this.gs.isBrowser&&(this.dataSource.sort=this.sort,this.subsTableDataRow=this.torrent.tableDataRow.subscribe({next:o=>{this.dataSource.data=o,this.refreshAllGraph()}}),this.reviveTorrent())}ngOnDestroy(){var o,c,g,A,W;null===(c=null===(o=this.sort)||void 0===o?void 0:o.sortChange)||void 0===c||c.unsubscribe(),null===(g=this.subsDialog)||void 0===g||g.unsubscribe(),null===(A=this.subsUser)||void 0===A||A.unsubscribe(),null===(W=this.subsTableDataRow)||void 0===W||W.unsubscribe(),this.timedOut&&(clearTimeout(this.timedOut),this.timedOut=null)}copyMagnetHashToClipboard(o){this.clipboard.copy(o)&&this.snackBar.open("Link Magnet Hash Berhasil Disalin!","Ok")}toggleExpanded(o){this.gs.log("[TORRENT_CLICKED]",o),this.torrent.expandedRow=this.torrent.expandedRow===o?null:o,this.refreshGraph(o)}saveFile(o){o.downloaded/o.length>=1?(this.bs.busy(),o.getBlobURL((c,g)=>{c||(this.gs.log("[TORRENT_FILE_BLOBURL]",g),(0,R.saveAs)(g,o.name),this.bs.idle())})):this.toast.info("Berkas Sedang Dalam Proses Unduhan!","Yah, File Belum Siap!",null,!0)}reviveTorrent(){this.torrent.resurrectFiles((o,c)=>{this.refreshAllGraph()})}resumeTorrent(o){this.torrent.resumeTorrent(o.infoHash,c=>{this.refreshAllGraph()})}pauseTorrent(o){this.torrent.pauseTorrent(o.infoHash,c=>{c||this.gs.log("[TORRENT_FILE_PAUSE_SUCCESS]",o.infoHash),this.refreshAllGraph()})}removeTorrent(o){this.torrent.removeTorrent(o.infoHash,c=>{c||this.gs.log("[TORRENT_FILE_REMOVE_SUCCESS]",o.infoHash),this.torrentsGraph[o.infoHash].destroy(),delete this.torrentsGraph[o.infoHash],this.refreshAllGraph()})}downloadFiles(o){this.isProcessing=!0,this.torrent.downloadFiles(this.magnetHash,(c,g)=>{this.magnetHash=null,this.isProcessing=!1,this.refreshAllGraph()})}uploadFiles(o){this.gs.log("[TORRENT_SEED_USER_INFORMATION]",o),this.isProcessing=!0,this.torrent.uploadFiles(o,this.files,(c,g)=>{this.isProcessing=!1,this.refreshAllGraph()})}prepareFilesList(o){this.files=[];for(const g of o)this.files.push(g);const c={torrent_name:{inputLabel:"Nama Torrent",inputPlaceholder:`Torrent # ${this.ss.mySocket.id} @ ${(new Date).toUTCString()}`,inputValue:null,inputRequired:!0}};1===this.files.length?(c.torrent_name.inputPlaceholder=this.files[0].name,this.uploadFiles(c.torrent_name.inputPlaceholder)):this.files.length>1&&(this.subsDialog=this.ds.openInputDialog({data:{title:"Silahkan Masukkan Nama Untuk Torrent Kamu!",input:c,confirmText:"Ya, Mulai SEED",cancelText:"Tidak, Batal"}}).afterClosed().subscribe({next:g=>{this.gs.log("[INPUT_DIALOG_CLOSED]",g),g&&this.uploadFiles(g.torrent_name),this.subsDialog.unsubscribe()}}))}onFileDropped(o){this.prepareFilesList(o)}fileBrowseHandler(o){this.prepareFilesList(o.target.files)}initGraph(o){!this.torrentsGraph[o.infoHash]&&this.dataSource.data.length>0&&(this.gs.log("[TORRENT_WIRE_INIT_GRAPH]",o),this.torrentsGraph[o.infoHash]=new P2PGraph(`.graphP2p-${o.infoHash}`),this.torrentsGraph[o.infoHash].add({id:this.torrent.webClient.peerId,me:!0,name:"Kamu!"}))}addAllGraph(o){this.gs.log("[TORRENT_WIRE_RELOAD_GRAPH]",o);for(const c of o.wires){let g=c.peerId||"Anonim!";c.remoteAddress&&c.remotePort&&(g=`${c.remoteAddress}:${c.remotePort}`),this.torrentsGraph[o.infoHash].add({id:c.peerId,name:g}),this.torrentsGraph[o.infoHash].connect(this.torrent.webClient.peerId,c.peerId)}}deleteAllGraph(o){this.gs.log("[TORRENT_WIRE_DELETE_GRAPH]",o);const c=this.torrentsGraph[o.infoHash].list().filter(g=>g.id!==this.torrent.webClient.peerId);for(const g of c)this.torrentsGraph[o.infoHash].disconnect(this.torrent.webClient.peerId,g.id),this.torrentsGraph[o.infoHash].remove(g.id)}refreshGraph(o){this.gs.log("[TORRENT_WIRE_REFRESH_GRAPH]",o),this.torrentsGraph[o.infoHash]?(this.deleteAllGraph(o),this.addAllGraph(o)):this.initGraph(o)}refreshAllGraph(){for(const o of this.dataSource.data)this.timedOut=setTimeout(()=>{this.refreshGraph(o)},1234)}}return l.\u0275fac=function(o){return new(o||l)(n.Y36(L.ux),n.Y36(U),n.Y36(G.U),n.Y36(y),n.Y36(k.k),n.Y36(D.x),n.Y36(N.R),n.Y36(q.z))},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-torrent"]],viewQuery:function(o,c){if(1&o&&n.Gf(B.YE,7),2&o){let g;n.iGM(g=n.CRH())&&(c.sort=g.first)}},decls:37,vars:13,consts:[["appDragDrop","",1,"h-100",3,"fileDropped"],[1,"container"],[1,"row","pb-3","px-0"],[1,"col-12"],[1,"row"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"text-bifeldy"],["hintLabel","Isi Lalu Tekan 'Enter' Untuk Mencari Torrent ...",1,"col-12","col-md-6","col-lg-4","px-3","mb-3",3,"color"],["matInput","","placeholder","Ex. magnet:123qwe...!@#",3,"ngModel","disabled","keyup.enter","ngModelChange"],["input",""],["matSuffix",""],["color","warn","mode","indeterminate",4,"ngIf"],[1,"row","mx-2"],[1,"col-12",2,"overflow-x","auto"],["mat-table","","matSort","","multiTemplateDataRows","",1,"bg-transparent",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","element-row",3,"expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","detail-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["type","file","id","fileDropRef","multiple","",2,"visibility","hidden",3,"disabled","change"],["fileDropRef",""],["mat-fab","","color","warn","matTooltip","Seed Berkas",1,"me-3","mb-5","fab-button","animate__animated","animate__bounce","animate__infinite","animate__slow",2,"position","fixed","bottom","0","right","0",3,"disabled","click"],["color","warn","mode","indeterminate"],[3,"matColumnDef"],["mat-header-cell","","class","px-3 text-center","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","px-3 text-center","style","cursor: pointer;",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"px-3","text-center"],[1,"m-0"],[3,"color",4,"ngIf"],["mat-cell","",1,"px-3","text-center",2,"cursor","pointer"],[4,"ngIf"],["mat-cell",""],[1,"element-detail"],[1,"py-3","row"],[1,"col-3"],[1,"col-9"],["class","px-2 text-truncate",4,"ngIf"],[1,"px-2","text-truncate"],[1,"text-success","m-0"],[4,"ngFor","ngForOf"],[1,"p-2"],["mat-stroked-button","",1,"m-1","text-warning",3,"click"],[1,"me-1"],["mat-stroked-button","","class","m-1 text-warning",3,"click",4,"ngIf"],[1,"px-2"],["mat-subheader","",1,"p-0"],[3,"multiple"],["class","h-100",4,"ngFor","ngForOf"],[1,"text-success"],["matTooltip","Klik Untuk Menyalin!",1,"text-primary","text-decoration-none",3,"click"],[1,"h-100"],["mat-list-icon","",1,"ps-3"],[2,"cursor","pointer",3,"click"],[1,"text-warning"],["mat-header-row",""],["mat-row","",1,"element-row",3,"click"],["mat-row","",1,"detail-row"],[1,"mat-row"],[1,"mat-cell","text-center","align-items-center","p-0",2,"background-image","url('/assets/img/404/no-data.png')","background-size","contain","background-position","center","background-repeat","no-repeat","height","256px"],[1,"row","align-items-center","h-100"],[1,"col-8","mx-auto","text-light","text-center","rounded","py-3",2,"background-color","rgba(128, 128, 128, 0.875)"]],template:function(o,c){if(1&o){const g=n.EpF();n.TgZ(0,"div",0),n.NdJ("fileDropped",function(W){return c.onFileDropped(W)}),n._UZ(1,"app-notifications"),n.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h2",6)(8,"b",7),n._uU(9,"Web-SocketRTC Torrent"),n.qZA()()(),n.TgZ(10,"div",3)(11,"mat-form-field",8)(12,"mat-label"),n._uU(13,"Unduh Dari Info Hash / Magnet URI"),n.qZA(),n.TgZ(14,"input",9,10),n.NdJ("keyup.enter",function(W){return c.downloadFiles(W)})("ngModelChange",function(W){return c.magnetHash=W}),n.qZA(),n.TgZ(16,"mat-icon",11),n._uU(17,"cloud_download"),n.qZA(),n.YNc(18,mt,1,0,"mat-progress-bar",12),n.qZA(),n.TgZ(19,"div",13)(20,"div",14)(21,"table",15),n.YNc(22,Ut,3,1,"ng-container",16),n.ynx(23,17),n.YNc(24,f,28,12,"td",18),n.BQk(),n.YNc(25,M,1,0,"tr",19),n.YNc(26,Y,1,2,"tr",20),n.YNc(27,Q,1,0,"tr",21),n.YNc(28,J,6,1,"tr",22),n.qZA()(),n.TgZ(29,"div",3)(30,"marquee"),n._uU(31),n.qZA()()()()()()()(),n.TgZ(32,"input",23,24),n.NdJ("change",function(W){return c.fileBrowseHandler(W)}),n.qZA(),n.TgZ(34,"button",25),n.NdJ("click",function(){return n.CHM(g),n.MAs(33).click()}),n.TgZ(35,"mat-icon"),n._uU(36,"cloud_upload"),n.qZA()()()}2&o&&(n.xp6(11),n.Q6J("color","accent"),n.xp6(3),n.Q6J("ngModel",c.magnetHash)("disabled",c.isProcessing),n.xp6(4),n.Q6J("ngIf",c.isProcessing),n.xp6(3),n.Q6J("dataSource",c.dataSource),n.xp6(1),n.Q6J("ngForOf",c.tableDataColumn),n.xp6(3),n.Q6J("matHeaderRowDef",c.tableDataColumn),n.xp6(1),n.Q6J("matRowDefColumns",c.tableDataColumn),n.xp6(1),n.Q6J("matRowDefColumns",n.DdM(12,$)),n.xp6(4),n.hij("Terhubung Dengan Tracker :: ",c.ENV.trackerAnnounce.join(" :: "),""),n.xp6(1),n.Q6J("disabled",c.isProcessing),n.xp6(2),n.Q6J("disabled",c.isProcessing))},directives:[X,tt.t,K.KE,K.hX,ot.Nt,O.Fj,O.JJ,O.On,nt.Hw,K.R9,p.O5,lt.pW,T.BZ,B.YE,p.sg,T.w1,T.fO,T.ge,B.nU,T.Dz,T.ev,ut.gM,It.lW,j.gs,j.Ub,j.vS,j.Nh,T.as,T.XQ,T.nj,T.Gk,T.Ee],pipes:[et.$,p.JJ],styles:[".p2p-graph[_ngcontent-%COMP%]{background-color:#8d8d8d80!important}tr.detail-row[_ngcontent-%COMP%]{height:0}tr.element-row[_ngcontent-%COMP%]:not(.expanded-row):hover{background-color:#ffffffdf}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.fileover[_ngcontent-%COMP%]{animation:shake 1s;animation-iteration-count:infinite}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}"],data:{animation:[(0,_.X$)("detailExpand",[(0,_.SB)("collapsed",(0,_.oB)({height:"0px",minHeight:"0"})),(0,_.SB)("expanded",(0,_.oB)({height:"*"})),(0,_.eR)("expanded <=> collapsed",(0,_.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),l})();var St=h(210),Pt=h(7355),Zt=h(8613),kt=h(4946),Ht=h(7956);const Gt=[{path:"",pathMatch:"full",component:Mt}];let $t=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=n.oAB({type:l}),l.\u0275inj=n.cJS({imports:[[p.ez,H.Bz.forChild(Gt),O.u5,Ht.C,Zt.F,St.m,kt.P,Pt.T]]}),l})()},4946:(V,P,h)=>{"use strict";h.d(P,{P:()=>_});var p=h(9808),H=h(210),O=h(5e3);let _=(()=>{class B{}return B.\u0275fac=function(R){return new(R||B)},B.\u0275mod=O.oAB({type:B}),B.\u0275inj=O.cJS({imports:[[p.ez,H.m]]}),B})()},8616:(V,P,h)=>{"use strict";h.d(P,{t:()=>S});var p=h(5e3),H=h(8406),O=h(8696),_=h(7140),B=h(9808),T=h(1861);function R(U,C){if(1&U&&p._UZ(0,"div",4),2&U){const E=p.oxw();p.Udp("background-size",E.GS.sizeContain?"contain":"cover")("background-image","url("+E.GS.bannerImg+")")("background-repeat",E.GS.bgRepeat?"repeat-x":"no-repeat")("height","/home"===E.ROUTER.url||"/berkas"===E.ROUTER.url?"192px":"128px")("background-position-y","/berkas"===E.ROUTER.url?"22.5%":"")}}function s(U,C){if(1&U&&(p.TgZ(0,"strong",10),p._uU(1," -- "),p.TgZ(2,"i")(3,"a",11),p._uU(4),p.qZA()()()),2&U){const E=p.oxw().$implicit;p.xp6(3),p.MGl("routerLink","/user/",E.notifCreator,""),p.xp6(1),p.hij(" ",E.notifCreator," ")}}function n(U,C){if(1&U){const E=p.EpF();p.TgZ(0,"button",12),p.NdJ("click",function(){p.CHM(E);const G=p.oxw().$implicit;return p.oxw().removeNotif(G.notifData.id)}),p.qZA()}}function L(U,C){if(1&U&&(p.TgZ(0,"div",5)(1,"div")(2,"strong",6),p._uU(3),p.qZA(),p._UZ(4,"span",7),p.ALo(5,"safeInnerHtml"),p.YNc(6,s,5,2,"strong",8),p.YNc(7,n,1,0,"button",9),p.qZA()()),2&U){const E=C.$implicit;p.xp6(1),p.Gre("alert alert-",E.notifData.type," alert-dismissible fade show"),p.xp6(2),p.Oqu(E.notifData.title),p.xp6(1),p.Q6J("innerHTML",p.lcZ(5,7,E.notifData.content),p.oJD),p.xp6(2),p.Q6J("ngIf",E.notifCreator),p.xp6(1),p.Q6J("ngIf",E.notifData.dismissible)}}let S=(()=>{class U{constructor(E,b,G){this.router=E,this.gs=b,this.notif=G}ngOnInit(){}get GS(){return this.gs}get ROUTER(){return this.router}get NOTIF(){return this.notif}removeNotif(E){this.notif.removeNotif(E)}}return U.\u0275fac=function(E){return new(E||U)(p.Y36(H.F0),p.Y36(O.U),p.Y36(_.T))},U.\u0275cmp=p.Xpm({type:U,selectors:[["app-notifications"]],decls:4,vars:2,consts:[["class","container-fluid notif-banner align-items-center",3,"background-size","background-image","background-repeat","height","background-position-y",4,"ngIf"],[1,"container"],[1,"row","pt-3"],["class","col-12",4,"ngFor","ngForOf"],[1,"container-fluid","notif-banner","align-items-center"],[1,"col-12"],[1,"me-1"],[3,"innerHTML"],["class","ms-1",4,"ngIf"],["type","button","class","btn-close","data-dismiss","alert",3,"click",4,"ngIf"],[1,"ms-1"],[1,"text-decoration-none",3,"routerLink"],["type","button","data-dismiss","alert",1,"btn-close",3,"click"]],template:function(E,b){1&E&&(p.YNc(0,R,1,10,"div",0),p.TgZ(1,"div",1)(2,"div",2),p.YNc(3,L,8,9,"div",3),p.qZA()()),2&E&&(p.Q6J("ngIf",b.GS.bannerImg&&("/home"===b.ROUTER.url||"/berkas"===b.ROUTER.url||"/fansub"===b.ROUTER.url||"/berkas"===b.ROUTER.url||"/anime"===b.ROUTER.url||b.ROUTER.url.includes("/anime?")||"/dorama"===b.ROUTER.url||b.ROUTER.url.includes("/dorama?"))),p.xp6(3),p.Q6J("ngForOf",b.NOTIF.notifications))},directives:[B.O5,B.sg,H.yS],pipes:[T.H],styles:[".notif-banner[_ngcontent-%COMP%]{width:100%;background-size:cover;background-position:75% 50%;background-image:url(/assets/img/home-banner.png)}"]}),U})()},8613:(V,P,h)=>{"use strict";h.d(P,{F:()=>B});var p=h(9808),H=h(8406),O=h(7355),_=h(5e3);let B=(()=>{class T{}return T.\u0275fac=function(s){return new(s||T)},T.\u0275mod=_.oAB({type:T}),T.\u0275inj=_.cJS({imports:[[p.ez,H.Bz,O.T]]}),T})()},7956:(V,P,h)=>{"use strict";h.d(P,{C:()=>O});var p=h(9808),H=h(5e3);let O=(()=>{class _{}return _.\u0275fac=function(T){return new(T||_)},_.\u0275mod=H.oAB({type:_}),_.\u0275inj=H.cJS({imports:[[p.ez]]}),_})()},5343:(V,P)=>{"use strict";P.byteLength=function R(C){var E=T(C),G=E[1];return 3*(E[0]+G)/4-G},P.toByteArray=function n(C){var E,x,b=T(C),G=b[0],z=b[1],Z=new H(function s(C,E,b){return 3*(E+b)/4-b}(0,G,z)),d=0,m=z>0?G-4:G;for(x=0;x<m;x+=4)E=p[C.charCodeAt(x)]<<18|p[C.charCodeAt(x+1)]<<12|p[C.charCodeAt(x+2)]<<6|p[C.charCodeAt(x+3)],Z[d++]=E>>16&255,Z[d++]=E>>8&255,Z[d++]=255&E;return 2===z&&(E=p[C.charCodeAt(x)]<<2|p[C.charCodeAt(x+1)]>>4,Z[d++]=255&E),1===z&&(E=p[C.charCodeAt(x)]<<10|p[C.charCodeAt(x+1)]<<4|p[C.charCodeAt(x+2)]>>2,Z[d++]=E>>8&255,Z[d++]=255&E),Z},P.fromByteArray=function U(C){for(var E,b=C.length,G=b%3,z=[],Z=16383,d=0,m=b-G;d<m;d+=Z)z.push(S(C,d,d+Z>m?m:d+Z));return 1===G?z.push(h[(E=C[b-1])>>2]+h[E<<4&63]+"=="):2===G&&z.push(h[(E=(C[b-2]<<8)+C[b-1])>>10]+h[E>>4&63]+h[E<<2&63]+"="),z.join("")};for(var h=[],p=[],H="undefined"!=typeof Uint8Array?Uint8Array:Array,O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0,B=O.length;_<B;++_)h[_]=O[_],p[O.charCodeAt(_)]=_;function T(C){var E=C.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=C.indexOf("=");return-1===b&&(b=E),[b,b===E?0:4-b%4]}function L(C){return h[C>>18&63]+h[C>>12&63]+h[C>>6&63]+h[63&C]}function S(C,E,b){for(var z=[],Z=E;Z<b;Z+=3)z.push(L((C[Z]<<16&16711680)+(C[Z+1]<<8&65280)+(255&C[Z+2])));return z.join("")}p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},3172:(V,P,h)=>{"use strict";const H=h(5343),O=h(8461),_="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;P.lW=s,P.h2=50;const B=2147483647;function R(r){if(r>B)throw new RangeError('The value "'+r+'" is invalid for option "size"');const t=new Uint8Array(r);return Object.setPrototypeOf(t,s.prototype),t}function s(r,t,e){if("number"==typeof r){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return U(r)}return n(r,t,e)}function n(r,t,e){if("string"==typeof r)return function C(r,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const e=0|m(r,t);let i=R(e);const a=i.write(r,t);return a!==e&&(i=i.slice(0,a)),i}(r,t);if(ArrayBuffer.isView(r))return function b(r){if(rt(r,Uint8Array)){const t=new Uint8Array(r);return G(t.buffer,t.byteOffset,t.byteLength)}return E(r)}(r);if(null==r)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(rt(r,ArrayBuffer)||r&&rt(r.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(rt(r,SharedArrayBuffer)||r&&rt(r.buffer,SharedArrayBuffer)))return G(r,t,e);if("number"==typeof r)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=r.valueOf&&r.valueOf();if(null!=i&&i!==r)return s.from(i,t,e);const a=function z(r){if(s.isBuffer(r)){const t=0|Z(r.length),e=R(t);return 0===e.length||r.copy(e,0,0,t),e}return void 0!==r.length?"number"!=typeof r.length||dt(r.length)?R(0):E(r):"Buffer"===r.type&&Array.isArray(r.data)?E(r.data):void 0}(r);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof r[Symbol.toPrimitive])return s.from(r[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function L(r){if("number"!=typeof r)throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function U(r){return L(r),R(r<0?0:0|Z(r))}function E(r){const t=r.length<0?0:0|Z(r.length),e=R(t);for(let i=0;i<t;i+=1)e[i]=255&r[i];return e}function G(r,t,e){if(t<0||r.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===e?new Uint8Array(r):void 0===e?new Uint8Array(r,t):new Uint8Array(r,t,e),Object.setPrototypeOf(i,s.prototype),i}function Z(r){if(r>=B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+B.toString(16)+" bytes");return 0|r}function m(r,t){if(s.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||rt(r,ArrayBuffer))return r.byteLength;if("string"!=typeof r)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const e=r.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===e)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return ht(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return wt(r).length;default:if(a)return i?-1:ht(r).length;t=(""+t).toLowerCase(),a=!0}}function x(r,t,e){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(t>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return ut(this,t,e);case"utf8":case"utf-8":return tt(this,t,e);case"ascii":return nt(this,t,e);case"latin1":case"binary":return lt(this,t,e);case"base64":return X(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return It(this,t,e);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),i=!0}}function I(r,t,e){const i=r[t];r[t]=r[e],r[e]=i}function v(r,t,e,i,a){if(0===r.length)return-1;if("string"==typeof e?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),dt(e=+e)&&(e=a?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(a)return-1;e=r.length-1}else if(e<0){if(!a)return-1;e=0}if("string"==typeof t&&(t=s.from(t,i)),s.isBuffer(t))return 0===t.length?-1:k(r,t,e,i,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):k(r,[t],e,i,a);throw new TypeError("val must be string, number or Buffer")}function k(r,t,e,i,a){let Q,u=1,f=r.length,M=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(r.length<2||t.length<2)return-1;u=2,f/=2,M/=2,e/=2}function Y(J,$){return 1===u?J[$]:J.readUInt16BE($*u)}if(a){let J=-1;for(Q=e;Q<f;Q++)if(Y(r,Q)===Y(t,-1===J?0:Q-J)){if(-1===J&&(J=Q),Q-J+1===M)return J*u}else-1!==J&&(Q-=Q-J),J=-1}else for(e+M>f&&(e=f-M),Q=e;Q>=0;Q--){let J=!0;for(let $=0;$<M;$++)if(Y(r,Q+$)!==Y(t,$)){J=!1;break}if(J)return Q}return-1}function F(r,t,e,i){e=Number(e)||0;const a=r.length-e;i?(i=Number(i))>a&&(i=a):i=a;const u=t.length;let f;for(i>u/2&&(i=u/2),f=0;f<i;++f){const M=parseInt(t.substr(2*f,2),16);if(dt(M))return f;r[e+f]=M}return f}function y(r,t,e,i){return pt(ht(t,r.length-e),r,e,i)}function D(r,t,e,i){return pt(function Bt(r){const t=[];for(let e=0;e<r.length;++e)t.push(255&r.charCodeAt(e));return t}(t),r,e,i)}function N(r,t,e,i){return pt(wt(t),r,e,i)}function q(r,t,e,i){return pt(function bt(r,t){let e,i,a;const u=[];for(let f=0;f<r.length&&!((t-=2)<0);++f)e=r.charCodeAt(f),i=e>>8,a=e%256,u.push(a),u.push(i);return u}(t,r.length-e),r,e,i)}function X(r,t,e){return H.fromByteArray(0===t&&e===r.length?r:r.slice(t,e))}function tt(r,t,e){e=Math.min(r.length,e);const i=[];let a=t;for(;a<e;){const u=r[a];let f=null,M=u>239?4:u>223?3:u>191?2:1;if(a+M<=e){let Y,Q,J,$;switch(M){case 1:u<128&&(f=u);break;case 2:Y=r[a+1],128==(192&Y)&&($=(31&u)<<6|63&Y,$>127&&(f=$));break;case 3:Y=r[a+1],Q=r[a+2],128==(192&Y)&&128==(192&Q)&&($=(15&u)<<12|(63&Y)<<6|63&Q,$>2047&&($<55296||$>57343)&&(f=$));break;case 4:Y=r[a+1],Q=r[a+2],J=r[a+3],128==(192&Y)&&128==(192&Q)&&128==(192&J)&&($=(15&u)<<18|(63&Y)<<12|(63&Q)<<6|63&J,$>65535&&$<1114112&&(f=$))}}null===f?(f=65533,M=1):f>65535&&(f-=65536,i.push(f>>>10&1023|55296),f=56320|1023&f),i.push(f),a+=M}return function ot(r){const t=r.length;if(t<=K)return String.fromCharCode.apply(String,r);let e="",i=0;for(;i<t;)e+=String.fromCharCode.apply(String,r.slice(i,i+=K));return e}(i)}!(s.TYPED_ARRAY_SUPPORT=function T(){try{const r=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(r,t),42===r.foo()}catch(r){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(r,t,e){return n(r,t,e)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(r,t,e){return function S(r,t,e){return L(r),r<=0?R(r):void 0!==t?"string"==typeof e?R(r).fill(t,e):R(r).fill(t):R(r)}(r,t,e)},s.allocUnsafe=function(r){return U(r)},s.allocUnsafeSlow=function(r){return U(r)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(rt(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),rt(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,a=e.length;for(let u=0,f=Math.min(i,a);u<f;++u)if(t[u]!==e[u]){i=t[u],a=e[u];break}return i<a?-1:a<i?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const a=s.allocUnsafe(e);let u=0;for(i=0;i<t.length;++i){let f=t[i];if(rt(f,Uint8Array))u+f.length>a.length?(s.isBuffer(f)||(f=s.from(f)),f.copy(a,u)):Uint8Array.prototype.set.call(a,f,u);else{if(!s.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(a,u)}u+=f.length}return a},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)I(this,e,e+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)I(this,e,e+3),I(this,e+1,e+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)I(this,e,e+7),I(this,e+1,e+6),I(this,e+2,e+5),I(this,e+3,e+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?tt(this,0,t):x.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){let t="";const e=P.h2;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},_&&(s.prototype[_]=s.prototype.inspect),s.prototype.compare=function(t,e,i,a,u){if(rt(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===a&&(a=0),void 0===u&&(u=this.length),e<0||i>t.length||a<0||u>this.length)throw new RangeError("out of range index");if(a>=u&&e>=i)return 0;if(a>=u)return-1;if(e>=i)return 1;if(this===t)return 0;let f=(u>>>=0)-(a>>>=0),M=(i>>>=0)-(e>>>=0);const Y=Math.min(f,M),Q=this.slice(a,u),J=t.slice(e,i);for(let $=0;$<Y;++$)if(Q[$]!==J[$]){f=Q[$],M=J[$];break}return f<M?-1:M<f?1:0},s.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},s.prototype.indexOf=function(t,e,i){return v(this,t,e,i,!0)},s.prototype.lastIndexOf=function(t,e,i){return v(this,t,e,i,!1)},s.prototype.write=function(t,e,i,a){if(void 0===e)a="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)a=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===a&&(a="utf8")):(a=i,i=void 0)}const u=this.length-e;if((void 0===i||i>u)&&(i=u),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");let f=!1;for(;;)switch(a){case"hex":return F(this,t,e,i);case"utf8":case"utf-8":return y(this,t,e,i);case"ascii":case"latin1":case"binary":return D(this,t,e,i);case"base64":return N(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,t,e,i);default:if(f)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),f=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const K=4096;function nt(r,t,e){let i="";e=Math.min(r.length,e);for(let a=t;a<e;++a)i+=String.fromCharCode(127&r[a]);return i}function lt(r,t,e){let i="";e=Math.min(r.length,e);for(let a=t;a<e;++a)i+=String.fromCharCode(r[a]);return i}function ut(r,t,e){const i=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>i)&&(e=i);let a="";for(let u=t;u<e;++u)a+=vt[r[u]];return a}function It(r,t,e){const i=r.slice(t,e);let a="";for(let u=0;u<i.length-1;u+=2)a+=String.fromCharCode(i[u]+256*i[u+1]);return a}function j(r,t,e){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}function et(r,t,e,i,a,u){if(!s.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<u)throw new RangeError('"value" argument is out of bounds');if(e+i>r.length)throw new RangeError("Index out of range")}function mt(r,t,e,i,a){Tt(t,i,a,r,e,7);let u=Number(t&BigInt(4294967295));r[e++]=u,u>>=8,r[e++]=u,u>>=8,r[e++]=u,u>>=8,r[e++]=u;let f=Number(t>>BigInt(32)&BigInt(4294967295));return r[e++]=f,f>>=8,r[e++]=f,f>>=8,r[e++]=f,f>>=8,r[e++]=f,e}function gt(r,t,e,i,a){Tt(t,i,a,r,e,7);let u=Number(t&BigInt(4294967295));r[e+7]=u,u>>=8,r[e+6]=u,u>>=8,r[e+5]=u,u>>=8,r[e+4]=u;let f=Number(t>>BigInt(32)&BigInt(4294967295));return r[e+3]=f,f>>=8,r[e+2]=f,f>>=8,r[e+1]=f,f>>=8,r[e]=f,e+8}function _t(r,t,e,i,a,u){if(e+i>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function xt(r,t,e,i,a){return t=+t,e>>>=0,a||_t(r,0,e,4),O.write(r,t,e,i,23,4),e+4}function yt(r,t,e,i,a){return t=+t,e>>>=0,a||_t(r,0,e,8),O.write(r,t,e,i,52,8),e+8}s.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const a=this.subarray(t,e);return Object.setPrototypeOf(a,s.prototype),a},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||j(t,e,this.length);let a=this[t],u=1,f=0;for(;++f<e&&(u*=256);)a+=this[t+f]*u;return a},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||j(t,e,this.length);let a=this[t+--e],u=1;for(;e>0&&(u*=256);)a+=this[t+--e]*u;return a},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&ct(t,this.length-8);const a=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,u=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(a)+(BigInt(u)<<BigInt(32))}),s.prototype.readBigUInt64BE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&ct(t,this.length-8);const a=e*2**24+65536*this[++t]+256*this[++t]+this[++t],u=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(a)<<BigInt(32))+BigInt(u)}),s.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||j(t,e,this.length);let a=this[t],u=1,f=0;for(;++f<e&&(u*=256);)a+=this[t+f]*u;return u*=128,a>=u&&(a-=Math.pow(2,8*e)),a},s.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||j(t,e,this.length);let a=e,u=1,f=this[t+--a];for(;a>0&&(u*=256);)f+=this[t+--a]*u;return u*=128,f>=u&&(f-=Math.pow(2,8*e)),f},s.prototype.readInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||j(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt16BE=function(t,e){t>>>=0,e||j(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];return(void 0===e||void 0===i)&&ct(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),s.prototype.readBigInt64BE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&ct(t,this.length-8);const a=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(a)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)}),s.prototype.readFloatLE=function(t,e){return t>>>=0,e||j(t,4,this.length),O.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||j(t,4,this.length),O.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||j(t,8,this.length),O.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||j(t,8,this.length),O.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,i,a){t=+t,e>>>=0,i>>>=0,a||et(this,t,e,i,Math.pow(2,8*i)-1,0);let u=1,f=0;for(this[e]=255&t;++f<i&&(u*=256);)this[e+f]=t/u&255;return e+i},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,i,a){t=+t,e>>>=0,i>>>=0,a||et(this,t,e,i,Math.pow(2,8*i)-1,0);let u=i-1,f=1;for(this[e+u]=255&t;--u>=0&&(f*=256);)this[e+u]=t/f&255;return e+i},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigUInt64LE=it(function(t,e=0){return mt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=it(function(t,e=0){return gt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(t,e,i,a){if(t=+t,e>>>=0,!a){const Y=Math.pow(2,8*i-1);et(this,t,e,i,Y-1,-Y)}let u=0,f=1,M=0;for(this[e]=255&t;++u<i&&(f*=256);)t<0&&0===M&&0!==this[e+u-1]&&(M=1),this[e+u]=(t/f>>0)-M&255;return e+i},s.prototype.writeIntBE=function(t,e,i,a){if(t=+t,e>>>=0,!a){const Y=Math.pow(2,8*i-1);et(this,t,e,i,Y-1,-Y)}let u=i-1,f=1,M=0;for(this[e+u]=255&t;--u>=0&&(f*=256);)t<0&&0===M&&0!==this[e+u+1]&&(M=1),this[e+u]=(t/f>>0)-M&255;return e+i},s.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||et(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigInt64LE=it(function(t,e=0){return mt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=it(function(t,e=0){return gt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeFloatLE=function(t,e,i){return xt(this,t,e,!0,i)},s.prototype.writeFloatBE=function(t,e,i){return xt(this,t,e,!1,i)},s.prototype.writeDoubleLE=function(t,e,i){return yt(this,t,e,!0,i)},s.prototype.writeDoubleBE=function(t,e,i){return yt(this,t,e,!1,i)},s.prototype.copy=function(t,e,i,a){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!a&&0!==a&&(a=this.length),e>=t.length&&(e=t.length),e||(e=0),a>0&&a<i&&(a=i),a===i||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-e<a-i&&(a=t.length-e+i);const u=a-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,a):Uint8Array.prototype.set.call(t,this.subarray(i,a),e),u},s.prototype.fill=function(t,e,i,a){if("string"==typeof t){if("string"==typeof e?(a=e,e=0,i=this.length):"string"==typeof i&&(a=i,i=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===t.length){const f=t.charCodeAt(0);("utf8"===a&&f<128||"latin1"===a)&&(t=f)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let u;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(u=e;u<i;++u)this[u]=t;else{const f=s.isBuffer(t)?t:s.from(t,a),M=f.length;if(0===M)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(u=0;u<i-e;++u)this[u+e]=f[u%M]}return this};const st={};function ft(r,t,e){st[r]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,delete this.name}get code(){return r}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}function Et(r){let t="",e=r.length;const i="-"===r[0]?1:0;for(;e>=i+4;e-=3)t=`_${r.slice(e-3,e)}${t}`;return`${r.slice(0,e)}${t}`}function Tt(r,t,e,i,a,u){if(r>e||r<t){const f="bigint"==typeof t?"n":"";let M;throw M=u>3?0===t||t===BigInt(0)?`>= 0${f} and < 2${f} ** ${8*(u+1)}${f}`:`>= -(2${f} ** ${8*(u+1)-1}${f}) and < 2 ** ${8*(u+1)-1}${f}`:`>= ${t}${f} and <= ${e}${f}`,new st.ERR_OUT_OF_RANGE("value",M,r)}!function Dt(r,t,e){at(t,"offset"),(void 0===r[t]||void 0===r[t+e])&&ct(t,r.length-(e+1))}(i,a,u)}function at(r,t){if("number"!=typeof r)throw new st.ERR_INVALID_ARG_TYPE(t,"number",r)}function ct(r,t,e){throw Math.floor(r)!==r?(at(r,e),new st.ERR_OUT_OF_RANGE(e||"offset","an integer",r)):t<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,r)}ft("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ft("ERR_INVALID_ARG_TYPE",function(r,t){return`The "${r}" argument must be of type number. Received type ${typeof t}`},TypeError),ft("ERR_OUT_OF_RANGE",function(r,t,e){let i=`The value of "${r}" is out of range.`,a=e;return Number.isInteger(e)&&Math.abs(e)>2**32?a=Et(String(e)):"bigint"==typeof e&&(a=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(a=Et(a)),a+="n"),i+=` It must be ${t}. Received ${a}`,i},RangeError);const Rt=/[^+/0-9A-Za-z-_]/g;function ht(r,t){let e;t=t||1/0;const i=r.length;let a=null;const u=[];for(let f=0;f<i;++f){if(e=r.charCodeAt(f),e>55295&&e<57344){if(!a){if(e>56319){(t-=3)>-1&&u.push(239,191,189);continue}if(f+1===i){(t-=3)>-1&&u.push(239,191,189);continue}a=e;continue}if(e<56320){(t-=3)>-1&&u.push(239,191,189),a=e;continue}e=65536+(a-55296<<10|e-56320)}else a&&(t-=3)>-1&&u.push(239,191,189);if(a=null,e<128){if((t-=1)<0)break;u.push(e)}else if(e<2048){if((t-=2)<0)break;u.push(e>>6|192,63&e|128)}else if(e<65536){if((t-=3)<0)break;u.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;u.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return u}function wt(r){return H.toByteArray(function At(r){if((r=(r=r.split("=")[0]).trim().replace(Rt,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(r))}function pt(r,t,e,i){let a;for(a=0;a<i&&!(a+e>=t.length||a>=r.length);++a)t[a+e]=r[a];return a}function rt(r,t){return r instanceof t||null!=r&&null!=r.constructor&&null!=r.constructor.name&&r.constructor.name===t.name}function dt(r){return r!=r}const vt=function(){const r="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){const i=16*e;for(let a=0;a<16;++a)t[i+a]=r[e]+r[a]}return t}();function it(r){return"undefined"==typeof BigInt?Ut:r}function Ut(){throw new Error("BigInt not supported")}},9069:V=>{"use strict";var p,P="object"==typeof Reflect?Reflect:null,h=P&&"function"==typeof P.apply?P.apply:function(m,x,I){return Function.prototype.apply.call(m,x,I)};p=P&&"function"==typeof P.ownKeys?P.ownKeys:Object.getOwnPropertySymbols?function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:function(m){return Object.getOwnPropertyNames(m)};var O=Number.isNaN||function(m){return m!=m};function _(){_.init.call(this)}V.exports=_,V.exports.once=function G(d,m){return new Promise(function(x,I){function v(F){d.removeListener(m,k),I(F)}function k(){"function"==typeof d.removeListener&&d.removeListener("error",v),x([].slice.call(arguments))}Z(d,m,k,{once:!0}),"error"!==m&&function z(d,m,x){"function"==typeof d.on&&Z(d,"error",m,x)}(d,v,{once:!0})})},_.EventEmitter=_,_.prototype._events=void 0,_.prototype._eventsCount=0,_.prototype._maxListeners=void 0;var B=10;function T(d){if("function"!=typeof d)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof d)}function R(d){return void 0===d._maxListeners?_.defaultMaxListeners:d._maxListeners}function s(d,m,x,I){var v,k,F;if(T(x),void 0===(k=d._events)?(k=d._events=Object.create(null),d._eventsCount=0):(void 0!==k.newListener&&(d.emit("newListener",m,x.listener?x.listener:x),k=d._events),F=k[m]),void 0===F)F=k[m]=x,++d._eventsCount;else if("function"==typeof F?F=k[m]=I?[x,F]:[F,x]:I?F.unshift(x):F.push(x),(v=R(d))>0&&F.length>v&&!F.warned){F.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+F.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=d,y.type=m,y.count=F.length,function H(d){console&&console.warn&&console.warn(d)}(y)}return d}function n(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function L(d,m,x){var I={fired:!1,wrapFn:void 0,target:d,type:m,listener:x},v=n.bind(I);return v.listener=x,I.wrapFn=v,v}function S(d,m,x){var I=d._events;if(void 0===I)return[];var v=I[m];return void 0===v?[]:"function"==typeof v?x?[v.listener||v]:[v]:x?function b(d){for(var m=new Array(d.length),x=0;x<m.length;++x)m[x]=d[x].listener||d[x];return m}(v):C(v,v.length)}function U(d){var m=this._events;if(void 0!==m){var x=m[d];if("function"==typeof x)return 1;if(void 0!==x)return x.length}return 0}function C(d,m){for(var x=new Array(m),I=0;I<m;++I)x[I]=d[I];return x}function Z(d,m,x,I){if("function"==typeof d.on)I.once?d.once(m,x):d.on(m,x);else{if("function"!=typeof d.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof d);d.addEventListener(m,function v(k){I.once&&d.removeEventListener(m,v),x(k)})}}Object.defineProperty(_,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(d){if("number"!=typeof d||d<0||O(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");B=d}}),_.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_.prototype.setMaxListeners=function(m){if("number"!=typeof m||m<0||O(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this},_.prototype.getMaxListeners=function(){return R(this)},_.prototype.emit=function(m){for(var x=[],I=1;I<arguments.length;I++)x.push(arguments[I]);var v="error"===m,k=this._events;if(void 0!==k)v=v&&void 0===k.error;else if(!v)return!1;if(v){var F;if(x.length>0&&(F=x[0]),F instanceof Error)throw F;var y=new Error("Unhandled error."+(F?" ("+F.message+")":""));throw y.context=F,y}var D=k[m];if(void 0===D)return!1;if("function"==typeof D)h(D,this,x);else{var N=D.length,q=C(D,N);for(I=0;I<N;++I)h(q[I],this,x)}return!0},_.prototype.on=_.prototype.addListener=function(m,x){return s(this,m,x,!1)},_.prototype.prependListener=function(m,x){return s(this,m,x,!0)},_.prototype.once=function(m,x){return T(x),this.on(m,L(this,m,x)),this},_.prototype.prependOnceListener=function(m,x){return T(x),this.prependListener(m,L(this,m,x)),this},_.prototype.off=_.prototype.removeListener=function(m,x){var I,v,k,F,y;if(T(x),void 0===(v=this._events))return this;if(void 0===(I=v[m]))return this;if(I===x||I.listener===x)0==--this._eventsCount?this._events=Object.create(null):(delete v[m],v.removeListener&&this.emit("removeListener",m,I.listener||x));else if("function"!=typeof I){for(k=-1,F=I.length-1;F>=0;F--)if(I[F]===x||I[F].listener===x){y=I[F].listener,k=F;break}if(k<0)return this;0===k?I.shift():function E(d,m){for(;m+1<d.length;m++)d[m]=d[m+1];d.pop()}(I,k),1===I.length&&(v[m]=I[0]),void 0!==v.removeListener&&this.emit("removeListener",m,y||x)}return this},_.prototype.removeAllListeners=function(m){var x,I,v;if(void 0===(I=this._events))return this;if(void 0===I.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==I[m]&&(0==--this._eventsCount?this._events=Object.create(null):delete I[m]),this;if(0===arguments.length){var F,k=Object.keys(I);for(v=0;v<k.length;++v)"removeListener"!==(F=k[v])&&this.removeAllListeners(F);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(x=I[m]))this.removeListener(m,x);else if(void 0!==x)for(v=x.length-1;v>=0;v--)this.removeListener(m,x[v]);return this},_.prototype.listeners=function(m){return S(this,m,!0)},_.prototype.rawListeners=function(m){return S(this,m,!1)},_.listenerCount=function(d,m){return"function"==typeof d.listenerCount?d.listenerCount(m):U.call(d,m)},_.prototype.listenerCount=U,_.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},9076:(V,P,h)=>{"use strict";var p=h(8926).default;const H=h(8202),O=h(9069).EventEmitter,_=h(6643);V.exports=class B extends O{constructor(R,s){if(s||(s={}),super(),this.chunkLength=Number(R),!this.chunkLength)throw new Error("First argument must be a chunk length");this.closed=!1,this.destroyed=!1,this.length=Number(s.length)||1/0,this.name=s.name||"idb-chunk-store",this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1),this.dbPromise=H.openDB(this.name,void 0,{upgrade:n=>{n.createObjectStore("chunks")},blocking:()=>{this.close()},terminated:()=>{this.closed=!0,this.emit("error",new Error("Database unexpectedly closed"))}})}put(R,s,n=(()=>{})){var L=this;if(this.closed)return _(()=>n(new Error("Storage is closed")));const S=R===this.lastChunkIndex;return S&&s.length!==this.lastChunkLength?_(()=>n(new Error("Last chunk length must be "+this.lastChunkLength))):S||s.length===this.chunkLength?((0!==(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)).byteOffset||s.byteLength!==s.buffer.byteLength)&&(s=s.slice()),void p(function*(){try{yield(yield L.dbPromise).put("chunks",s,R)}catch(U){return void n(U)}n(null)})()):_(()=>n(new Error("Chunk length must be "+this.chunkLength)))}get(R,s,n=(()=>{})){var L=this;return"function"==typeof s?this.get(R,{},s):(s||(s={}),this.closed?_(()=>n(new Error("Storage is closed"))):void p(function*(){let S;try{S=yield(yield L.dbPromise).get("chunks",R)}catch(b){return void n(b)}if(null==S){const b=new Error("Chunk not found");return b.notFound=!0,void n(b)}let U=Buffer.from(S.buffer,S.byteOffset,S.byteLength);const C=s.offset||0,E=s.length||U.length-C;(0!==C||E!==U.length)&&(U=U.slice(C,E+C)),n(null,U)})())}close(R=(()=>{})){var s=this;if(this.closed)return _(()=>R(new Error("Storage is closed")));this.closed=!0,p(function*(){try{(yield s.dbPromise).close()}catch(n){return void R(n)}R(null)})()}destroy(R=(()=>{})){var s=this;return this.closed?_(()=>R(new Error("Storage is closed"))):this.destroyed?_(()=>R(new Error("Storage is destroyed"))):(this.destroyed=!0,void this.close(function(){var n=p(function*(L){if(L)R(L);else{try{yield H.deleteDB(s.name)}catch(S){return void R(S)}R(null)}});return function(L){return n.apply(this,arguments)}}()))}}},8202:(V,P,h)=>{"use strict";h.r(P),h.d(P,{deleteDB:()=>x,openDB:()=>m,unwrap:()=>d,wrap:()=>Z});var p=h(5861);let O,_;const R=new WeakMap,s=new WeakMap,n=new WeakMap,L=new WeakMap,S=new WeakMap;let E={get(y,D,N){if(y instanceof IDBTransaction){if("done"===D)return s.get(y);if("objectStoreNames"===D)return y.objectStoreNames||n.get(y);if("store"===D)return N.objectStoreNames[1]?void 0:N.objectStore(N.objectStoreNames[0])}return Z(y[D])},set:(y,D,N)=>(y[D]=N,!0),has:(y,D)=>y instanceof IDBTransaction&&("done"===D||"store"===D)||D in y};function z(y){return"function"==typeof y?function G(y){return y!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function T(){return _||(_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(y)?function(...D){return y.apply(d(this),D),Z(R.get(this))}:function(...D){return Z(y.apply(d(this),D))}:function(D,...N){const q=y.call(d(this),D,...N);return n.set(q,D.sort?D.sort():[D]),Z(q)}}(y):(y instanceof IDBTransaction&&function C(y){if(s.has(y))return;const D=new Promise((N,q)=>{const X=()=>{y.removeEventListener("complete",tt),y.removeEventListener("error",K),y.removeEventListener("abort",K)},tt=()=>{N(),X()},K=()=>{q(y.error||new DOMException("AbortError","AbortError")),X()};y.addEventListener("complete",tt),y.addEventListener("error",K),y.addEventListener("abort",K)});s.set(y,D)}(y),((y,D)=>D.some(N=>y instanceof N))(y,function B(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(y,E):y)}function Z(y){if(y instanceof IDBRequest)return function U(y){const D=new Promise((N,q)=>{const X=()=>{y.removeEventListener("success",tt),y.removeEventListener("error",K)},tt=()=>{N(Z(y.result)),X()},K=()=>{q(y.error),X()};y.addEventListener("success",tt),y.addEventListener("error",K)});return D.then(N=>{N instanceof IDBCursor&&R.set(N,y)}).catch(()=>{}),S.set(D,y),D}(y);if(L.has(y))return L.get(y);const D=z(y);return D!==y&&(L.set(y,D),S.set(D,y)),D}const d=y=>S.get(y);function m(y,D,{blocked:N,upgrade:q,blocking:X,terminated:tt}={}){const K=indexedDB.open(y,D),ot=Z(K);return q&&K.addEventListener("upgradeneeded",nt=>{q(Z(K.result),nt.oldVersion,nt.newVersion,Z(K.transaction))}),N&&K.addEventListener("blocked",()=>N()),ot.then(nt=>{tt&&nt.addEventListener("close",()=>tt()),X&&nt.addEventListener("versionchange",()=>X())}).catch(()=>{}),ot}function x(y,{blocked:D}={}){const N=indexedDB.deleteDatabase(y);return D&&N.addEventListener("blocked",()=>D()),Z(N).then(()=>{})}const I=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],k=new Map;function F(y,D){if(!(y instanceof IDBDatabase)||D in y||"string"!=typeof D)return;if(k.get(D))return k.get(D);const N=D.replace(/FromIndex$/,""),q=D!==N,X=v.includes(N);if(!(N in(q?IDBIndex:IDBObjectStore).prototype)||!X&&!I.includes(N))return;const tt=function(){var K=(0,p.Z)(function*(ot,...nt){const lt=this.transaction(ot,X?"readwrite":"readonly");let ut=lt.store;return q&&(ut=ut.index(nt.shift())),(yield Promise.all([ut[N](...nt),X&&lt.done]))[0]});return function(nt){return K.apply(this,arguments)}}();return k.set(D,tt),tt}!function b(y){E=y(E)}(y=>({...y,get:(D,N,q)=>F(D,N)||y.get(D,N,q),has:(D,N)=>!!F(D,N)||y.has(D,N)}))},8461:(V,P)=>{P.read=function(h,p,H,O,_){var B,T,R=8*_-O-1,s=(1<<R)-1,n=s>>1,L=-7,S=H?_-1:0,U=H?-1:1,C=h[p+S];for(S+=U,B=C&(1<<-L)-1,C>>=-L,L+=R;L>0;B=256*B+h[p+S],S+=U,L-=8);for(T=B&(1<<-L)-1,B>>=-L,L+=O;L>0;T=256*T+h[p+S],S+=U,L-=8);if(0===B)B=1-n;else{if(B===s)return T?NaN:1/0*(C?-1:1);T+=Math.pow(2,O),B-=n}return(C?-1:1)*T*Math.pow(2,B-O)},P.write=function(h,p,H,O,_,B){var T,R,s,n=8*B-_-1,L=(1<<n)-1,S=L>>1,U=23===_?Math.pow(2,-24)-Math.pow(2,-77):0,C=O?0:B-1,E=O?1:-1,b=p<0||0===p&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(R=isNaN(p)?1:0,T=L):(T=Math.floor(Math.log(p)/Math.LN2),p*(s=Math.pow(2,-T))<1&&(T--,s*=2),(p+=T+S>=1?U/s:U*Math.pow(2,1-S))*s>=2&&(T++,s/=2),T+S>=L?(R=0,T=L):T+S>=1?(R=(p*s-1)*Math.pow(2,_),T+=S):(R=p*Math.pow(2,S-1)*Math.pow(2,_),T=0));_>=8;h[H+C]=255&R,C+=E,R/=256,_-=8);for(T=T<<_|R,n+=_;n>0;h[H+C]=255&T,C+=E,T/=256,n-=8);h[H+C-E]|=128*b}},6643:V=>{let P;V.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:global):h=>(P||(P=Promise.resolve())).then(h).catch(p=>setTimeout(()=>{throw p},0))},8926:V=>{function P(p,H,O,_,B,T,R){try{var s=p[T](R),n=s.value}catch(L){return void O(L)}s.done?H(n):Promise.resolve(n).then(_,B)}V.exports=function h(p){return function(){var H=this,O=arguments;return new Promise(function(_,B){var T=p.apply(H,O);function R(n){P(T,_,B,R,s,"next",n)}function s(n){P(T,_,B,R,s,"throw",n)}R(void 0)})}},V.exports.__esModule=!0,V.exports.default=V.exports}}]);