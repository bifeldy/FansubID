{"version":3,"file":"src_app__pages_mailbox_mailbox_module_ts.js","mappings":"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","sources":["./src/app/_pages/mailbox/mailbox-detail/mailbox-detail.component.ts","./src/app/_pages/mailbox/mailbox-detail/mailbox-detail.component.html","./src/app/_pages/mailbox/mailbox-list/mailbox-list.component.ts","./src/app/_pages/mailbox/mailbox-list/mailbox-list.component.html","./src/app/_pages/mailbox/mailbox.module.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { environment } from '../../../../environments/app/environment';\n\nimport { BusyService } from '../../../_shared/services/busy.service';\nimport { FabService } from '../../../_shared/services/fab.service';\nimport { GlobalService } from '../../../_shared/services/global.service';\nimport { MailService } from '../../../_shared/services/mail.service';\nimport { WinboxService } from '../../../_shared/services/winbox.service';\n\n@Component({\n  selector: 'app-mailbox-detail',\n  templateUrl: './mailbox-detail.component.html',\n  styleUrls: ['./mailbox-detail.component.css']\n})\nexport class MailboxDetailComponent implements OnInit, OnDestroy {\n\n  mailId = '';\n  mailData = null;\n\n  subsParam = null;\n  subsMail = null;\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private router: Router,\n    private bs: BusyService,\n    private fs: FabService,\n    private gs: GlobalService,\n    private ms: MailService,\n    private wb: WinboxService\n  ) {\n    this.gs.bannerImg = null;\n    this.gs.sizeContain = false;\n    this.gs.bgRepeat = false;\n  }\n\n  get GS(): GlobalService {\n    return this.gs;\n  }\n\n  ngOnInit(): void {\n    if (this.gs.isBrowser) {\n      this.getMail();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subsParam?.unsubscribe();\n    this.subsMail?.unsubscribe();\n  }\n\n  filterAddress(raw: string): string[] {\n    return !raw ? [] : raw.split(',').map(rw => rw.trim());\n  }\n\n  getMail(): void {\n    this.subsParam = this.activatedRoute.params.subscribe({\n      next: p => {\n        this.mailId = p['mailId'];\n        this.bs.busy();\n        if (this.subsMail) {\n          this.subsMail.unsubscribe();\n          this.bs.idle();\n        }\n        this.subsMail = this.ms.getMail(this.mailId).subscribe({\n          next: res => {\n            this.gs.log('[MAIL_DETAIL_SUCCESS]', res);\n            this.mailData = res.result;\n            this.fs.initializeFab('outgoing_mail', null, 'Balas Email', `/create/mailbox`, false);\n            this.bs.idle();\n          },\n          error: err => {\n            this.gs.log('[MAIL_DETAIL_ERROR]', err, 'error');\n            this.bs.idle();\n            this.router.navigate(['/error'], {\n              queryParams: {\n                returnUrl: '/mailbox'\n              }\n            });\n          }\n        });\n      }\n    });\n  }\n\n  downloadAttachment(id): void {\n    this.wb.winboxOpenUri(`${environment.apiUrl}/attachment/${id}?ngsw-bypass=true`);\n  }\n\n}\n","<div *ngIf=\"mailData\" class=\"p-0 m-0\">\n\n  <div class=\"container-fluid p-0\">\n    <div class=\"wrapper\" [style.background]=\"\n        'url(/assets/img/banner/mailbox-detail.png), ' +\n        'linear-gradient(to bottom, ' + (GS.isDarkMode ? '#673ab7' : '#3f51b5') + ' 0%, #ee0dfd 100%)'\">\n      <ul class=\"bg-bubbles align-items-center p-0\">\n        <li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>\n        <div class=\"row align-items-center h-100\">\n          <div class=\"col-12 mx-auto\">\n            <div class=\"container text-light\">\n              <h2 class=\"mb-1\" style=\"line-height: normal;\">\n                {{ mailData.subject }}\n              </h2>\n              <p class=\"mb-0\">{{ mailData.date | date:'d MMMM y, hh:mm:ss a z' }}</p>\n            </div>\n          </div>\n        </div>\n      </ul>\n    </div>\n  </div>\n\n  <!-- Notification -->\n  <app-notifications></app-notifications>\n\n  <!-- Content -->\n  <div class=\"container\">\n\n    <div class=\"row\">\n      <div class=\"col-md-5 col-xl-4 p-3\">\n        <div class=\"row sticky-top\">\n          <div class=\"col\">\n            <div class=\"row py-3\">\n              <div class=\"col-12 pt-3 sticky-top bg-bifeldy\">\n                <h2 class=\"border-bottom-dotted\">\n                  <b class=\"text-bifeldy\">Pengirim</b>\n                </h2>\n              </div>\n              <div class=\"col-12\">\n                <mat-selection-list [multiple]=\"false\">\n                  <mat-list-option>\n                    <mat-icon mat-list-icon class=\"ms-3\">account_circle</mat-icon>\n                    <h4>{{ mailData.from }}</h4>\n                  </mat-list-option>\n                </mat-selection-list>\n              </div>\n            </div>\n            <div class=\"row py-3\" *ngIf=\"mailData.to\">\n              <div class=\"col-12 pt-3 sticky-top bg-bifeldy\">\n                <h2 class=\"border-bottom-dotted\">\n                  <b class=\"text-bifeldy\">Penerima Utama</b>\n                </h2>\n              </div>\n              <div class=\"col-12\">\n                <mat-selection-list [multiple]=\"false\">\n                  <mat-list-option *ngFor=\"let mt of filterAddress(mailData.to)\">\n                    <mat-icon mat-list-icon class=\"ms-3\">account_circle</mat-icon>\n                    <h4>{{ mt }}</h4>\n                  </mat-list-option>\n                </mat-selection-list>\n              </div>\n            </div>\n            <div class=\"row py-3\" *ngIf=\"mailData.cc\">\n              <div class=\"col-12 pt-3 sticky-top bg-bifeldy\">\n                <h2 class=\"border-bottom-dotted\">\n                  <b class=\"text-bifeldy\">Penerima CC</b>\n                </h2>\n              </div>\n              <div class=\"col-12\">\n                <mat-selection-list [multiple]=\"false\">\n                  <mat-list-option *ngFor=\"let mc of filterAddress(mailData.cc)\">\n                    <mat-icon mat-list-icon class=\"ms-3\">account_circle</mat-icon>\n                    <h4>{{ mc }}</h4>\n                  </mat-list-option>\n                </mat-selection-list>\n              </div>\n            </div>\n            <div class=\"row py-3\" *ngIf=\"mailData.bcc\">\n              <div class=\"col-12 pt-3 sticky-top bg-bifeldy\">\n                <h2 class=\"border-bottom-dotted\">\n                  <b class=\"text-bifeldy\">Penerima BCC</b>\n                </h2>\n              </div>\n              <div class=\"col-12\">\n                <mat-selection-list [multiple]=\"false\">\n                  <mat-list-option *ngFor=\"let mb of filterAddress(mailData.bcc)\">\n                    <mat-icon mat-list-icon class=\"ms-3\">account_circle</mat-icon>\n                    <h4>{{ mb }}</h4>\n                  </mat-list-option>\n                </mat-selection-list>\n              </div>\n            </div>\n            <div class=\"row py-3\" *ngIf=\"mailData.attachment_.length > 0\">\n              <div class=\"col-12 pt-3 sticky-top bg-bifeldy\">\n                <h2 class=\"border-bottom-dotted\">\n                  <b class=\"text-bifeldy\">Lampiran</b>\n                </h2>\n              </div>\n              <div class=\"col-12\">\n                <mat-selection-list [multiple]=\"false\">\n                  <mat-list-option *ngFor=\"let ma of mailData.attachment_\" (click)=\"downloadAttachment(ma.id)\">\n                    <mat-icon mat-list-icon class=\"ms-3\">attach_file</mat-icon>\n                    <div mat-line>{{ ma.name }}</div>\n                    <div mat-line>{{ ma.size | bytes }}</div>\n                  </mat-list-option>\n                </mat-selection-list>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-7 col-xl-8 p-3 sticky-top\">\n        <div class=\"row sticky-top\">\n          <div class=\"col\">\n            <div class=\"row py-3\">\n              <div class=\"col-12 pt-3 sticky-top bg-bifeldy\">\n                <h2 class=\"border-bottom-dotted\">\n                  <b class=\"text-bifeldy\">Isi Konten Pesan</b>\n                </h2>\n              </div>\n              <div class=\"col-12\">\n                <div class=\"py-2 px-3\" style=\"white-space: pre-line !important;\" [innerHTML]=\"mailData.html || mailData.text\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n</div>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { environment } from '../../../../environments/app/environment';\n\nimport { AuthService } from '../../../_shared/services/auth.service';\n\nimport { BusyService } from '../../../_shared/services/busy.service';\nimport { FabService } from '../../../_shared/services/fab.service';\nimport { GlobalService } from '../../../_shared/services/global.service';\nimport { MailService } from '../../../_shared/services/mail.service';\n\n@Component({\n  selector: 'app-mailbox-list',\n  templateUrl: './mailbox-list.component.html',\n  styleUrls: ['./mailbox-list.component.css']\n})\nexport class MailboxListComponent implements OnInit, OnDestroy {\n\n  mailData = {\n    inbox: {\n      column: ['Tanggal', 'Pengirim', 'Topik', 'Lampiran'],\n      row: [],\n      count: 0\n    },\n    outbox: {\n      column: ['Tanggal', 'Penerima', 'Topik', 'Lampiran'],\n      row: [],\n      count: 0\n    }\n  };\n\n  selectedMailBox = 'inbox';\n\n  page = 1;\n  row = 10;\n\n  q = '';\n  sort = '';\n  order = '';\n\n  subsMailbox = null;\n\n  constructor(\n    private router: Router,\n    private as: AuthService,\n    private bs: BusyService,\n    private fs: FabService,\n    private gs: GlobalService,\n    private ms: MailService\n  ) {\n    this.gs.bannerImg = null;\n    this.gs.sizeContain = false;\n    this.gs.bgRepeat = false;\n  }\n\n  get GS(): GlobalService {\n    return this.gs;\n  }\n\n  get AS(): AuthService {\n    return this.as;\n  }\n\n  get ENV(): any {\n    return environment;\n  }\n\n  ngOnInit(): void {\n    if (this.gs.isBrowser) {\n      this.getMailbox();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subsMailbox?.unsubscribe();\n  }\n\n  filterAddress(raw: string) {\n    let addr = '';\n    if (raw) {\n      for (const rw of raw.split(',')) {\n        if (addr) {\n          addr += ', ';\n        }\n        if (rw.includes('<') && rw.includes('>')) {\n          addr += rw.split('<')[1].split('>')[0].trim();\n        } else {\n          addr += rw.trim();\n        }\n      }\n    }\n    return addr;\n  }\n\n  getMailbox(): void {\n    this.bs.busy();\n    if (this.subsMailbox) {\n      this.subsMailbox.unsubscribe();\n      this.bs.idle();\n    }\n    this.subsMailbox = this.ms.getMailbox(this.selectedMailBox, this.q, this.page, this.row, this.sort, this.order).subscribe({\n      next: res => {\n        this.gs.log('[MAILBOX_LIST_SUCCESS]', res);\n        this.mailData[this.selectedMailBox].count = res.count;\n        this.mailData[this.selectedMailBox].row = [];\n        for (const r of res.results) {\n          this.mailData[this.selectedMailBox].row.push({\n            id: r.id,\n            Tanggal: r.date,\n            Pengirim: this.filterAddress(r.from),\n            Penerima: this.filterAddress(r.to),\n            Topik: r.subject,\n            Lampiran: `${r.attachment_count} Berkas`\n          });\n        }\n        this.fs.initializeFab('outgoing_mail', null, 'Buat Email Baru', `/create/mailbox`, false);\n        this.bs.idle();\n      },\n      error: err => {\n        this.gs.log('[MAILBOX_LIST_ERROR]', err, 'error');\n        this.bs.idle();\n      }\n    });\n  }\n\n  changeMailbox(): void {\n    this.getMailbox();\n  }\n\n  onRowClicked(data): void {\n    this.gs.log('[MAILBOX_LIST_CLICK_EMAIL]', data);\n    this.router.navigateByUrl(`/mailbox/${data.id}`);\n  }\n\n  onPaginatorClicked(data): void {\n    this.gs.log('[MAILBOX_LIST_CLICK_PAGINATOR]', data);\n    this.page = data.pageIndex + 1;\n    this.row = data.pageSize;\n    this.getMailbox();\n  }\n\n  onServerSideFilter(data: any): void {\n    this.gs.log('[MAILBOX_LIST_ENTER_FILTER]', data);\n    this.q = data;\n    this.getMailbox();\n  }\n\n  onServerSideOrder(data: any): void {\n    this.gs.log('[MAILBOX_LIST_CLICK_ORDER]', data);\n    this.q = data.q;\n    this.sort = data.active;\n    if (this.sort === 'created_at') {\n      this.sort = 'date';\n    } else if (this.sort === 'title') {\n      this.sort = 'subject';\n    }\n    this.order = data.direction;\n    this.getMailbox();\n  }\n\n}\n","<div class=\"container-fluid p-0\">\r\n  <div class=\"wrapper\" [style.background]=\"\r\n      'url(/assets/img/banner/mailbox.png), ' +\r\n      'linear-gradient(to bottom, ' + (GS.isDarkMode ? '#673ab7' : '#3f51b5') + ' 0%, #ee0dfd 100%)'\">\r\n    <ul class=\"bg-bubbles align-items-center p-0\">\r\n      <li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>\r\n      <div class=\"row align-items-center h-100\">\r\n        <div class=\"col-12 mx-auto\">\r\n          <div class=\"container text-light\">\r\n            <h2 class=\"mb-1\" style=\"line-height: normal;\">\r\n              {{ AS.currentUserSubject?.value?.username }} @ {{ ENV.domain }}\r\n            </h2>\r\n            <p class=\"mb-0\">\r\n              {{ mailData['inbox'].count }} Inbox ~ {{ mailData['outbox'].count }} Outbox\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ul>\r\n  </div>\r\n</div>\r\n\r\n<!-- Notification -->\r\n<app-notifications></app-notifications>\r\n\r\n<!-- Content -->\r\n<div class=\"container\">\r\n  <div class=\"row sticky-top bg-bifeldy\">\r\n    <div class=\"col-12\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12 pb-3\">\r\n          <h3 class=\"m-0 border-bottom border-primary row\">\r\n            <mat-form-field class=\"pt-3 col-6 col-md-4 col-lg-2\" [color]=\"'accent'\">\r\n              <mat-label>Kotak Pesan</mat-label>\r\n              <mat-select [(value)]=\"selectedMailBox\" (valueChange)=\"changeMailbox()\">\r\n                <mat-option value=\"inbox\">Masuk</mat-option>\r\n                <mat-option value=\"outbox\">Keluar</mat-option>\r\n              </mat-select>\r\n            </mat-form-field>\r\n            <div class=\"ms-auto p-3 col-6 col-md-4 col-lg-2\">\r\n              <button type=\"button\" mat-flat-button color=\"accent\" class=\"w-100 h-100\" (click)=\"changeMailbox()\">\r\n                <mat-icon class=\"me-1\">loop</mat-icon>\r\n                Refresh\r\n              </button>\r\n            </div>\r\n          </h3>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"row p-3\">\r\n    <app-material-table [tableDataColumn]=\"mailData[selectedMailBox].column\" [tableDataRow]=\"mailData[selectedMailBox].row\" [count]=\"mailData[selectedMailBox].count\"\r\n      [serverSide]=\"true\" (serverSideFilter)=\"onServerSideFilter($event)\" (rowClicked)=\"onRowClicked($event)\" (paginatorClicked)=\"onPaginatorClicked($event)\" (serverSideOrder)=\"onServerSideOrder($event)\"></app-material-table>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { SharedMaterialModule } from '../../_shared/modules/shared-material.module';\n\nimport { CustomPipeModule } from '../../_shared/pipes/custom-pipe.module';\n\nimport { MailboxDetailComponent } from './mailbox-detail/mailbox-detail.component';\nimport { MailboxListComponent } from './mailbox-list/mailbox-list.component';\n\nimport { NotificationsModule } from '../../_shared/components/notifications/notifications.module';\nimport { MaterialTableModule } from '../../_shared/components/material-table/material-table.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    pathMatch: 'full',\n    component: MailboxListComponent\n  },\n  {\n    path: ':mailId',\n    children: [\n      {\n        path: '',\n        pathMatch: 'full',\n        component: MailboxDetailComponent\n      }\n    ]\n  }\n];\n\n@NgModule({\n  declarations: [\n    MailboxListComponent,\n    MailboxDetailComponent\n  ],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    FormsModule,\n    ReactiveFormsModule,\n    SharedMaterialModule,\n    NotificationsModule,\n    MaterialTableModule,\n    CustomPipeModule\n  ]\n})\nexport class MailboxModule { }\n"],"names":[],"sourceRoot":"webpack:///"}