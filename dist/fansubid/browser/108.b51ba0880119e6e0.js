"use strict";(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[108],{6108:(S,f,s)=>{s.r(f),s.d(f,{NewsModule:()=>gt});var g=s(6895),l=s(1390),m=s(4006),x=s(3170),N=s(7375),c=s(6271),C=s(4249),Z=s(2777),D=s(5094),y=s(210),U=s(7355),A=s(4946),L=s(6436),R=s(8613),J=s(669),O=s(4854),F=s(8764),Y=s(1838),B=s(7623),t=s(4650),v=s(3e3),w=s(257),_=s(6382),M=s(8745),I=s(9618),T=s(8616),K=s(4028),Q=s(9461),P=s(1861);function H(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",5),t._UZ(7,"img",7),t.qZA(),t.TgZ(8,"div",8)(9,"app-material-chip",9),t.NdJ("chipClicked",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.openTag(n))}),t.qZA()()()()()(),t.TgZ(10,"div",10)(11,"div",6)(12,"div",11)(13,"div",5)(14,"h2",12)(15,"b",13),t._uU(16),t.qZA()()(),t.TgZ(17,"div",5),t._UZ(18,"hr",14),t.qZA(),t.TgZ(19,"div",5)(20,"h5",15),t._uU(21," .: "),t.TgZ(22,"a",16),t._uU(23),t.qZA(),t._uU(24),t.ALo(25,"date"),t.qZA()()(),t._UZ(26,"div",17),t.ALo(27,"safeInnerHtml"),t.qZA()()(),t.TgZ(28,"div",18)(29,"div",19)(30,"h2",20)(31,"b",13),t._uU(32,"Komentar"),t.qZA()()(),t.TgZ(33,"div",5)(34,"div",21),t._UZ(35,"app-discussion"),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(7),t.s9C("src",e.newsData.image_url,t.LSH),t.xp6(2),t.Q6J("chipData",e.chipData),t.xp6(7),t.Oqu(e.newsData.title),t.xp6(6),t.MGl("routerLink","/user/",e.newsData.user_.username,""),t.xp6(1),t.hij(" ",e.newsData.user_.username," "),t.xp6(1),t.hij(" :: ",t.xi3(25,7,e.newsData.created_at,"d MMMM y, hh:mm:ss a z")," :. "),t.xp6(2),t.Q6J("innerHTML",t.lcZ(27,10,e.newsData.content),t.oJD)}}let z=(()=>{class a{constructor(e,i,n,o,d,u,p){this.activatedRoute=e,this.router=i,this.bs=n,this.gs=o,this.fs=d,this.pi=u,this.news=p,this.newsId=0,this.newsData=null,this.chipData=[],this.subsActRoute=null,this.subsNews=null,this.subsParam=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}ngOnDestroy(){this.subsActRoute?.unsubscribe(),this.subsNews?.unsubscribe(),this.subsParam?.unsubscribe()}ngOnInit(){this.subsParam=this.activatedRoute.params.subscribe({next:e=>{this.newsId=Number(e.newsId),this.bs.busy(),this.subsNews=this.news.getNews(this.newsId).subscribe({next:i=>{if(this.gs.log("[NEWS_DETAIL_SUCCESS]",i),this.newsData=i.result,this.pi.updatePageMetaData(this.newsData.title,this.newsData.content,Array.isArray(this.newsData.tags)?this.newsData.tags.join(", "):this.newsData.title,this.newsData.image_url,this.newsData.user_.username),this.bs.idle(),this.gs.isBrowser){if(Array.isArray(this.newsData.tags))for(let n=0;n<this.newsData.tags.length;n++)this.chipData.push({id_tag:n,name:this.newsData.tags[n],color:B.Q.PINK,selected:!0});this.fs.initializeFab("edit",null,"Ubah Data Berita",`/news/${this.newsId}/edit`,!1)}},error:i=>{this.gs.log("[NEWS_DETAIL_ERROR]",i,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:"/news"}})}})}})}openTag(e){this.gs.log("[FANSUB_DETAIL_OPEN_TAG]",e)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.gz),t.Y36(l.F0),t.Y36(v.z),t.Y36(w.U),t.Y36(_.r),t.Y36(M.Z),t.Y36(I.Y))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-news-detail"]],decls:2,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row","pb-3","px-0"],[1,"col-lg-4","col-xl-3"],[1,"row","sticky-top","pt-3"],[1,"col-12"],[1,"row"],[1,"w-100",3,"src"],[1,"col-12","p-3"],[3,"chipData","chipClicked"],[1,"col-lg-8","col-xl-9"],[1,"sticky-top","bg-bifeldy"],[1,"pt-3","m-0"],[1,"text-bifeldy"],[1,"my-1","border-bottom-dotted",2,"height","4px","background","url('/assets/img/stripe.png')"],[1,"pb-3","m-0","text-bifeldy"],[1,"text-warning","text-decoration-none",3,"routerLink"],[1,"col-12","pt-3","mt-3",3,"innerHTML"],[1,"row","pt-3"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"p-3"]],template:function(e,i){1&e&&(t._UZ(0,"app-notifications"),t.YNc(1,H,36,12,"div",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",i.newsData))},dependencies:[g.O5,l.yS,T.t,K.G,Q.S,g.uU,P.H]}),a})();var G=s(7902),k=s(6925),j=s(4137),E=s(4859),b=s(7331),W=s(7392),h=s(9549),$=s(4144),X=s(3626);function V(a,r){if(1&a&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"bytes"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.hij("Ukuran Upload Melebihi Batas ",t.lcZ(2,1,e.imageLimitExceeded)," !")}}function q(a,r){if(1&a&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.imageErrorText)}}function tt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.submitImage())}),t._UZ(2,"mat-icon",37),t._uU(3," Unggah "),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function et(a,r){1&a&&(t.TgZ(0,"div"),t._uU(1,"Judul Berita Tidak Boleh Kosong"),t.qZA())}function it(a,r){1&a&&(t.TgZ(0,"div"),t._uU(1,"Judul Berita Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function st(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip",38),t.NdJ("removed",function(){const o=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.removeTag(o))}),t._uU(1),t._UZ(2,"mat-icon",39),t.qZA()}if(2&a){const e=r.$implicit;t.Q6J("removable",!0),t.xp6(1),t.hij(" ",e," ")}}function at(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"form",4),t.NdJ("submit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onSubmit())}),t.TgZ(1,"div",5)(2,"div",6)(3,"h2",7)(4,"b",8),t._uU(5,"Perbaharui Data Berita & Informasi Baru"),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",9)(8,"div",10)(9,"div",9)(10,"div",2),t._UZ(11,"img",11),t.TgZ(12,"mat-form-field",12)(13,"mat-label"),t._uU(14,"Gambar"),t.qZA(),t.TgZ(15,"ngx-mat-file-input",13,14),t.NdJ("change",function(n){t.CHM(e);const o=t.MAs(16),d=t.oxw();return t.KtG(d.uploadImage(n,o))}),t.qZA(),t._UZ(17,"mat-icon",15),t.qZA(),t.TgZ(18,"mat-error",16)(19,"small"),t.YNc(20,V,3,3,"div",17),t.YNc(21,q,2,1,"div",17),t.qZA()()(),t.YNc(22,tt,4,1,"div",18),t.qZA()(),t.TgZ(23,"div",19)(24,"div",9)(25,"mat-form-field",20)(26,"mat-label"),t._uU(27,"Judul"),t.qZA(),t._UZ(28,"input",21)(29,"mat-icon",22),t.TgZ(30,"mat-error"),t.YNc(31,et,2,0,"div",17),t.YNc(32,it,2,0,"div",17),t.qZA()(),t.TgZ(33,"mat-form-field",20)(34,"mat-label"),t._uU(35,"Tags & Kategori"),t.qZA(),t.TgZ(36,"mat-chip-list",null,23),t.YNc(38,st,3,2,"mat-chip",24),t.TgZ(39,"input",25),t.NdJ("matChipInputTokenEnd",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.addTag(n))}),t.qZA(),t._UZ(40,"mat-icon",26),t.qZA(),t.TgZ(41,"mat-hint",27),t._uU(42,"Isi Dengan Bebas, Pisahkan Dengan Koma"),t.qZA()(),t._UZ(43,"angular-editor",28),t.qZA()()(),t.TgZ(44,"div",9)(45,"div",2)(46,"div",29),t._UZ(47,"div",30),t.TgZ(48,"div",31)(49,"a",32),t._UZ(50,"mat-icon",33),t._uU(51," Batal "),t.qZA()(),t.TgZ(52,"div",31)(53,"button",34),t._uU(54," Simpan "),t._UZ(55,"mat-icon",35),t.qZA()()()()()()()()}if(2&a){const e=t.MAs(37),i=t.oxw();t.Q6J("formGroup",i.fg),t.xp6(11),t.Q6J("src",i.image_url,t.LSH),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("disabled",i.fg.value.image)("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(5),t.Q6J("ngIf",i.imageLimitExceeded),t.xp6(1),t.Q6J("ngIf",i.imageErrorText),t.xp6(1),t.Q6J("ngIf",i.image&&!i.fg.value.image),t.xp6(3),t.Q6J("color","accent"),t.xp6(6),t.Q6J("ngIf",i.fg.get("title").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.fg.get("title").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(5),t.Q6J("ngForOf",i.fg.value.tags),t.xp6(1),t.Q6J("matChipInputSeparatorKeyCodes",i.GS.separatorKeysCodes)("matChipInputFor",e)("matChipInputAddOnBlur",!0),t.xp6(4),t.Q6J("config",i.GS.angularEditorConfig),t.xp6(6),t.Q6J("disabled",i.submitted),t.xp6(4),t.Q6J("disabled",i.submitted||i.fg.invalid)}}let nt=(()=>{class a{constructor(e,i,n,o,d,u,p,ut,ct){this.fb=e,this.router=i,this.bs=n,this.activatedRoute=o,this.imgbb=d,this.news=u,this.toast=p,this.gs=ut,this.as=ct,this.newsId=0,this.submitted=!1,this.image=null,this.imageErrorText=null,this.imageLimitExceeded=null,this.image_url="/assets/img/form/no-image.png",this.image_url_original=null,this.gambar=null,this.subsActRoute=null,this.subsNewsUpdate=null,this.subsNewsDetail=null,this.subsImgbb=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get GS(){return this.gs}ngOnInit(){this.gs.isBrowser&&(this.newsId=Number(this.activatedRoute.snapshot.paramMap.get("newsId")),this.bs.busy(),this.subsNewsDetail=this.news.getNews(this.newsId).subscribe({next:e=>{this.gs.log("[NEWS_DETAIL_SUCCESS]",e),this.bs.idle(),this.as.currentUserSubject?.value?.id!==e.result.user_.id?(this.toast.warning("Berita Ini Milik Orang Lain","Whoops!",null,!0),this.router.navigateByUrl(`/news/${this.newsId}`)):this.initForm(e.result)},error:e=>{this.gs.log("[NEWS_DETAIL_ERROR]",e,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:`/news/${this.newsId}`}})}}))}ngOnDestroy(){this.subsActRoute?.unsubscribe(),this.subsNewsUpdate?.unsubscribe(),this.subsNewsDetail?.unsubscribe(),this.subsImgbb?.unsubscribe()}initForm(e){this.image_url=e.image_url,this.image_url_original=this.image_url,this.fg=this.fb.group({title:[e.title,m.kI.compose([m.kI.required,m.kI.pattern(c.t.regexEnglishKeyboardKeys)])],content:[e.content,m.kI.compose([m.kI.required,m.kI.pattern(c.t.regexEnglishKeyboardKeys)])],image:[null,m.kI.compose([m.kI.pattern(c.t.regexUrl)])],tags:[e.tags,m.kI.compose([])]})}uploadImage(e,i){this.gambar=i,this.image=null,this.imageLimitExceeded=null,this.imageErrorText=null,this.fg.controls.image.patchValue(null),this.fg.controls.image.markAsPristine();const n=e.target.files[0];try{const o=new FileReader;o.readAsDataURL(n),o.onload=d=>{if(this.gs.log("[IMAGE_SELECTED]",d),n.size<=c.t.fileSizeImageLimit){const u=this.gs.document.createElement("img");u.onload=()=>{this.image=n,this.image_url=o.result.toString()},u.src=o.result.toString()}else this.image=null,this.image_url="/assets/img/form/image-error.png",this.imageLimitExceeded=c.t.fileSizeImageLimit,this.gambar.clear(e)}}catch{this.image=null,this.image_url=this.image_url_original,this.gambar.clear(e)}}submitImage(){this.submitted=!0,this.subsImgbb=this.imgbb.uploadImage({file:this.image}).subscribe({next:e=>{this.gs.log("[IMAGE_SUCCESS]",e),this.fg.controls.image.patchValue(e.result.url),this.fg.controls.image.markAsDirty(),this.submitted=!1},error:e=>{this.gs.log("[IMAGE_ERROR]",e,"error"),this.fg.controls.image.patchValue(null),this.fg.controls.image.markAsPristine(),this.submitted=!1,this.imageErrorText=e.result?.message||e.info}})}onSubmit(){this.bs.busy();const e=this.gs.getDirtyValues(this.fg);if(this.gs.log("[NEWS_EDIT_DIRTY]",e),this.submitted=!0,this.fg.invalid)return this.submitted=!1,void this.bs.idle();this.subsNewsUpdate=this.news.updateNews(this.newsId,{...e}).subscribe({next:i=>{this.gs.log("[NEWS_EDIT_SUCCESS]",i),this.submitted=!1,this.bs.idle(),this.router.navigateByUrl(`/news/${this.newsId}`)},error:i=>{this.gs.log("[NEWS_EDIT_ERROR]",i,"error"),this.submitted=!1,this.bs.idle()}})}addTag(e){const i=e.input,n=e.value;(n||"").trim()&&this.fg.value.tags.push(n.trim()),i&&(i.value=""),this.fg.controls.tags.patchValue(this.fg.value.tags.filter((o,d,u)=>u.findIndex(p=>p===o)===d)),this.fg.controls.tags.markAsDirty()}removeTag(e){const i=this.fg.value.tags.indexOf(e);i>=0&&this.fg.value.tags.splice(i,1)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.QS),t.Y36(l.F0),t.Y36(v.z),t.Y36(l.gz),t.Y36(G.X),t.Y36(I.Y),t.Y36(k.k),t.Y36(w.U),t.Y36(j.e))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-news-edit"]],decls:5,vars:1,consts:[[1,"container"],[1,"row","px-3"],[1,"col-12"],[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"row","mt-3","mb-3"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"text-bifeldy"],[1,"row"],[1,"col-12","col-md-5","col-xl-4","p-3"],[1,"w-100","border",3,"src"],["appearance","outline",1,"pt-3","w-100",3,"color"],[1,"w-100",3,"disabled","accept","change"],["gambar",""],["fontIcon","image","matSuffix",""],[1,"px-3","w-100"],[4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12","col-md-7","col-xl-8","p-3"],["appearance","outline",1,"py-3","col-12",3,"color"],["matInput","","formControlName","title","placeholder","Berita Terkini Blablabla ..."],["fontIcon","wysiwyg","matSuffix",""],["tag",""],["color","accent","selected","",3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","Label Tag / Kategori",3,"matChipInputSeparatorKeyCodes","matChipInputFor","matChipInputAddOnBlur","matChipInputTokenEnd"],["fontIcon","loyalty","matSuffix",""],["align","end"],["formControlName","content",1,"py-3","w-100",3,"config"],[1,"row","gy-3"],[1,"col","g-0"],[1,"col-12","col-md-3"],["mat-stroked-button","","routerLink","../",1,"w-100",3,"disabled"],["fontIcon","undo",1,"me-1"],["type","submit","mat-flat-button","","color","accent",1,"w-100",3,"disabled"],["fontIcon","save",1,"ms-1"],["type","button","mat-raised-button","","color","primary",1,"w-100",3,"disabled","click"],["fontIcon","add_photo_alternate",1,"me-1"],["color","accent","selected","",3,"removable","removed"],["fontIcon","cancel","matChipRemove",""]],template:function(e,i){1&e&&(t._UZ(0,"app-notifications"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2),t.YNc(4,at,56,19,"form",3),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",i.fg))},dependencies:[g.sg,g.O5,l.yS,E.lW,E.zs,b.qn,b.HS,b.oH,b.qH,W.Hw,h.TO,h.KE,h.bx,h.hX,h.R9,$.Nt,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,x.Yh,T.t,N.s6,X.$]}),a})();var ot=s(9530),rt=s(8757),lt=s(3331),mt=s(8921);const dt=[{path:"",pathMatch:"full",component:(()=>{class a{constructor(e,i,n,o,d){this.router=e,this.gs=i,this.bs=n,this.news=o,this.fs=d,this.newsData=[],this.tabData=[{name:"Semua Berita & Informasi",icon:"file_copy",type:"table",data:{column:["Tanggal","Image","Topik","Penulis"],row:[]}}],this.count=0,this.page=1,this.row=25,this.tablePageSizeOptions=[25,50,75,100,125],this.q="",this.sort="",this.order="",this.subsNews=null,this.gs.bannerImg="/assets/img/banner/news.png",this.gs.sizeContain=!1,this.gs.bgRepeat=!1}ngOnDestroy(){this.subsNews?.unsubscribe()}ngOnInit(){this.gs.isBrowser&&this.getNews()}getNews(){this.bs.busy(),this.subsNews&&(this.subsNews.unsubscribe(),this.bs.idle()),this.subsNews=this.news.getAllNews(this.q,this.page,this.row,this.sort,this.order).subscribe({next:e=>{this.gs.log("[NEWS_LIST_SUCCESS]",e),this.count=e.count,this.newsData=[];for(const i of e.results)this.newsData.push({id:i.id,Topik:i.title,Image:i.image_url,Tanggal:i.created_at,Penulis:i.user_.username,foto:i.user_.image_url});this.tabData[0].data.row=this.newsData,this.fs.initializeFab("add",null,"Tambah Berita Baru","/create/news",!1),this.bs.idle()},error:e=>{this.gs.log("[NEWS_LIST_ERROR]",e,"error"),this.bs.idle()}})}openNews(e){this.gs.log("[NEWS_LIST_CLICK_NEWS]",e),this.router.navigateByUrl(`/news/${e.id}`)}onPaginatorClicked(e){this.gs.log("[NEWS_LIST_CLICK_PAGINATOR]",e),this.page=e.pageIndex+1,this.row=e.pageSize,this.getNews()}onServerSideFilter(e){this.gs.log("[NEWS_LIST_ENTER_FILTER]",e),this.q=e,this.getNews()}onServerSideOrder(e){this.gs.log("[NEWS_LIST_CLICK_ORDER]",e),this.q=e.q,this.sort=e.active,this.order=e.direction,this.getNews()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.F0),t.Y36(w.U),t.Y36(v.z),t.Y36(I.Y),t.Y36(_.r))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-news-list"]],decls:12,vars:4,consts:[[1,"container"],[1,"row","pb-3","px-0"],[1,"col-lg-8","col-xl-9"],[1,"row"],[3,"tablePageSizeOptions","tabData","count","serverSide","tableRowClicked","paginatorClicked","serverSideFilter","serverSideOrder"],[1,"col-lg-4","col-xl-3"],[1,"row","sticky-top"],[1,"col-12"]],template:function(e,i){1&e&&(t._UZ(0,"app-notifications"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"app-material-tab",4),t.NdJ("tableRowClicked",function(o){return i.openNews(o)})("paginatorClicked",function(o){return i.onPaginatorClicked(o)})("serverSideFilter",function(o){return i.onServerSideFilter(o)})("serverSideOrder",function(o){return i.onServerSideOrder(o)}),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7),t._UZ(9,"app-banner-donasi")(10,"app-banner-discord")(11,"app-stats-server"),t.qZA()()()()()),2&e&&(t.xp6(5),t.Q6J("tablePageSizeOptions",i.tablePageSizeOptions)("tabData",i.tabData)("count",i.count)("serverSide",!0))},dependencies:[ot.u,rt.H,T.t,lt.B,mt.X]}),a})()},{path:":newsId",children:[{path:"",pathMatch:"full",component:z},{path:"edit",component:nt,canActivate:[D.H,Z.t],data:{title:"Berita - Ubah Data",description:"Halaman Pembaharuan Data Berita",keywords:"Ubah Berita",[c.t.decoratorVerifiedOnly]:!0,[c.t.decoratorRoles]:[C.yS.ADMIN,C.yS.MODERATOR]}}]}];let gt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[g.ez,l.Bz.forChild(dt),Y.R,y.m,L.L,m.u5,m.UX,x.Ad,R.F,N.UM,O.R,J.A,A.P,F.R,U.T]}),a})()},7623:(S,f,s)=>{s.d(f,{Q:()=>g});var g=(()=>{return(l=g||(g={})).BIRU="#7289DA",l.UNGU="#3F51B5",l.HITAM="#343A40",l.ABU="#A9A9A9",l.MERAH="#DC3545",l.PINK="#FF4081",l.OREN="#F44336",l.KUNING="#FFC107",l.HIJAU="#28A745",g;var l})()}}]);