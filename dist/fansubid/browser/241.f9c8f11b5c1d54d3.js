"use strict";(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[241],{4241:(M,C,l)=>{l.r(C),l.d(C,{CreateModule:()=>Je});var m=l(9808),h=l(8406),n=l(3075),b=l(9345),x=l(1385),u=l(6271),I=l(5094),Q=l(210),D=l(7355),R=l(8613),d=l(8372),T=l(9094),g=l(8505),p=l(3900),k=l(8746),E=l(5625),t=l(5e3),B=l(3e3),N=l(8745),G=l(519),z=l(8439),$=l(5679),Y=l(6781),W=l(8987),O=l(7902),H=l(2290),q=l(8696),X=l(4137),tt=l(6493),y=l(8616),f=l(7322),F=l(5245),Z=l(7423),et=l(2368),K=l(7238),P=l(4107),V=l(508),w=l(7531),j=l(1079),at=l(5899),ot=l(4834),it=l(3626);function nt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",27)(1,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).submitImage()}),t.TgZ(2,"mat-icon",31),t._uU(3,"add_photo_alternate"),t.qZA(),t._uU(4," Unggah "),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function rt(a,r){1&a&&(t.TgZ(0,"div",24)(1,"mat-slide-toggle",44),t._uU(2," Jadikan Private, Akses Hanya Dengan URL "),t.qZA()())}function st(a,r){if(1&a&&(t.TgZ(0,"mat-option",45),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function lt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Jenis Tidak Boleh Kosong"),t.qZA())}function mt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Jenis Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function ut(a,r){1&a&&(t.TgZ(0,"mat-option",51),t._UZ(1,"mat-progress-bar",52),t.qZA())}function ct(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",54),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(4).filterAnimeSelected(s)}),t._UZ(1,"img",55),t.TgZ(2,"span",43),t._uU(3),t.qZA()()}if(2&a){const e=r.$implicit;t.Q6J("value",e.mal_id),t.xp6(1),t.s9C("src",e.image_url,t.LSH),t.xp6(2),t.AsE("",e.mal_id," :: ",e.title,"")}}function gt(a,r){if(1&a&&(t.ynx(0),t.YNc(1,ct,4,4,"mat-option",53),t.BQk()),2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.filteredAnime)}}function _t(a,r){if(1&a&&(t.TgZ(0,"small",56),t._uU(1),t.qZA()),2&a){const e=t.oxw(3);t.xp6(1),t.Oqu(e.fg.get("anime_name").value)}}function dt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"ID Anime Tidak Boleh Kosong"),t.qZA())}function pt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"ID Anime Hanya Boleh Angka"),t.qZA())}function ft(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mat-form-field",46)(1,"mat-label"),t._uU(2,"Anime Terkait"),t.qZA(),t.TgZ(3,"input",47),t.NdJ("keyup",function(){return t.CHM(e),t.oxw(2).resetSelectedAnime()}),t.qZA(),t.TgZ(4,"mat-icon",15),t._uU(5,"short_text"),t.qZA(),t.TgZ(6,"mat-autocomplete",null,48),t.YNc(8,ut,2,0,"mat-option",49),t.YNc(9,gt,2,1,"ng-container",22),t.qZA(),t.YNc(10,_t,2,1,"small",50),t.TgZ(11,"mat-error"),t.YNc(12,dt,2,0,"strong",22),t.YNc(13,pt,2,0,"strong",22),t.qZA()()}if(2&a){const e=t.MAs(7),o=t.oxw(2);t.Q6J("color","accent"),t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(5),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.fg.get("anime_name").value),t.xp6(2),t.Q6J("ngIf",o.fg.get("anime_id").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.fg.get("anime_id").hasError("pattern"))}}function ht(a,r){1&a&&(t.TgZ(0,"mat-option",51),t._UZ(1,"mat-progress-bar",52),t.qZA())}function bt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",54),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(4).filterDoramaSelected(s)}),t._UZ(1,"img",55),t.TgZ(2,"span",43),t._uU(3),t.qZA()()}if(2&a){const e=r.$implicit;t.Q6J("value",e.mdl_id),t.xp6(1),t.s9C("src",e.image_url,t.LSH),t.xp6(2),t.AsE("",e.mdl_id," :: ",e.title,"")}}function xt(a,r){if(1&a&&(t.ynx(0),t.YNc(1,bt,4,4,"mat-option",53),t.BQk()),2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.filteredDorama)}}function Tt(a,r){if(1&a&&(t.TgZ(0,"small",56),t._uU(1),t.qZA()),2&a){const e=t.oxw(3);t.xp6(1),t.Oqu(e.fg.get("dorama_name").value)}}function vt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"ID Dorama Tidak Boleh Kosong"),t.qZA())}function Ct(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"ID Dorama Hanya Boleh Angka"),t.qZA())}function Zt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mat-form-field",46)(1,"mat-label"),t._uU(2,"Dorama Terkait"),t.qZA(),t.TgZ(3,"input",57),t.NdJ("keyup",function(){return t.CHM(e),t.oxw(2).resetSelectedDorama()}),t.qZA(),t.TgZ(4,"mat-icon",15),t._uU(5,"short_text"),t.qZA(),t.TgZ(6,"mat-autocomplete",null,58),t.YNc(8,ht,2,0,"mat-option",49),t.YNc(9,xt,2,1,"ng-container",22),t.qZA(),t.YNc(10,Tt,2,1,"small",50),t.TgZ(11,"mat-error"),t.YNc(12,vt,2,0,"strong",22),t.YNc(13,Ct,2,0,"strong",22),t.qZA()()}if(2&a){const e=t.MAs(7),o=t.oxw(2);t.Q6J("color","accent"),t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(5),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.fg.get("dorama_name").value),t.xp6(2),t.Q6J("ngIf",o.fg.get("dorama_id").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.fg.get("dorama_id").hasError("pattern"))}}function At(a,r){1&a&&(t.TgZ(0,"mat-icon",15),t._uU(1,"short_text"),t.qZA())}function kt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(2).removeFansub(i)}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Ut(a,r){1&a&&(t.TgZ(0,"mat-option",51),t._UZ(1,"mat-progress-bar",52),t.qZA())}function It(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",54),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2).index;return t.oxw(2).filterFansubSelected(s,c)}),t._UZ(1,"img",65),t.TgZ(2,"span",43),t._uU(3),t.qZA()()}if(2&a){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.s9C("src",e.image_url,t.LSH),t.xp6(2),t.AsE("",e.slug," :: ",e.name,"")}}function Et(a,r){if(1&a&&(t.ynx(0),t.YNc(1,It,4,4,"mat-option",53),t.BQk()),2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.filteredFansub)}}function St(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"ID Fansub Tidak Boleh Kosong"),t.qZA())}function Jt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"ID Fansub Hanya Boleh Angka"),t.qZA())}function Bt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"div",59)(2,"mat-form-field",46)(3,"mat-label"),t._uU(4,"Fansub Terkait"),t.qZA(),t.TgZ(5,"input",60),t.NdJ("keyup",function(){const s=t.CHM(e).index;return t.oxw(2).resetSelectedFansub(s)}),t.qZA(),t.YNc(6,At,2,0,"mat-icon",61),t.YNc(7,kt,3,0,"button",62),t.TgZ(8,"mat-autocomplete",null,63),t.YNc(10,Ut,2,0,"mat-option",49),t.YNc(11,Et,2,1,"ng-container",22),t.qZA(),t.TgZ(12,"small",56),t._uU(13),t.qZA(),t.TgZ(14,"mat-error"),t.YNc(15,St,2,0,"strong",22),t.YNc(16,Jt,2,0,"strong",22),t.qZA()()()()}if(2&a){const e=r.$implicit,o=r.index,i=t.MAs(9),s=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",o),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("matAutocomplete",i),t.xp6(1),t.Q6J("ngIf",e.get("fansub_id").value||0===o),t.xp6(1),t.Q6J("ngIf",!e.get("fansub_id").value&&o>0),t.xp6(3),t.Q6J("ngIf",s.isLoading),t.xp6(1),t.Q6J("ngIf",!s.isLoading),t.xp6(2),t.Oqu(e.get("fansub_name").value),t.xp6(2),t.Q6J("ngIf",e.get("fansub_id").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.get("fansub_id").hasError("pattern"))}}function Nt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Nama Berkas Tidak Boleh Kosong"),t.qZA())}function qt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Nama Berkas Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function yt(a,r){1&a&&(t.TgZ(0,"div",9)(1,"div",24),t._UZ(2,"mat-divider"),t.qZA()())}function Ft(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",9)(1,"mat-form-field",66)(2,"mat-label"),t._uU(3,"Upload Lampiran Berkas -- DDL"),t.qZA(),t.TgZ(4,"ngx-mat-file-input",67,68),t.NdJ("change",function(i){t.CHM(e);const s=t.MAs(5);return t.oxw(2).uploadAttachment(i,s)})("state",function(i){return t.CHM(e),t.oxw(2).onState(i)}),t.qZA(),t.TgZ(6,"mat-icon",15),t._uU(7,"attach_file"),t.qZA()(),t.TgZ(8,"mat-error",69)(9,"small")(10,"strong"),t._uU(11),t.qZA()()()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("disabled",null!==e.attachmentSelected)("accept","video/x-matroska, video/mp4"),t.xp6(7),t.Oqu(e.attachmentErrorText)}}function wt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",38)(1,"div",28)(2,"div",70),t._uU(3),t.ALo(4,"bytes"),t._UZ(5,"br")(6,"mat-progress-bar",71),t.qZA()(),t.TgZ(7,"div",72)(8,"button",30),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).submitAttachment(s)}),t.TgZ(9,"mat-icon",31),t._uU(10,"attachment"),t.qZA(),t._uU(11," Unggah "),t.qZA()()()}if(2&a){const e=r.$implicit,o=t.oxw(2);t.xp6(3),t.lnq(" ",e.status," :: ",e.progress,"% @ ",t.lcZ(4,6,e.speed),"/s "),t.xp6(3),t.Q6J("mode","determinate")("value",e.progress),t.xp6(2),t.Q6J("disabled",o.submitted||"complete"===e.status||"uploading"===e.status)}}function Mt(a,r){1&a&&(t.TgZ(0,"mat-icon",15),t._uU(1,"web"),t.qZA())}function Qt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(2).removeDownloadLink(i)}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Dt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Web Tidak Boleh Kosong"),t.qZA())}function Rt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Web Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function Ot(a,r){1&a&&(t.TgZ(0,"mat-icon",15),t._uU(1,"link"),t.qZA())}function Lt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(2).removeDownloadLink(i)}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Yt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Tautan Tidak Boleh Kosong"),t.qZA())}function Ht(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Tautan Link Tidak Valid"),t.qZA())}function Kt(a,r){if(1&a&&(t.TgZ(0,"div")(1,"div",73)(2,"mat-form-field",74)(3,"mat-label"),t._uU(4,"Nama Website"),t.qZA(),t._UZ(5,"input",75),t.YNc(6,Mt,2,0,"mat-icon",61),t.YNc(7,Qt,3,0,"button",62),t.TgZ(8,"mat-error"),t.YNc(9,Dt,2,0,"strong",22),t.YNc(10,Rt,2,0,"strong",22),t.qZA()(),t.TgZ(11,"mat-form-field",76)(12,"mat-label"),t._uU(13,"Tautan Luar"),t.qZA(),t._UZ(14,"input",77),t.YNc(15,Ot,2,0,"mat-icon",61),t.YNc(16,Lt,3,0,"button",62),t.TgZ(17,"mat-error"),t.YNc(18,Yt,2,0,"strong",22),t.YNc(19,Ht,2,0,"strong",22),t.qZA()()()()),2&a){const e=r.$implicit,o=r.index;t.xp6(1),t.Q6J("formGroupName",o),t.xp6(1),t.Q6J("color","accent"),t.xp6(4),t.Q6J("ngIf",e.get("name").value||0===o),t.xp6(1),t.Q6J("ngIf",!e.get("name").value&&o>0),t.xp6(2),t.Q6J("ngIf",e.get("name").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.get("name").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(4),t.Q6J("ngIf",e.get("url").value||0===o),t.xp6(1),t.Q6J("ngIf",!e.get("url").value&&o>0),t.xp6(2),t.Q6J("ngIf",e.get("url").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.get("url").hasError("pattern"))}}function Pt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"form",4),t.NdJ("submit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(1,"div",5)(2,"div",6)(3,"h2",7)(4,"b",8),t._uU(5,"Tambah Berkas Baru"),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",9)(8,"div",10)(9,"div",9)(10,"div",2),t._UZ(11,"img",11),t.TgZ(12,"mat-form-field",12)(13,"mat-label"),t._uU(14,"Gambar"),t.qZA(),t.TgZ(15,"ngx-mat-file-input",13,14),t.NdJ("change",function(i){t.CHM(e);const s=t.MAs(16);return t.oxw().uploadImage(i,s)}),t.qZA(),t.TgZ(17,"mat-icon",15),t._uU(18,"image"),t.qZA()(),t.TgZ(19,"mat-error",16)(20,"small")(21,"strong"),t._uU(22),t.qZA()()()(),t.YNc(23,nt,5,1,"div",17),t.YNc(24,rt,3,0,"div",18),t.TgZ(25,"mat-form-field",19)(26,"mat-label"),t._uU(27,"Jenis Proyek"),t.qZA(),t.TgZ(28,"mat-select",20),t.YNc(29,st,2,2,"mat-option",21),t.qZA(),t.TgZ(30,"mat-error"),t.YNc(31,lt,2,0,"strong",22),t.YNc(32,mt,2,0,"strong",22),t.qZA()(),t.YNc(33,ft,14,7,"mat-form-field",23),t.YNc(34,Zt,14,7,"mat-form-field",23),t.TgZ(35,"div",24),t._UZ(36,"mat-divider"),t.qZA(),t.TgZ(37,"div",25),t.YNc(38,Bt,17,10,"div",26),t.qZA(),t.TgZ(39,"div",27)(40,"div",9),t._UZ(41,"div",28),t.TgZ(42,"div",29)(43,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().addFansub()}),t.TgZ(44,"mat-icon",31),t._uU(45,"add"),t.qZA(),t._uU(46," Tambah Fansub "),t.qZA()()()()()(),t.TgZ(47,"div",32)(48,"div",9)(49,"mat-form-field",19)(50,"mat-label"),t._uU(51,"Nama Berkas"),t.qZA(),t._UZ(52,"input",33),t.TgZ(53,"mat-icon",15),t._uU(54,"wysiwyg"),t.qZA(),t.TgZ(55,"mat-error"),t.YNc(56,Nt,2,0,"strong",22),t.YNc(57,qt,2,0,"strong",22),t.qZA()(),t._UZ(58,"angular-editor",34),t.qZA(),t.YNc(59,yt,3,0,"div",35),t.YNc(60,Ft,12,4,"div",35),t.YNc(61,wt,12,8,"div",36),t.ALo(62,"async"),t.TgZ(63,"div",9)(64,"div",24),t._UZ(65,"mat-divider"),t.qZA()(),t.TgZ(66,"div",37),t.YNc(67,Kt,20,11,"div",26),t.qZA(),t.TgZ(68,"div",38),t._UZ(69,"div",28)(70,"div",28)(71,"div",28),t.TgZ(72,"div",29)(73,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().addDownloadLink()}),t.TgZ(74,"mat-icon",31),t._uU(75,"add"),t.qZA(),t._uU(76," Tambah URL "),t.qZA()()()()(),t.TgZ(77,"div",9)(78,"div",39)(79,"div",9),t._UZ(80,"div",28),t.TgZ(81,"div",40)(82,"a",41)(83,"mat-icon",31),t._uU(84,"undo"),t.qZA(),t._uU(85," Batal "),t.qZA()(),t.TgZ(86,"div",40)(87,"button",42),t._uU(88," Simpan "),t.TgZ(89,"mat-icon",43),t._uU(90,"save"),t.qZA()()()()()()()()()}if(2&a){const e=t.oxw();t.Q6J("formGroup",e.fg),t.xp6(11),t.Q6J("src",e.image_url,t.LSH),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("disabled",e.fg.value.image)("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(7),t.Oqu(e.imageErrorText),t.xp6(1),t.Q6J("ngIf",e.image&&!e.fg.value.image),t.xp6(1),t.Q6J("ngIf",null==e.AS.currentUserSubject||null==e.AS.currentUserSubject.value?null:e.AS.currentUserSubject.value.verified),t.xp6(1),t.Q6J("color","accent"),t.xp6(4),t.Q6J("ngForOf",e.projectList),t.xp6(2),t.Q6J("ngIf",e.fg.get("projectType_id").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg.get("projectType_id").hasError("pattern")),t.xp6(1),t.Q6J("ngIf",e.berkasType.toLowerCase().includes("anime")),t.xp6(1),t.Q6J("ngIf",e.berkasType.toLowerCase().includes("dorama")),t.xp6(4),t.Q6J("ngForOf",e.getFansubControl.controls),t.xp6(5),t.Q6J("disabled",e.submitted),t.xp6(6),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",e.fg.get("name").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg.get("name").hasError("pattern")),t.xp6(1),t.Q6J("config",e.GS.angularEditorConfig),t.xp6(1),t.Q6J("ngIf",null==e.AS.currentUserSubject||null==e.AS.currentUserSubject.value?null:e.AS.currentUserSubject.value.verified),t.xp6(1),t.Q6J("ngIf",null==e.AS.currentUserSubject||null==e.AS.currentUserSubject.value?null:e.AS.currentUserSubject.value.verified),t.xp6(1),t.Q6J("ngForOf",t.lcZ(62,27,e.uploads$)),t.xp6(6),t.Q6J("ngForOf",e.getDownloadUrlControl.controls),t.xp6(6),t.Q6J("disabled",e.submitted),t.xp6(9),t.Q6J("disabled",e.submitted),t.xp6(5),t.Q6J("disabled",e.submitted||e.fg.invalid||"uploading"===(null==e.attachmentSelected?null:e.attachmentSelected.status))}}let Vt=(()=>{class a{constructor(e,o,i,s,c,_,v,U,S,J,Be,Ne,qe,ye){this.router=e,this.fb=o,this.bs=i,this.pi=s,this.anime=c,this.dorama=_,this.project=v,this.fansub=U,this.berkas=S,this.imgbb=J,this.toast=Be,this.gs=Ne,this.as=qe,this.uploadService=ye,this.submitted=!1,this.projectList=[],this.image=null,this.imageErrorText=null,this.image_url="/assets/img/form/no-image.png",this.filteredAnime=[],this.filteredDorama=[],this.filteredFansub=[],this.isLoading=!1,this.animeCheckOrAddResponse=null,this.doramaCheckOrAddResponse=null,this.attachmentSelected=null,this.attachmentErrorText="",this.uploadToast=null,this.timerTimeout=null,this.gambar=null,this.ddl=null,this.subsProject=null,this.subsFansub=null,this.subsAnimeDetail=null,this.subsDoramaDetail=null,this.subsProjectDetail=null,this.subsFansubDetail=[],this.subsAnimeNew=null,this.subsDoramaNew=null,this.subsImgbb=null,this.subsBerkasCreate=null,this.berkasType="",this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get AS(){return this.as}get GS(){return this.gs}ngOnInit(){this.pi.updatePageMetaData("Berkas - Buat Baru","Halaman Membuat Berkas Baru","Create Berkas"),this.gs.isBrowser&&(this.loadProjectList(),this.initForm(),this.uploads$=this.uploadService.connect(),this.uploadService.events.subscribe({next:e=>{this.gs.log("[UPLOAD_EVENTS]",e),"complete"===e.status?(this.gs.log("[UPLOAD_COMPLETED]",e.response),this.fg.controls.attachment_id.patchValue(e.response.result.id),this.uploadToast=this.toast.warning("Segera Kirim Data Berkas Anda!","Lampiran Akan Dihapus ...",{closeButton:!1,timeOut:u.t.timeoutDeleteTempAttachmentTime,disableTimeOut:"extendedTimeOut",tapToDismiss:!1,progressAnimation:"decreasing"}),this.timerTimeout=setTimeout(()=>{this.gs.log("[UPLOAD_TIMEOUT]",u.t.timeoutDeleteTempAttachmentTime),this.failOrCancelUpload()},u.t.timeoutDeleteTempAttachmentTime)):"error"===e.status&&(this.gs.log("[UPLOAD_ERROR]",e.response,"error"),this.failOrCancelUpload(e.response))}}))}ngOnDestroy(){var e,o,i,s,c,_,v,U,S;this.uploadToast&&this.toast.remove(this.uploadToast.toastId),this.timerTimeout&&(clearTimeout(this.timerTimeout),this.timerTimeout=null),null===(e=this.subsProject)||void 0===e||e.unsubscribe(),null===(o=this.subsFansub)||void 0===o||o.unsubscribe(),null===(i=this.subsAnimeDetail)||void 0===i||i.unsubscribe(),null===(s=this.subsDoramaDetail)||void 0===s||s.unsubscribe(),null===(c=this.subsProjectDetail)||void 0===c||c.unsubscribe();for(const J of this.subsFansubDetail)null==J||J.unsubscribe();null===(_=this.subsAnimeNew)||void 0===_||_.unsubscribe(),null===(v=this.subsDoramaNew)||void 0===v||v.unsubscribe(),null===(U=this.subsImgbb)||void 0===U||U.unsubscribe(),null===(S=this.subsBerkasCreate)||void 0===S||S.unsubscribe(),this.uploadService.disconnect()}loadProjectList(){this.bs.busy(),this.subsProject=this.project.getProject().subscribe({next:e=>{this.gs.log("[PROJECT_LOAD_SUCCESS]",e),this.projectList=e.results,this.bs.idle()},error:e=>{this.gs.log("[PROJECT_LOAD_ERROR]",e,"error"),this.bs.idle()}})}initForm(){this.fg=this.fb.group({name:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],description:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],projectType_id:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],anime_id:[null,n.kI.compose([])],anime_name:[null,n.kI.compose([])],dorama_id:[null,n.kI.compose([])],dorama_name:[null,n.kI.compose([])],fansub_list:this.fb.array([this.createFansub()]),image:[null,n.kI.compose([n.kI.pattern(u.t.regexUrl)])],attachment_id:[null,n.kI.compose([n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],download_url:this.fb.array([this.createDownloadLink()]),private:[!1,n.kI.compose([n.kI.required])]}),this.subsAnimeDetail=this.fg.get("anime_id").valueChanges.pipe((0,d.b)(500),(0,T.x)(),(0,g.b)(()=>this.isLoading=!0),(0,p.w)(e=>this.anime.searchAnime(e).pipe((0,k.x)(()=>this.isLoading=!1))),(0,E.X)(-1)).subscribe({next:e=>{this.gs.log("[BERKAS_CREATE_SEARCH_ANIME_RESULT_SUCCESS]",e),this.filteredAnime=e.results},error:e=>{this.gs.log("[BERKAS_CREATE_SEARCH_ANIME_RESULT_ERROR]",e,"error")}}),this.subsDoramaDetail=this.fg.get("dorama_id").valueChanges.pipe((0,d.b)(500),(0,T.x)(),(0,g.b)(()=>this.isLoading=!0),(0,p.w)(e=>this.dorama.searchDorama(e).pipe((0,k.x)(()=>this.isLoading=!1))),(0,E.X)(-1)).subscribe({next:e=>{this.gs.log("[BERKAS_CREATE_SEARCH_DORAMA_RESULT_SUCCESS]",e);for(const o of e.results)o.mdl_id=o.mdl_id.split("-")[1],o.image_url=o.thumb;this.filteredDorama=e.results},error:e=>{this.gs.log("[BERKAS_CREATE_SEARCH_DORAMA_RESULT_ERROR]",e,"error")}}),this.subsProjectDetail=this.fg.get("projectType_id").valueChanges.pipe((0,d.b)(500),(0,T.x)(),(0,E.X)(-1)).subscribe({next:e=>{this.gs.log("[BERKAS_CREATE_PROJECT_CHANGED]",e);const o=this.projectList.find(i=>i.id===e);this.fg.controls.anime_id.patchValue(null),this.fg.controls.anime_name.patchValue(null),this.fg.controls.dorama_id.patchValue(null),this.fg.controls.dorama_name.patchValue(null),this.fg.controls.anime_id.setErrors(null),this.fg.controls.anime_name.setErrors(null),this.fg.controls.dorama_id.setErrors(null),this.fg.controls.dorama_name.setErrors(null),this.fg.controls.anime_id.clearValidators(),this.fg.controls.anime_name.clearValidators(),this.fg.controls.dorama_id.clearValidators(),this.fg.controls.dorama_name.clearValidators(),this.fg.controls.anime_id.markAsPristine(),this.fg.controls.anime_name.markAsPristine(),this.fg.controls.dorama_id.markAsPristine(),this.fg.controls.dorama_name.markAsPristine(),this.fg.controls.anime_id.markAsUntouched(),this.fg.controls.anime_name.markAsUntouched(),this.fg.controls.dorama_id.markAsUntouched(),this.fg.controls.dorama_name.markAsUntouched(),o.name.toLowerCase().includes("anime")?(this.berkasType=o.name,this.fg.controls.anime_id.setValidators([n.kI.required,n.kI.pattern(/^\d+$/)]),this.fg.controls.anime_name.setValidators([n.kI.required])):o.name.toLowerCase().includes("dorama")?(this.berkasType=o.name,this.fg.controls.dorama_id.setValidators([n.kI.required,n.kI.pattern(/^\d+$/)]),this.fg.controls.dorama_name.setValidators([n.kI.required])):this.berkasType="",this.fg.controls.anime_id.updateValueAndValidity(),this.fg.controls.anime_name.updateValueAndValidity(),this.fg.controls.dorama_id.updateValueAndValidity(),this.fg.controls.dorama_name.updateValueAndValidity()}})}get getDownloadUrlControl(){return this.fg.get("download_url")}createDownloadLink(){return this.fb.group({name:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],url:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexUrl)])]})}removeDownloadLink(e){this.getDownloadUrlControl.removeAt(e)}addDownloadLink(){this.getDownloadUrlControl.push(this.createDownloadLink())}get getFansubControl(){return this.fg.get("fansub_list")}createFansub(){const e=this.fb.group({fansub_id:[null,n.kI.compose([n.kI.required,n.kI.pattern(/^\d+$/)])],fansub_name:[null,n.kI.compose([n.kI.required])]});return this.subsFansubDetail.push(e.get("fansub_id").valueChanges.pipe((0,d.b)(500),(0,T.x)(),(0,g.b)(()=>this.isLoading=!0),(0,p.w)(o=>this.fansub.searchFansub(o).pipe((0,k.x)(()=>this.isLoading=!1))),(0,E.X)(-1)).subscribe({next:o=>{this.gs.log("[BERKAS_CREATE_SEARCH_FANSUB_RESULT]",o),this.filteredFansub=o.results}})),e}removeFansub(e){var o;this.getFansubControl.removeAt(e),null===(o=this.subsFansubDetail[e])||void 0===o||o.unsubscribe(),this.subsFansubDetail.splice(e,1)}addFansub(){this.getFansubControl.push(this.createFansub())}resetSelectedAnime(){this.fg.controls.anime_name.patchValue(null)}resetSelectedDorama(){this.fg.controls.dorama_name.patchValue(null)}resetSelectedFansub(e){this.getFansubControl.controls[e].get("fansub_name").patchValue(null)}filterAnimeSelected(e){this.gs.log("[ANIME_FILTER_CLICK]",e),this.submitted=!0,this.subsAnimeNew=this.anime.addNewAnime({id:e.mal_id,name:e.title,image_url:e.image_url,type:e.type}).subscribe({next:o=>{this.gs.log("[ANIME_CHECK_ADD_SUCCESS]",o),this.animeCheckOrAddResponse=o.result,this.submitted=!1,this.fg.controls.anime_id.patchValue(o.result.id),this.fg.controls.anime_name.patchValue(o.result.name)},error:o=>{this.gs.log("[ANIME_CHECK_ADD_ERROR]",o,"error"),this.submitted=!1,this.resetSelectedAnime(),this.fg.controls.anime_id.patchValue(null),this.fg.controls.anime_name.patchValue(null)}})}filterDoramaSelected(e){this.gs.log("[DORAMA_FILTER_CLICK]",e),this.submitted=!0,this.subsDoramaNew=this.dorama.addNewDorama({id:parseInt(e.mdl_id,10),slug:e.slug,name:e.title,image_url:e.image_url,type:e.type}).subscribe({next:o=>{this.gs.log("[DORAMA_CHECK_ADD_SUCCESS]",o),this.doramaCheckOrAddResponse=o.result,this.submitted=!1,this.fg.controls.dorama_id.patchValue(o.result.id),this.fg.controls.dorama_name.patchValue(o.result.name)},error:o=>{this.gs.log("[DORAMA_CHECK_ADD_ERROR]",o,"error"),this.submitted=!1,this.resetSelectedDorama(),this.fg.controls.dorama_id.patchValue(null),this.fg.controls.dorama_name.patchValue(null)}})}filterFansubSelected(e,o){this.gs.log("[FANSUB_FILTER_CLICK]",e),this.getFansubControl.controls[o].get("fansub_id").patchValue(e.id),this.getFansubControl.controls[o].get("fansub_name").patchValue(e.name)}uploadImage(e,o){this.gambar=o,this.image=null,this.fg.controls.image.patchValue(null);const i=e.target.files[0];try{const s=new FileReader;s.readAsDataURL(i),s.onload=c=>{if(this.gs.log("[IMAGE_SELECTED]",c),i.size<=u.t.fileSizeImageLimit){const _=this.gs.document.createElement("img");_.onload=()=>{this.image=i,this.image_url=s.result.toString()},_.src=s.result.toString(),this.imageErrorText=null}else this.image=null,this.image_url="/assets/img/form/image-error.png",this.imageErrorText=`Ukuran Upload Melebihi Batas ${u.t.fileSizeImageLimit} Bytes!`,this.gambar.clear(e)}}catch(s){this.image=null,this.imageErrorText=null,this.image_url="/assets/img/form/no-image.png",this.gambar.clear(e)}}submitImage(){this.submitted=!0,this.subsImgbb=this.imgbb.uploadImage({file:this.image}).subscribe({next:e=>{this.gs.log("[IMAGE_SUCCESS]",e),this.fg.controls.image.patchValue(e.result.url),this.submitted=!1},error:e=>{this.gs.log("[IMAGE_ERROR]",e,"error"),this.fg.controls.image.patchValue(null),this.submitted=!1}})}onSubmit(){var e;if(this.bs.busy(),this.submitted=!0,this.fg.invalid||"uploading"===(null===(e=this.attachmentSelected)||void 0===e?void 0:e.status))return this.submitted=!1,void this.bs.idle();const o=[];for(const i of this.fg.value.fansub_list)o.push(i.fansub_id);this.subsBerkasCreate=this.berkas.createBerkas({image:this.fg.value.image,name:this.fg.value.name,description:this.fg.value.description,private:this.fg.value.private,projectType_id:this.fg.value.projectType_id,anime_id:this.fg.value.anime_id,dorama_id:this.fg.value.dorama_id,fansub_id:o,download_url:this.fg.value.download_url,attachment_id:this.fg.value.attachment_id}).subscribe({next:i=>{this.gs.log("[BERKAS_CREATE_SUCCESS]",i),this.submitted=!1,this.bs.idle(),this.router.navigateByUrl("/berkas")},error:i=>{this.gs.log("[BERKAS_CREATE_ERROR]",i,"error"),this.submitted=!1,this.bs.idle()}})}uploadAttachment(e,o){this.ddl=o;const i=e.target.files[0];this.gs.log("[ATTACHMENT_SELECTED]",i),this.fg.controls.attachment_id.patchValue(null),this.uploadService.disconnect(),this.uploadService.connect();try{i.size<=u.t.fileSizeAttachmentTotalLimit?(this.attachmentErrorText="",this.uploadService.handleFiles(i)):(this.attachmentErrorText=`Ukuran Upload Melebihi Batas ${u.t.fileSizeAttachmentTotalLimit} Bytes!`,this.ddl.clear(e))}catch(s){this.attachmentErrorText="",this.ddl.clear(e)}}onState(e){}submitAttachment(e){this.attachmentSelected=e,e.status="queue"}failOrCancelUpload(e=null){var o,i,s;this.attachmentSelected=null,this.attachmentErrorText=(null===(i=null===(o=null==e?void 0:e.error)||void 0===o?void 0:o.result)||void 0===i?void 0:i.message)||(null===(s=null==e?void 0:e.error)||void 0===s?void 0:s.info)||"",this.fg.controls.attachment_id.patchValue(null),this.toast.remove(this.uploadToast.toastId),this.ddl.clear()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.F0),t.Y36(n.qu),t.Y36(B.z),t.Y36(N.Z),t.Y36(G.o),t.Y36(z.X),t.Y36($.Y),t.Y36(Y.T),t.Y36(W.A),t.Y36(O.X),t.Y36(H._W),t.Y36(q.U),t.Y36(X.e),t.Y36(tt.Lz))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-berkas-create"]],decls:5,vars:1,consts:[[1,"container"],[1,"row","px-3"],[1,"col-12"],[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"row","mt-3","mb-3"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"text-bifeldy"],[1,"row"],[1,"col-12","col-md-5","col-xl-4","p-3"],[1,"w-100","border",3,"src"],["appearance","outline",1,"pt-3","w-100",3,"color"],[1,"w-100",3,"disabled","accept","change"],["gambar",""],["matSuffix",""],[1,"px-3","w-100"],["class","col-12 mb-4",4,"ngIf"],["class","col-12 p-3",4,"ngIf"],["appearance","outline",1,"p-3","col-12",3,"color"],["formControlName","projectType_id","placeholder","Anime / Drama"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["appearance","outline","class","p-3 w-100",3,"color",4,"ngIf"],[1,"col-12","p-3"],["formArrayName","fansub_list"],[4,"ngFor","ngForOf"],[1,"col-12","mb-4"],[1,"col"],[1,"col","pb-3"],["mat-raised-button","","color","primary","type","button",1,"w-100",3,"disabled","click"],[1,"me-1"],[1,"col-12","col-md-7","col-xl-8","pt-3"],["matInput","","formControlName","name","placeholder","[Fansub] Judul Anime - 00 [BD 4K x265 FLAC][CRC32].mkv"],["formControlName","description",1,"p-3","w-100",3,"config"],["class","row",4,"ngIf"],["class","row mb-4",4,"ngFor","ngForOf"],["formArrayName","download_url"],[1,"row","mb-4"],[1,"col-12","py-3"],[1,"col-12","col-md-3","pb-3"],["mat-stroked-button","","routerLink","/berkas",1,"w-100",3,"disabled"],["mat-flat-button","","color","accent","type","submit",1,"w-100",3,"disabled"],[1,"ms-1"],["formControlName","private","matTooltip","Hanya diakses melalui profil dan/atau url"],[3,"value"],["appearance","outline",1,"p-3","w-100",3,"color"],["matInput","","formControlName","anime_id","placeholder","Full Metal Alchemist",3,"matAutocomplete","keyup"],["autoCompleteAnime","matAutocomplete"],["class","is-loading",4,"ngIf"],["class","text-warning",4,"ngIf"],[1,"is-loading"],["mode","indeterminate"],["class","px-1",3,"value","click",4,"ngFor","ngForOf"],[1,"px-1",3,"value","click"],[1,"me-1",2,"border-radius","0","height","40px","width","30px","object-fit","cover",3,"src"],[1,"text-warning"],["matInput","","formControlName","dorama_id","placeholder","Flying Colors",3,"matAutocomplete","keyup"],["autoCompleteDorama","matAutocomplete"],[1,"row",3,"formGroupName"],["matInput","","formControlName","fansub_id","placeholder","NamaFansub",3,"matAutocomplete","keyup"],["matSuffix","",4,"ngIf"],["mat-button","","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["autoCompleteFansub","matAutocomplete"],["mat-button","","matSuffix","","mat-icon-button","",3,"click"],[1,"me-1",2,"border-radius","0","height","40px","width","40px","object-fit","cover",3,"src"],["appearance","outline",1,"px-3","pt-3","col",3,"color"],["uploadx","",1,"w-100",3,"disabled","accept","change","state"],["ddl",""],[1,"px-4","w-100"],[1,"px-3"],[3,"mode","value"],[1,"col-6","col-lg-4"],["matTooltip","Silahkan Isi Alamat Website Kamu Jika Ingin Mendapatkan Traffic Pengunjung",1,"row",3,"formGroupName"],["appearance","outline",1,"p-3","col-12","col-md-5",3,"color"],["matInput","","formControlName","name","placeholder","Halaman Web"],["appearance","outline",1,"p-3","col-12","col-md-7",3,"color"],["matInput","","formControlName","url","placeholder","https://webshit.saya.com/01/02/halaman-post-download.html"]],template:function(e,o){1&e&&(t._UZ(0,"app-notifications"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2),t.YNc(4,Pt,91,29,"form",3),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",o.fg))},directives:[y.t,m.O5,n._Y,n.JL,n.sg,f.KE,f.hX,x.Yh,F.Hw,f.R9,f.TO,Z.lW,et.Rr,n.JJ,n.u,K.gM,P.gD,m.sg,V.ey,w.Nt,n.Fj,j.ZL,j.XC,at.pW,ot.d,n.CE,n.x0,b.s6,Z.zs,h.yS],pipes:[m.Ov,it.$],styles:[""]}),a})();var L=l(6856),A=l(6688);function jt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",6)(1,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).submitImage()}),t.TgZ(2,"mat-icon",54),t._uU(3,"add_photo_alternate"),t.qZA(),t._uU(4," Unggah "),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function Gt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",58)(1,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).submitCover()}),t.TgZ(2,"mat-icon",54),t._uU(3,"add_photo_alternate"),t.qZA(),t._uU(4," Unggah "),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function zt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Nama Fansub Tidak Boleh Kosong"),t.qZA())}function $t(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Nama Fansub Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function Wt(a,r){if(1&a&&(t.TgZ(0,"small",59)(1,"strong"),t._uU(2),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(2),t.Oqu(e.slugInfo)}}function Xt(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Singkatan Tidak Boleh Kosong"),t.qZA())}function te(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Singkatan Hanya Boleh Huruf Dan \u4e00"),t.qZA())}function ee(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Tanggal Harus Diisi Secara Valid"),t.qZA())}function ae(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Tanggal Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function oe(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Mohon Pilih Salah Satu"),t.qZA())}function ie(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Status Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function ne(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip",60),t.NdJ("removed",function(){const s=t.CHM(e).$implicit;return t.oxw(2).removeTag(s)}),t._uU(1),t.TgZ(2,"mat-icon",61),t._uU(3,"cancel"),t.qZA()()}if(2&a){const e=r.$implicit;t.Q6J("removable",!0),t.xp6(1),t.hij(" ",e," ")}}function re(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Website Tidak Boleh Kosong"),t.qZA())}function se(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Website Link Tidak Valid"),t.qZA())}function le(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Facebook Link Tidak Valid"),t.qZA())}function me(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Discord Link Tidak Valid"),t.qZA())}function ue(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"RSS Link Tidak Valid"),t.qZA())}function ce(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"app-notifications"),t.TgZ(5,"div",5)(6,"div",6)(7,"form",7),t.NdJ("submit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(8,"div",8)(9,"div",9)(10,"h2",10)(11,"b",11),t._uU(12,"Tambah Data Fansub Baru"),t.qZA()()(),t.TgZ(13,"div",6)(14,"div",12)(15,"div",13)(16,"div",12)(17,"div",6),t._UZ(18,"img",14),t.TgZ(19,"mat-form-field",15)(20,"mat-label"),t._uU(21,"Foto"),t.qZA(),t.TgZ(22,"ngx-mat-file-input",16,17),t.NdJ("change",function(i){t.CHM(e);const s=t.MAs(23);return t.oxw().uploadImage(i,s)}),t.qZA(),t.TgZ(24,"mat-icon",18),t._uU(25,"image"),t.qZA()(),t.TgZ(26,"mat-error",19)(27,"small")(28,"strong"),t._uU(29),t.qZA()()()(),t.YNc(30,jt,5,1,"div",20),t.qZA()(),t.TgZ(31,"div",21)(32,"div",12)(33,"mat-form-field",22)(34,"mat-label"),t._uU(35,"Cover"),t.qZA(),t.TgZ(36,"ngx-mat-file-input",16,23),t.NdJ("change",function(i){t.CHM(e);const s=t.MAs(37);return t.oxw().uploadCover(i,s)}),t.qZA(),t.TgZ(38,"mat-icon",18),t._uU(39,"image"),t.qZA()(),t.TgZ(40,"mat-error",19)(41,"small")(42,"strong"),t._uU(43),t.qZA()()(),t.YNc(44,Gt,5,1,"div",24),t.TgZ(45,"mat-form-field",25)(46,"mat-label"),t._uU(47,"Nama Fansub"),t.qZA(),t._UZ(48,"input",26),t.TgZ(49,"mat-icon",18),t._uU(50,"wysiwyg"),t.qZA(),t.TgZ(51,"mat-error"),t.YNc(52,zt,2,0,"strong",27),t.YNc(53,$t,2,0,"strong",27),t.qZA()(),t.TgZ(54,"mat-form-field",28)(55,"mat-label"),t._uU(56,"Singkatan"),t.qZA(),t._UZ(57,"input",29),t.TgZ(58,"mat-icon",18),t._uU(59,"short_text"),t.qZA(),t.YNc(60,Wt,3,1,"small",30),t.TgZ(61,"mat-error"),t.YNc(62,Xt,2,0,"strong",27),t.YNc(63,te,2,0,"strong",27),t.qZA()(),t._UZ(64,"angular-editor",31),t.TgZ(65,"mat-form-field",32)(66,"mat-label"),t._uU(67,"Mulai Ada Sejak"),t.qZA(),t.TgZ(68,"input",33),t.NdJ("focus",function(){return t.CHM(e),t.MAs(72).open()}),t.ALo(69,"date"),t.qZA(),t._UZ(70,"mat-datepicker-toggle",34)(71,"mat-datepicker",35,36),t.TgZ(73,"mat-error"),t.YNc(74,ee,2,0,"strong",27),t.YNc(75,ae,2,0,"strong",27),t.qZA()(),t.TgZ(76,"mat-form-field",32)(77,"mat-label"),t._uU(78,"Status"),t.qZA(),t.TgZ(79,"mat-select",37)(80,"mat-option",38),t._uU(81,"Tidak Aktif"),t.qZA(),t.TgZ(82,"mat-option",39),t._uU(83,"Aktif"),t.qZA()(),t.TgZ(84,"mat-hint",40),t._uU(85,"Status Kehidupan Fansub Saat Ini"),t.qZA(),t.TgZ(86,"mat-error"),t.YNc(87,oe,2,0,"strong",27),t.YNc(88,ie,2,0,"strong",27),t.qZA()()()()(),t.TgZ(89,"div",12)(90,"div",6)(91,"div",12)(92,"mat-form-field",41)(93,"mat-label"),t._uU(94,"Tags & Kategori"),t.qZA(),t.TgZ(95,"mat-chip-list",null,42),t.YNc(97,ne,4,2,"mat-chip",43),t.TgZ(98,"input",44),t.NdJ("matChipInputTokenEnd",function(i){return t.CHM(e),t.oxw().addTag(i)}),t.qZA(),t.TgZ(99,"mat-icon",18),t._uU(100,"loyalty"),t.qZA()(),t.TgZ(101,"mat-hint",40),t._uU(102,"Isi Dengan Bebas, Pisahkan Dengan Koma"),t.qZA()()()()(),t.TgZ(103,"div",12)(104,"div",6)(105,"div",12)(106,"mat-form-field",45)(107,"mat-label"),t._uU(108,"Tautan Website"),t.qZA(),t._UZ(109,"input",46),t.TgZ(110,"mat-icon",18),t._uU(111,"web"),t.qZA(),t.TgZ(112,"mat-error"),t.YNc(113,re,2,0,"strong",27),t.YNc(114,se,2,0,"strong",27),t.qZA()(),t.TgZ(115,"mat-form-field",45)(116,"mat-label"),t._uU(117,"Facebook Fanpage"),t.qZA(),t._UZ(118,"input",47),t.TgZ(119,"mat-icon",18),t._uU(120,"facebook"),t.qZA(),t.TgZ(121,"mat-error"),t.YNc(122,le,2,0,"strong",27),t.qZA()(),t.TgZ(123,"mat-form-field",45)(124,"mat-label"),t._uU(125,"Tautan Discord"),t.qZA(),t._UZ(126,"input",48),t.TgZ(127,"mat-icon",18),t._UZ(128,"img",49),t.qZA(),t.TgZ(129,"mat-error"),t.YNc(130,me,2,0,"strong",27),t.qZA()()()()(),t.TgZ(131,"div",12)(132,"mat-form-field",41)(133,"mat-label"),t._uU(134,"URI / URL RSS v2.0 Feed"),t.qZA(),t._UZ(135,"input",50),t.TgZ(136,"mat-icon",18),t._uU(137,"rss_feed"),t.qZA(),t.TgZ(138,"mat-error"),t.YNc(139,ue,2,0,"strong",27),t.qZA()()(),t.TgZ(140,"div",12)(141,"div",6)(142,"div",12),t._UZ(143,"div",51),t.TgZ(144,"div",52)(145,"a",53)(146,"mat-icon",54),t._uU(147,"undo"),t.qZA(),t._uU(148," Batal "),t.qZA()(),t.TgZ(149,"div",52)(150,"button",55),t._uU(151," Simpan "),t.TgZ(152,"mat-icon",56),t._uU(153,"save"),t.qZA()()()()()()()()()()()()}if(2&a){const e=t.MAs(72),o=t.MAs(96),i=t.oxw();t.xp6(1),t.Udp("background-image","url("+i.cover_url+")"),t.xp6(6),t.Q6J("formGroup",i.fg),t.xp6(11),t.Q6J("src",i.image_url,t.LSH),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("disabled",i.fg.value.image)("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(7),t.Oqu(i.imageErrorText),t.xp6(1),t.Q6J("ngIf",i.image&&!i.fg.value.image),t.xp6(3),t.Q6J("color","accent"),t.xp6(3),t.Q6J("disabled",i.fg.value.cover)("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(7),t.Oqu(i.coverErrorText),t.xp6(1),t.Q6J("ngIf",i.cover&&!i.fg.value.cover),t.xp6(1),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",i.fg.get("name").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.fg.get("name").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(6),t.Q6J("ngIf",i.slugInfo),t.xp6(2),t.Q6J("ngIf",i.fg.get("slug").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.fg.get("slug").hasError("pattern")),t.xp6(1),t.Q6J("config",i.GS.angularEditorConfig),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.s9C("placeholder",t.xi3(69,48,i.currentDate,"d MMMM y")),t.Q6J("matDatepicker",e),t.xp6(2),t.Q6J("for",e),t.xp6(4),t.Q6J("ngIf",i.fg.get("born").hasError("required")||i.fg.get("born").hasError("matDatepickerParse")),t.xp6(1),t.Q6J("ngIf",i.fg.get("born").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(11),t.Q6J("ngIf",i.fg.get("active").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.fg.get("active").hasError("pattern")),t.xp6(4),t.Q6J("color","accent"),t.xp6(5),t.Q6J("ngForOf",i.fg.value.tags),t.xp6(1),t.Q6J("matChipInputSeparatorKeyCodes",i.GS.separatorKeysCodes)("matChipInputFor",o)("matChipInputAddOnBlur",!0),t.xp6(8),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",i.fg.get("web").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.fg.get("web").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",i.fg.get("facebook").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(5),t.MGl("src","/assets/img/discord/",i.GS.isDarkMode?"white":"black",".png",t.LSH),t.xp6(2),t.Q6J("ngIf",i.fg.get("discord").hasError("pattern")),t.xp6(2),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",i.fg.get("rss_feed").hasError("pattern")),t.xp6(6),t.Q6J("disabled",i.submitted),t.xp6(5),t.Q6J("disabled",i.submitted||i.fg.invalid)}}let ge=(()=>{class a{constructor(e,o,i,s,c,_,v,U){this.fb=e,this.router=o,this.bs=i,this.pi=s,this.imgbb=c,this.fansub=_,this.toast=v,this.gs=U,this.submitted=!1,this.image=null,this.imageErrorText=null,this.image_url="/assets/img/form/no-image.png",this.cover=null,this.coverErrorText=null,this.cover_url="/assets/img/form/no-image.png",this.urls=[],this.currentDate=new Date,this.gambar=null,this.gambar_=null,this.subsImgbb=null,this.subsFansub=null,this.subsCekFansubSlug=null,this.slugInfo="",this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get GS(){return this.gs}ngOnDestroy(){var e,o;null===(e=this.subsImgbb)||void 0===e||e.unsubscribe(),null===(o=this.subsFansub)||void 0===o||o.unsubscribe()}ngOnInit(){this.pi.updatePageMetaData("Fansub - Buat Baru","Halaman Menambahkan Fansub Baru","Create Fansub"),this.gs.isBrowser&&this.initForm()}initForm(){this.fg=this.fb.group({name:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],description:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],born:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],active:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],slug:[null,n.kI.compose([n.kI.required,n.kI.pattern(/^[0-9a-zA-Z-]*$/)])],tags:[[],n.kI.compose([])],image:[null,n.kI.compose([n.kI.pattern(u.t.regexUrl)])],cover:[null,n.kI.compose([n.kI.pattern(u.t.regexUrl)])],web:[null,n.kI.compose([n.kI.pattern(u.t.regexUrl)])],facebook:[null,n.kI.compose([n.kI.pattern(u.t.regexUrl)])],discord:[null,n.kI.compose([n.kI.pattern(u.t.regexUrl)])],rss_feed:[null,n.kI.compose([n.kI.pattern(u.t.regexUrl)])]}),this.subsCekFansubSlug=this.fg.get("slug").valueChanges.pipe((0,d.b)(500),(0,T.x)(),(0,g.b)(()=>this.slugInfo="Mengecek ..."),(0,p.w)(e=>this.fansub.cekSlug({slug:e})),(0,E.X)(-1)).subscribe({next:e=>{this.gs.log("[FANSUB_CEK_SLUG_RESULT]",e),this.slugInfo=e.result.message}})}addTag(e){const o=e.input,i=e.value;(i||"").trim()&&this.fg.value.tags.push(i.trim()),o&&(o.value=""),this.fg.controls.tags.patchValue(this.fg.value.tags.filter((s,c,_)=>_.findIndex(v=>v===s)===c))}removeTag(e){const o=this.fg.value.tags.indexOf(e);o>=0&&this.fg.value.tags.splice(o,1)}uploadImage(e,o){this.gambar=o,this.image=null,this.fg.controls.image.patchValue(null);const i=e.target.files[0];try{const s=new FileReader;s.readAsDataURL(i),s.onload=c=>{if(this.gs.log("[IMAGE_SELECTED]",c),i.size<=u.t.fileSizeImageLimit){const _=this.gs.document.createElement("img");_.onload=()=>{this.image=i,this.image_url=s.result.toString()},_.src=s.result.toString(),this.imageErrorText=null}else this.image=null,this.image_url="/assets/img/form/image-error.png",this.imageErrorText=`Ukuran Upload Melebihi Batas ${u.t.fileSizeImageLimit} Bytes!`,this.gambar.clear(e)}}catch(s){this.image=null,this.imageErrorText=null,this.image_url="/assets/img/form/no-image.png",this.gambar.clear(e)}}submitImage(){this.submitted=!0,this.subsImgbb=this.imgbb.uploadImage({file:this.image}).subscribe({next:e=>{this.gs.log("[IMAGE_SUCCESS]",e),this.fg.controls.image.patchValue(e.result.url),this.submitted=!1},error:e=>{this.gs.log("[IMAGE_ERROR]",e,"error"),this.fg.controls.image.patchValue(null),this.submitted=!1}})}uploadCover(e,o){this.gambar=o,this.cover=null,this.fg.controls.cover.patchValue(null);const i=e.target.files[0];try{const s=new FileReader;s.readAsDataURL(i),s.onload=c=>{if(this.gs.log("[COVER_SELECTED]",c),i.size<=u.t.fileSizeImageLimit){const _=this.gs.document.createElement("img");_.onload=()=>{this.cover=i,this.cover_url=s.result.toString()},_.src=s.result.toString(),this.coverErrorText=null}else this.cover=null,this.cover_url="/assets/img/form/image-error.png",this.coverErrorText=`Ukuran Upload Melebihi Batas ${u.t.fileSizeImageLimit} Bytes!`,this.gambar.clear(e)}}catch(s){this.cover=null,this.coverErrorText=null,this.cover_url="/assets/img/form/no-image.png",this.gambar.clear(e)}}submitCover(){this.submitted=!0,this.subsImgbb=this.imgbb.uploadImage({file:this.cover}).subscribe({next:e=>{this.gs.log("[COVER_SUCCESS]",e),this.fg.controls.cover.patchValue(e.result.url),this.submitted=!1},error:e=>{this.gs.log("[COVER_ERROR]",e,"error"),this.fg.controls.cover.patchValue(null),this.submitted=!1}})}onSubmit(){this.bs.busy();const e=[];if(this.fg.value.web&&e.push({name:"web",url:this.fg.value.web}),this.fg.value.facebook&&e.push({name:"facebook",url:this.fg.value.facebook}),this.fg.value.discord&&e.push({name:"discord",url:this.fg.value.discord}),this.submitted=!0,this.fg.invalid||0===e.length)return 0===e.length&&this.toast.warning("Harap Isi Salah Satu URL","Form Tidak lengkap (Web/FB/DC)"),this.submitted=!1,void this.bs.idle();this.subsFansub=this.fansub.createFansub({image:this.fg.value.image,cover:this.fg.value.cover,name:this.fg.value.name,description:this.fg.value.description,born:this.fg.value.born.getTime(),active:this.fg.value.active,tags:this.fg.value.tags,slug:this.fg.value.slug,urls:e,rss_feed:this.fg.value.rss_feed}).subscribe({next:o=>{this.gs.log("[FANSUB_CREATE_SUCCESS]",o),this.submitted=!1,this.bs.idle(),this.router.navigateByUrl("/fansub")},error:o=>{this.gs.log("[FANSUB_CREATE_ERROR]",o,"error"),this.submitted=!1,this.bs.idle()}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(n.qu),t.Y36(h.F0),t.Y36(B.z),t.Y36(N.Z),t.Y36(O.X),t.Y36(Y.T),t.Y36(H._W),t.Y36(q.U))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-fansub-create"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"fansub-banner","fansub-banner-1","align-items-center"],[1,"fansub-banner","fansub-banner-2","align-items-center"],[2,"padding-top","160px"],[1,"row","px-3"],[1,"col-12"],[3,"formGroup","submit"],[1,"row","mt-3","mb-3"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"text-bifeldy"],[1,"row"],[1,"col-12","col-md-5","col-xl-4","p-3"],[1,"w-100","border",3,"src"],["appearance","outline",1,"pt-3","w-100",3,"color"],[1,"w-100",3,"disabled","accept","change"],["gambar",""],["matSuffix",""],[1,"px-3","w-100"],["class","col-12",4,"ngIf"],[1,"col-12","col-md-7","col-xl-8","pt-3"],["appearance","outline",1,"px-3","pt-3","w-100",3,"color"],["gambar_",""],["class","col-12 p-3",4,"ngIf"],["appearance","outline",1,"p-3","col-12","col-md-7",3,"color"],["matInput","","formControlName","name","placeholder","Fansub Jalanan"],[4,"ngIf"],["appearance","outline",1,"p-3","col-12","col-md-5",3,"color"],["matInput","","formControlName","slug","placeholder","Jalsub"],["class","text-info",4,"ngIf"],["formControlName","description",1,"p-3","w-100",3,"config"],["appearance","outline",1,"p-3","col-12","col-md-6",3,"color"],["matInput","","formControlName","born",3,"matDatepicker","placeholder","focus"],["matSuffix","",3,"for"],["disabled","false"],["kalender",""],["formControlName","active","placeholder","Aktif / Non-Aktif"],["value","0"],["value","1"],["align","end"],["appearance","outline",1,"p-3","col-12",3,"color"],["tag",""],["color","accent","selected","",3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","Label Tag / Kategori",3,"matChipInputSeparatorKeyCodes","matChipInputFor","matChipInputAddOnBlur","matChipInputTokenEnd"],["appearance","outline",1,"p-3","col-12","col-md-4",3,"color"],["matInput","","formControlName","web","placeholder","http://www.domain.id"],["matInput","","formControlName","facebook","placeholder","http://www.facebook.com"],["matInput","","formControlName","discord","placeholder","http://www.discord.gg"],["width","24px",3,"src"],["matInput","","formControlName","rss_feed","placeholder","http://my-site.blogspot.com/feeds/posts/default?alt=rss"],[1,"col"],[1,"col-12","col-md-3","pb-3"],["mat-stroked-button","","routerLink","/fansub",1,"w-100",3,"disabled"],[1,"me-1"],["mat-flat-button","","color","accent","type","submit",1,"w-100",3,"disabled"],[1,"ms-1"],["mat-raised-button","","color","primary","type","button",1,"w-100",3,"disabled","click"],[1,"col-12","p-3"],[1,"text-info"],["color","accent","selected","",3,"removable","removed"],["matChipRemove",""]],template:function(e,o){1&e&&t.YNc(0,ce,154,51,"div",0),2&e&&t.Q6J("ngIf",o.fg)},directives:[m.O5,y.t,n._Y,n.JL,n.sg,f.KE,f.hX,x.Yh,F.Hw,f.R9,f.TO,Z.lW,w.Nt,n.Fj,n.JJ,n.u,b.s6,L.hl,L.nW,L.Mq,P.gD,V.ey,f.bx,A.qn,m.sg,A.HS,A.qH,A.oH,Z.zs,h.yS],pipes:[m.uU],styles:[".fansub-banner[_ngcontent-%COMP%]{height:128px;width:100%;background-size:cover;background-position:center;background-repeat:no-repeat;filter:blur(5px) brightness(100%);opacity:.5}.fansub-banner-1[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.fansub-banner-2[_ngcontent-%COMP%]{position:absolute;top:128px;left:0}.fansub-info[_ngcontent-%COMP%]{position:relative;height:256px;z-index:1}"]}),a})();var _e=l(7358);function de(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Alamat Surel Tidak Boleh Kosong"),t.qZA())}function pe(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Email Tidak Valid"),t.qZA())}function fe(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Email Tidak Valid"),t.qZA())}function he(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Email Tidak Valid"),t.qZA())}function be(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Judul Berita Tidak Boleh Kosong"),t.qZA())}function xe(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Judul Berita Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function Te(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"form",4),t.NdJ("submit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(1,"div",5)(2,"div",6)(3,"h2",7)(4,"b",8),t._uU(5,"Buat Email Baru & Kirim"),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",9)(8,"div",10)(9,"div",9)(10,"mat-form-field",11)(11,"mat-label"),t._uU(12,"Penerima"),t.qZA(),t._UZ(13,"input",12),t.TgZ(14,"mat-icon",13),t._uU(15,"short_text"),t.qZA(),t.TgZ(16,"mat-error"),t.YNc(17,de,2,0,"strong",14),t.YNc(18,pe,2,0,"strong",14),t.qZA()(),t.TgZ(19,"mat-form-field",11)(20,"mat-label"),t._uU(21,"Carbon Copy"),t.qZA(),t._UZ(22,"input",15),t.TgZ(23,"mat-icon",13),t._uU(24,"short_text"),t.qZA(),t.TgZ(25,"mat-error"),t.YNc(26,fe,2,0,"strong",14),t.qZA()(),t.TgZ(27,"mat-form-field",11)(28,"mat-label"),t._uU(29,"Blind Carbon Copy"),t.qZA(),t._UZ(30,"input",16),t.TgZ(31,"mat-icon",13),t._uU(32,"short_text"),t.qZA(),t.TgZ(33,"mat-error"),t.YNc(34,he,2,0,"strong",14),t.qZA()()()(),t.TgZ(35,"div",17)(36,"div",9)(37,"mat-form-field",11)(38,"mat-label"),t._uU(39,"Judul"),t.qZA(),t._UZ(40,"input",18),t.TgZ(41,"mat-icon",13),t._uU(42,"wysiwyg"),t.qZA(),t.TgZ(43,"mat-error"),t.YNc(44,be,2,0,"strong",14),t.YNc(45,xe,2,0,"strong",14),t.qZA()(),t._UZ(46,"angular-editor",19),t.qZA()()(),t.TgZ(47,"div",9)(48,"div",2)(49,"div",9),t._UZ(50,"div",20),t.TgZ(51,"div",21)(52,"a",22)(53,"mat-icon",23),t._uU(54,"undo"),t.qZA(),t._uU(55," Batal "),t.qZA()(),t.TgZ(56,"div",21)(57,"button",24),t._uU(58," Simpan "),t.TgZ(59,"mat-icon",25),t._uU(60,"save"),t.qZA()()()()()()()()()}if(2&a){const e=t.oxw();t.Q6J("formGroup",e.fg),t.xp6(10),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",e.fg.get("to").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg.get("to").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",e.fg.get("cc").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",e.fg.get("bcc").hasError("pattern")),t.xp6(3),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",e.fg.get("subject").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg.get("subject").hasError("pattern")),t.xp6(1),t.Q6J("config",e.GS.angularEditorConfig),t.xp6(6),t.Q6J("disabled",e.submitted),t.xp6(5),t.Q6J("disabled",e.submitted||e.fg.invalid)}}let ve=(()=>{class a{constructor(e,o,i,s,c,_){this.fb=e,this.router=o,this.bs=i,this.pi=s,this.gs=c,this.ms=_,this.submitted=!1,this.subsMail=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get GS(){return this.gs}ngOnInit(){this.pi.updatePageMetaData("Mailbox - Buat Baru","Halaman Membuat Surel Baru","Create Email"),this.gs.isBrowser&&this.initForm()}ngOnDestroy(){var e;null===(e=this.subsMail)||void 0===e||e.unsubscribe()}initForm(){this.fg=this.fb.group({to:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEmailMulti)])],cc:[null,n.kI.compose([n.kI.pattern(u.t.regexEmailMulti)])],bcc:[null,n.kI.compose([n.kI.pattern(u.t.regexEmailMulti)])],subject:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],message:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])]})}onSubmit(){if(this.bs.busy(),this.submitted=!0,this.fg.invalid)return this.submitted=!1,void this.bs.idle();this.subsMail=this.ms.sendMail(this.fg.value).subscribe({next:e=>{this.gs.log("[MAIL_SEND_SUCCESS]",e),this.submitted=!1,this.bs.idle(),this.router.navigateByUrl("/mailbox")},error:e=>{this.gs.log("[MAIL_SEND_ERROR]",e,"error"),this.submitted=!1,this.bs.idle()}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(n.qu),t.Y36(h.F0),t.Y36(B.z),t.Y36(N.Z),t.Y36(q.U),t.Y36(_e.Y))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-mailbox-create"]],decls:5,vars:1,consts:[[1,"container"],[1,"row","px-3"],[1,"col-12"],[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"row","mt-3","mb-3"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"text-bifeldy"],[1,"row"],[1,"col-12","col-md-5","col-xl-4","p-3"],["appearance","outline",1,"p-3","col-12",3,"color"],["matInput","","formControlName","to","placeholder","user@domain.tld","matTooltip","Gunakan , Jika Lebih Dari 1"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","cc","placeholder","user@domain.tld,user@domain.tld","matTooltip","Gunakan , Jika Lebih Dari 1"],["matInput","","formControlName","bcc","placeholder","user@domain.tld, user@domain.tld","matTooltip","Gunakan , Jika Lebih Dari 1"],[1,"col-12","col-md-7","col-xl-8","pt-3"],["matInput","","formControlName","subject","placeholder","Judul Pesan Blablabla ..."],["formControlName","message",1,"p-3","w-100",3,"config"],[1,"col"],[1,"col-12","col-md-3","pb-3"],["mat-stroked-button","","routerLink","/mailbox",1,"w-100",3,"disabled"],[1,"me-1"],["mat-flat-button","","color","accent","type","submit",1,"w-100",3,"disabled"],[1,"ms-1"]],template:function(e,o){1&e&&(t._UZ(0,"app-notifications"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2),t.YNc(4,Te,61,14,"form",3),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",o.fg))},directives:[y.t,m.O5,n._Y,n.JL,n.sg,f.KE,f.hX,w.Nt,n.Fj,n.JJ,n.u,K.gM,F.Hw,f.R9,f.TO,b.s6,Z.zs,h.yS,Z.lW],styles:[""]}),a})();var Ce=l(9618);function Ze(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).submitImage()}),t.TgZ(2,"mat-icon",30),t._uU(3,"add_photo_alternate"),t.qZA(),t._uU(4," Unggah "),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function Ae(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Judul Berita Tidak Boleh Kosong"),t.qZA())}function ke(a,r){1&a&&(t.TgZ(0,"strong"),t._uU(1,"Judul Berita Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function Ue(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip",34),t.NdJ("removed",function(){const s=t.CHM(e).$implicit;return t.oxw(2).removeTag(s)}),t._uU(1),t.TgZ(2,"mat-icon",35),t._uU(3,"cancel"),t.qZA()()}if(2&a){const e=r.$implicit;t.Q6J("removable",!0),t.xp6(1),t.hij(" ",e," ")}}function Ie(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"form",4),t.NdJ("submit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(1,"div",5)(2,"div",6)(3,"h2",7)(4,"b",8),t._uU(5,"Tambah Data Berita & Informasi Baru"),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",9)(8,"div",10)(9,"div",9)(10,"div",2),t._UZ(11,"img",11),t.TgZ(12,"mat-form-field",12)(13,"mat-label"),t._uU(14,"Gambar"),t.qZA(),t.TgZ(15,"ngx-mat-file-input",13,14),t.NdJ("change",function(i){t.CHM(e);const s=t.MAs(16);return t.oxw().uploadImage(i,s)}),t.qZA(),t.TgZ(17,"mat-icon",15),t._uU(18,"image"),t.qZA()(),t.TgZ(19,"mat-error",16)(20,"small")(21,"strong"),t._uU(22),t.qZA()()()(),t.YNc(23,Ze,5,1,"div",17),t.qZA()(),t.TgZ(24,"div",18)(25,"div",9)(26,"mat-form-field",19)(27,"mat-label"),t._uU(28,"Judul"),t.qZA(),t._UZ(29,"input",20),t.TgZ(30,"mat-icon",15),t._uU(31,"wysiwyg"),t.qZA(),t.TgZ(32,"mat-error"),t.YNc(33,Ae,2,0,"strong",21),t.YNc(34,ke,2,0,"strong",21),t.qZA()(),t.TgZ(35,"mat-form-field",19)(36,"mat-label"),t._uU(37,"Tags & Kategori"),t.qZA(),t.TgZ(38,"mat-chip-list",null,22),t.YNc(40,Ue,4,2,"mat-chip",23),t.TgZ(41,"input",24),t.NdJ("matChipInputTokenEnd",function(i){return t.CHM(e),t.oxw().addTag(i)}),t.qZA(),t.TgZ(42,"mat-icon",15),t._uU(43,"loyalty"),t.qZA()(),t.TgZ(44,"mat-hint",25),t._uU(45,"Isi Dengan Bebas, Pisahkan Dengan Koma"),t.qZA()(),t._UZ(46,"angular-editor",26),t.qZA()()(),t.TgZ(47,"div",9)(48,"div",2)(49,"div",9),t._UZ(50,"div",27),t.TgZ(51,"div",28)(52,"a",29)(53,"mat-icon",30),t._uU(54,"undo"),t.qZA(),t._uU(55," Batal "),t.qZA()(),t.TgZ(56,"div",28)(57,"button",31),t._uU(58," Simpan "),t.TgZ(59,"mat-icon",32),t._uU(60,"save"),t.qZA()()()()()()()()()}if(2&a){const e=t.MAs(39),o=t.oxw();t.Q6J("formGroup",o.fg),t.xp6(11),t.Q6J("src",o.image_url,t.LSH),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("disabled",o.fg.value.image)("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(7),t.Oqu(o.imageErrorText),t.xp6(1),t.Q6J("ngIf",o.image&&!o.fg.value.image),t.xp6(3),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",o.fg.get("title").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.fg.get("title").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(5),t.Q6J("ngForOf",o.fg.value.tags),t.xp6(1),t.Q6J("matChipInputSeparatorKeyCodes",o.GS.separatorKeysCodes)("matChipInputFor",e)("matChipInputAddOnBlur",!0),t.xp6(5),t.Q6J("config",o.GS.angularEditorConfig),t.xp6(6),t.Q6J("disabled",o.submitted),t.xp6(5),t.Q6J("disabled",o.submitted||o.fg.invalid)}}const Se=[{path:"",pathMatch:"full",redirectTo:"/home"},{path:"berkas",component:Vt,data:{title:"Berkas - Buat Baru",description:"Halaman Unggah Berkas Baru",keywords:"Tambah Berkas Baru"}},{path:"fansub",component:ge,canActivate:[I.H],data:{title:"Fansub - Buat Baru",description:"Halaman Menambahkan Fansub Baru",keywords:"Create Fansub",[u.t.decoratorVerifiedOnly]:!0}},{path:"mailbox",component:ve,canActivate:[I.H],data:{title:"Surel - Buat Baru",description:"Halaman Kirim Surel Baru",keywords:"Buat Surel Baru",[u.t.decoratorVerifiedOnly]:!0}},{path:"news",component:(()=>{class a{constructor(e,o,i,s,c,_,v){this.fb=e,this.router=o,this.bs=i,this.pi=s,this.imgbb=c,this.news=_,this.gs=v,this.submitted=!1,this.image=null,this.imageErrorText=null,this.image_url="/assets/img/form/no-image.png",this.gambar=null,this.subsNews=null,this.subsImgbb=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get GS(){return this.gs}ngOnInit(){this.pi.updatePageMetaData("Informasi - Buat Baru","Halaman Menambahkan Berita Baru","Create News"),this.gs.isBrowser&&this.initForm()}ngOnDestroy(){var e,o;null===(e=this.subsImgbb)||void 0===e||e.unsubscribe(),null===(o=this.subsNews)||void 0===o||o.unsubscribe()}initForm(){this.fg=this.fb.group({title:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],content:[null,n.kI.compose([n.kI.required,n.kI.pattern(u.t.regexEnglishKeyboardKeys)])],image:[null,n.kI.compose([n.kI.pattern(u.t.regexUrl)])],tags:[[],n.kI.compose([])]})}uploadImage(e,o){this.gambar=o,this.image=null,this.fg.controls.image.patchValue(null);const i=e.target.files[0];try{const s=new FileReader;s.readAsDataURL(i),s.onload=c=>{if(this.gs.log("[IMAGE_SELECTED]",c),i.size<=u.t.fileSizeImageLimit){const _=this.gs.document.createElement("img");_.onload=()=>{this.image=i,this.image_url=s.result.toString()},_.src=s.result.toString(),this.imageErrorText=null}else this.image=null,this.image_url="/assets/img/form/image-error.png",this.imageErrorText=`Ukuran Upload Melebihi Batas ${u.t.fileSizeImageLimit} Bytes!`,this.gambar.clear(e)}}catch(s){this.image=null,this.imageErrorText=null,this.image_url="/assets/img/form/no-image.png",this.gambar.clear(e)}}submitImage(){this.submitted=!0,this.subsImgbb=this.imgbb.uploadImage({file:this.image}).subscribe({next:e=>{this.gs.log("[IMAGE_SUCCESS]",e),this.fg.controls.image.patchValue(e.result.url),this.submitted=!1},error:e=>{this.gs.log("[IMAGE_ERROR]",e,"error"),this.fg.controls.image.patchValue(null),this.submitted=!1}})}onSubmit(){if(this.bs.busy(),this.submitted=!0,this.fg.invalid)return this.submitted=!1,void this.bs.idle();this.subsNews=this.news.createNews({image:this.fg.value.image,title:this.fg.value.title,content:this.fg.value.content,tags:this.fg.value.tags}).subscribe({next:e=>{this.gs.log("[NEWS_CREATE_SUCCESS]",e),this.submitted=!1,this.bs.idle(),this.router.navigateByUrl("/news")},error:e=>{this.gs.log("[NEWS_CREATE_ERROR]",e,"error"),this.submitted=!1,this.bs.idle()}})}addTag(e){const o=e.input,i=e.value;(i||"").trim()&&this.fg.value.tags.push(i.trim()),o&&(o.value=""),this.fg.controls.tags.patchValue(this.fg.value.tags.filter((s,c,_)=>_.findIndex(v=>v===s)===c))}removeTag(e){const o=this.fg.value.tags.indexOf(e);o>=0&&this.fg.value.tags.splice(o,1)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(n.qu),t.Y36(h.F0),t.Y36(B.z),t.Y36(N.Z),t.Y36(O.X),t.Y36(Ce.Y),t.Y36(q.U))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-news-create"]],decls:5,vars:1,consts:[[1,"container"],[1,"row","px-3"],[1,"col-12"],[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"row","mt-3","mb-3"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"text-bifeldy"],[1,"row"],[1,"col-12","col-md-5","col-xl-4","p-3"],[1,"w-100","border",3,"src"],["appearance","outline",1,"pt-3","w-100",3,"color"],[1,"w-100",3,"disabled","accept","change"],["gambar",""],["matSuffix",""],[1,"px-3","w-100"],["class","col-12",4,"ngIf"],[1,"col-12","col-md-7","col-xl-8","pt-3"],["appearance","outline",1,"p-3","col-12",3,"color"],["matInput","","formControlName","title","placeholder","Berita Terkini Blablabla ..."],[4,"ngIf"],["tag",""],["color","accent","selected","",3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","Label Tag / Kategori",3,"matChipInputSeparatorKeyCodes","matChipInputFor","matChipInputAddOnBlur","matChipInputTokenEnd"],["align","end"],["formControlName","content",1,"p-3","w-100",3,"config"],[1,"col"],[1,"col-12","col-md-3","pb-3"],["mat-stroked-button","","routerLink","/news",1,"w-100",3,"disabled"],[1,"me-1"],["mat-flat-button","","color","accent","type","submit",1,"w-100",3,"disabled"],[1,"ms-1"],["mat-raised-button","","color","primary","type","button",1,"w-100",3,"disabled","click"],["color","accent","selected","",3,"removable","removed"],["matChipRemove",""]],template:function(e,o){1&e&&(t._UZ(0,"app-notifications"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2),t.YNc(4,Ie,61,18,"form",3),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",o.fg))},directives:[y.t,m.O5,n._Y,n.JL,n.sg,f.KE,f.hX,x.Yh,F.Hw,f.R9,f.TO,Z.lW,w.Nt,n.Fj,n.JJ,n.u,A.qn,m.sg,A.HS,A.qH,A.oH,f.bx,b.s6,Z.zs,h.yS],styles:[""]}),a})(),data:{title:"Berita - Buat Baru",description:"Halaman Unggah Berita Baru",keywords:"Tambah Berita Baru"}}];let Je=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[m.ez,h.Bz.forChild(Se),Q.m,n.u5,n.UX,x.Ad,R.F,b.UM,D.T]]}),a})()},8616:(M,C,l)=>{l.d(C,{t:()=>R});var m=l(5e3),h=l(8406),n=l(8696),b=l(7140),x=l(9808);function u(d,T){if(1&d&&m._UZ(0,"div",4),2&d){const g=m.oxw();m.Udp("background-size",g.GS.sizeContain?"contain":"cover")("background-image","url("+g.GS.bannerImg+")")("background-repeat",g.GS.bgRepeat?"repeat-x":"no-repeat")("height","/home"===g.ROUTER.url||"/berkas"===g.ROUTER.url?"192px":"128px")("background-position-y","/berkas"===g.ROUTER.url?"22.5%":"")}}function I(d,T){if(1&d&&(m.TgZ(0,"strong",10),m._uU(1," -- "),m.TgZ(2,"i")(3,"a",11),m._uU(4),m.qZA()()()),2&d){const g=m.oxw().$implicit;m.xp6(3),m.MGl("routerLink","/user/",g.notifCreator,""),m.xp6(1),m.hij(" ",g.notifCreator," ")}}function Q(d,T){if(1&d){const g=m.EpF();m.TgZ(0,"button",12),m.NdJ("click",function(){m.CHM(g);const k=m.oxw().$implicit;return m.oxw().removeNotif(k.notifData.id)}),m.qZA()}}function D(d,T){if(1&d&&(m.TgZ(0,"div",5)(1,"div")(2,"strong",6),m._uU(3),m.qZA(),m._UZ(4,"span",7),m.YNc(5,I,5,2,"strong",8),m.YNc(6,Q,1,0,"button",9),m.qZA()()),2&d){const g=T.$implicit;m.xp6(1),m.Gre("alert alert-",g.notifData.type," alert-dismissible fade show"),m.xp6(2),m.Oqu(g.notifData.title),m.xp6(1),m.Q6J("innerHTML",g.notifData.content,m.oJD),m.xp6(1),m.Q6J("ngIf",g.notifCreator),m.xp6(1),m.Q6J("ngIf",g.notifData.dismissible)}}let R=(()=>{class d{constructor(g,p,k){this.router=g,this.gs=p,this.notif=k}ngOnInit(){}get GS(){return this.gs}get ROUTER(){return this.router}get NOTIF(){return this.notif}removeNotif(g){this.notif.removeNotif(g)}}return d.\u0275fac=function(g){return new(g||d)(m.Y36(h.F0),m.Y36(n.U),m.Y36(b.T))},d.\u0275cmp=m.Xpm({type:d,selectors:[["app-notifications"]],decls:4,vars:2,consts:[["class","container-fluid notif-banner align-items-center",3,"background-size","background-image","background-repeat","height","background-position-y",4,"ngIf"],[1,"container"],[1,"row","pt-3"],["class","col-12",4,"ngFor","ngForOf"],[1,"container-fluid","notif-banner","align-items-center"],[1,"col-12"],[1,"me-1"],[3,"innerHTML"],["class","ms-1",4,"ngIf"],["type","button","class","btn-close","data-dismiss","alert",3,"click",4,"ngIf"],[1,"ms-1"],[1,"text-decoration-none",3,"routerLink"],["type","button","data-dismiss","alert",1,"btn-close",3,"click"]],template:function(g,p){1&g&&(m.YNc(0,u,1,10,"div",0),m.TgZ(1,"div",1)(2,"div",2),m.YNc(3,D,7,7,"div",3),m.qZA()()),2&g&&(m.Q6J("ngIf",p.GS.bannerImg&&("/home"===p.ROUTER.url||"/berkas"===p.ROUTER.url||"/fansub"===p.ROUTER.url||"/berkas"===p.ROUTER.url||"/anime"===p.ROUTER.url||p.ROUTER.url.includes("/anime?")||"/dorama"===p.ROUTER.url||p.ROUTER.url.includes("/dorama?"))),m.xp6(3),m.Q6J("ngForOf",p.NOTIF.notifications))},directives:[x.O5,x.sg,h.yS],styles:[".notif-banner[_ngcontent-%COMP%]{width:100%;background-size:cover;background-position:75% 50%;background-image:url(/assets/img/home-banner.png)}"]}),d})()},8613:(M,C,l)=>{l.d(C,{F:()=>b});var m=l(9808),h=l(8406),n=l(5e3);let b=(()=>{class x{}return x.\u0275fac=function(I){return new(I||x)},x.\u0275mod=n.oAB({type:x}),x.\u0275inj=n.cJS({imports:[[m.ez,h.Bz]]}),x})()},7355:(M,C,l)=>{l.d(C,{T:()=>n});var m=l(9808),h=l(5e3);let n=(()=>{class b{}return b.\u0275fac=function(u){return new(u||b)},b.\u0275mod=h.oAB({type:b}),b.\u0275inj=h.cJS({imports:[[m.ez]]}),b})()}}]);