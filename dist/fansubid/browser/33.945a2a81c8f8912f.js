"use strict";(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[33],{1090:(D,p,n)=>{n.r(p),n.d(p,{TicketModule:()=>F});var i=n(6895),u=n(1390),c=n(4006),f=n(3170),s=n(7375),l=n(6271),m=n(4249),d=n(2777),T=n(5094),v=n(210),U=n(7355),r=n(4946),h=n(6436),a=n(8613),g=n(669),E=n(4854),O=n(8764),A=n(1838),t=n(4650);let C=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ticket-list"]],decls:6,vars:0,template:function(e,M){1&e&&(t.TgZ(0,"p"),t._uU(1,"ticket-list works!"),t.qZA(),t.TgZ(2,"p"),t._uU(3,"cooming-soon!"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"please-come-back-later!"),t.qZA())}}),o})();var R=n(3e3),k=n(257),x=n(8745),I=n(7984),P=n(8616),Z=n(9461),b=n(1861);function y(o,_){if(1&o&&(t.TgZ(0,"a",20),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.MGl("routerLink","/user/",e.ticketData.user_.username,""),t.xp6(1),t.hij(" ",e.ticketData.user_.username," ")}}function L(o,_){1&o&&(t.TgZ(0,"span",21),t._uU(1,"Anonim!"),t.qZA())}function B(o,_){if(1&o&&(t.TgZ(0,"div",12),t._uU(1," Ekspektasi Tindakan :: "),t._UZ(2,"br"),t._uU(3),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",e.ticketData.expected_solution," ")}}function N(o,_){if(1&o&&(t.TgZ(0,"div",12),t._uU(1," Hasil Putusan :: "),t._UZ(2,"br"),t._uU(3),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",e.ticketData.final_decision," ")}}function W(o,_){if(1&o&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",3)(6,"h2",6)(7,"b",7),t._uU(8),t.qZA()()(),t.TgZ(9,"div",3),t._UZ(10,"hr",8),t.qZA(),t.TgZ(11,"div",3)(12,"h5",9),t._uU(13," .: "),t.YNc(14,y,2,2,"a",10),t.YNc(15,L,2,0,"span",11),t._uU(16),t.ALo(17,"date"),t.qZA()()(),t.TgZ(18,"div",12),t._uU(19," URL Terkait :: "),t._UZ(20,"br"),t.TgZ(21,"a",13),t._uU(22),t.qZA()(),t.YNc(23,B,4,1,"div",14),t.YNc(24,N,4,1,"div",14),t.TgZ(25,"div",12),t._uU(26," Isi Laporan :: "),t._UZ(27,"br")(28,"div",15),t.ALo(29,"safeInnerHtml"),t.qZA()()()(),t.TgZ(30,"div",16)(31,"div",17)(32,"h2",18)(33,"b",7),t._uU(34,"Komentar"),t.qZA()()(),t.TgZ(35,"div",3)(36,"div",19),t._UZ(37,"app-discussion"),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(8),t.hij("Ticket #",e.ticketData.id,""),t.xp6(6),t.Q6J("ngIf",e.ticketData.user_),t.xp6(1),t.Q6J("ngIf",!e.ticketData.user_),t.xp6(1),t.hij(" :: ",t.xi3(17,9,e.ticketData.created_at,"d MMMM y, hh:mm:ss a z")," :. "),t.xp6(5),t.s9C("href",e.ticketData.url,t.LSH),t.xp6(1),t.hij(" ",e.ticketData.url," "),t.xp6(1),t.Q6J("ngIf",e.ticketData.expected_solution),t.xp6(1),t.Q6J("ngIf",e.ticketData.final_decision),t.xp6(4),t.Q6J("innerHTML",t.lcZ(29,12,e.ticketData.reported_issue),t.oJD)}}const K=[{path:"",pathMatch:"full",component:C,canActivate:[T.H,d.t],data:{[l.t.decoratorRoles]:[m.yS.ADMIN,m.yS.MODERATOR,m.yS.FANSUBBER,m.yS.USER]}},{path:":ticketId",children:[{path:"",pathMatch:"full",component:(()=>{class o{constructor(e,M,Y,J,j,z){this.activatedRoute=e,this.router=M,this.bs=Y,this.gs=J,this.pi=j,this.ticket=z,this.ticketId=0,this.ticketSecret="",this.ticketData=null,this.subsActRoute=null,this.subsTicket=null,this.subsParam=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}ngOnDestroy(){this.subsActRoute?.unsubscribe(),this.subsTicket?.unsubscribe(),this.subsParam?.unsubscribe()}ngOnInit(){this.ticketId=Number(this.activatedRoute.snapshot.paramMap.get("ticketId")||""),this.ticketSecret=this.activatedRoute.snapshot.queryParamMap.get("secret")||"",this.getTicket()}getTicket(){this.bs.busy(),this.subsTicket=this.ticket.getTicket(this.ticketId,this.ticketSecret).subscribe({next:e=>{this.gs.log("[TICKET_DETAIL_SUCCESS]",e),this.ticketData=e.result,this.pi.updatePageMetaData(`Ticket #${this.ticketData.id}`,this.ticketData.reported_issue,this.ticketData.url),this.bs.idle()},error:e=>{this.gs.log("[TICKET_DETAIL_ERROR]",e,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:"/ticket"}})}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(R.z),t.Y36(k.U),t.Y36(x.Z),t.Y36(I.w))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ticket-detail"]],decls:2,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row","pb-3","px-0"],[1,"col-12"],[1,"row"],[1,"sticky-top","bg-bifeldy"],[1,"pt-3","m-0"],[1,"text-bifeldy"],[1,"my-1","border-bottom-dotted",2,"height","4px","background","url('/assets/img/stripe.png')"],[1,"pb-3","m-0","text-bifeldy"],["class","text-warning text-decoration-none",3,"routerLink",4,"ngIf"],["class","text-warning",4,"ngIf"],[1,"col-12","pt-3","mt-3"],["target","_blank",1,"text-warning","text-decoration-none",3,"href"],["class","col-12 pt-3 mt-3",4,"ngIf"],[3,"innerHTML"],[1,"row","pt-3"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"p-3"],[1,"text-warning","text-decoration-none",3,"routerLink"],[1,"text-warning"]],template:function(e,M){1&e&&(t._UZ(0,"app-notifications"),t.YNc(1,W,38,14,"div",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",M.ticketData))},dependencies:[i.O5,u.yS,P.t,Z.S,i.uU,b.H]}),o})()}]}];let F=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[i.ez,u.Bz.forChild(K),A.R,v.m,h.L,c.u5,c.UX,f.Ad,a.F,s.UM,E.R,g.A,r.P,O.R,U.T]}),o})()},4946:(D,p,n)=>{n.d(p,{P:()=>f});var i=n(6895),u=n(210),c=n(4650);let f=(()=>{class s{}return s.\u0275fac=function(m){return new(m||s)},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({imports:[i.ez,u.m]}),s})()},617:(D,p,n)=>{n.d(p,{H:()=>m});var i=n(6895),u=n(4006),c=n(210),f=n(4946),s=n(7355),l=n(4650);let m=(()=>{class d{}return d.\u0275fac=function(v){return new(v||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[i.ez,c.m,f.P,u.u5,s.T]}),d})()},8616:(D,p,n)=>{n.d(p,{t:()=>U});var i=n(4650),u=n(1390),c=n(257),f=n(7140),s=n(6895),l=n(1861);function m(r,h){if(1&r&&i._UZ(0,"div",4),2&r){const a=i.oxw();i.Udp("background-size",a.GS.sizeContain?"contain":"cover")("background-image","url("+a.GS.bannerImg+")")("background-repeat",a.GS.bgRepeat?"repeat-x":"no-repeat")("height",a.ROUTER.url.startsWith("/news")||a.ROUTER.url.startsWith("/berkas")||a.ROUTER.url.startsWith("/fansub")?"192px":"128px")("background-position-y",a.ROUTER.url.startsWith("/berkas")?"22.5%":"")}}function d(r,h){if(1&r&&(i.TgZ(0,"strong",10),i._uU(1," -- "),i.TgZ(2,"i")(3,"a",11),i._uU(4),i.qZA()()()),2&r){const a=i.oxw().$implicit;i.xp6(3),i.MGl("routerLink","/user/",a.notifCreator,""),i.xp6(1),i.hij(" ",a.notifCreator," ")}}function T(r,h){if(1&r){const a=i.EpF();i.TgZ(0,"button",12),i.NdJ("click",function(){i.CHM(a);const E=i.oxw().$implicit,O=i.oxw();return i.KtG(O.removeNotif(E.notifData.id))}),i.qZA()}}function v(r,h){if(1&r&&(i.TgZ(0,"div",5)(1,"div")(2,"strong",6),i._uU(3),i.qZA(),i._UZ(4,"span",7),i.ALo(5,"safeInnerHtml"),i.YNc(6,d,5,2,"strong",8),i.YNc(7,T,1,0,"button",9),i.qZA()()),2&r){const a=h.$implicit;i.xp6(1),i.Gre("alert alert-",a.notifData.type," alert-dismissible fade show"),i.xp6(2),i.Oqu(a.notifData.title),i.xp6(1),i.Q6J("innerHTML",i.lcZ(5,7,a.notifData.content),i.oJD),i.xp6(2),i.Q6J("ngIf",a.notifCreator),i.xp6(1),i.Q6J("ngIf",a.notifData.dismissible)}}let U=(()=>{class r{constructor(a,g,E){this.router=a,this.gs=g,this.notif=E}ngOnInit(){}get GS(){return this.gs}get ROUTER(){return this.router}get NOTIF(){return this.notif}removeNotif(a){this.notif.removeNotif(a)}}return r.\u0275fac=function(a){return new(a||r)(i.Y36(u.F0),i.Y36(c.U),i.Y36(f.T))},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-notifications"]],decls:4,vars:2,consts:[["class","container-fluid notif-banner align-items-center",3,"background-size","background-image","background-repeat","height","background-position-y",4,"ngIf"],[1,"container"],[1,"row","pt-3"],["class","col-12",4,"ngFor","ngForOf"],[1,"container-fluid","notif-banner","align-items-center"],[1,"col-12"],[1,"me-1"],[3,"innerHTML"],["class","ms-1",4,"ngIf"],["type","button","class","btn-close","data-dismiss","alert",3,"click",4,"ngIf"],[1,"ms-1"],[1,"text-decoration-none",3,"routerLink"],["type","button","data-dismiss","alert",1,"btn-close",3,"click"]],template:function(a,g){1&a&&(i.YNc(0,m,1,10,"div",0),i.TgZ(1,"div",1)(2,"div",2),i.YNc(3,v,8,9,"div",3),i.qZA()()),2&a&&(i.Q6J("ngIf",g.GS.bannerImg&&(g.ROUTER.url.startsWith("/news")||g.ROUTER.url.startsWith("/berkas")||g.ROUTER.url.startsWith("/fansub")||g.ROUTER.url.startsWith("/anime")||g.ROUTER.url.startsWith("/dorama"))),i.xp6(3),i.Q6J("ngForOf",g.NOTIF.notifications))},dependencies:[s.sg,s.O5,u.yS,l.H],styles:[".notif-banner[_ngcontent-%COMP%]{width:100%;background-size:cover;background-position:75% 50%}"]}),r})()},8613:(D,p,n)=>{n.d(p,{F:()=>s});var i=n(6895),u=n(1390),c=n(7355),f=n(4650);let s=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=f.oAB({type:l}),l.\u0275inj=f.cJS({imports:[i.ez,u.Bz,c.T]}),l})()},6766:(D,p,n)=>{n.d(p,{R:()=>u});var i=n(4650);let u=(()=>{class c{transform(s,l){if(s){const m=Math.floor((+new Date-+new Date(s))/1e3),d={tahun:31536e3,bulan:2592e3,minggu:604800,hari:86400,jam:3600,menit:60,detik:1};let T;for(const v of Object.keys(d))if(T=Math.floor(m/d[v]),T>0)return T+" "+v+" lalu"}return s}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275pipe=i.Yjl({name:"dateAgo",type:c,pure:!0}),c})()}}]);