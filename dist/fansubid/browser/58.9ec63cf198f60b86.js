(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[58],{4058:(j,S,h)=>{"use strict";h.r(S),h.d(S,{TorrentModule:()=>Zt});var p=h(9808),Z=h(8406),F=h(3075),g=h(1777),v=h(4847),T=h(4999),I=h(4327),s=h(5934),n=h(5e3),A=h(7261),B=h(9287),R=h(8696),w=h(5861),E=h(9076),U=h.n(E),G=h(1135),K=h(8202),k=h(3172),d=h(9731),m=h(6925),_=h(3379);let C=(()=>{class l{constructor(o,c,y,b){this.gs=o,this.api=c,this.toast=y,this.ls=b,this.trackerAnnounce=s.N.torrent.trackerAnnounce,this.clientOptions={maxConns:64,tracker:{announce:this.trackerAnnounce,rtcConfig:{iceServers:s.N.torrent.iceServers}}},this.torrentsQueue={},this.torrentOptions={announce:this.trackerAnnounce,maxWebConns:16,store:U()},this.webClient=null,this.expandedRow=null,this.tableDataRowSubject=new G.X([]),this.tableDataRow=this.tableDataRowSubject.asObservable(),this.error=null,this.refCallback=null,this.flagResurrected=!1,this.gs.isBrowser&&(this.torrentsQueue=this.ls.getItem(this.gs.localStorageKeys.Torrents,!0)||this.torrentsQueue,WebTorrent.WEBRTC_SUPPORT?(this.webClient=new WebTorrent(this.clientOptions),this.gs.log("[TORRENT_CLIENT_WEB_MODE_INITIALIZED]",this.webClient),this.handleWebClient()):this.toast.error("WebRTC Not Supported!","Whoops!",null,!0))}get tableDataRowValue(){var o;return(null===(o=this.tableDataRowSubject)||void 0===o?void 0:o.value)||[]}checkHealthOnTracker(o){return this.api.postData("/torrent",o)}handleWebClient(){this.webClient.on("torrent",o=>{this.gs.log("[TORRENT_CLIENT_ADD_TORRENT_FILE]",o),this.toast.info(o.infoHash,"Woaw, Antrian Baru!",null,!0),this.tableDataRowValue.push(o),this.tableDataRowSubject.next(this.tableDataRowValue),this.refCallback&&this.refCallback(null,o)}),this.webClient.on("error",o=>{this.gs.log("[TORRENT_CLIENT_ERROR]",o),this.toast.error(o.toString(),"Whoops!",null,!0),this.error=o,this.refCallback&&this.refCallback(this.error,null)})}handleWebTorrent(o,c){o.on("done",()=>{this.gs.log("[TORRENT_FILE_DONE]",o),this.toast.success("Ada Torrent Yang Sudah Selesai Di Download","Yeay, Selesai!",null,!0),this.torrentsQueue[o.infoHash].completed=!0,this.ls.setItem(this.gs.localStorageKeys.Torrents,this.torrentsQueue),c&&c(null,null)}),o.on("warning",y=>{this.gs.log("[TORRENT_FILE_WARNING]",y),this.toast.info(y.toString(),"Yuhuu!",null,!0),c&&c(y,null)}),o.on("error",y=>{this.gs.log("[TORRENT_FILE_ERROR]",y),this.toast.error(y.toString(),"Whoops!",null,!0),c&&c(y,null)})}handleWebWire(o,c){this.gs.log("[TORRENT_WIRE_CONNECT]",o);let y=o.peerId||"Unknown!";o.remoteAddress&&o.remotePort&&(y=`${o.remoteAddress}:${o.remotePort}`),o.on("close",()=>{this.gs.log("[TORRENT_WIRE_DISCONNECT]",y),c&&c(null,o)}),c&&c(null,o)}resurrectFiles(o){var c=this;if(!this.flagResurrected){this.flagResurrected=!0;for(const y in this.torrentsQueue)this.gs.log("[TORRENT_CLIENT_QUEUE_RESURRECT]",this.torrentsQueue[y]),this.torrentsQueue[y].completed?(0,K.openDB)(this.torrentsQueue[y].indexedDb,1).then(function(){var b=(0,w.Z)(function*(W){const Ot=yield W.transaction("chunks","readonly").objectStore("chunks").getAll(),kt=k.lW.concat(Ot),Nt=[];for(const Ht of c.torrentsQueue[y].files){const Ct=Ht;Nt.push(new File([kt.slice(Ct.offset,Ct.offset+Ct.length)],Ct.name))}c.uploadFiles(c.torrentsQueue[y].name,Nt,o)});return function(W){return b.apply(this,arguments)}}()).catch(b=>this.gs.log("[INDEXDB-OPEN_FAILED]",b,"error")):this.downloadFiles(this.torrentsQueue[y].infoHash,o,{...this.torrentOptions,name:this.torrentsQueue[y].name})}o(null,null)}processTorrent(o,c,y){o.on("wire",b=>this.handleWebWire(b,y)),this.torrentsQueue[o.infoHash]={completed:c,indexedDb:o.name+" - "+o.infoHash.slice(0,8),infoHash:o.infoHash,name:o.name,files:[]};for(const b of o.files)this.torrentsQueue[o.infoHash].files.push({name:b.name,offset:b.offset,length:b.length});this.ls.setItem(this.gs.localStorageKeys.Torrents,this.torrentsQueue),this.handleWebTorrent(o,y)}downloadFiles(o,c,y=this.torrentOptions){this.gs.log("[TORRENT_CLIENT_QUEUE_DOWNLOAD]",o),this.refCallback=c,this.checkHealthOnTracker({magnetHash:o,trackTimeout:1234}).subscribe({next:b=>{this.gs.log("[TORRENT_CLIENT_HEALTH_SUCCESS]",b.result),b.result.seeds<=0?(this.toast.info("Tidak Ada Seeder!","Whoops!",null,!0),c&&c(null,b.result)):this.webClient.add(o,y,W=>{this.gs.log("[TORRENT_FILE_DOWNLOAD_READY]",W),this.toast.info("Memulai Download ...","Download!",null,!0),this.processTorrent(W,!1,c)})},error:b=>{this.gs.log("[TORRENT_CLIENT_HEALTH_ERROR]",b,"error"),c&&c(b,null)}})}uploadFiles(o,c,y){this.gs.log("[TORRENT_CLIENT_QUEUE_UPLOAD]",c),this.gs.log("[TORRENT_CLIENT_QUEUE_UPLOAD]",o),this.refCallback=y,this.webClient.seed(c,{...this.torrentOptions,name:o},b=>{this.gs.log("[TORRENT_FILE_SEED_READY]",b),this.toast.info("Memulai Seeding ...","Seeding",null,!0),this.processTorrent(b,!0,y)})}removeTorrent(o,c,y=!0){this.tableDataRowSubject.next(this.tableDataRowValue.filter(b=>b.infoHash!==o)),this.webClient.remove(o,{destroyStore:!0},b=>{b&&this.gs.log("[TORRENT_FILE_REMOVE_ERROR]",b),delete this.torrentsQueue[o],y&&this.ls.setItem(this.gs.localStorageKeys.Torrents,this.torrentsQueue),c&&c(b)})}pauseTorrent(o,c){const y=this.webClient.get(o);y&&(y.pause(),c&&c(y))}resumeTorrent(o,c){const y=this.webClient.get(o);y&&(y.resume(),c&&c(y))}removeAll(){for(const o of this.webClient.torrents)this.removeTorrent(o.infoHash,c=>{c||this.gs.log("[TORRENT_FILE_REMOVE_SUCCESS]",o.infoHash)},!1)}}return l.\u0275fac=function(o){return new(o||l)(n.LFG(R.U),n.LFG(d.s),n.LFG(m.k),n.LFG(_.n))},l.\u0275prov=n.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var O=h(7845),H=h(8381),M=h(3e3);let x=(()=>{class l{constructor(){this.fileDropped=new n.vpe}onDragOver(o){o.preventDefault(),o.stopPropagation(),this.fileOver=!0}onDragLeave(o){o.preventDefault(),o.stopPropagation(),this.fileOver=!1}ondrop(o){o.preventDefault(),o.stopPropagation(),this.fileOver=!1;let c=o.dataTransfer.files;c.length>0&&this.fileDropped.emit(c)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=n.lG2({type:l,selectors:[["","appDragDrop",""]],hostVars:2,hostBindings:function(o,c){1&o&&n.NdJ("dragover",function(b){return c.onDragOver(b)})("dragleave",function(b){return c.onDragLeave(b)})("drop",function(b){return c.ondrop(b)}),2&o&&n.ekj("fileover",c.fileOver)},outputs:{fileDropped:"fileDropped"}}),l})();var D=h(8616),N=h(7322),z=h(7531),X=h(5245),tt=h(5899),V=h(7238),ot=h(7423),et=h(4623),lt=h(3626);function ut(l,L){1&l&&n._UZ(0,"mat-progress-bar",26)}function It(l,L){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f516} NAME"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function q(l,L){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f4be} SIZE"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function nt(l,L){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f4bf} DOWNLOADED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function mt(l,L){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f4c0} UPLOADED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function gt(l,L){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f504} PROGRESS"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function _t(l,L){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f53d} SPEED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function xt(l,L){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f53c} SPEED"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function yt(l,L){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f551} ~ETA."),n.qZA()),2&l&&n.Udp("color","#ff4081")}function st(l,L){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f9f2} PEERS"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function ft(l,L){1&l&&(n.TgZ(0,"span"),n._uU(1,"\u{1f310} RATIO"),n.qZA()),2&l&&n.Udp("color","#ff4081")}function Et(l,L){if(1&l&&(n.TgZ(0,"th",30)(1,"h3",31),n.YNc(2,It,2,2,"span",32),n.YNc(3,q,2,2,"span",32),n.YNc(4,nt,2,2,"span",32),n.YNc(5,mt,2,2,"span",32),n.YNc(6,gt,2,2,"span",32),n.YNc(7,_t,2,2,"span",32),n.YNc(8,xt,2,2,"span",32),n.YNc(9,yt,2,2,"span",32),n.YNc(10,st,2,2,"span",32),n.YNc(11,ft,2,2,"span",32),n.qZA()()),2&l){const o=n.oxw().$implicit;n.xp6(2),n.Q6J("ngIf","NAME"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","LENGTH"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","PROGRESS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","TIMEREMAINING"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","NUMPEERS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","RATIO"===o.toUpperCase())}}function Dt(l,L){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(o[c])}}function Tt(l,L){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,o[c]))}}function at(l,L){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,o[c]))}}function ct(l,L){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,o[c]))}}function At(l,L){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"number"),n.qZA()),2&l){const o=n.oxw().$implicit;n.xp6(1),n.hij("",n.xi3(2,1,o.downloaded/o.length*100,"1.2-2")," %")}}function Rt(l,L){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.hij("",n.lcZ(2,1,o[c]),"/s")}}function ht(l,L){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.hij("",n.lcZ(2,1,o[c]),"/s")}}function Bt(l,L){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"number"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(o[c]<=0?"COMPLETED":n.xi3(2,1,o[c]/1e3,"1.0-0")+" s")}}function bt(l,L){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(o[c])}}function wt(l,L){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"number"),n.qZA()),2&l){const o=n.oxw().$implicit,c=n.oxw().$implicit;n.xp6(1),n.Oqu(n.xi3(2,1,o[c],"1.4-4"))}}function pt(l,L){if(1&l&&(n.TgZ(0,"td",33)(1,"h3"),n.YNc(2,Dt,2,1,"span",34),n.YNc(3,Tt,3,3,"span",34),n.YNc(4,at,3,3,"span",34),n.YNc(5,ct,3,3,"span",34),n.YNc(6,At,3,4,"span",34),n.YNc(7,Rt,3,3,"span",34),n.YNc(8,ht,3,3,"span",34),n.YNc(9,Bt,3,4,"span",34),n.YNc(10,bt,2,1,"span",34),n.YNc(11,wt,3,4,"span",34),n.qZA()()),2&l){const o=n.oxw().$implicit;n.xp6(1),n.Gre("m-0 ","NAME"===o.toUpperCase()?"text-start":"",""),n.xp6(1),n.Q6J("ngIf","NAME"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","LENGTH"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","PROGRESS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","DOWNLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","UPLOADSPEED"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","TIMEREMAINING"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","NUMPEERS"===o.toUpperCase()),n.xp6(1),n.Q6J("ngIf","RATIO"===o.toUpperCase())}}function rt(l,L){1&l&&(n.ynx(0,27),n.YNc(1,Et,12,10,"th",28),n.YNc(2,pt,12,13,"td",29),n.BQk()),2&l&&n.s9C("matColumnDef",L.$implicit)}function dt(l,L){if(1&l&&(n.TgZ(0,"p",41),n._uU(1," Info Hash :: "),n.TgZ(2,"span",52),n._uU(3),n.qZA()()),2&l){const o=n.oxw().$implicit;n.xp6(3),n.hij(" ",o.infoHash," ")}}function vt(l,L){if(1&l){const o=n.EpF();n.TgZ(0,"p",41),n._uU(1," Magnet URI :: "),n.TgZ(2,"span",53),n.NdJ("click",function(){n.CHM(o);const y=n.oxw().$implicit;return n.oxw().copyMagnetHashToClipboard(y.magnetURI)}),n._uU(3),n.qZA()()}if(2&l){const o=n.oxw().$implicit;n.xp6(3),n.hij(" ",o.magnetURI," ")}}function it(l,L){if(1&l&&(n.TgZ(0,"li"),n._uU(1),n.qZA()),2&l){const o=L.$implicit;n.xp6(1),n.hij(" ",o," ")}}function Ut(l,L){if(1&l){const o=n.EpF();n.TgZ(0,"button",45),n.NdJ("click",function(){n.CHM(o);const y=n.oxw().$implicit;return n.oxw().resumeTorrent(y)}),n.TgZ(1,"mat-icon",46),n._uU(2,"play_arrow"),n.qZA(),n._uU(3," Resume "),n.qZA()}}function r(l,L){if(1&l){const o=n.EpF();n.TgZ(0,"button",45),n.NdJ("click",function(){n.CHM(o);const y=n.oxw().$implicit;return n.oxw().pauseTorrent(y)}),n.TgZ(1,"mat-icon",46),n._uU(2,"pause"),n.qZA(),n._uU(3," Pause "),n.qZA()}}function t(l,L){if(1&l){const o=n.EpF();n.TgZ(0,"mat-list-option",54)(1,"mat-icon",55),n._uU(2,"file_present"),n.qZA(),n.TgZ(3,"div",56),n.NdJ("click",function(){const b=n.CHM(o).$implicit;return n.oxw(2).saveFile(b)}),n.TgZ(4,"span"),n._uU(5),n.qZA(),n._uU(6," -- "),n.TgZ(7,"span",57),n._uU(8),n.ALo(9,"number"),n.qZA(),n._uU(10," :: "),n.TgZ(11,"span",52),n._uU(12),n.ALo(13,"bytes"),n.ALo(14,"bytes"),n.qZA()()()}if(2&l){const o=L.$implicit;n.xp6(4),n.Gre("text-",o.downloaded/o.length>=1?"primary":"bifeldy",""),n.xp6(1),n.hij(" ",o.name," "),n.xp6(3),n.hij(" ",n.xi3(9,7,o.downloaded/o.length*100,"1.2-2")," % "),n.xp6(4),n.AsE(" ",n.lcZ(13,10,o.downloaded)," / ",n.lcZ(14,12,o.length)," ")}}function e(l,L){if(1&l){const o=n.EpF();n.TgZ(0,"td",35)(1,"div",36)(2,"div",37)(3,"div",38),n._UZ(4,"div"),n.qZA(),n.TgZ(5,"div",39),n.YNc(6,dt,4,1,"p",40),n.YNc(7,vt,4,1,"p",40),n.TgZ(8,"div",41),n._uU(9," Announce Trackers :: "),n.TgZ(10,"ul",42),n.YNc(11,it,2,1,"li",43),n.qZA()(),n.TgZ(12,"div",44)(13,"button",45),n.NdJ("click",function(){const b=n.CHM(o).$implicit;return n.oxw().refreshGraph(b)}),n.TgZ(14,"mat-icon",46),n._uU(15,"refresh"),n.qZA(),n._uU(16," Refresh Graph "),n.qZA(),n.TgZ(17,"button",45),n.NdJ("click",function(){const b=n.CHM(o).$implicit;return n.oxw().removeTorrent(b)}),n.TgZ(18,"mat-icon",46),n._uU(19,"delete_outline"),n.qZA(),n._uU(20," Remove "),n.qZA(),n.YNc(21,Ut,4,0,"button",47),n.YNc(22,r,4,0,"button",47),n.qZA(),n.TgZ(23,"div",48)(24,"div",49),n._uU(25,"Rincian Isi Berkas \u2728"),n.qZA(),n.TgZ(26,"mat-selection-list",50),n.YNc(27,t,15,14,"mat-list-option",51),n.qZA()()()()()()}if(2&l){const o=L.$implicit,c=n.oxw();n.uIk("colspan",c.tableDataColumn.length),n.xp6(1),n.Q6J("@detailExpand",o===c.TORRENT.expandedRow?"expanded":"collapsed"),n.xp6(3),n.Gre("p2p-graph graphP2p-",o.infoHash,""),n.xp6(2),n.Q6J("ngIf",o.infoHash),n.xp6(1),n.Q6J("ngIf",o.magnetURI),n.xp6(4),n.Q6J("ngForOf",o.announce),n.xp6(10),n.Q6J("ngIf",o.paused),n.xp6(1),n.Q6J("ngIf",!o.paused),n.xp6(4),n.Q6J("multiple",!1),n.xp6(1),n.Q6J("ngForOf",o.files)}}function i(l,L){1&l&&n._UZ(0,"tr",58)}function a(l,L){if(1&l){const o=n.EpF();n.TgZ(0,"tr",59),n.NdJ("click",function(){const b=n.CHM(o).$implicit;return n.oxw().toggleExpanded(b)}),n.qZA()}if(2&l){const o=L.$implicit,c=n.oxw();n.ekj("expanded-row",c.TORRENT.expandedRow===o)}}function u(l,L){1&l&&n._UZ(0,"tr",60)}function f(l,L){if(1&l&&(n.TgZ(0,"tr",61)(1,"td",62)(2,"div",63)(3,"div",64)(4,"h3",31),n._uU(5," Tidak Ada Data \xaf\\_(\u30c4)_/\xaf "),n.qZA()()()()()),2&l){const o=n.oxw();n.xp6(1),n.uIk("colspan",o.tableDataColumn.length)}}const P=function(){return["expandedDetail"]};let Y=(()=>{class l{constructor(o,c,y,b,W,Lt,Ft,Ot){this.snackBar=o,this.clipboard=c,this.gs=y,this.torrent=b,this.toast=W,this.ds=Lt,this.ss=Ft,this.bs=Ot,this.isProcessing=!1,this.magnetHash=null,this.torrentsGraph={},this.tableDataColumn=["name","length","downloaded","uploaded","progress","downloadSpeed","uploadSpeed","timeRemaining","numPeers","ratio"],this.files=[],this.subsDialog=null,this.subsUser=null,this.subsTableDataRow=null,this.timedOut=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get ENV(){return s.N}get TORRENT(){return this.torrent}ngOnInit(){this.dataSource=new T.by,this.gs.isBrowser&&(this.dataSource.sort=this.sort,this.subsTableDataRow=this.torrent.tableDataRow.subscribe({next:o=>{this.dataSource.data=o,this.refreshAllGraph()}}),this.reviveTorrent())}ngOnDestroy(){var o,c,y,b,W;null===(c=null===(o=this.sort)||void 0===o?void 0:o.sortChange)||void 0===c||c.unsubscribe(),null===(y=this.subsDialog)||void 0===y||y.unsubscribe(),null===(b=this.subsUser)||void 0===b||b.unsubscribe(),null===(W=this.subsTableDataRow)||void 0===W||W.unsubscribe(),this.timedOut&&(clearTimeout(this.timedOut),this.timedOut=null)}copyMagnetHashToClipboard(o){this.clipboard.copy(o)&&this.snackBar.open("Magnet Link Hash :: Telah Di Salin Pada Clipboard","Ok")}toggleExpanded(o){this.gs.log("[TORRENT_CLICKED]",o),this.torrent.expandedRow=this.torrent.expandedRow===o?null:o,this.refreshGraph(o)}saveFile(o){o.downloaded/o.length>=1?(this.bs.busy(),o.getBlobURL((c,y)=>{c||(this.gs.log("[TORRENT_FILE_BLOBURL]",y),(0,I.saveAs)(y,o.name),this.bs.idle())})):this.toast.info("Berkas Sedang Dalam Proses Unduhan!","Yah, File Belum Siap!",null,!0)}reviveTorrent(){this.torrent.resurrectFiles((o,c)=>{this.refreshAllGraph()})}resumeTorrent(o){this.torrent.resumeTorrent(o.infoHash,c=>{this.refreshAllGraph()})}pauseTorrent(o){this.torrent.pauseTorrent(o.infoHash,c=>{c||this.gs.log("[TORRENT_FILE_PAUSE_SUCCESS]",o.infoHash),this.refreshAllGraph()})}removeTorrent(o){this.torrent.removeTorrent(o.infoHash,c=>{c||this.gs.log("[TORRENT_FILE_REMOVE_SUCCESS]",o.infoHash),this.torrentsGraph[o.infoHash].destroy(),delete this.torrentsGraph[o.infoHash],this.refreshAllGraph()})}downloadFiles(o){this.isProcessing=!0,this.torrent.downloadFiles(this.magnetHash,(c,y)=>{this.magnetHash=null,this.isProcessing=!1,this.refreshAllGraph()})}uploadFiles(o){this.gs.log("[TORRENT_SEED_USER_INFORMATION]",o),this.isProcessing=!0,this.torrent.uploadFiles(o,this.files,(c,y)=>{this.isProcessing=!1,this.refreshAllGraph()})}prepareFilesList(o){this.files=[];for(const y of o)this.files.push(y);const c={torrent_name:{inputLabel:"Nama Torrent",inputPlaceholder:`Torrent # ${this.ss.mySocket.id} @ ${(new Date).toUTCString()}`,inputValue:null,inputRequired:!0}};1===this.files.length?(c.torrent_name.inputPlaceholder=this.files[0].name,this.uploadFiles(c.torrent_name.inputPlaceholder)):this.files.length>1&&(this.subsDialog=this.ds.openInputDialog({data:{title:"Silahkan Masukkan Nama Untuk Torrent Kamu!",input:c,confirmText:"Ya, Mulai SEED",cancelText:"Tidak, Batal"}}).afterClosed().subscribe({next:y=>{this.gs.log("[INPUT_DIALOG_CLOSED]",y),y&&this.uploadFiles(y.torrent_name),this.subsDialog.unsubscribe()}}))}onFileDropped(o){this.prepareFilesList(o)}fileBrowseHandler(o){this.prepareFilesList(o.target.files)}initGraph(o){!this.torrentsGraph[o.infoHash]&&this.dataSource.data.length>0&&(this.gs.log("[TORRENT_WIRE_INIT_GRAPH]",o),this.torrentsGraph[o.infoHash]=new P2PGraph(`.graphP2p-${o.infoHash}`),this.torrentsGraph[o.infoHash].add({id:this.torrent.webClient.peerId,me:!0,name:"Kamu!"}))}addAllGraph(o){this.gs.log("[TORRENT_WIRE_RELOAD_GRAPH]",o);for(const c of o.wires){let y=c.peerId||"Anonim!";c.remoteAddress&&c.remotePort&&(y=`${c.remoteAddress}:${c.remotePort}`),this.torrentsGraph[o.infoHash].add({id:c.peerId,name:y}),this.torrentsGraph[o.infoHash].connect(this.torrent.webClient.peerId,c.peerId)}}deleteAllGraph(o){this.gs.log("[TORRENT_WIRE_DELETE_GRAPH]",o);const c=this.torrentsGraph[o.infoHash].list().filter(y=>y.id!==this.torrent.webClient.peerId);for(const y of c)this.torrentsGraph[o.infoHash].disconnect(this.torrent.webClient.peerId,y.id),this.torrentsGraph[o.infoHash].remove(y.id)}refreshGraph(o){this.gs.log("[TORRENT_WIRE_REFRESH_GRAPH]",o),this.torrentsGraph[o.infoHash]?(this.deleteAllGraph(o),this.addAllGraph(o)):this.initGraph(o)}refreshAllGraph(){for(const o of this.dataSource.data)this.timedOut=setTimeout(()=>{this.refreshGraph(o)},1234)}}return l.\u0275fac=function(o){return new(o||l)(n.Y36(A.ux),n.Y36(B.TU),n.Y36(R.U),n.Y36(C),n.Y36(m.k),n.Y36(O.x),n.Y36(H.R),n.Y36(M.z))},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-torrent"]],viewQuery:function(o,c){if(1&o&&n.Gf(v.YE,7),2&o){let y;n.iGM(y=n.CRH())&&(c.sort=y.first)}},decls:37,vars:13,consts:[["appDragDrop","",1,"h-100",3,"fileDropped"],[1,"container"],[1,"row","pb-3","px-0"],[1,"col-12"],[1,"row"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"text-bifeldy"],["hintLabel","Isi Lalu Tekan 'Enter' Untuk Mencari Torrent ...",1,"col-12","col-md-6","col-lg-4","px-3","mb-3",3,"color"],["matInput","","placeholder","Ex. magnet:123qwe...!@#",3,"ngModel","disabled","keyup.enter","ngModelChange"],["input",""],["matSuffix",""],["color","warn","mode","indeterminate",4,"ngIf"],[1,"row","mx-2"],[1,"col-12",2,"overflow-x","auto"],["mat-table","","matSort","","multiTemplateDataRows","",1,"bg-transparent",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","element-row",3,"expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","detail-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["type","file","id","fileDropRef","multiple","",2,"visibility","hidden",3,"disabled","change"],["fileDropRef",""],["mat-fab","","color","warn","matTooltip","Seed Berkas",1,"me-3","mb-5","fab-button","animate__animated","animate__bounce","animate__infinite","animate__slow",2,"position","fixed","bottom","0","right","0",3,"disabled","click"],["color","warn","mode","indeterminate"],[3,"matColumnDef"],["mat-header-cell","","class","px-3 text-center","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","px-3 text-center","style","cursor: pointer;",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"px-3","text-center"],[1,"m-0"],[3,"color",4,"ngIf"],["mat-cell","",1,"px-3","text-center",2,"cursor","pointer"],[4,"ngIf"],["mat-cell",""],[1,"element-detail"],[1,"py-3","row"],[1,"col-3"],[1,"col-9"],["class","px-2 text-truncate",4,"ngIf"],[1,"px-2","text-truncate"],[1,"text-success","m-0"],[4,"ngFor","ngForOf"],[1,"p-2"],["mat-stroked-button","",1,"m-1","text-warning",3,"click"],[1,"me-1"],["mat-stroked-button","","class","m-1 text-warning",3,"click",4,"ngIf"],[1,"px-2"],["mat-subheader","",1,"p-0"],[3,"multiple"],["class","h-100",4,"ngFor","ngForOf"],[1,"text-success"],["matTooltip","Klik Untuk Menyalin!",1,"text-primary","text-decoration-none",3,"click"],[1,"h-100"],["mat-list-icon","",1,"ps-3"],[2,"cursor","pointer",3,"click"],[1,"text-warning"],["mat-header-row",""],["mat-row","",1,"element-row",3,"click"],["mat-row","",1,"detail-row"],[1,"mat-row"],[1,"mat-cell","text-center","align-items-center","p-0",2,"background-image","url('/assets/img/404/no-data.png')","background-size","contain","background-position","center","background-repeat","no-repeat","height","256px"],[1,"row","align-items-center","h-100"],[1,"col-8","mx-auto","text-light","text-center","rounded","py-3",2,"background-color","rgba(128, 128, 128, 0.875)"]],template:function(o,c){if(1&o){const y=n.EpF();n.TgZ(0,"div",0),n.NdJ("fileDropped",function(W){return c.onFileDropped(W)}),n._UZ(1,"app-notifications"),n.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h2",6)(8,"b",7),n._uU(9,"Web-SocketRTC Torrent"),n.qZA()()(),n.TgZ(10,"div",3)(11,"mat-form-field",8)(12,"mat-label"),n._uU(13,"Unduh Dari Info Hash / Magnet URI"),n.qZA(),n.TgZ(14,"input",9,10),n.NdJ("keyup.enter",function(W){return c.downloadFiles(W)})("ngModelChange",function(W){return c.magnetHash=W}),n.qZA(),n.TgZ(16,"mat-icon",11),n._uU(17,"cloud_download"),n.qZA(),n.YNc(18,ut,1,0,"mat-progress-bar",12),n.qZA(),n.TgZ(19,"div",13)(20,"div",14)(21,"table",15),n.YNc(22,rt,3,1,"ng-container",16),n.ynx(23,17),n.YNc(24,e,28,12,"td",18),n.BQk(),n.YNc(25,i,1,0,"tr",19),n.YNc(26,a,1,2,"tr",20),n.YNc(27,u,1,0,"tr",21),n.YNc(28,f,6,1,"tr",22),n.qZA()(),n.TgZ(29,"div",3)(30,"marquee"),n._uU(31),n.qZA()()()()()()()(),n.TgZ(32,"input",23,24),n.NdJ("change",function(W){return c.fileBrowseHandler(W)}),n.qZA(),n.TgZ(34,"button",25),n.NdJ("click",function(){return n.CHM(y),n.MAs(33).click()}),n.TgZ(35,"mat-icon"),n._uU(36,"cloud_upload"),n.qZA()()()}2&o&&(n.xp6(11),n.Q6J("color","accent"),n.xp6(3),n.Q6J("ngModel",c.magnetHash)("disabled",c.isProcessing),n.xp6(4),n.Q6J("ngIf",c.isProcessing),n.xp6(3),n.Q6J("dataSource",c.dataSource),n.xp6(1),n.Q6J("ngForOf",c.tableDataColumn),n.xp6(3),n.Q6J("matHeaderRowDef",c.tableDataColumn),n.xp6(1),n.Q6J("matRowDefColumns",c.tableDataColumn),n.xp6(1),n.Q6J("matRowDefColumns",n.DdM(12,P)),n.xp6(4),n.hij("Terhubung Dengan Tracker :: ",c.ENV.torrent.trackerAnnounce.join(" :: "),""),n.xp6(1),n.Q6J("disabled",c.isProcessing),n.xp6(2),n.Q6J("disabled",c.isProcessing))},directives:[x,D.t,N.KE,N.hX,z.Nt,F.Fj,F.JJ,F.On,X.Hw,N.R9,p.O5,tt.pW,T.BZ,v.YE,p.sg,T.w1,T.fO,T.ge,v.nU,T.Dz,T.ev,V.gM,ot.lW,et.gs,et.Ub,et.vS,et.Nh,T.as,T.XQ,T.nj,T.Gk,T.Ee],pipes:[lt.$,p.JJ],styles:[".p2p-graph[_ngcontent-%COMP%]{background-color:#8d8d8d80!important}tr.detail-row[_ngcontent-%COMP%]{height:0}tr.element-row[_ngcontent-%COMP%]:not(.expanded-row):hover{background-color:#ffffffdf}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.fileover[_ngcontent-%COMP%]{animation:shake 1s;animation-iteration-count:infinite}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}"],data:{animation:[(0,g.X$)("detailExpand",[(0,g.SB)("collapsed",(0,g.oB)({height:"0px",minHeight:"0"})),(0,g.SB)("expanded",(0,g.oB)({height:"*"})),(0,g.eR)("expanded <=> collapsed",(0,g.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),l})();var Q=h(210),J=h(7355),$=h(8613),Mt=h(4946),St=h(7956);const Pt=[{path:"",pathMatch:"full",component:Y}];let Zt=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=n.oAB({type:l}),l.\u0275inj=n.cJS({imports:[[p.ez,Z.Bz.forChild(Pt),F.u5,St.C,$.F,Q.m,Mt.P,J.T]]}),l})()},4946:(j,S,h)=>{"use strict";h.d(S,{P:()=>g});var p=h(9808),Z=h(210),F=h(5e3);let g=(()=>{class v{}return v.\u0275fac=function(I){return new(I||v)},v.\u0275mod=F.oAB({type:v}),v.\u0275inj=F.cJS({imports:[[p.ez,Z.m]]}),v})()},8616:(j,S,h)=>{"use strict";h.d(S,{t:()=>B});var p=h(5e3),Z=h(8406),F=h(8696),g=h(7140),v=h(9808),T=h(1861);function I(R,w){if(1&R&&p._UZ(0,"div",4),2&R){const E=p.oxw();p.Udp("background-size",E.GS.sizeContain?"contain":"cover")("background-image","url("+E.GS.bannerImg+")")("background-repeat",E.GS.bgRepeat?"repeat-x":"no-repeat")("height","/home"===E.ROUTER.url||"/berkas"===E.ROUTER.url?"192px":"128px")("background-position-y","/berkas"===E.ROUTER.url?"22.5%":"")}}function s(R,w){if(1&R&&(p.TgZ(0,"strong",10),p._uU(1," -- "),p.TgZ(2,"i")(3,"a",11),p._uU(4),p.qZA()()()),2&R){const E=p.oxw().$implicit;p.xp6(3),p.MGl("routerLink","/user/",E.notifCreator,""),p.xp6(1),p.hij(" ",E.notifCreator," ")}}function n(R,w){if(1&R){const E=p.EpF();p.TgZ(0,"button",12),p.NdJ("click",function(){p.CHM(E);const G=p.oxw().$implicit;return p.oxw().removeNotif(G.notifData.id)}),p.qZA()}}function A(R,w){if(1&R&&(p.TgZ(0,"div",5)(1,"div")(2,"strong",6),p._uU(3),p.qZA(),p._UZ(4,"span",7),p.ALo(5,"safeInnerHtml"),p.YNc(6,s,5,2,"strong",8),p.YNc(7,n,1,0,"button",9),p.qZA()()),2&R){const E=w.$implicit;p.xp6(1),p.Gre("alert alert-",E.notifData.type," alert-dismissible fade show"),p.xp6(2),p.Oqu(E.notifData.title),p.xp6(1),p.Q6J("innerHTML",p.lcZ(5,7,E.notifData.content),p.oJD),p.xp6(2),p.Q6J("ngIf",E.notifCreator),p.xp6(1),p.Q6J("ngIf",E.notifData.dismissible)}}let B=(()=>{class R{constructor(E,U,G){this.router=E,this.gs=U,this.notif=G}ngOnInit(){}get GS(){return this.gs}get ROUTER(){return this.router}get NOTIF(){return this.notif}removeNotif(E){this.notif.removeNotif(E)}}return R.\u0275fac=function(E){return new(E||R)(p.Y36(Z.F0),p.Y36(F.U),p.Y36(g.T))},R.\u0275cmp=p.Xpm({type:R,selectors:[["app-notifications"]],decls:4,vars:2,consts:[["class","container-fluid notif-banner align-items-center",3,"background-size","background-image","background-repeat","height","background-position-y",4,"ngIf"],[1,"container"],[1,"row","pt-3"],["class","col-12",4,"ngFor","ngForOf"],[1,"container-fluid","notif-banner","align-items-center"],[1,"col-12"],[1,"me-1"],[3,"innerHTML"],["class","ms-1",4,"ngIf"],["type","button","class","btn-close","data-dismiss","alert",3,"click",4,"ngIf"],[1,"ms-1"],[1,"text-decoration-none",3,"routerLink"],["type","button","data-dismiss","alert",1,"btn-close",3,"click"]],template:function(E,U){1&E&&(p.YNc(0,I,1,10,"div",0),p.TgZ(1,"div",1)(2,"div",2),p.YNc(3,A,8,9,"div",3),p.qZA()()),2&E&&(p.Q6J("ngIf",U.GS.bannerImg&&("/home"===U.ROUTER.url||"/berkas"===U.ROUTER.url||"/fansub"===U.ROUTER.url||"/berkas"===U.ROUTER.url||"/anime"===U.ROUTER.url||U.ROUTER.url.includes("/anime?")||"/dorama"===U.ROUTER.url||U.ROUTER.url.includes("/dorama?"))),p.xp6(3),p.Q6J("ngForOf",U.NOTIF.notifications))},directives:[v.O5,v.sg,Z.yS],pipes:[T.H],styles:[".notif-banner[_ngcontent-%COMP%]{width:100%;background-size:cover;background-position:75% 50%;background-image:url(/assets/img/home-banner.png)}"]}),R})()},8613:(j,S,h)=>{"use strict";h.d(S,{F:()=>v});var p=h(9808),Z=h(8406),F=h(7355),g=h(5e3);let v=(()=>{class T{}return T.\u0275fac=function(s){return new(s||T)},T.\u0275mod=g.oAB({type:T}),T.\u0275inj=g.cJS({imports:[[p.ez,Z.Bz,F.T]]}),T})()},7956:(j,S,h)=>{"use strict";h.d(S,{C:()=>F});var p=h(9808),Z=h(5e3);let F=(()=>{class g{}return g.\u0275fac=function(T){return new(T||g)},g.\u0275mod=Z.oAB({type:g}),g.\u0275inj=Z.cJS({imports:[[p.ez]]}),g})()},5343:(j,S)=>{"use strict";S.byteLength=function I(w){var E=T(w),G=E[1];return 3*(E[0]+G)/4-G},S.toByteArray=function n(w){var E,_,U=T(w),G=U[0],K=U[1],k=new Z(function s(w,E,U){return 3*(E+U)/4-U}(0,G,K)),d=0,m=K>0?G-4:G;for(_=0;_<m;_+=4)E=p[w.charCodeAt(_)]<<18|p[w.charCodeAt(_+1)]<<12|p[w.charCodeAt(_+2)]<<6|p[w.charCodeAt(_+3)],k[d++]=E>>16&255,k[d++]=E>>8&255,k[d++]=255&E;return 2===K&&(E=p[w.charCodeAt(_)]<<2|p[w.charCodeAt(_+1)]>>4,k[d++]=255&E),1===K&&(E=p[w.charCodeAt(_)]<<10|p[w.charCodeAt(_+1)]<<4|p[w.charCodeAt(_+2)]>>2,k[d++]=E>>8&255,k[d++]=255&E),k},S.fromByteArray=function R(w){for(var E,U=w.length,G=U%3,K=[],k=16383,d=0,m=U-G;d<m;d+=k)K.push(B(w,d,d+k>m?m:d+k));return 1===G?K.push(h[(E=w[U-1])>>2]+h[E<<4&63]+"=="):2===G&&K.push(h[(E=(w[U-2]<<8)+w[U-1])>>10]+h[E>>4&63]+h[E<<2&63]+"="),K.join("")};for(var h=[],p=[],Z="undefined"!=typeof Uint8Array?Uint8Array:Array,F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,v=F.length;g<v;++g)h[g]=F[g],p[F.charCodeAt(g)]=g;function T(w){var E=w.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var U=w.indexOf("=");return-1===U&&(U=E),[U,U===E?0:4-U%4]}function A(w){return h[w>>18&63]+h[w>>12&63]+h[w>>6&63]+h[63&w]}function B(w,E,U){for(var K=[],k=E;k<U;k+=3)K.push(A((w[k]<<16&16711680)+(w[k+1]<<8&65280)+(255&w[k+2])));return K.join("")}p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},3172:(j,S,h)=>{"use strict";const Z=h(5343),F=h(8461),g="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;S.lW=s,S.h2=50;const v=2147483647;function I(r){if(r>v)throw new RangeError('The value "'+r+'" is invalid for option "size"');const t=new Uint8Array(r);return Object.setPrototypeOf(t,s.prototype),t}function s(r,t,e){if("number"==typeof r){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return R(r)}return n(r,t,e)}function n(r,t,e){if("string"==typeof r)return function w(r,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const e=0|m(r,t);let i=I(e);const a=i.write(r,t);return a!==e&&(i=i.slice(0,a)),i}(r,t);if(ArrayBuffer.isView(r))return function U(r){if(rt(r,Uint8Array)){const t=new Uint8Array(r);return G(t.buffer,t.byteOffset,t.byteLength)}return E(r)}(r);if(null==r)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(rt(r,ArrayBuffer)||r&&rt(r.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(rt(r,SharedArrayBuffer)||r&&rt(r.buffer,SharedArrayBuffer)))return G(r,t,e);if("number"==typeof r)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=r.valueOf&&r.valueOf();if(null!=i&&i!==r)return s.from(i,t,e);const a=function K(r){if(s.isBuffer(r)){const t=0|k(r.length),e=I(t);return 0===e.length||r.copy(e,0,0,t),e}return void 0!==r.length?"number"!=typeof r.length||dt(r.length)?I(0):E(r):"Buffer"===r.type&&Array.isArray(r.data)?E(r.data):void 0}(r);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof r[Symbol.toPrimitive])return s.from(r[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function A(r){if("number"!=typeof r)throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function R(r){return A(r),I(r<0?0:0|k(r))}function E(r){const t=r.length<0?0:0|k(r.length),e=I(t);for(let i=0;i<t;i+=1)e[i]=255&r[i];return e}function G(r,t,e){if(t<0||r.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===e?new Uint8Array(r):void 0===e?new Uint8Array(r,t):new Uint8Array(r,t,e),Object.setPrototypeOf(i,s.prototype),i}function k(r){if(r>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|r}function m(r,t){if(s.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||rt(r,ArrayBuffer))return r.byteLength;if("string"!=typeof r)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const e=r.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===e)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return ht(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return wt(r).length;default:if(a)return i?-1:ht(r).length;t=(""+t).toLowerCase(),a=!0}}function _(r,t,e){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(t>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return ut(this,t,e);case"utf8":case"utf-8":return tt(this,t,e);case"ascii":return et(this,t,e);case"latin1":case"binary":return lt(this,t,e);case"base64":return X(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return It(this,t,e);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),i=!0}}function C(r,t,e){const i=r[t];r[t]=r[e],r[e]=i}function O(r,t,e,i,a){if(0===r.length)return-1;if("string"==typeof e?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),dt(e=+e)&&(e=a?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(a)return-1;e=r.length-1}else if(e<0){if(!a)return-1;e=0}if("string"==typeof t&&(t=s.from(t,i)),s.isBuffer(t))return 0===t.length?-1:H(r,t,e,i,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):H(r,[t],e,i,a);throw new TypeError("val must be string, number or Buffer")}function H(r,t,e,i,a){let Q,u=1,f=r.length,P=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(r.length<2||t.length<2)return-1;u=2,f/=2,P/=2,e/=2}function Y(J,$){return 1===u?J[$]:J.readUInt16BE($*u)}if(a){let J=-1;for(Q=e;Q<f;Q++)if(Y(r,Q)===Y(t,-1===J?0:Q-J)){if(-1===J&&(J=Q),Q-J+1===P)return J*u}else-1!==J&&(Q-=Q-J),J=-1}else for(e+P>f&&(e=f-P),Q=e;Q>=0;Q--){let J=!0;for(let $=0;$<P;$++)if(Y(r,Q+$)!==Y(t,$)){J=!1;break}if(J)return Q}return-1}function M(r,t,e,i){e=Number(e)||0;const a=r.length-e;i?(i=Number(i))>a&&(i=a):i=a;const u=t.length;let f;for(i>u/2&&(i=u/2),f=0;f<i;++f){const P=parseInt(t.substr(2*f,2),16);if(dt(P))return f;r[e+f]=P}return f}function x(r,t,e,i){return pt(ht(t,r.length-e),r,e,i)}function D(r,t,e,i){return pt(function Bt(r){const t=[];for(let e=0;e<r.length;++e)t.push(255&r.charCodeAt(e));return t}(t),r,e,i)}function N(r,t,e,i){return pt(wt(t),r,e,i)}function z(r,t,e,i){return pt(function bt(r,t){let e,i,a;const u=[];for(let f=0;f<r.length&&!((t-=2)<0);++f)e=r.charCodeAt(f),i=e>>8,a=e%256,u.push(a),u.push(i);return u}(t,r.length-e),r,e,i)}function X(r,t,e){return Z.fromByteArray(0===t&&e===r.length?r:r.slice(t,e))}function tt(r,t,e){e=Math.min(r.length,e);const i=[];let a=t;for(;a<e;){const u=r[a];let f=null,P=u>239?4:u>223?3:u>191?2:1;if(a+P<=e){let Y,Q,J,$;switch(P){case 1:u<128&&(f=u);break;case 2:Y=r[a+1],128==(192&Y)&&($=(31&u)<<6|63&Y,$>127&&(f=$));break;case 3:Y=r[a+1],Q=r[a+2],128==(192&Y)&&128==(192&Q)&&($=(15&u)<<12|(63&Y)<<6|63&Q,$>2047&&($<55296||$>57343)&&(f=$));break;case 4:Y=r[a+1],Q=r[a+2],J=r[a+3],128==(192&Y)&&128==(192&Q)&&128==(192&J)&&($=(15&u)<<18|(63&Y)<<12|(63&Q)<<6|63&J,$>65535&&$<1114112&&(f=$))}}null===f?(f=65533,P=1):f>65535&&(f-=65536,i.push(f>>>10&1023|55296),f=56320|1023&f),i.push(f),a+=P}return function ot(r){const t=r.length;if(t<=V)return String.fromCharCode.apply(String,r);let e="",i=0;for(;i<t;)e+=String.fromCharCode.apply(String,r.slice(i,i+=V));return e}(i)}!(s.TYPED_ARRAY_SUPPORT=function T(){try{const r=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(r,t),42===r.foo()}catch(r){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(r,t,e){return n(r,t,e)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(r,t,e){return function B(r,t,e){return A(r),r<=0?I(r):void 0!==t?"string"==typeof e?I(r).fill(t,e):I(r).fill(t):I(r)}(r,t,e)},s.allocUnsafe=function(r){return R(r)},s.allocUnsafeSlow=function(r){return R(r)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(rt(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),rt(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,a=e.length;for(let u=0,f=Math.min(i,a);u<f;++u)if(t[u]!==e[u]){i=t[u],a=e[u];break}return i<a?-1:a<i?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const a=s.allocUnsafe(e);let u=0;for(i=0;i<t.length;++i){let f=t[i];if(rt(f,Uint8Array))u+f.length>a.length?(s.isBuffer(f)||(f=s.from(f)),f.copy(a,u)):Uint8Array.prototype.set.call(a,f,u);else{if(!s.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(a,u)}u+=f.length}return a},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)C(this,e,e+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)C(this,e,e+3),C(this,e+1,e+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)C(this,e,e+7),C(this,e+1,e+6),C(this,e+2,e+5),C(this,e+3,e+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?tt(this,0,t):_.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){let t="";const e=S.h2;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},g&&(s.prototype[g]=s.prototype.inspect),s.prototype.compare=function(t,e,i,a,u){if(rt(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===a&&(a=0),void 0===u&&(u=this.length),e<0||i>t.length||a<0||u>this.length)throw new RangeError("out of range index");if(a>=u&&e>=i)return 0;if(a>=u)return-1;if(e>=i)return 1;if(this===t)return 0;let f=(u>>>=0)-(a>>>=0),P=(i>>>=0)-(e>>>=0);const Y=Math.min(f,P),Q=this.slice(a,u),J=t.slice(e,i);for(let $=0;$<Y;++$)if(Q[$]!==J[$]){f=Q[$],P=J[$];break}return f<P?-1:P<f?1:0},s.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},s.prototype.indexOf=function(t,e,i){return O(this,t,e,i,!0)},s.prototype.lastIndexOf=function(t,e,i){return O(this,t,e,i,!1)},s.prototype.write=function(t,e,i,a){if(void 0===e)a="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)a=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===a&&(a="utf8")):(a=i,i=void 0)}const u=this.length-e;if((void 0===i||i>u)&&(i=u),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");let f=!1;for(;;)switch(a){case"hex":return M(this,t,e,i);case"utf8":case"utf-8":return x(this,t,e,i);case"ascii":case"latin1":case"binary":return D(this,t,e,i);case"base64":return N(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,t,e,i);default:if(f)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),f=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const V=4096;function et(r,t,e){let i="";e=Math.min(r.length,e);for(let a=t;a<e;++a)i+=String.fromCharCode(127&r[a]);return i}function lt(r,t,e){let i="";e=Math.min(r.length,e);for(let a=t;a<e;++a)i+=String.fromCharCode(r[a]);return i}function ut(r,t,e){const i=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>i)&&(e=i);let a="";for(let u=t;u<e;++u)a+=vt[r[u]];return a}function It(r,t,e){const i=r.slice(t,e);let a="";for(let u=0;u<i.length-1;u+=2)a+=String.fromCharCode(i[u]+256*i[u+1]);return a}function q(r,t,e){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}function nt(r,t,e,i,a,u){if(!s.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<u)throw new RangeError('"value" argument is out of bounds');if(e+i>r.length)throw new RangeError("Index out of range")}function mt(r,t,e,i,a){Tt(t,i,a,r,e,7);let u=Number(t&BigInt(4294967295));r[e++]=u,u>>=8,r[e++]=u,u>>=8,r[e++]=u,u>>=8,r[e++]=u;let f=Number(t>>BigInt(32)&BigInt(4294967295));return r[e++]=f,f>>=8,r[e++]=f,f>>=8,r[e++]=f,f>>=8,r[e++]=f,e}function gt(r,t,e,i,a){Tt(t,i,a,r,e,7);let u=Number(t&BigInt(4294967295));r[e+7]=u,u>>=8,r[e+6]=u,u>>=8,r[e+5]=u,u>>=8,r[e+4]=u;let f=Number(t>>BigInt(32)&BigInt(4294967295));return r[e+3]=f,f>>=8,r[e+2]=f,f>>=8,r[e+1]=f,f>>=8,r[e]=f,e+8}function _t(r,t,e,i,a,u){if(e+i>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function xt(r,t,e,i,a){return t=+t,e>>>=0,a||_t(r,0,e,4),F.write(r,t,e,i,23,4),e+4}function yt(r,t,e,i,a){return t=+t,e>>>=0,a||_t(r,0,e,8),F.write(r,t,e,i,52,8),e+8}s.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const a=this.subarray(t,e);return Object.setPrototypeOf(a,s.prototype),a},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||q(t,e,this.length);let a=this[t],u=1,f=0;for(;++f<e&&(u*=256);)a+=this[t+f]*u;return a},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||q(t,e,this.length);let a=this[t+--e],u=1;for(;e>0&&(u*=256);)a+=this[t+--e]*u;return a},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||q(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||q(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||q(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||q(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||q(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&ct(t,this.length-8);const a=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,u=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(a)+(BigInt(u)<<BigInt(32))}),s.prototype.readBigUInt64BE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&ct(t,this.length-8);const a=e*2**24+65536*this[++t]+256*this[++t]+this[++t],u=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(a)<<BigInt(32))+BigInt(u)}),s.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||q(t,e,this.length);let a=this[t],u=1,f=0;for(;++f<e&&(u*=256);)a+=this[t+f]*u;return u*=128,a>=u&&(a-=Math.pow(2,8*e)),a},s.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||q(t,e,this.length);let a=e,u=1,f=this[t+--a];for(;a>0&&(u*=256);)f+=this[t+--a]*u;return u*=128,f>=u&&(f-=Math.pow(2,8*e)),f},s.prototype.readInt8=function(t,e){return t>>>=0,e||q(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||q(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt16BE=function(t,e){t>>>=0,e||q(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||q(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||q(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];return(void 0===e||void 0===i)&&ct(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),s.prototype.readBigInt64BE=it(function(t){at(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&ct(t,this.length-8);const a=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(a)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)}),s.prototype.readFloatLE=function(t,e){return t>>>=0,e||q(t,4,this.length),F.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||q(t,4,this.length),F.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||q(t,8,this.length),F.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||q(t,8,this.length),F.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,i,a){t=+t,e>>>=0,i>>>=0,a||nt(this,t,e,i,Math.pow(2,8*i)-1,0);let u=1,f=0;for(this[e]=255&t;++f<i&&(u*=256);)this[e+f]=t/u&255;return e+i},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,i,a){t=+t,e>>>=0,i>>>=0,a||nt(this,t,e,i,Math.pow(2,8*i)-1,0);let u=i-1,f=1;for(this[e+u]=255&t;--u>=0&&(f*=256);)this[e+u]=t/f&255;return e+i},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||nt(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||nt(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||nt(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||nt(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||nt(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigUInt64LE=it(function(t,e=0){return mt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=it(function(t,e=0){return gt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(t,e,i,a){if(t=+t,e>>>=0,!a){const Y=Math.pow(2,8*i-1);nt(this,t,e,i,Y-1,-Y)}let u=0,f=1,P=0;for(this[e]=255&t;++u<i&&(f*=256);)t<0&&0===P&&0!==this[e+u-1]&&(P=1),this[e+u]=(t/f>>0)-P&255;return e+i},s.prototype.writeIntBE=function(t,e,i,a){if(t=+t,e>>>=0,!a){const Y=Math.pow(2,8*i-1);nt(this,t,e,i,Y-1,-Y)}let u=i-1,f=1,P=0;for(this[e+u]=255&t;--u>=0&&(f*=256);)t<0&&0===P&&0!==this[e+u+1]&&(P=1),this[e+u]=(t/f>>0)-P&255;return e+i},s.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||nt(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||nt(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||nt(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||nt(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||nt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigInt64LE=it(function(t,e=0){return mt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=it(function(t,e=0){return gt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeFloatLE=function(t,e,i){return xt(this,t,e,!0,i)},s.prototype.writeFloatBE=function(t,e,i){return xt(this,t,e,!1,i)},s.prototype.writeDoubleLE=function(t,e,i){return yt(this,t,e,!0,i)},s.prototype.writeDoubleBE=function(t,e,i){return yt(this,t,e,!1,i)},s.prototype.copy=function(t,e,i,a){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!a&&0!==a&&(a=this.length),e>=t.length&&(e=t.length),e||(e=0),a>0&&a<i&&(a=i),a===i||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-e<a-i&&(a=t.length-e+i);const u=a-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,a):Uint8Array.prototype.set.call(t,this.subarray(i,a),e),u},s.prototype.fill=function(t,e,i,a){if("string"==typeof t){if("string"==typeof e?(a=e,e=0,i=this.length):"string"==typeof i&&(a=i,i=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===t.length){const f=t.charCodeAt(0);("utf8"===a&&f<128||"latin1"===a)&&(t=f)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let u;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(u=e;u<i;++u)this[u]=t;else{const f=s.isBuffer(t)?t:s.from(t,a),P=f.length;if(0===P)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(u=0;u<i-e;++u)this[u+e]=f[u%P]}return this};const st={};function ft(r,t,e){st[r]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,delete this.name}get code(){return r}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}function Et(r){let t="",e=r.length;const i="-"===r[0]?1:0;for(;e>=i+4;e-=3)t=`_${r.slice(e-3,e)}${t}`;return`${r.slice(0,e)}${t}`}function Tt(r,t,e,i,a,u){if(r>e||r<t){const f="bigint"==typeof t?"n":"";let P;throw P=u>3?0===t||t===BigInt(0)?`>= 0${f} and < 2${f} ** ${8*(u+1)}${f}`:`>= -(2${f} ** ${8*(u+1)-1}${f}) and < 2 ** ${8*(u+1)-1}${f}`:`>= ${t}${f} and <= ${e}${f}`,new st.ERR_OUT_OF_RANGE("value",P,r)}!function Dt(r,t,e){at(t,"offset"),(void 0===r[t]||void 0===r[t+e])&&ct(t,r.length-(e+1))}(i,a,u)}function at(r,t){if("number"!=typeof r)throw new st.ERR_INVALID_ARG_TYPE(t,"number",r)}function ct(r,t,e){throw Math.floor(r)!==r?(at(r,e),new st.ERR_OUT_OF_RANGE(e||"offset","an integer",r)):t<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,r)}ft("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ft("ERR_INVALID_ARG_TYPE",function(r,t){return`The "${r}" argument must be of type number. Received type ${typeof t}`},TypeError),ft("ERR_OUT_OF_RANGE",function(r,t,e){let i=`The value of "${r}" is out of range.`,a=e;return Number.isInteger(e)&&Math.abs(e)>2**32?a=Et(String(e)):"bigint"==typeof e&&(a=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(a=Et(a)),a+="n"),i+=` It must be ${t}. Received ${a}`,i},RangeError);const At=/[^+/0-9A-Za-z-_]/g;function ht(r,t){let e;t=t||1/0;const i=r.length;let a=null;const u=[];for(let f=0;f<i;++f){if(e=r.charCodeAt(f),e>55295&&e<57344){if(!a){if(e>56319){(t-=3)>-1&&u.push(239,191,189);continue}if(f+1===i){(t-=3)>-1&&u.push(239,191,189);continue}a=e;continue}if(e<56320){(t-=3)>-1&&u.push(239,191,189),a=e;continue}e=65536+(a-55296<<10|e-56320)}else a&&(t-=3)>-1&&u.push(239,191,189);if(a=null,e<128){if((t-=1)<0)break;u.push(e)}else if(e<2048){if((t-=2)<0)break;u.push(e>>6|192,63&e|128)}else if(e<65536){if((t-=3)<0)break;u.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;u.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return u}function wt(r){return Z.toByteArray(function Rt(r){if((r=(r=r.split("=")[0]).trim().replace(At,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(r))}function pt(r,t,e,i){let a;for(a=0;a<i&&!(a+e>=t.length||a>=r.length);++a)t[a+e]=r[a];return a}function rt(r,t){return r instanceof t||null!=r&&null!=r.constructor&&null!=r.constructor.name&&r.constructor.name===t.name}function dt(r){return r!=r}const vt=function(){const r="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){const i=16*e;for(let a=0;a<16;++a)t[i+a]=r[e]+r[a]}return t}();function it(r){return"undefined"==typeof BigInt?Ut:r}function Ut(){throw new Error("BigInt not supported")}},9069:j=>{"use strict";var p,S="object"==typeof Reflect?Reflect:null,h=S&&"function"==typeof S.apply?S.apply:function(m,_,C){return Function.prototype.apply.call(m,_,C)};p=S&&"function"==typeof S.ownKeys?S.ownKeys:Object.getOwnPropertySymbols?function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:function(m){return Object.getOwnPropertyNames(m)};var F=Number.isNaN||function(m){return m!=m};function g(){g.init.call(this)}j.exports=g,j.exports.once=function G(d,m){return new Promise(function(_,C){function O(M){d.removeListener(m,H),C(M)}function H(){"function"==typeof d.removeListener&&d.removeListener("error",O),_([].slice.call(arguments))}k(d,m,H,{once:!0}),"error"!==m&&function K(d,m,_){"function"==typeof d.on&&k(d,"error",m,_)}(d,O,{once:!0})})},g.EventEmitter=g,g.prototype._events=void 0,g.prototype._eventsCount=0,g.prototype._maxListeners=void 0;var v=10;function T(d){if("function"!=typeof d)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof d)}function I(d){return void 0===d._maxListeners?g.defaultMaxListeners:d._maxListeners}function s(d,m,_,C){var O,H,M;if(T(_),void 0===(H=d._events)?(H=d._events=Object.create(null),d._eventsCount=0):(void 0!==H.newListener&&(d.emit("newListener",m,_.listener?_.listener:_),H=d._events),M=H[m]),void 0===M)M=H[m]=_,++d._eventsCount;else if("function"==typeof M?M=H[m]=C?[_,M]:[M,_]:C?M.unshift(_):M.push(_),(O=I(d))>0&&M.length>O&&!M.warned){M.warned=!0;var x=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");x.name="MaxListenersExceededWarning",x.emitter=d,x.type=m,x.count=M.length,function Z(d){console&&console.warn&&console.warn(d)}(x)}return d}function n(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function A(d,m,_){var C={fired:!1,wrapFn:void 0,target:d,type:m,listener:_},O=n.bind(C);return O.listener=_,C.wrapFn=O,O}function B(d,m,_){var C=d._events;if(void 0===C)return[];var O=C[m];return void 0===O?[]:"function"==typeof O?_?[O.listener||O]:[O]:_?function U(d){for(var m=new Array(d.length),_=0;_<m.length;++_)m[_]=d[_].listener||d[_];return m}(O):w(O,O.length)}function R(d){var m=this._events;if(void 0!==m){var _=m[d];if("function"==typeof _)return 1;if(void 0!==_)return _.length}return 0}function w(d,m){for(var _=new Array(m),C=0;C<m;++C)_[C]=d[C];return _}function k(d,m,_,C){if("function"==typeof d.on)C.once?d.once(m,_):d.on(m,_);else{if("function"!=typeof d.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof d);d.addEventListener(m,function O(H){C.once&&d.removeEventListener(m,O),_(H)})}}Object.defineProperty(g,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(d){if("number"!=typeof d||d<0||F(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");v=d}}),g.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},g.prototype.setMaxListeners=function(m){if("number"!=typeof m||m<0||F(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this},g.prototype.getMaxListeners=function(){return I(this)},g.prototype.emit=function(m){for(var _=[],C=1;C<arguments.length;C++)_.push(arguments[C]);var O="error"===m,H=this._events;if(void 0!==H)O=O&&void 0===H.error;else if(!O)return!1;if(O){var M;if(_.length>0&&(M=_[0]),M instanceof Error)throw M;var x=new Error("Unhandled error."+(M?" ("+M.message+")":""));throw x.context=M,x}var D=H[m];if(void 0===D)return!1;if("function"==typeof D)h(D,this,_);else{var N=D.length,z=w(D,N);for(C=0;C<N;++C)h(z[C],this,_)}return!0},g.prototype.on=g.prototype.addListener=function(m,_){return s(this,m,_,!1)},g.prototype.prependListener=function(m,_){return s(this,m,_,!0)},g.prototype.once=function(m,_){return T(_),this.on(m,A(this,m,_)),this},g.prototype.prependOnceListener=function(m,_){return T(_),this.prependListener(m,A(this,m,_)),this},g.prototype.off=g.prototype.removeListener=function(m,_){var C,O,H,M,x;if(T(_),void 0===(O=this._events))return this;if(void 0===(C=O[m]))return this;if(C===_||C.listener===_)0==--this._eventsCount?this._events=Object.create(null):(delete O[m],O.removeListener&&this.emit("removeListener",m,C.listener||_));else if("function"!=typeof C){for(H=-1,M=C.length-1;M>=0;M--)if(C[M]===_||C[M].listener===_){x=C[M].listener,H=M;break}if(H<0)return this;0===H?C.shift():function E(d,m){for(;m+1<d.length;m++)d[m]=d[m+1];d.pop()}(C,H),1===C.length&&(O[m]=C[0]),void 0!==O.removeListener&&this.emit("removeListener",m,x||_)}return this},g.prototype.removeAllListeners=function(m){var _,C,O;if(void 0===(C=this._events))return this;if(void 0===C.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==C[m]&&(0==--this._eventsCount?this._events=Object.create(null):delete C[m]),this;if(0===arguments.length){var M,H=Object.keys(C);for(O=0;O<H.length;++O)"removeListener"!==(M=H[O])&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(_=C[m]))this.removeListener(m,_);else if(void 0!==_)for(O=_.length-1;O>=0;O--)this.removeListener(m,_[O]);return this},g.prototype.listeners=function(m){return B(this,m,!0)},g.prototype.rawListeners=function(m){return B(this,m,!1)},g.listenerCount=function(d,m){return"function"==typeof d.listenerCount?d.listenerCount(m):R.call(d,m)},g.prototype.listenerCount=R,g.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},9076:(j,S,h)=>{"use strict";var p=h(8926).default;const Z=h(8202),F=h(9069).EventEmitter,g=h(6643);j.exports=class v extends F{constructor(I,s){if(s||(s={}),super(),this.chunkLength=Number(I),!this.chunkLength)throw new Error("First argument must be a chunk length");this.closed=!1,this.destroyed=!1,this.length=Number(s.length)||1/0,this.name=s.name||"idb-chunk-store",this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1),this.dbPromise=Z.openDB(this.name,void 0,{upgrade:n=>{n.createObjectStore("chunks")},blocking:()=>{this.close()},terminated:()=>{this.closed=!0,this.emit("error",new Error("Database unexpectedly closed"))}})}put(I,s,n=(()=>{})){var A=this;if(this.closed)return g(()=>n(new Error("Storage is closed")));const B=I===this.lastChunkIndex;return B&&s.length!==this.lastChunkLength?g(()=>n(new Error("Last chunk length must be "+this.lastChunkLength))):B||s.length===this.chunkLength?((0!==(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)).byteOffset||s.byteLength!==s.buffer.byteLength)&&(s=s.slice()),void p(function*(){try{yield(yield A.dbPromise).put("chunks",s,I)}catch(R){return void n(R)}n(null)})()):g(()=>n(new Error("Chunk length must be "+this.chunkLength)))}get(I,s,n=(()=>{})){var A=this;return"function"==typeof s?this.get(I,{},s):(s||(s={}),this.closed?g(()=>n(new Error("Storage is closed"))):void p(function*(){let B;try{B=yield(yield A.dbPromise).get("chunks",I)}catch(U){return void n(U)}if(null==B){const U=new Error("Chunk not found");return U.notFound=!0,void n(U)}let R=Buffer.from(B.buffer,B.byteOffset,B.byteLength);const w=s.offset||0,E=s.length||R.length-w;(0!==w||E!==R.length)&&(R=R.slice(w,E+w)),n(null,R)})())}close(I=(()=>{})){var s=this;if(this.closed)return g(()=>I(new Error("Storage is closed")));this.closed=!0,p(function*(){try{(yield s.dbPromise).close()}catch(n){return void I(n)}I(null)})()}destroy(I=(()=>{})){var s=this;return this.closed?g(()=>I(new Error("Storage is closed"))):this.destroyed?g(()=>I(new Error("Storage is destroyed"))):(this.destroyed=!0,void this.close(function(){var n=p(function*(A){if(A)I(A);else{try{yield Z.deleteDB(s.name)}catch(B){return void I(B)}I(null)}});return function(A){return n.apply(this,arguments)}}()))}}},8202:(j,S,h)=>{"use strict";h.r(S),h.d(S,{deleteDB:()=>_,openDB:()=>m,unwrap:()=>d,wrap:()=>k});var p=h(5861);let F,g;const I=new WeakMap,s=new WeakMap,n=new WeakMap,A=new WeakMap,B=new WeakMap;let E={get(x,D,N){if(x instanceof IDBTransaction){if("done"===D)return s.get(x);if("objectStoreNames"===D)return x.objectStoreNames||n.get(x);if("store"===D)return N.objectStoreNames[1]?void 0:N.objectStore(N.objectStoreNames[0])}return k(x[D])},set:(x,D,N)=>(x[D]=N,!0),has:(x,D)=>x instanceof IDBTransaction&&("done"===D||"store"===D)||D in x};function K(x){return"function"==typeof x?function G(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function T(){return g||(g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...D){return x.apply(d(this),D),k(I.get(this))}:function(...D){return k(x.apply(d(this),D))}:function(D,...N){const z=x.call(d(this),D,...N);return n.set(z,D.sort?D.sort():[D]),k(z)}}(x):(x instanceof IDBTransaction&&function w(x){if(s.has(x))return;const D=new Promise((N,z)=>{const X=()=>{x.removeEventListener("complete",tt),x.removeEventListener("error",V),x.removeEventListener("abort",V)},tt=()=>{N(),X()},V=()=>{z(x.error||new DOMException("AbortError","AbortError")),X()};x.addEventListener("complete",tt),x.addEventListener("error",V),x.addEventListener("abort",V)});s.set(x,D)}(x),((x,D)=>D.some(N=>x instanceof N))(x,function v(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,E):x)}function k(x){if(x instanceof IDBRequest)return function R(x){const D=new Promise((N,z)=>{const X=()=>{x.removeEventListener("success",tt),x.removeEventListener("error",V)},tt=()=>{N(k(x.result)),X()},V=()=>{z(x.error),X()};x.addEventListener("success",tt),x.addEventListener("error",V)});return D.then(N=>{N instanceof IDBCursor&&I.set(N,x)}).catch(()=>{}),B.set(D,x),D}(x);if(A.has(x))return A.get(x);const D=K(x);return D!==x&&(A.set(x,D),B.set(D,x)),D}const d=x=>B.get(x);function m(x,D,{blocked:N,upgrade:z,blocking:X,terminated:tt}={}){const V=indexedDB.open(x,D),ot=k(V);return z&&V.addEventListener("upgradeneeded",et=>{z(k(V.result),et.oldVersion,et.newVersion,k(V.transaction))}),N&&V.addEventListener("blocked",()=>N()),ot.then(et=>{tt&&et.addEventListener("close",()=>tt()),X&&et.addEventListener("versionchange",()=>X())}).catch(()=>{}),ot}function _(x,{blocked:D}={}){const N=indexedDB.deleteDatabase(x);return D&&N.addEventListener("blocked",()=>D()),k(N).then(()=>{})}const C=["get","getKey","getAll","getAllKeys","count"],O=["put","add","delete","clear"],H=new Map;function M(x,D){if(!(x instanceof IDBDatabase)||D in x||"string"!=typeof D)return;if(H.get(D))return H.get(D);const N=D.replace(/FromIndex$/,""),z=D!==N,X=O.includes(N);if(!(N in(z?IDBIndex:IDBObjectStore).prototype)||!X&&!C.includes(N))return;const tt=function(){var V=(0,p.Z)(function*(ot,...et){const lt=this.transaction(ot,X?"readwrite":"readonly");let ut=lt.store;return z&&(ut=ut.index(et.shift())),(yield Promise.all([ut[N](...et),X&&lt.done]))[0]});return function(et){return V.apply(this,arguments)}}();return H.set(D,tt),tt}!function U(x){E=x(E)}(x=>({...x,get:(D,N,z)=>M(D,N)||x.get(D,N,z),has:(D,N)=>!!M(D,N)||x.has(D,N)}))},8461:(j,S)=>{S.read=function(h,p,Z,F,g){var v,T,I=8*g-F-1,s=(1<<I)-1,n=s>>1,A=-7,B=Z?g-1:0,R=Z?-1:1,w=h[p+B];for(B+=R,v=w&(1<<-A)-1,w>>=-A,A+=I;A>0;v=256*v+h[p+B],B+=R,A-=8);for(T=v&(1<<-A)-1,v>>=-A,A+=F;A>0;T=256*T+h[p+B],B+=R,A-=8);if(0===v)v=1-n;else{if(v===s)return T?NaN:1/0*(w?-1:1);T+=Math.pow(2,F),v-=n}return(w?-1:1)*T*Math.pow(2,v-F)},S.write=function(h,p,Z,F,g,v){var T,I,s,n=8*v-g-1,A=(1<<n)-1,B=A>>1,R=23===g?Math.pow(2,-24)-Math.pow(2,-77):0,w=F?0:v-1,E=F?1:-1,U=p<0||0===p&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(I=isNaN(p)?1:0,T=A):(T=Math.floor(Math.log(p)/Math.LN2),p*(s=Math.pow(2,-T))<1&&(T--,s*=2),(p+=T+B>=1?R/s:R*Math.pow(2,1-B))*s>=2&&(T++,s/=2),T+B>=A?(I=0,T=A):T+B>=1?(I=(p*s-1)*Math.pow(2,g),T+=B):(I=p*Math.pow(2,B-1)*Math.pow(2,g),T=0));g>=8;h[Z+w]=255&I,w+=E,I/=256,g-=8);for(T=T<<g|I,n+=g;n>0;h[Z+w]=255&T,w+=E,T/=256,n-=8);h[Z+w-E]|=128*U}},6643:j=>{let S;j.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:global):h=>(S||(S=Promise.resolve())).then(h).catch(p=>setTimeout(()=>{throw p},0))},8926:j=>{function S(p,Z,F,g,v,T,I){try{var s=p[T](I),n=s.value}catch(A){return void F(A)}s.done?Z(n):Promise.resolve(n).then(g,v)}j.exports=function h(p){return function(){var Z=this,F=arguments;return new Promise(function(g,v){var T=p.apply(Z,F);function I(n){S(T,g,v,I,s,"next",n)}function s(n){S(T,g,v,I,s,"throw",n)}I(void 0)})}},j.exports.__esModule=!0,j.exports.default=j.exports},9287:(j,S,h)=>{"use strict";h.d(S,{TU:()=>g});var p=h(9808),Z=h(5e3);class F{constructor(n,A){this._document=A;const B=this._textarea=this._document.createElement("textarea"),R=B.style;R.position="fixed",R.top=R.opacity="0",R.left="-999em",B.setAttribute("aria-hidden","true"),B.value=n,this._document.body.appendChild(B)}copy(){const n=this._textarea;let A=!1;try{if(n){const B=this._document.activeElement;n.select(),n.setSelectionRange(0,n.value.length),A=this._document.execCommand("copy"),B&&B.focus()}}catch(B){}return A}destroy(){const n=this._textarea;n&&(n.remove(),this._textarea=void 0)}}let g=(()=>{class s{constructor(A){this._document=A}copy(A){const B=this.beginCopy(A),R=B.copy();return B.destroy(),R}beginCopy(A){return new F(A,this._document)}}return s.\u0275fac=function(A){return new(A||s)(Z.LFG(p.K0))},s.\u0275prov=Z.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);