"use strict";(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[288],{8146:(S,u,s)=>{s.r(u),s.d(u,{LoginModule:()=>N});var g=s(9808),l=s(8406),o=s(3075),c=s(210),f=s(5934),d=s(6271),t=s(5e3),h=s(8696),b=s(3e3),p=s(4137),v=s(8379),m=s(7423),y=s(5245);function U(r,n){1&r&&(t.TgZ(0,"strong"),t._uU(1," Username / Email Tidak Boleh Kosong! "),t._UZ(2,"br"),t.qZA())}function Z(r,n){1&r&&(t.TgZ(0,"strong"),t._uU(1," Username / Email Hanya Boleh Huruf Standar Papan Ketik "),t._UZ(2,"br"),t.qZA())}function x(r,n){1&r&&(t.TgZ(0,"strong"),t._uU(1," Password Tidak Boleh Kosong! "),t._UZ(2,"br"),t.qZA())}function T(r,n){1&r&&(t.TgZ(0,"strong"),t._uU(1," Password Hanya Boleh Huruf Standar Papan Ketik "),t._UZ(2,"br"),t.qZA())}const E=function(r){return{"background-position":"center","background-size":"cover","background-image":r}};function I(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t._UZ(4,"div",5),t.TgZ(5,"div",6)(6,"div",7)(7,"div",8)(8,"form",9),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onClickedSubmit()}),t.TgZ(9,"div",10),t._UZ(10,"img",11),t.TgZ(11,"h1",12),t._uU(12,'Hai, Jumpa Lagi! >_<"'),t.qZA(),t.TgZ(13,"p",13),t._uU(14),t.qZA()(),t.TgZ(15,"div",14)(16,"label",15),t._uU(17,"Nama Pengguna"),t.qZA(),t.TgZ(18,"div",16),t._UZ(19,"input",17),t.TgZ(20,"span",18),t.YNc(21,U,3,0,"strong",19),t.YNc(22,Z,3,0,"strong",19),t.qZA()()(),t.TgZ(23,"div",14)(24,"label",20),t._uU(25,"Kata Sandi"),t.qZA(),t.TgZ(26,"div",16),t._UZ(27,"input",21),t.TgZ(28,"span",18),t.YNc(29,x,3,0,"strong",19),t.YNc(30,T,3,0,"strong",19),t.qZA()()(),t.TgZ(31,"div",14)(32,"div",22)(33,"div",23),t._UZ(34,"input",24),t.TgZ(35,"label",25),t._uU(36,"Biarkan Saya Tetap Login Hingga 7 Hari"),t.qZA()()()(),t.TgZ(37,"div",26)(38,"div",27)(39,"div",28)(40,"div",29)(41,"button",30),t._uU(42," Masuk "),t.TgZ(43,"mat-icon",31),t._uU(44,"vpn_key"),t.qZA()()(),t.TgZ(45,"div",29)(46,"a",32),t._uU(47," Daftar~ "),t.qZA()()()()()()()()()()()()()}if(2&r){const e=t.oxw();t.xp6(4),t.Q6J("ngStyle",t.VKq(16,E,"url("+e.loginImg+")")),t.xp6(4),t.Q6J("formGroup",e.fg),t.xp6(2),t.MGl("src","",e.ENV.baseUrl,"/assets/img/favicon.png",t.LSH),t.xp6(4),t.Oqu(e.loginInfo),t.xp6(5),t.Gre("text-bifeldy form-control ",!e.fg.get("userNameOrEmail").valid&&e.fg.get("userNameOrEmail").touched?"is-invalid":"",""),t.xp6(2),t.Q6J("ngIf",e.fg.get("userNameOrEmail").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg.get("userNameOrEmail").hasError("pattern")),t.xp6(5),t.Gre("text-bifeldy form-control ",!e.fg.get("password").valid&&e.fg.get("password").touched?"is-invalid":"",""),t.xp6(2),t.Q6J("ngIf",e.fg.get("password").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg.get("password").hasError("pattern")),t.xp6(11),t.Q6J("disabled",e.submitted||e.fg.invalid),t.xp6(5),t.Q6J("disabled",e.submitted)}}const L=[{path:"",pathMatch:"full",component:(()=>{class r{constructor(e,i,a,C,w,k,O){this.fb=e,this.gs=i,this.route=a,this.router=C,this.bs=w,this.as=k,this.cs=O,this.submitted=!1,this.returnUrl="/",this.loginImg="/assets/img/login-register.png",this.loginInfo="Silahkan login terlebih dahulu~",this.subsUser=null,this.subsLogin=null,this.subsVerify=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}ngOnDestroy(){var e,i,a;null===(e=this.subsLogin)||void 0===e||e.unsubscribe(),null===(i=this.subsVerify)||void 0===i||i.unsubscribe(),null===(a=this.subsUser)||void 0===a||a.unsubscribe()}ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||this.gs.previousUrl||"/home",this.gs.isBrowser&&(this.subsUser=this.as.currentUser.subscribe({next:e=>{e?this.router.navigateByUrl(this.returnUrl):this.initForm()}}))}get ENV(){return f.N}get loginFormVal(){return this.fg.controls}initForm(){this.fg=this.fb.group({userNameOrEmail:[null,[o.kI.required,o.kI.pattern(d.t.regexEnglishKeyboardKeys)]],password:[null,[o.kI.required,o.kI.pattern(d.t.regexEnglishKeyboardKeys)]],rememberMe:[!1,[]]})}onClickedSubmit(){if(this.bs.busy(),this.submitted=!0,this.loginInfo="Harap Menunggu ...",this.gs.log("[LOGIN_FORM_REQUEST]",this.fg.value),this.fg.invalid)return this.loginInfo="Periksa Dan Isi Kembali Data Anda!",this.submitted=!1,void this.bs.idle();this.fg.valid&&(this.submitted=!0,this.subsLogin=this.as.login({userNameOrEmail:this.fg.value.userNameOrEmail,password:this.cs.hashPassword(this.fg.value.password),rememberMe:this.fg.value.rememberMe}).subscribe({next:e=>{this.bs.idle(),this.loginInfo=e.info,this.bs.busy(),this.subsVerify=this.as.verify(e.result.token).subscribe({next:i=>{this.loginInfo=i.info,this.gs.log("[VERIFY_LOGIN_SUCCESS]",i),this.bs.idle(),this.router.navigateByUrl(this.returnUrl)},error:i=>{this.gs.log("[VERIFY_LOGIN_ERROR]",i,"error"),this.bs.idle(),this.as.removeUser()}})},error:e=>{this.gs.log("[LOGIN_FORM_ERROR]",e,"error"),this.loginInfo=e.result.message||e.info,this.submitted=!1,this.bs.idle()}}))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(o.qu),t.Y36(h.U),t.Y36(l.gz),t.Y36(l.F0),t.Y36(b.z),t.Y36(p.e),t.Y36(v.$))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-login"]],decls:1,vars:1,consts:[["class","container-fluid align-items-center w-100 h-100","style","background-size: cover; background-repeat: repeat; background-position: center; transform: rotateY(180deg);",4,"ngIf"],[1,"container-fluid","align-items-center","w-100","h-100",2,"background-size","cover","background-repeat","repeat","background-position","center","transform","rotateY(180deg)"],[1,"row","align-items-center","h-100","m-0",2,"transform","rotateY(180deg)"],[1,"col-12","col-md-10","m-auto","py-3"],[1,"row","rgb-border","rounded","bg-bifeldy"],[1,"col-lg-5","col-md-3","ms-auto","p-0",3,"ngStyle"],[1,"col-lg-7","col-md-9","me-auto","p-0"],[1,"card","bg-transparent","border-0"],[1,"card-body"],[1,"m-2",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-4",3,"src"],[1,"h3","mb-3","font-weight-normal"],[1,"text-warning"],[1,"form-group","row","py-2"],["for","userNameOrEmail",1,"col-md-4","col-form-label","text-md-end"],[1,"col-md-8"],["type","text","id","userNameOrEmail","placeholder","Username / E-Mail","required","","autofocus","","formControlName","userNameOrEmail","autocomplete","email, username"],["role","alert",1,"invalid-feedback"],[4,"ngIf"],["for","password",1,"col-md-4","col-form-label","text-md-end"],["type","password","id","password","placeholder","Password","required","","formControlName","password","autocomplete","current-password, new-password"],[1,"col","offset-md-4"],[1,"form-check"],["id","rememberMe","type","checkbox","formControlName","rememberMe",1,"form-check-input"],["for","rememberMe",1,"form-check-label"],[1,"form-group","row","mb-0","py-2"],[1,"col-md-8","offset-md-4"],[1,"row"],[1,"col-lg-6","col-12"],["mat-flat-button","","color","primary","type","submit",1,"w-100",3,"disabled"],[1,"ms-1"],["mat-stroked-button","","color","accent","type","button","routerLink","/register",1,"w-100",3,"disabled"]],template:function(e,i){1&e&&t.YNc(0,I,48,18,"div",0),2&e&&t.Q6J("ngIf",i.fg)},directives:[g.O5,g.PC,o._Y,o.JL,o.sg,o.Fj,o.Q7,o.JJ,o.u,o.Wl,m.lW,y.Hw,m.zs,l.yS],styles:[""]}),r})()}];let N=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[g.ez,l.Bz.forChild(L),c.m,o.u5,o.UX]]}),r})()}}]);