{"version":3,"file":"src_app__pages_verify_verify_module_ts.js","mappings":"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","sources":["./src/app/_pages/verify/verify.component.ts","./src/app/_pages/verify/verify.component.html","./src/app/_pages/verify/verify.module.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\n\r\nimport { environment } from '../../../environments/app/environment';\r\n\r\nimport { SosMedModel } from '../../../models/req-res.model';\r\n\r\nimport { AuthService } from '../../_shared/services/auth.service';\r\nimport { GlobalService } from '../../_shared/services/global.service';\r\nimport { UserService } from '../../_shared/services/user.service';\r\nimport { BusyService } from '../../_shared/services/busy.service';\r\nimport { DialogService } from '../../_shared/services/dialog.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-verify',\r\n  templateUrl: './verify.component.html',\r\n  styleUrls: ['./verify.component.css']\r\n})\r\nexport class VerifyComponent implements OnInit, OnDestroy {\r\n\r\n  returnUrl = '/';\r\n  verifyImg = '/assets/img/verify.png';\r\n\r\n  subsSosmed = null;\r\n  subsDialog = null;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private us: UserService,\r\n    private bs: BusyService,\r\n    private ds: DialogService,\r\n    private gs: GlobalService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private as: AuthService\r\n  ) {\r\n    this.gs.bannerImg = null;\r\n    this.gs.sizeContain = false;\r\n    this.gs.bgRepeat = false;\r\n  }\r\n\r\n  get ENV(): any {\r\n    return environment;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subsSosmed?.unsubscribe();\r\n    this.subsDialog?.unsubscribe();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.returnUrl = this.activatedRoute.snapshot.queryParamMap.get('returnUrl') || '/';\r\n    if (this.returnUrl.includes('/login')) {\r\n      this.returnUrl = '/';\r\n    }\r\n    if (this.gs.isBrowser) {\r\n      const app = this.activatedRoute.snapshot.queryParamMap.get('app' || '');\r\n      const code = this.activatedRoute.snapshot.queryParamMap.get('code') || '';\r\n      if (this.as.currentUserSubject?.value?.verified) {\r\n        this.router.navigateByUrl(this.returnUrl);\r\n      }\r\n      if (app && code) {\r\n        const sosmed = SosMedModel[app.toUpperCase()];\r\n        this.sosmedVerify(sosmed, code);\r\n      }\r\n    }\r\n  }\r\n\r\n  sosmedVerify(sosmedApp: SosMedModel, oAuthCode: string): void {\r\n    this.bs.busy();\r\n    this.subsSosmed = this.us.sosmedLogin({\r\n      app: sosmedApp,\r\n      code: oAuthCode\r\n    }).subscribe({\r\n      next: res => {\r\n        this.gs.log('[SOSMED]', res);\r\n        this.bs.idle();\r\n        this.sosmedVerifyResult(res);\r\n      },\r\n      error: err => {\r\n        this.gs.log('[SOSMED]', err, 'error');\r\n        this.bs.idle();\r\n        this.sosmedVerifyResult(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  sosmedVerifyResult(res: any): void {\r\n    this.subsDialog = this.ds.openInfoDialog({\r\n      data: {\r\n        title: res.result?.title || 'Whoops, Terjadi Kesalahan!',\r\n        htmlMessage: res.result.message,\r\n        confirmText: 'Selesai',\r\n        cancelText: 'Ulangi'\r\n      }\r\n    }).afterClosed().subscribe({\r\n      next: re => {\r\n        this.gs.log('[INFO_DIALOG_CLOSED]', re);\r\n        if (re === true) {\r\n          this.as.logout('/login', {\r\n            queryParams: {\r\n              returnUrl: this.returnUrl\r\n            }\r\n          });\r\n        }\r\n        this.subsDialog.unsubscribe();\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"container-fluid align-items-center w-100 h-100\">\r\n  <div class=\"row align-items-center h-100 m-0\">\r\n    <div class=\"col-12 col-md-10 m-auto py-3\">\r\n      <div class=\"row rgb-border rounded bg-bifeldy\">\r\n        <div class=\"col-lg-5 col-md-3 ms-auto p-0\" [ngStyle]=\"{\r\n          'background-position': 'center',\r\n          'background-size': 'cover',\r\n          'background-image': 'url(' + verifyImg + ')'\r\n        }\"></div>\r\n        <div class=\"col-lg-7 col-md-9 me-auto p-0\">\r\n          <div class=\"card bg-transparent border-0\">\r\n            <div class=\"card-body p-0\">\r\n              <div class=\"text-center p-3\">\r\n                <img class=\"mb-4\" src=\"{{ ENV.baseUrl }}/assets/img/logo/verify.png\" style=\"max-width: 128px;\" />\r\n                <h1 class=\"h3 mb-3 font-weight-normal\">Yuhu~, Ayo Verifikasi! >_<\"</h1>\r\n                <p class=\"text-success\">Verifikasi akunmu dan dapatkan fitur menarik lainnya~</p>\r\n              </div>\r\n              <div class=\"text-center p-3\">\r\n                <p>\r\n                  === <i>Connect With</i> Discord (?) === <br>\r\n                  Cukup dengan menghubungkan akun kamu. <br>\r\n                  Lalu kirimkan kode yang muncul disini ke\r\n                  <a href=\"{{ ENV.discord.join_url }}\" target=\"_blank\" class=\"text-decoration-none text-warning\">\r\n                    <i>Channel</i> Khusus BOT\r\n                  </a>. <br>\r\n                  Status akunmu akan berubah menjadi terverifikasi. <br>\r\n                  Akun terverifikasi selama akses ke Discord tersambung. <br>\r\n                  Dimohon untuk tidak <i>Revoke</i> akses. <br>\r\n                  <br>\r\n                  === <i>Connect With</i> Google (?) === <br>\r\n                  Cukup dengan menghubungkan akun kamu. <br>\r\n                  Lalu buka tautan yang dikirimkan ke surelmu. <br>\r\n                  Status akunmu akan berubah menjadi terverifikasi. <br>\r\n                  Akun terverifikasi selama akses ke Google tersambung. <br>\r\n                  Dimohon untuk tidak <i>Revoke</i> akses. <br>\r\n                  <br>\r\n                  .: Alasan pake ginian, biar gak ada BOT :. <br>\r\n                  ~ Sewaktu-waktu dapat hilang, harus verifikasi ulang ~ <br>\r\n                  <br>\r\n                  Terima kasih.\r\n                </p>\r\n              </div>\r\n              <div class=\"text-center p-3\">\r\n                <a class=\"m-1\" mat-raised-button color=\"primary\" href=\"{{ ENV.baseUrl }}/api/discord-verifikasi\" target=\"_self\">\r\n                  <mat-icon class=\"me-1\">link</mat-icon>\r\n                  Discord\r\n                </a>\r\n                <a class=\"m-1\" mat-raised-button color=\"primary\" href=\"{{ ENV.baseUrl }}/api/google-verifikasi\" target=\"_self\">\r\n                  <mat-icon class=\"me-1\">link</mat-icon>\r\n                  Google\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { RecaptchaModule, RecaptchaFormsModule } from 'ng-recaptcha';\r\n\r\nimport { SharedMaterialModule } from '../../_shared/modules/shared-material.module';\r\n\r\nimport { VerifyComponent } from './verify.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    pathMatch: 'full',\r\n    component: VerifyComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [VerifyComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    SharedMaterialModule,\r\n    RecaptchaModule,\r\n    RecaptchaFormsModule\r\n  ]\r\n})\r\nexport class VerifyModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}