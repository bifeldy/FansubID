"use strict";(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[198],{5198:(G,b,o)=>{o.r(b),o.d(b,{MailboxModule:()=>H});var m=o(9808),u=o(8406),p=o(3075),y=o(210),A=o(7355),t=o(5e3);let w=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mailbox-compose"]],decls:2,vars:0,template:function(i,e){1&i&&(t.TgZ(0,"p"),t._uU(1,"mailbox-compose works!"),t.qZA())},styles:[""]}),n})();var f=o(5934),x=o(2290),v=o(4137),_=o(3e3),M=o(6382),h=o(8696),D=o(9731);let C=(()=>{class n{constructor(i,e){this.api=i,this.gs=e}getMailbox(i="inbox",e="",s=1,l=10,r="",c=""){return this.api.getData(`/mail-${i}?q=${e}&page=${s}&row=${l}&sort=${r}&order=${c}`)}getMail(i){return this.api.getData(`/mail/${i}`)}}return n.\u0275fac=function(i){return new(i||n)(t.LFG(D.s),t.LFG(h.U))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var U=o(8020),O=o(8616),d=o(4623),T=o(5245),Z=o(508),I=o(3626);function L(n,a){if(1&n&&(t.TgZ(0,"mat-list-option")(1,"mat-icon",20),t._uU(2,"account_circle"),t.qZA(),t.TgZ(3,"h4"),t._uU(4),t.qZA()()),2&n){const i=a.$implicit;t.xp6(4),t.Oqu(i)}}function S(n,a){if(1&n&&(t.TgZ(0,"div",14)(1,"div",15)(2,"h2",16)(3,"b",17),t._uU(4,"Penerima Utama"),t.qZA()()(),t.TgZ(5,"div",18)(6,"mat-selection-list",19),t.YNc(7,L,5,1,"mat-list-option",24),t.qZA()()()),2&n){const i=t.oxw(2);t.xp6(6),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",null==i.mailData.to?null:i.mailData.to.split(", "))}}function B(n,a){if(1&n&&(t.TgZ(0,"mat-list-option")(1,"mat-icon",20),t._uU(2,"account_circle"),t.qZA(),t.TgZ(3,"h4"),t._uU(4),t.qZA()()),2&n){const i=a.$implicit;t.xp6(4),t.Oqu(i)}}function k(n,a){if(1&n&&(t.TgZ(0,"div",14)(1,"div",15)(2,"h2",16)(3,"b",17),t._uU(4,"Penerima CC"),t.qZA()()(),t.TgZ(5,"div",18)(6,"mat-selection-list",19),t.YNc(7,B,5,1,"mat-list-option",24),t.qZA()()()),2&n){const i=t.oxw(2);t.xp6(6),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",null==i.mailData.cc?null:i.mailData.cc.split(", "))}}function Y(n,a){if(1&n&&(t.TgZ(0,"mat-list-option")(1,"mat-icon",20),t._uU(2,"account_circle"),t.qZA(),t.TgZ(3,"h4"),t._uU(4),t.qZA()()),2&n){const i=a.$implicit;t.xp6(4),t.Oqu(i)}}function q(n,a){if(1&n&&(t.TgZ(0,"div",14)(1,"div",15)(2,"h2",16)(3,"b",17),t._uU(4,"Penerima BCC"),t.qZA()()(),t.TgZ(5,"div",18)(6,"mat-selection-list",19),t.YNc(7,Y,5,1,"mat-list-option",24),t.qZA()()()),2&n){const i=t.oxw(2);t.xp6(6),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",null==i.mailData.bcc?null:i.mailData.bcc.split(", "))}}function F(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"mat-list-option",26),t.NdJ("click",function(){const l=t.CHM(i).$implicit;return t.oxw(3).downloadAttachment(l.id)}),t.TgZ(1,"mat-icon",20),t._uU(2,"attach_file"),t.qZA(),t.TgZ(3,"div",27),t._uU(4),t.qZA(),t.TgZ(5,"div",27),t._uU(6),t.ALo(7,"bytes"),t.qZA()()}if(2&n){const i=a.$implicit;t.xp6(4),t.Oqu(i.name),t.xp6(2),t.Oqu(t.lcZ(7,2,i.size))}}function J(n,a){if(1&n&&(t.TgZ(0,"div",14)(1,"div",15)(2,"h2",16)(3,"b",17),t._uU(4,"Lampiran"),t.qZA()()(),t.TgZ(5,"div",18)(6,"mat-selection-list",19),t.YNc(7,F,8,4,"mat-list-option",25),t.qZA()()()),2&n){const i=t.oxw(2);t.xp6(6),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",i.mailData.attachment_)}}function E(n,a){if(1&n&&(t.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"ul",3),t._UZ(4,"li")(5,"li")(6,"li")(7,"li")(8,"li")(9,"li")(10,"li")(11,"li")(12,"li")(13,"li"),t.TgZ(14,"div",4)(15,"div",5)(16,"div",6)(17,"h2",7),t._uU(18),t.qZA(),t.TgZ(19,"p",8),t._uU(20),t.ALo(21,"date"),t.qZA()()()()()()(),t._UZ(22,"app-notifications"),t.TgZ(23,"div",9)(24,"div",10)(25,"div",11)(26,"div",12)(27,"div",13)(28,"div",14)(29,"div",15)(30,"h2",16)(31,"b",17),t._uU(32,"Pengirim"),t.qZA()()(),t.TgZ(33,"div",18)(34,"mat-selection-list",19)(35,"mat-list-option")(36,"mat-icon",20),t._uU(37,"account_circle"),t.qZA(),t.TgZ(38,"h4"),t._uU(39),t.qZA()()()()(),t.YNc(40,S,8,2,"div",21),t.YNc(41,k,8,2,"div",21),t.YNc(42,q,8,2,"div",21),t.YNc(43,J,8,2,"div",21),t.qZA()()(),t.TgZ(44,"div",22)(45,"div",12)(46,"div",13)(47,"div",14)(48,"div",15)(49,"h2",16)(50,"b",17),t._uU(51,"Isi Konten Pesan"),t.qZA()()(),t.TgZ(52,"div",18),t._UZ(53,"div",23),t.qZA()()()()()()()()),2&n){const i=t.oxw();t.xp6(18),t.hij(" ",i.mailData.subject," "),t.xp6(2),t.Oqu(t.xi3(21,9,i.mailData.date,"d MMMM y, hh:mm:ss a z")),t.xp6(14),t.Q6J("multiple",!1),t.xp6(5),t.Oqu(i.mailData.from),t.xp6(1),t.Q6J("ngIf",i.mailData.to),t.xp6(1),t.Q6J("ngIf",i.mailData.cc),t.xp6(1),t.Q6J("ngIf",i.mailData.bcc),t.xp6(1),t.Q6J("ngIf",i.mailData.attachment_.length>0),t.xp6(10),t.Q6J("innerHTML",i.mailData.html||i.mailData.text,t.oJD)}}let N=(()=>{class n{constructor(i,e,s,l,r,c,g,W,j){this.activatedRoute=i,this.router=e,this.toast=s,this.as=l,this.bs=r,this.fs=c,this.gs=g,this.ms=W,this.wb=j,this.mailId="",this.mailData=null,this.subsParam=null,this.subsMail=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}ngOnInit(){this.gs.isBrowser&&(this.as.currentUserValue&&this.as.currentUserValue.verified?this.getMail():(this.toast.warning("Khusus Pengguna Terverifikasi","Whoops!"),this.router.navigate(["/verify"],{queryParams:{returnUrl:"/home"}})))}ngOnDestroy(){var i,e;null===(i=this.subsParam)||void 0===i||i.unsubscribe(),null===(e=this.subsMail)||void 0===e||e.unsubscribe()}getMail(){this.subsParam=this.activatedRoute.params.subscribe({next:i=>{this.mailId=i.mailId,this.bs.busy(),this.subsMail&&(this.subsMail.unsubscribe(),this.bs.idle()),this.subsMail=this.ms.getMail(this.mailId).subscribe({next:e=>{this.gs.log("[MAIL_DETAIL_SUCCESS]",e),this.mailData=e.result,this.fs.initializeFab("outgoing_mail",null,"Balas Email","/mailbox/compose",!1),this.bs.idle()},error:e=>{this.gs.log("[MAIL_DETAIL_ERROR]",e,"error"),this.bs.idle(),this.router.navigateByUrl("/mailbox")}})}})}downloadAttachment(i){this.wb.winboxOpenUri(this.ddlUrlLink(i))}ddlUrlLink(i){return`${f.N.apiUrl}/attachment/${i}?ngsw-bypass=true`}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(x._W),t.Y36(v.e),t.Y36(_.z),t.Y36(M.r),t.Y36(h.U),t.Y36(C),t.Y36(U.N))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mailbox-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container-fluid","p-0"],[1,"wrapper"],[1,"bg-bubbles","align-items-center","p-0"],[1,"row","align-items-center","h-100"],[1,"col-12","mx-auto"],[1,"container","text-light"],[1,"mb-1",2,"line-height","normal"],[1,"mb-0"],[1,"container"],[1,"row"],[1,"col-md-5","col-xl-4","p-3"],[1,"row","sticky-top"],[1,"col"],[1,"row","py-3"],[1,"col-12","pt-3","sticky-top","bg-bifeldy"],[1,"border-bottom-dotted"],[1,"text-bifeldy"],[1,"col-12"],[3,"multiple"],["mat-list-icon","",1,"ms-3"],["class","row py-3",4,"ngIf"],[1,"col-md-7","col-xl-8","p-3","sticky-top"],[1,"py-2","px-3",2,"white-space","pre-line !important",3,"innerHTML"],[4,"ngFor","ngForOf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["mat-line",""]],template:function(i,e){1&i&&t.YNc(0,E,54,12,"div",0),2&i&&t.Q6J("ngIf",e.mailData)},directives:[m.O5,O.t,d.Ub,d.vS,T.Hw,d.Nh,m.sg,Z.X2],pipes:[m.uU,I.$],styles:[".wrapper[_ngcontent-%COMP%]{background:#1fa260;position:sticky;left:0;width:100%;height:128px;overflow:hidden}.bg-bubbles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:absolute;list-style:none;display:block;width:40px;height:40px;background-color:#ffffff26;bottom:-160px;animation:square 25s infinite;transition-timing-function:linear}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1){left:10%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){left:20%;width:80px;height:80px;animation-delay:2s;animation-duration:17s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){left:25%;animation-delay:4s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){left:40%;width:60px;height:60px;animation-duration:22s;background-color:#ffffff40}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){left:70%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){left:80%;width:120px;height:120px;animation-delay:3s;background-color:#fff3}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7){left:32%;width:160px;height:160px;animation-delay:7s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(8){left:55%;width:20px;height:20px;animation-delay:15s;animation-duration:40s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(9){left:25%;width:10px;height:10px;animation-delay:2s;animation-duration:40s;background-color:#ffffff4d}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(10){left:90%;width:160px;height:160px;animation-delay:11s}@keyframes square{0%{transform:translateY(0)}to{transform:translateY(-512px) rotate(512deg)}}"]}),n})();var P=o(7322),R=o(4107),Q=o(7423),$=o(578);let z=(()=>{class n{constructor(i,e,s,l,r,c,g){this.router=i,this.toast=e,this.as=s,this.bs=l,this.fs=r,this.gs=c,this.ms=g,this.mailData={inbox:{column:["Tanggal","Pengirim","Topik","Lampiran"],row:[],count:0},outbox:{column:["Tanggal","Penerima","Topik","Lampiran"],row:[],count:0}},this.selectedMailBox="inbox",this.page=1,this.row=10,this.q="",this.sort="",this.order="",this.subsMailbox=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get AS(){return this.as}get ENV(){return f.N}ngOnInit(){this.gs.isBrowser&&(this.as.currentUserValue&&this.as.currentUserValue.verified?this.getMailbox():(this.toast.warning("Khusus Pengguna Terverifikasi","Whoops!"),this.router.navigate(["/verify"],{queryParams:{returnUrl:"/home"}})))}ngOnDestroy(){var i;null===(i=this.subsMailbox)||void 0===i||i.unsubscribe()}getMailbox(){this.bs.busy(),this.subsMailbox&&(this.subsMailbox.unsubscribe(),this.bs.idle()),this.subsMailbox=this.ms.getMailbox(this.selectedMailBox,this.q,this.page,this.row,this.sort,this.order).subscribe({next:i=>{this.gs.log("[MAILBOX_LIST_SUCCESS]",i),this.mailData[this.selectedMailBox].count=i.count,this.mailData[this.selectedMailBox].row=[];for(const e of i.results)this.mailData[this.selectedMailBox].row.push({id:e.id,Tanggal:e.date,Pengirim:e.from,Penerima:e.to,Topik:e.subject,Lampiran:`${e.attachment_count} Berkas`});this.fs.initializeFab("outgoing_mail",null,"Buat Email Baru","/mailbox/compose",!1),this.bs.idle()},error:i=>{this.gs.log("[MAILBOX_LIST_ERROR]",i,"error"),this.bs.idle()}})}changeMailbox(){this.getMailbox()}onRowClicked(i){this.gs.log("[MAILBOX_LIST_CLICK_EMAIL]",i),this.router.navigateByUrl(`/mailbox/${i.id}`)}onPaginatorClicked(i){this.gs.log("[MAILBOX_LIST_CLICK_PAGINATOR]",i),this.page=i.pageIndex+1,this.row=i.pageSize,this.getMailbox()}onServerSideFilter(i){this.gs.log("[MAILBOX_LIST_ENTER_FILTER]",i),this.q=i,this.getMailbox()}onServerSideOrder(i){this.gs.log("[MAILBOX_LIST_CLICK_ORDER]",i),this.q=i.q,this.sort=i.active,this.order=i.direction,this.getMailbox()}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.F0),t.Y36(x._W),t.Y36(v.e),t.Y36(_.z),t.Y36(M.r),t.Y36(h.U),t.Y36(C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mailbox-list"]],decls:42,vars:10,consts:[[1,"container-fluid","p-0"],[1,"wrapper"],[1,"bg-bubbles","align-items-center","p-0"],[1,"row","align-items-center","h-100"],[1,"col-12","mx-auto"],[1,"container","text-light"],[1,"mb-1",2,"line-height","normal"],[1,"mb-0"],[1,"container"],[1,"row"],[1,"col-12"],[1,"col-12","pb-3","sticky-top","bg-bifeldy"],[1,"m-0","border-bottom","border-primary","row"],[1,"pt-3","col-6","col-md-4","col-lg-2",3,"color"],[3,"value","valueChange"],["value","inbox"],["value","outbox"],[1,"ms-auto","p-3","col-6","col-md-4","col-lg-2"],["mat-flat-button","","color","accent",1,"w-100","h-100",3,"click"],[1,"me-1"],[1,"row","px-3"],[3,"tableDataColumn","tableDataRow","count","serverSide","serverSideFilter","rowClicked","paginatorClicked","serverSideOrder"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"ul",2),t._UZ(3,"li")(4,"li")(5,"li")(6,"li")(7,"li")(8,"li")(9,"li")(10,"li")(11,"li")(12,"li"),t.TgZ(13,"div",3)(14,"div",4)(15,"div",5)(16,"h2",6),t._uU(17),t.qZA(),t.TgZ(18,"p",7),t._uU(19),t.qZA()()()()()()(),t._UZ(20,"app-notifications"),t.TgZ(21,"div",8)(22,"div",9)(23,"div",10)(24,"div",9)(25,"div",11)(26,"h3",12)(27,"mat-form-field",13)(28,"mat-label"),t._uU(29,"Kotak Pesan"),t.qZA(),t.TgZ(30,"mat-select",14),t.NdJ("valueChange",function(l){return e.selectedMailBox=l})("valueChange",function(){return e.changeMailbox()}),t.TgZ(31,"mat-option",15),t._uU(32,"Masuk"),t.qZA(),t.TgZ(33,"mat-option",16),t._uU(34,"Keluar"),t.qZA()()(),t.TgZ(35,"div",17)(36,"button",18),t.NdJ("click",function(){return e.changeMailbox()}),t.TgZ(37,"mat-icon",19),t._uU(38,"loop"),t.qZA(),t._uU(39," Refresh "),t.qZA()()()()()()(),t.TgZ(40,"div",20)(41,"app-material-table",21),t.NdJ("serverSideFilter",function(l){return e.onServerSideFilter(l)})("rowClicked",function(l){return e.onRowClicked(l)})("paginatorClicked",function(l){return e.onPaginatorClicked(l)})("serverSideOrder",function(l){return e.onServerSideOrder(l)}),t.qZA()()()),2&i&&(t.xp6(17),t.AsE(" ",null==e.AS.currentUserValue?null:e.AS.currentUserValue.username," @ ",e.ENV.domain," "),t.xp6(2),t.AsE("E-Mail ~ Surat Elektronik ~ ",e.mailData.inbox.count," Inbox | ",e.mailData.outbox.count," Outbox"),t.xp6(8),t.Q6J("color","accent"),t.xp6(3),t.Q6J("value",e.selectedMailBox),t.xp6(11),t.Q6J("tableDataColumn",e.mailData[e.selectedMailBox].column)("tableDataRow",e.mailData[e.selectedMailBox].row)("count",e.mailData[e.selectedMailBox].count)("serverSide",!0))},directives:[O.t,P.KE,P.hX,R.gD,Z.ey,Q.lW,T.Hw,$.I],styles:[".wrapper[_ngcontent-%COMP%]{background:#1fa260;position:sticky;left:0;width:100%;height:128px;overflow:hidden}.bg-bubbles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:absolute;list-style:none;display:block;width:40px;height:40px;background-color:#ffffff26;bottom:-160px;animation:square 25s infinite;transition-timing-function:linear}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1){left:10%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){left:20%;width:80px;height:80px;animation-delay:2s;animation-duration:17s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){left:25%;animation-delay:4s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){left:40%;width:60px;height:60px;animation-duration:22s;background-color:#ffffff40}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){left:70%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){left:80%;width:120px;height:120px;animation-delay:3s;background-color:#fff3}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7){left:32%;width:160px;height:160px;animation-delay:7s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(8){left:55%;width:20px;height:20px;animation-delay:15s;animation-duration:40s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(9){left:25%;width:10px;height:10px;animation-delay:2s;animation-duration:40s;background-color:#ffffff4d}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(10){left:90%;width:160px;height:160px;animation-delay:11s}@keyframes square{0%{transform:translateY(0)}to{transform:translateY(-512px) rotate(512deg)}}"]}),n})();var X=o(8613),K=o(617);const V=[{path:"",pathMatch:"full",component:z},{path:"compose",component:w,data:{title:"Surel - Buat Baru",description:"Halaman Kirim Surel Baru",keywords:"Buat Surel Baru"}},{path:":mailId",children:[{path:"",pathMatch:"full",component:N}]}];let H=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,u.Bz.forChild(V),p.u5,p.UX,y.m,X.F,K.H,A.T]]}),n})()}}]);