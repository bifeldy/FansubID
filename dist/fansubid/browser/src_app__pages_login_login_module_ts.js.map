{"version":3,"file":"src_app__pages_login_login_module_ts.js","mappings":"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","sources":["./src/app/_pages/login/login.component.ts","./src/app/_pages/login/login.component.html","./src/app/_pages/login/login.module.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\n\r\nimport { environment } from '../../../environments/app/environment';\r\n\r\nimport { CONSTANTS } from '../../../constants';\r\n\r\nimport { GlobalService } from '../../_shared/services/global.service';\r\nimport { AuthService } from '../../_shared/services/auth.service';\r\nimport { BusyService } from '../../_shared/services/busy.service';\r\nimport { CryptoService } from '../../_shared/services/crypto.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent implements OnInit, OnDestroy {\r\n\r\n  fg: FormGroup;\r\n  submitted = false;\r\n\r\n  returnUrl = '/';\r\n  loginImg = '/assets/img/login-register.png';\r\n  loginInfo = 'Silahkan login terlebih dahulu~';\r\n\r\n  subsUser = null;\r\n  subsLogin = null;\r\n  subsVerify = null;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private gs: GlobalService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private router: Router,\r\n    private bs: BusyService,\r\n    private as: AuthService,\r\n    private cs: CryptoService\r\n  ) {\r\n    this.gs.bannerImg = null;\r\n    this.gs.sizeContain = false;\r\n    this.gs.bgRepeat = false;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subsLogin?.unsubscribe();\r\n    this.subsVerify?.unsubscribe();\r\n    this.subsUser?.unsubscribe();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.returnUrl = this.activatedRoute.snapshot.queryParamMap.get('returnUrl') || this.gs.previousUrl || '/';\r\n    if (this.gs.isBrowser) {\r\n      this.subsUser = this.as.currentUser.subscribe({\r\n        next: user => {\r\n          if (user) {\r\n            this.router.navigateByUrl(this.returnUrl);\r\n          } else {\r\n            this.initForm();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  get ENV(): any {\r\n    return environment;\r\n  }\r\n\r\n  get loginFormVal(): any {\r\n    return this.fg.controls;\r\n  }\r\n\r\n  get maxRememberMeDays(): number {\r\n    return CONSTANTS.timeLoginRememberMe / 24 / 60 / 60;\r\n  }\r\n\r\n  initForm(): void {\r\n    this.fg = this.fb.group({\r\n      userNameOrEmail: [null, [Validators.required, Validators.pattern(CONSTANTS.regexEnglishKeyboardKeys)]],\r\n      password: [null, [Validators.required, Validators.pattern(CONSTANTS.regexEnglishKeyboardKeys)]],\r\n      rememberMe: [false, []]\r\n    });\r\n  }\r\n\r\n  onClickedSubmit(): void {\r\n    this.bs.busy();\r\n    this.submitted = true;\r\n    this.loginInfo = 'Harap Menunggu ...';\r\n    this.gs.log('[LOGIN_FORM_REQUEST]', this.fg.value);\r\n    if (this.fg.invalid) {\r\n      this.loginInfo = 'Periksa Dan Isi Kembali Data!';\r\n      this.submitted = false;\r\n      this.bs.idle();\r\n      return;\r\n    }\r\n    if (this.fg.valid) {\r\n      this.submitted = true;\r\n      this.subsLogin = this.as.login({\r\n        userNameOrEmail: this.fg.value.userNameOrEmail,\r\n        password: this.cs.hashPassword(this.fg.value.password),\r\n        rememberMe: this.fg.value.rememberMe\r\n      }).subscribe({\r\n        next: (res: any) => {\r\n          this.bs.idle();\r\n          this.loginInfo = res.info;\r\n          this.bs.busy();\r\n          this.subsVerify = this.as.verify(res.result.token).subscribe({\r\n            next: success => {\r\n              this.loginInfo = success.info;\r\n              this.gs.log('[VERIFY_LOGIN_SUCCESS]', success);\r\n              this.bs.idle();\r\n              this.router.navigateByUrl(this.returnUrl);\r\n            },\r\n            error: error => {\r\n              this.gs.log('[VERIFY_LOGIN_ERROR]', error, 'error');\r\n              this.bs.idle();\r\n              this.as.removeUser();\r\n            }\r\n          });\r\n        },\r\n        error: err => {\r\n          this.gs.log('[LOGIN_FORM_ERROR]', err, 'error');\r\n          this.loginInfo = err.result?.message || err.info;\r\n          this.submitted = false;\r\n          this.bs.idle();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"container-fluid align-items-center w-100 h-100\"\r\n  style=\"background-size: cover; background-repeat: repeat; background-position: center; transform: rotateY(180deg);\" *ngIf=\"fg\">\r\n  <div class=\"row align-items-center h-100 m-0\" style=\"transform: rotateY(180deg);\">\r\n    <div class=\"col-12 col-md-10 m-auto py-3\">\r\n      <div class=\"row rgb-border rounded bg-bifeldy\">\r\n        <div class=\"col-lg-5 col-md-3 ms-auto p-0\" [ngStyle]=\"{\r\n          'background-position': 'center',\r\n          'background-size': 'cover',\r\n          'background-image': 'url(' + loginImg + ')'\r\n        }\"></div>\r\n        <div class=\"col-lg-7 col-md-9 me-auto p-0\">\r\n          <div class=\"card bg-transparent border-0\">\r\n            <div class=\"card-body\">\r\n              <form [formGroup]=\"fg\" class=\"m-2\" (ngSubmit)=\"onClickedSubmit()\" *ngIf=\"fg\">\r\n                <div class=\"text-center mb-4\">\r\n                  <img class=\"mb-4\" src=\"{{ ENV.baseUrl }}/assets/img/logo/login.png\" style=\"max-width: 128px;\" />\r\n                  <h1 class=\"h3 mb-3 font-weight-normal\">Hai, Jumpa Lagi! >_<\"</h1>\r\n                  <p class=\"text-warning\">{{ loginInfo }}</p>\r\n                </div>\r\n                <div class=\"form-group row py-2\">\r\n                  <label for=\"userNameOrEmail\" class=\"col-md-4 col-form-label text-md-end\">Surel / Nama Pengguna</label>\r\n                  <div class=\"col-md-8\">\r\n                    <input type=\"text\" id=\"userNameOrEmail\" class=\"text-bifeldy form-control {{\r\n                        !fg.get('userNameOrEmail').valid && fg.get('userNameOrEmail').touched ? 'is-invalid' : ''\r\n                      }}\" placeholder=\"Username / E-Mail\" required formControlName=\"userNameOrEmail\" autocomplete=\"email, username\" />\r\n                    <span class=\"invalid-feedback\" role=\"alert\">\r\n                      <strong *ngIf=\"fg.get('userNameOrEmail').hasError('required')\">\r\n                        Username / Email Tidak Boleh Kosong! <br />\r\n                      </strong>\r\n                      <strong *ngIf=\"fg.get('userNameOrEmail').hasError('pattern')\">\r\n                        Username / Email Hanya Boleh Huruf Standar Papan Ketik <br />\r\n                      </strong>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"form-group row py-2\">\r\n                  <label for=\"password\" class=\"col-md-4 col-form-label text-md-end\">Kata Sandi</label>\r\n                  <div class=\"col-md-8\">\r\n                    <input type=\"password\" id=\"password\" class=\"text-bifeldy form-control {{\r\n                        !fg.get('password').valid && fg.get('password').touched ? 'is-invalid' : ''\r\n                      }}\" placeholder=\"Password\" required formControlName=\"password\" autocomplete=\"current-password, new-password\" />\r\n                    <span class=\"invalid-feedback\" role=\"alert\">\r\n                      <strong *ngIf=\"fg.get('password').hasError('required')\">\r\n                        Password Tidak Boleh Kosong! <br />\r\n                      </strong>\r\n                      <strong *ngIf=\"fg.get('password').hasError('pattern')\">\r\n                        Password Hanya Boleh Huruf Standar Papan Ketik <br />\r\n                      </strong>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"form-group row py-2\">\r\n                  <div class=\"col offset-md-4\">\r\n                    <div class=\"form-check\">\r\n                      <input id=\"rememberMe\" class=\"form-check-input\" type=\"checkbox\" formControlName=\"rememberMe\" />\r\n                      <label class=\"form-check-label\" for=\"rememberMe\" style=\"padding-top: 0.125rem !important;\">\r\n                        Biarkan Saya Tetap Login Hingga {{ maxRememberMeDays }} Hari\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"form-group row mb-0 py-2\">\r\n                  <div class=\"col-md-8 offset-md-4\">\r\n                    <div class=\"row gy-3\">\r\n                      <div class=\"col-lg-6 col-12\">\r\n                        <button type=\"submit\" mat-flat-button color=\"primary\" class=\"w-100\" [disabled]=\"submitted || fg.invalid\">\r\n                          Masuk <mat-icon class=\"ms-1\">vpn_key</mat-icon>\r\n                        </button>\r\n                      </div>\r\n                      <div class=\"col-lg-6 col-12\">\r\n                        <a mat-stroked-button color=\"accent\" class=\"w-100\" routerLink=\"/reset-password\" [disabled]=\"submitted\">\r\n                          Lupa Akun ~\r\n                        </a>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { SharedMaterialModule } from '../../_shared/modules/shared-material.module';\r\n\r\nimport { LoginComponent } from './login.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    pathMatch: 'full',\r\n    component: LoginComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [LoginComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    SharedMaterialModule,\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class LoginModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}