"use strict";(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[960],{5960:(z,f,r)=>{r.r(f),r.d(f,{ResetPasswordModule:()=>H});var m=r(9808),c=r(8406),i=r(3075),g=r(3290),h=r(210),b=r(4004),v=r(5934),d=r(6271),t=r(5e3),T=r(5113),_=r(8058),x=r(3e3),C=r(7845),U=r(8696),Z=r(4137),A=r(8379),p=r(5615),y=r(7423),R=r(5245);const w=["stepper"];function E(s,n){1&s&&t._uU(0,"Cari & Cek Akun")}function O(s,n){1&s&&(t.TgZ(0,"strong"),t._uU(1," Username / Email Tidak Boleh Kosong! "),t._UZ(2,"br"),t.qZA())}function N(s,n){1&s&&(t.TgZ(0,"strong"),t._uU(1," Username / Email Hanya Boleh Huruf Standar Papan Ketik "),t._UZ(2,"br"),t.qZA())}function P(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"form",16)(1,"div",17)(2,"label",18),t._uU(3,"Surel / Nama Pengguna"),t.qZA(),t.TgZ(4,"div",19),t._UZ(5,"input",20),t.TgZ(6,"span",21),t.YNc(7,O,3,0,"strong",22),t.YNc(8,N,3,0,"strong",22),t.qZA()()(),t.TgZ(9,"div",23)(10,"div",24)(11,"re-captcha",25,26),t.NdJ("resolved",function(a){t.CHM(e);const l=t.MAs(12);return t.oxw().captcha(a,l)}),t.qZA()()(),t.TgZ(13,"div",23)(14,"div",27)(15,"div",28)(16,"div",29)(17,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().findAccount()}),t._uU(18," Cari Akun "),t.TgZ(19,"mat-icon",31),t._uU(20,"search"),t.qZA()()()()()()()}if(2&s){const e=t.oxw();t.Q6J("formGroup",e.fg1),t.xp6(5),t.Gre("text-bifeldy form-control ",!e.fg1.get("userNameOrEmail").valid&&e.fg1.get("userNameOrEmail").touched?"is-invalid":"",""),t.xp6(2),t.Q6J("ngIf",e.fg1.get("userNameOrEmail").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg1.get("userNameOrEmail").hasError("pattern")),t.xp6(3),t.Q6J("siteKey",e.G_CAPTCHA_SITE_KEY),t.xp6(6),t.Q6J("disabled",e.submitted||e.fg1.invalid)}}function I(s,n){1&s&&t._uU(0,"Ubah Kata Sandi")}function k(s,n){1&s&&(t.TgZ(0,"strong"),t._uU(1," Token Tidak Boleh Kosong "),t._UZ(2,"br"),t.qZA())}function S(s,n){1&s&&(t.TgZ(0,"strong"),t._uU(1," Token Hanya Boleh Huruf Standar Papan Ketik "),t._UZ(2,"br"),t.qZA())}function Y(s,n){1&s&&(t.TgZ(0,"strong"),t._uU(1," Password Tidak Boleh Kosong "),t._UZ(2,"br"),t.qZA())}function J(s,n){1&s&&(t.TgZ(0,"strong"),t._uU(1," Password Minimal 8 Huruf "),t._UZ(2,"br"),t.qZA())}function K(s,n){1&s&&(t.TgZ(0,"strong"),t._uU(1," Password Hanya Boleh Huruf Standar Papan Ketik "),t._UZ(2,"br"),t.qZA())}function L(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"form",16)(1,"div",17)(2,"label",32),t._uU(3,"Token"),t.qZA(),t.TgZ(4,"div",19)(5,"textarea",33),t._uU(6,"                        "),t.qZA(),t.TgZ(7,"span",21),t.YNc(8,k,3,0,"strong",22),t.YNc(9,S,3,0,"strong",22),t.qZA()()(),t.TgZ(10,"div",17)(11,"label",34),t._uU(12,"Password Baru"),t.qZA(),t.TgZ(13,"div",19),t._UZ(14,"input",35),t.TgZ(15,"span",21),t.YNc(16,Y,3,0,"strong",22),t.YNc(17,J,3,0,"strong",22),t.YNc(18,K,3,0,"strong",22),t.qZA()()(),t.TgZ(19,"div",23)(20,"div",27)(21,"div",28)(22,"div",29)(23,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetAccount()}),t._uU(24," Atur Ulang Akun "),t.TgZ(25,"mat-icon",31),t._uU(26,"check_circle_outline"),t.qZA()()()()()()()}if(2&s){const e=t.oxw();t.Q6J("formGroup",e.fg2),t.xp6(5),t.Gre("text-bifeldy form-control ",!e.fg2.get("token").valid&&e.fg2.get("token").touched?"is-invalid":"",""),t.xp6(3),t.Q6J("ngIf",e.fg2.get("token").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg2.get("token").hasError("pattern")),t.xp6(5),t.Gre("text-bifeldy form-control ",!e.fg2.get("password").valid&&e.fg2.get("password").touched?"is-invalid":"",""),t.xp6(2),t.Q6J("ngIf",e.fg2.get("password").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg2.get("password").hasError("minlength")),t.xp6(1),t.Q6J("ngIf",e.fg2.get("password").hasError("pattern")),t.xp6(5),t.Q6J("disabled",e.submitted||e.fg2.invalid)}}const Q=[{path:"",pathMatch:"full",component:(()=>{class s{constructor(e,o,a,l,u,G,M,q,F,V,B){this.activatedRoute=e,this.breakpointObserver=o,this.fb=a,this.router=l,this.us=u,this.bs=G,this.ds=M,this.gs=q,this.route=F,this.as=V,this.cs=B,this.captchaRef=null,this.submitted=!1,this.returnUrl="/",this.resetInfo="",this.subsFindLostAccount=null,this.subsResetLostAccount=null,this.subsVerify=null,this.subsDialog=null,this.subsUser=null,this.timedOut=null,this.stepperOrientation=this.breakpointObserver.observe("(min-width: 767px)").pipe((0,b.U)(({matches:D})=>D?"horizontal":"vertical")),this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get ENV(){return v.N}ngOnDestroy(){var e,o,a,l,u;null===(e=this.subsFindLostAccount)||void 0===e||e.unsubscribe(),null===(o=this.subsResetLostAccount)||void 0===o||o.unsubscribe(),null===(a=this.subsVerify)||void 0===a||a.unsubscribe(),null===(l=this.subsDialog)||void 0===l||l.unsubscribe(),null===(u=this.subsUser)||void 0===u||u.unsubscribe(),this.timedOut&&(clearTimeout(this.timedOut),this.timedOut=null)}ngAfterViewInit(){this.timedOut||(this.timedOut=setTimeout(()=>{const e=this.activatedRoute.snapshot.queryParamMap.get("token");e&&this.fg2&&this.stepper&&(this.fg2.controls.token.patchValue(e),this.stepper.next())},0))}ngOnInit(){this.returnUrl=this.route.snapshot.queryParamMap.get("returnUrl")||"/",this.gs.isBrowser&&(this.initForm(),this.subsUser=this.as.currentUser.subscribe({next:e=>{e&&this.router.navigateByUrl(this.returnUrl)}}))}get G_CAPTCHA_SITE_KEY(){return d.t.gCaptchaSiteKey}initForm(){this.fg1=this.fb.group({userNameOrEmail:[null,[i.kI.required,i.kI.pattern(d.t.regexEnglishKeyboardKeys)]],"g-recaptcha-response":[null,[i.kI.required,i.kI.pattern(d.t.regexEnglishKeyboardKeys)]]}),this.fg2=this.fb.group({token:[null,[i.kI.required,i.kI.pattern(d.t.regexEnglishKeyboardKeys)]],password:[null,[i.kI.required,i.kI.minLength(8),i.kI.pattern(d.t.regexEnglishKeyboardKeys)]]})}captcha(e,o){this.gs.log(`[GOOGLE_CAPTCHA] ${e}`),e?(this.captchaRef=o,this.fg1.controls["g-recaptcha-response"].patchValue(e)):this.fg1.value["g-recaptcha-response"]&&this.fg1.controls["g-recaptcha-response"].patchValue(null)}findAccount(){this.bs.busy(),this.submitted=!0,this.subsFindLostAccount=this.us.findLostAccount({userNameOrEmail:this.fg1.value.userNameOrEmail,"g-recaptcha-response":this.fg1.value["g-recaptcha-response"]}).subscribe({next:e=>{this.gs.log("[USER_FIND_LOST_ACCOUNT_SUCCESS]",e),this.bs.idle(),this.submitted=!1,this.subsDialog=this.ds.openInfoDialog({data:{title:e.result.title,htmlMessage:e.result.message,confirmText:"Tutup"}}).afterClosed().subscribe({next:o=>{this.gs.log("[INFO_DIALOG_CLOSED]",o),this.subsDialog.unsubscribe()}}),this.stepper.next(),this.captchaRef.reset()},error:e=>{var o;this.gs.log("[USER_FIND_LOST_ACCOUNT_ERROR]",e),this.bs.idle(),this.submitted=!1,this.resetInfo=(null===(o=e.result)||void 0===o?void 0:o.message)||e.info,this.captchaRef.reset()}})}resetAccount(){this.bs.busy(),this.submitted=!0,this.subsResetLostAccount=this.us.resetLostAccount({token:this.fg2.value.token,password:this.cs.hashPassword(this.fg2.value.password)}).subscribe({next:e=>{this.gs.log("[USER_RESET_LOST_ACCOUNT_SUCCESS]",e),this.bs.idle(),this.submitted=!1,this.as.removeUser(),this.bs.busy(),this.subsVerify=this.as.verify(e.result.token).subscribe({next:o=>{this.gs.log("[VERIFY_LOGIN_SUCCESS]",o),this.bs.idle(),this.router.navigateByUrl("/")},error:o=>{this.gs.log("[VERIFY_LOGIN_ERROR]",o,"error"),this.bs.idle(),this.as.removeUser(),this.router.navigateByUrl("/")}})},error:e=>{var o;this.gs.log("[USER_RESET_LOST_ACCOUNT_ERROR]",e,"error"),this.bs.idle(),this.submitted=!1,this.resetInfo=(null===(o=e.result)||void 0===o?void 0:o.message)||e.info,this.stepper.reset()}})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.gz),t.Y36(T.Yg),t.Y36(i.qu),t.Y36(c.F0),t.Y36(_.K),t.Y36(x.z),t.Y36(C.x),t.Y36(U.U),t.Y36(c.gz),t.Y36(Z.e),t.Y36(A.$))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-reset-password"]],viewQuery:function(e,o){if(1&e&&t.Gf(w,7),2&e){let a;t.iGM(a=t.CRH())&&(o.stepper=a.first)}},decls:22,vars:11,consts:[[1,"container-fluid","align-items-center","col-12","col-sm-10","col-md-8","col-xl-6","h-100"],[1,"row","align-items-center","h-100","m-0"],[1,"col-12","col-md-10","m-auto","py-3"],[1,"row","rgb-border","rounded","bg-bifeldy"],[1,"col-12","me-auto","p-0"],[1,"card","bg-transparent","border-0"],[1,"card-body","p-0"],[1,"text-center","p-3"],[1,"mb-4",2,"max-width","192px",3,"src"],[1,"h3","mb-3","font-weight-normal"],[1,"text-warning"],[2,"background-color","transparent",3,"orientation"],["stepper",""],[3,"stepControl","editable"],["matStepLabel",""],["class","m-2",3,"formGroup",4,"ngIf"],[1,"m-2",3,"formGroup"],[1,"form-group","row","py-2"],["for","userNameOrEmail",1,"col-md-4","col-form-label","text-md-end"],[1,"col-md-8"],["type","text","id","userNameOrEmail","placeholder","Username / E-Mail","required","","formControlName","userNameOrEmail","autocomplete","email, username"],["role","alert",1,"invalid-feedback"],[4,"ngIf"],[1,"form-group","row","mb-0","py-2"],[1,"col","offset-md-4"],["formControlName","g-recaptcha-response",3,"siteKey","resolved"],["captchaRef",""],[1,"col-md-8","offset-md-4"],[1,"row"],[1,"col-12"],["mat-flat-button","","color","primary","type","button",1,"w-100",3,"disabled","click"],[1,"ms-1"],["for","token",1,"col-md-4","col-form-label","text-md-end"],["rows","3","type","text","id","token","placeholder","Token","required","","formControlName","token","autocomplete","token"],["for","password",1,"col-md-4","col-form-label","text-md-end"],["type","password","id","password","placeholder","Password Minimal 8 Huruf","required","","formControlName","password","autocomplete","password"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),t._UZ(8,"img",8),t.TgZ(9,"h1",9),t._uU(10,"Hikz, Akun Kamu Kenapa (?)"),t.qZA(),t.TgZ(11,"p",10),t._uU(12),t.qZA()(),t.TgZ(13,"mat-vertical-stepper",11,12),t.ALo(15,"async"),t.TgZ(16,"mat-step",13),t.YNc(17,E,1,0,"ng-template",14),t.YNc(18,P,21,8,"form",15),t.qZA(),t.TgZ(19,"mat-step",13),t.YNc(20,I,1,0,"ng-template",14),t.YNc(21,L,27,13,"form",15),t.qZA()()()()()()()()()),2&e&&(t.xp6(8),t.MGl("src","",o.ENV.baseUrl,"/assets/img/logo/reset-password.png",t.LSH),t.xp6(4),t.Oqu(o.resetInfo),t.xp6(1),t.Q6J("orientation",t.lcZ(15,9,o.stepperOrientation)),t.xp6(3),t.Q6J("stepControl",o.fg1)("editable",!1),t.xp6(2),t.Q6J("ngIf",o.fg1),t.xp6(1),t.Q6J("stepControl",o.fg2)("editable",!1),t.xp6(2),t.Q6J("ngIf",o.fg2))},directives:[p.Vq,p.C0,p.VY,m.O5,i._Y,i.JL,i.sg,i.Fj,i.Q7,i.JJ,i.u,g.wT,g.Vd,y.lW,R.Hw],pipes:[m.Ov],styles:[""]}),s})()}];let H=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[m.ez,c.Bz.forChild(Q),i.u5,i.UX,h.m,g.a,g.lQ]]}),s})()}}]);