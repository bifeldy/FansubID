"use strict";(self.webpackChunkfansubid=self.webpackChunkfansubid||[]).push([[794],{2794:(B,D,a)=>{a.r(D),a.d(D,{UserModule:()=>te});var d=a(9808),l=a(8406),c=a(3075),E=a(9345),f=a(1385),_=a(6271),h=a(4249),y=a(2777),O=a(7355),w=a(210),g=a(6020),v=a(6436),m=a(4167),U=a(8613),A=a(2438),I=a(5934),t=a(5e3),k=a(8696),L=a(3e3),F=a(6382),J=a(8745),N=a(8058),Y=a(8381),Q=a(8987),K=a(5245),M=a(7238),S=a(4623),R=a(7423),G=a(508),H=a(7567),V=a(325),j=a(8757);function z(s,o){if(1&s&&(t.TgZ(0,"mat-icon",28),t._uU(1,"handyman"),t.qZA()),2&s){const e=t.oxw(2);t.s9C("matTooltip",e.userData.role)}}function $(s,o){if(1&s&&(t.TgZ(0,"mat-icon",28),t._uU(1,"security"),t.qZA()),2&s){const e=t.oxw(2);t.s9C("matTooltip",e.userData.role)}}function W(s,o){if(1&s&&(t.TgZ(0,"mat-icon",28),t._uU(1,"rate_review"),t.qZA()),2&s){const e=t.oxw(2);t.s9C("matTooltip",e.userData.role)}}function X(s,o){1&s&&(t.TgZ(0,"mat-icon",29),t._uU(1,"verified"),t.qZA())}function tt(s,o){if(1&s&&(t.TgZ(0,"mat-icon",28),t._uU(1,"lock"),t.qZA()),2&s){const e=t.oxw(2);t.MGl("matTooltip","Banned :: ",e.userBanned.reason,"")}}function et(s,o){if(1&s&&(t.TgZ(0,"mat-icon",28),t._uU(1,"military_tech"),t.qZA()),2&s){const e=t.oxw(2);t.MGl("matTooltip","",e.accountAge," Years of Service")}}function it(s,o){1&s&&(t.TgZ(0,"mat-icon",30),t._uU(1,"volunteer_activism"),t.qZA())}function st(s,o){1&s&&(t.TgZ(0,"mat-icon",31),t._uU(1,"sensor_occupied"),t.qZA())}function nt(s,o){if(1&s&&(t.TgZ(0,"mat-list-option",40),t._UZ(1,"img",41),t.TgZ(2,"a",42)(3,"span",43),t._uU(4),t.qZA(),t.TgZ(5,"span",44),t._uU(6),t.qZA()()()),2&s){const e=o.$implicit;t.MGl("routerLink","/fansub/",e.fansub_.slug,""),t.xp6(1),t.s9C("src",e.fansub_.image_url,t.LSH),t.xp6(3),t.hij(" ",e.keterangan," "),t.xp6(2),t.Oqu(e.fansub_.slug)}}function at(s,o){if(1&s&&(t.TgZ(0,"div",24)(1,"div",32)(2,"div",33)(3,"h2",34)(4,"b",35),t._uU(5,"Group Fansub"),t.qZA()()(),t.TgZ(6,"div",36)(7,"div",37)(8,"mat-selection-list",38),t.YNc(9,nt,7,4,"mat-list-option",39),t.qZA()()()()()),2&s){const e=t.oxw(2);t.xp6(8),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",e.groupFansub)}}function ot(s,o){if(1&s&&(t.TgZ(0,"button",45)(1,"mat-icon",21),t._uU(2,"accessibility_new"),t.qZA(),t._uU(3),t.qZA()),2&s){const e=t.oxw(2);t.xp6(3),t.hij(" ",e.userData.id," ")}}function rt(s,o){if(1&s&&(t.TgZ(0,"button",46)(1,"mat-icon",21),t._uU(2,"access_time"),t.qZA(),t._uU(3),t.ALo(4,"date"),t.qZA()),2&s){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.xi3(4,1,e.userData.created_at,"d/M/yyyy, hh:mm:ss a z")," ")}}function lt(s,o){if(1&s&&(t.TgZ(0,"div",32),t._UZ(1,"app-material-expansion-panel",47),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("panelData",e.panelData)}}function ut(s,o){1&s&&(t.TgZ(0,"div",32)(1,"div",24),t._UZ(2,"app-report"),t.qZA()())}function ct(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),t._UZ(6,"img",7),t.qZA(),t.TgZ(7,"div",8),t.YNc(8,z,2,1,"mat-icon",9),t.YNc(9,$,2,1,"mat-icon",9),t.YNc(10,W,2,1,"mat-icon",9),t.YNc(11,X,2,0,"mat-icon",10),t.YNc(12,tt,2,1,"mat-icon",9),t.YNc(13,et,2,1,"mat-icon",9),t.YNc(14,it,2,0,"mat-icon",11),t.YNc(15,st,2,0,"mat-icon",12),t.qZA(),t.YNc(16,at,10,2,"div",13),t.qZA()(),t.TgZ(17,"div",14)(18,"div",15)(19,"h1",16)(20,"b"),t._uU(21),t.qZA()()(),t.TgZ(22,"div",17),t.YNc(23,ot,4,1,"button",18),t.YNc(24,rt,5,4,"button",19),t.TgZ(25,"button",20)(26,"mat-icon",21),t._uU(27,"email"),t.qZA(),t._uU(28),t.qZA()(),t.YNc(29,lt,2,1,"div",22),t.YNc(30,ut,3,0,"div",22),t.qZA()(),t.TgZ(31,"div",23)(32,"div",24)(33,"app-material-tab",25),t.NdJ("tableRowClicked",function(n){return t.CHM(e),t.oxw().openBerkas(n)})("paginatorClicked",function(n){return t.CHM(e),t.oxw().onPaginatorClicked(n)})("serverSideFilter",function(n){return t.CHM(e),t.oxw().onServerSideFilter(n)})("serverSideOrder",function(n){return t.CHM(e),t.oxw().onServerSideOrder(n)}),t.qZA()()()(),t._UZ(34,"div",26)(35,"div",27),t.qZA()}if(2&s){const e=t.oxw();t.xp6(6),t.s9C("src",e.userData.image_url,t.LSH),t.xp6(2),t.Q6J("ngIf",e.userData.role===e.ADMIN),t.xp6(1),t.Q6J("ngIf",e.userData.role===e.MODERATOR),t.xp6(1),t.Q6J("ngIf",e.userData.role===e.FANSUBBER),t.xp6(1),t.Q6J("ngIf",e.userData.verified),t.xp6(1),t.Q6J("ngIf",e.userBanned),t.xp6(1),t.Q6J("ngIf",e.accountAge>0),t.xp6(1),t.Q6J("ngIf",e.count>0),t.xp6(1),t.Q6J("ngIf",e.userData.private),t.xp6(1),t.Q6J("ngIf",e.groupFansub.length>0),t.xp6(5),t.Oqu(e.userData.kartu_tanda_penduduk_.nama),t.xp6(2),t.Q6J("ngIf",e.userData.id),t.xp6(1),t.Q6J("ngIf",e.userData.created_at),t.xp6(4),t.AsE(" ",e.userData.username,"@",e.ENV.domain," "),t.xp6(1),t.Q6J("ngIf",e.panelData.length>0),t.xp6(1),t.Q6J("ngIf",null==e.SS.mySocket?null:e.SS.mySocket.id),t.xp6(3),t.Q6J("tabData",e.tabData)("count",e.count)("serverSide",!0),t.xp6(1),t.Udp("background-image","url("+e.userData.profile_.cover_url+")")}}let pt=(()=>{class s{constructor(e,i,n,r,u,p,b,x,T){this.router=e,this.activatedRoute=i,this.gs=n,this.bs=r,this.fs=u,this.pi=p,this.us=b,this.ss=x,this.berkas=T,this.username="",this.userData=null,this.userBanned=null,this.groupFansub=[],this.berkasUser=[],this.allBerkasUserId=[],this.panelData=[],this.tabData=[{name:"Berkas",icon:"file_copy",type:"table",data:{column:["Proyek","Nama Berkas","Tanggal","Kunjungan","Pemilik"],row:[]}}],this.count=0,this.page=1,this.row=10,this.q="",this.sort="",this.order="",this.subsUser=null,this.subsBerkas=null,this.subsBanned=null,this.subsParam=null,this.subsGroupGet=null,this.subsTrusted=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get SS(){return this.ss}ngOnDestroy(){var e,i,n,r,u,p;null===(e=this.subsUser)||void 0===e||e.unsubscribe(),null===(i=this.subsBerkas)||void 0===i||i.unsubscribe(),null===(n=this.subsBanned)||void 0===n||n.unsubscribe(),null===(r=this.subsParam)||void 0===r||r.unsubscribe(),null===(u=this.subsGroupGet)||void 0===u||u.unsubscribe(),null===(p=this.subsTrusted)||void 0===p||p.unsubscribe()}get ADMIN(){return h.yS.ADMIN}get MODERATOR(){return h.yS.MODERATOR}get FANSUBBER(){return h.yS.FANSUBBER}get accountAge(){return Math.abs(new Date((new Date).getTime()-new Date(this.userData.created_at).getTime()).getUTCFullYear()-1970)}get ENV(){return I.N}ngOnInit(){this.subsParam=this.activatedRoute.params.subscribe({next:e=>{this.username=e.username,this.bs.busy(),this.subsUser=this.us.getUserData(this.username).subscribe({next:i=>{this.gs.log("[USER_DETAIL_SUCCESS]",i),this.userData=i.result,this.pi.updatePageMetaData(`${this.userData.kartu_tanda_penduduk_.nama}`,`${this.userData.profile_.description}`,`${this.userData.username}`,this.userData.image_url,this.userData.username),this.bs.idle(),this.gs.isBrowser&&(this.panelData=[],this.panelData.push({title:"Tentang Saya",icon:"info",text:this.userData.profile_.description}),this.fs.initializeFab("edit",null,"Ubah Profil",`/user/${this.username}/edit`,!1),this.checkBanned(),this.getUserGroup(),this.getUserBerkas())},error:i=>{this.gs.log("[USER_DETAIL_ERROR]",i,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:"/"}})}})}})}checkBanned(){this.bs.busy(),this.subsBanned=this.us.checkBanned(this.userData.username).subscribe({next:e=>{this.gs.log("[USER_CHECK_BANNED_SUCCESS]",e),Object.keys(e.results[this.userData.username]).length>0&&(this.userBanned=e.results[this.userData.username]),this.bs.idle()},error:e=>{this.gs.log("[USER_CHECK_BANNED_ERROR]",e,"error"),this.bs.idle()}})}getUserBerkas(){this.bs.busy(),this.subsBerkas=this.us.getUserBerkas(this.username,this.q,this.page,this.row,this.sort,this.order).subscribe({next:e=>{this.gs.log("[USER_BERKAS_LIST_SUCCESS]",e),this.count=e.count,this.berkasUser=[];for(const i of e.results)this.allBerkasUserId.push(i.id),this.berkasUser.push({id:i.id,private:i.private,foto:i.user_.image_url,Proyek:i.project_type_.name,Tanggal:i.created_at,Kunjungan:i.view_count,Pemilik:i.user_.username,"Nama Berkas":i.name});this.tabData[0].data.row=this.berkasUser,this.allBerkasUserId.length>0&&this.checkTrusted(),this.bs.idle()},error:e=>{this.gs.log("[USER_BERKAS_LIST_ERROR]",e,"error"),this.bs.idle()}})}checkTrusted(){this.bs.busy(),this.subsTrusted=this.berkas.checkTrusted(this.allBerkasUserId).subscribe({next:e=>{this.gs.log("[USER_BERKAS_TRUSTED_SUCCESS]",e);for(const i of this.berkasUser)i.trusted=e.results[i.id];this.bs.idle()},error:e=>{this.gs.log("[USER_BERKAS_TRUSTED_ERROR]",e,"error"),this.bs.idle()}})}openBerkas(e){this.gs.log("[USER_BERKAS_LIST_CLICK_BERKAS]",e),this.router.navigateByUrl(`/berkas/${e.id}`)}onPaginatorClicked(e){this.gs.log("[USER_BERKAS_LIST_CLICK_PAGINATOR]",e),this.page=e.pageIndex+1,this.row=e.pageSize,this.getUserBerkas()}onServerSideFilter(e){this.gs.log("[USER_BERKAS_LIST_ENTER_FILTER]",e),this.q=e,this.getUserBerkas()}onServerSideOrder(e){this.gs.log("[USER_BERKAS_CLICK_ORDER]",e),this.q=e.q,this.sort=e.active,this.order=e.direction,this.getUserBerkas()}getUserGroup(){this.bs.busy(),this.subsGroupGet=this.us.getUserGroup(this.username).subscribe({next:e=>{this.gs.log("[USER_DETAIL_GROUP_LIST_SUCCESS]",e),this.groupFansub=e.results,this.bs.idle()},error:e=>{this.gs.log("[USER_DETAIL_GROUP_LIST_ERROR]",e,"error"),this.bs.idle()}})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(k.U),t.Y36(L.z),t.Y36(F.r),t.Y36(J.Z),t.Y36(N.K),t.Y36(Y.R),t.Y36(Q.A))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-user-detail"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"profile-info","align-items-center"],[1,"row","py-3","px-2"],[1,"col-md-4","col-xl-3","px-3"],[1,"row","sticky-top","pt-3"],[1,"col-12","pt-4"],[1,"profile-image",3,"src"],[1,"col-12","my-3"],["class","mx-1","style","cursor: pointer;",3,"matTooltip",4,"ngIf"],["class","mx-1","matTooltip","Terverifikasi","style","cursor: pointer;",4,"ngIf"],["class","mx-1","matTooltip","Sharing is Caring","style","cursor: pointer;",4,"ngIf"],["class","mx-1","matTooltip","Akun Private","style","cursor: pointer;",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-md-8","col-xl-9","pt-3"],[1,"row","py-3","px-0","profile-height-large"],[1,"m-0","mt-auto"],[1,"row","p-3"],["mat-stroked-button","","matLine","","class","col-12 col-md-4 text-truncate","matTooltip","Nomor ID Pengguna","color","accent","style","overflow: hidden;",4,"ngIf"],["mat-stroked-button","","matLine","","class","col-12 col-md-8 text-truncate","matTooltip","Tanggal Bergabung","color","accent","style","overflow: hidden;",4,"ngIf"],["mat-stroked-button","","matLine","","matTooltip","Alamat Surel","color","accent",1,"col","text-truncate",2,"overflow","hidden"],[1,"me-1"],["class","row py-3",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"tabData","count","serverSide","tableRowClicked","paginatorClicked","serverSideFilter","serverSideOrder"],[1,"profile-banner","profile-banner-1","align-items-center"],[1,"profile-banner","profile-banner-2","align-items-center"],[1,"mx-1",2,"cursor","pointer",3,"matTooltip"],["matTooltip","Terverifikasi",1,"mx-1",2,"cursor","pointer"],["matTooltip","Sharing is Caring",1,"mx-1",2,"cursor","pointer"],["matTooltip","Akun Private",1,"mx-1",2,"cursor","pointer"],[1,"row","py-3"],[1,"col-12","pt-3","sticky-top","bg-bifeldy"],[1,"border-bottom-dotted"],[1,"text-bifeldy"],[1,"col-12",2,"max-height","288px"],[1,"h-100",2,"overflow-y","auto"],[3,"multiple"],["class","h-100",3,"routerLink",4,"ngFor","ngForOf"],[1,"h-100",3,"routerLink"],["matListAvatar","",1,"ms-3",2,"border-radius","0",3,"src"],[1,"text-truncate","text-decoration-none"],[1,"bg-bifeldy","px-2","me-1","text-warning",2,"position","absolute","right","0"],[1,"text-success"],["mat-stroked-button","","matLine","","matTooltip","Nomor ID Pengguna","color","accent",1,"col-12","col-md-4","text-truncate",2,"overflow","hidden"],["mat-stroked-button","","matLine","","matTooltip","Tanggal Bergabung","color","accent",1,"col-12","col-md-8","text-truncate",2,"overflow","hidden"],[3,"panelData"]],template:function(e,i){1&e&&t.YNc(0,ct,36,22,"div",0),2&e&&t.Q6J("ngIf",i.userData)},directives:[d.O5,K.Hw,M.gM,S.Ub,d.sg,S.vS,l.rH,S.eA,R.lW,G.X2,H.Q,V.Y,j.H],pipes:[d.uU],styles:[".profile-banner[_ngcontent-%COMP%]{height:128px;width:100%;background-size:cover;background-position:center;background-repeat:no-repeat;opacity:.75}.profile-banner-1[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.profile-banner-2[_ngcontent-%COMP%]{position:absolute;top:128px;left:0}.profile-info[_ngcontent-%COMP%]{position:relative;height:256px;z-index:1}.profile-image[_ngcontent-%COMP%]{width:50%}@media (min-width: 768px){.profile-height-large[_ngcontent-%COMP%]{height:100px}.profile-image[_ngcontent-%COMP%]{width:100%}}"]}),s})();var mt=a(9287),dt=a(7261),q=a(4137),gt=a(7845),_t=a(6781),ht=a(9731);let bt=(()=>{class s{constructor(e,i){this.api=e,this.gs=i}getUserApiKey(e){return this.api.getData(`/api-key?username=${e}`)}createApiKey(e){return this.api.postData("/api-key",e)}editApiKey(e,i){return this.api.putData(`/api-key/${e}`,i)}revokeApiKey(e){return this.api.deleteData(`/api-key/${e}`)}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(ht.s),t.LFG(k.U))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var ft=a(8616),vt=a(192),Ut=a(6766);function xt(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"mat-list-option",25)(1,"mat-icon",26),t._uU(2,"add_comment"),t.qZA(),t.TgZ(3,"a",27),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).openComment(r)}),t.TgZ(4,"span",28),t._uU(5),t.ALo(6,"dateAgo"),t.qZA(),t.TgZ(7,"span",29),t._uU(8),t.qZA()()()}if(2&s){const e=o.$implicit;t.xp6(5),t.Oqu(t.lcZ(6,2,e.created_at)),t.xp6(3),t.Oqu(e.comment)}}function Tt(s,o){if(1&s&&(t.TgZ(0,"div",11)(1,"mat-selection-list",23),t.YNc(2,xt,9,4,"mat-list-option",24),t.ALo(3,"slice"),t.qZA()()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",t.Dn7(3,2,e.feedKomentarData,0,5))}}function Et(s,o){if(1&s&&(t.TgZ(0,"mat-list-option",25)(1,"mat-icon",26),t._uU(2,"volunteer_activism"),t.qZA(),t.TgZ(3,"a",30)(4,"span",28),t._uU(5),t.ALo(6,"dateAgo"),t.qZA(),t.TgZ(7,"span",31),t._uU(8),t.qZA(),t.TgZ(9,"span",32),t._uU(10),t.qZA(),t.TgZ(11,"span",29),t._uU(12),t.qZA()()()),2&s){const e=o.$implicit;t.xp6(3),t.Q6J("routerLink",e.berkas_?"/berkas/"+(null==e.berkas_?null:e.berkas_.id):e.fansub_?"/fansub/"+(null==e.fansub_?null:e.fansub_.slug):e.user_?"/user/"+(null==e.user_?null:e.user_.username):e.news_?"/news/"+(null==e.news_?null:e.news_.id):""),t.xp6(2),t.Oqu(t.lcZ(6,5,e.created_at)),t.xp6(3),t.Oqu(e.type),t.xp6(2),t.Oqu(e.berkas_?"Berkas":e.fansub_?"Fansub":e.user_?"User":e.news_?"News":""),t.xp6(2),t.Oqu((null==e.berkas_?null:e.berkas_.name)||(null==e.fansub_?null:e.fansub_.name)||(null==e.user_||null==e.user_.kartu_tanda_penduduk_?null:e.user_.kartu_tanda_penduduk_.nama)||(null==e.news_?null:e.news_.title))}}function At(s,o){if(1&s&&(t.TgZ(0,"div",11)(1,"mat-selection-list",23),t.YNc(2,Et,13,7,"mat-list-option",24),t.ALo(3,"slice"),t.qZA()()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",t.Dn7(3,2,e.feedLikeDislikeData,0,5))}}function St(s,o){if(1&s&&(t.TgZ(0,"mat-list-option",25)(1,"mat-icon",26),t._uU(2,"directions_run"),t.qZA(),t.TgZ(3,"a",30)(4,"span",28),t._uU(5),t.ALo(6,"dateAgo"),t.qZA(),t.TgZ(7,"span",32),t._uU(8),t.qZA(),t.TgZ(9,"span",29),t._uU(10),t.qZA()()()),2&s){const e=o.$implicit;t.xp6(3),t.Q6J("routerLink",e.berkas_?"/berkas/"+(null==e.berkas_?null:e.berkas_.id):e.fansub_?"/fansub/"+(null==e.fansub_?null:e.fansub_.slug):e.user_?"/user/"+(null==e.user_?null:e.user_.username):e.news_?"/news/"+(null==e.news_?null:e.news_.id):""),t.xp6(2),t.Oqu(t.lcZ(6,4,e.created_at)),t.xp6(3),t.Oqu(e.berkas_?"Berkas":e.fansub_?"Fansub":e.user_?"User":e.news_?"News":""),t.xp6(2),t.Oqu((null==e.berkas_?null:e.berkas_.name)||(null==e.fansub_?null:e.fansub_.name)||(null==e.user_||null==e.user_.kartu_tanda_penduduk_?null:e.user_.kartu_tanda_penduduk_.nama)||(null==e.news_?null:e.news_.title))}}function Ct(s,o){if(1&s&&(t.TgZ(0,"div",11)(1,"mat-selection-list",23),t.YNc(2,St,11,6,"mat-list-option",24),t.ALo(3,"slice"),t.qZA()()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",t.Dn7(3,2,e.feedVisitData,0,5))}}function Zt(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",33),t.NdJ("click",function(){const r=t.CHM(e).$implicit,u=t.oxw();return u.copyApiKey(r),u.editApiKey(r)}),t.TgZ(1,"p",34),t._uU(2," Nama :: "),t.TgZ(3,"span",35),t._uU(4),t.qZA()(),t.TgZ(5,"p",36),t._uU(6," Origin :: "),t.TgZ(7,"span",35),t._uU(8),t.qZA()(),t.TgZ(9,"p",37),t._uU(10," Key :: "),t.TgZ(11,"span",35),t._uU(12),t.qZA()(),t.TgZ(13,"a",17),t.NdJ("click",function(n){const u=t.CHM(e).$implicit,p=t.oxw();return n.stopPropagation(),p.revokeApiKey(u)}),t.TgZ(14,"mat-icon",15),t._uU(15,"delete_sweep"),t.qZA(),t._uU(16," Hapus Akses "),t.qZA()()}if(2&s){const e=o.$implicit;t.xp6(4),t.hij(" ",e.name," "),t.xp6(4),t.hij(" ",e.ip_domain," "),t.xp6(4),t.hij(" ",e.api_key," ")}}function Dt(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"mat-list-option",41),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).editSubDomain(r.fansub_)}),t._UZ(1,"img",42),t.TgZ(2,"a",43)(3,"span",44),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"span",35),t._uU(7),t.qZA()()()}if(2&s){const e=o.$implicit;t.xp6(1),t.s9C("src",e.fansub_.image_url,t.LSH),t.xp6(3),t.hij(" ",t.xi3(5,3,e.updated_at,"d-MM-y")," "),t.xp6(3),t.Oqu(e.fansub_.slug)}}function yt(s,o){if(1&s&&(t.TgZ(0,"div",38)(1,"div",39)(2,"mat-selection-list",23),t.YNc(3,Dt,8,6,"mat-list-option",40),t.qZA()()()),2&s){const e=t.oxw();t.xp6(2),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",e.groupFansub)}}function It(s,o){1&s&&t._UZ(0,"app-no-data",45)}let kt=(()=>{class s{constructor(e,i,n,r,u,p,b,x,T,C,Z){this.clipboard=e,this.router=i,this.snackBar=n,this.as=r,this.ds=u,this.gs=p,this.fs=b,this.bs=x,this.us=T,this.fansub=C,this.aks=Z,this.feedKomentarData=[],this.feedLikeDislikeData=[],this.feedVisitData=[],this.subsFeedKomentar=null,this.subsFeedLikeDislike=null,this.subsFeedVisit=null,this.subsGetApiKey=null,this.subsDialog=null,this.subsCreateApiKey=null,this.subsEditApiKey=null,this.subsRevokeApiKey=null,this.subsGroupGet=null,this.subsUpdateSubDomain=null,this.subsGetSubDomain=null,this.apiKey=[],this.groupFansub=[],this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get AS(){return this.as}get ENV(){return I.N}ngOnInit(){var e,i;this.gs.isBrowser&&(this.getUserFeedComment(),this.getUserFeedLikeDislike(),this.getUserFeedVisit(),this.getUserApiKey(),this.getUserGroup(),this.fs.initializeFab("arrow_forward",null,"Menuju Halaman Profile",`/user/${null===(i=null===(e=this.as.currentUserSubject)||void 0===e?void 0:e.value)||void 0===i?void 0:i.username}`,!1))}ngOnDestroy(){var e,i,n,r,u,p,b,x,T,C,Z;null===(e=this.subsFeedKomentar)||void 0===e||e.unsubscribe(),null===(i=this.subsFeedLikeDislike)||void 0===i||i.unsubscribe(),null===(n=this.subsFeedVisit)||void 0===n||n.unsubscribe(),null===(r=this.subsGetApiKey)||void 0===r||r.unsubscribe(),null===(u=this.subsDialog)||void 0===u||u.unsubscribe(),null===(p=this.subsCreateApiKey)||void 0===p||p.unsubscribe(),null===(b=this.subsEditApiKey)||void 0===b||b.unsubscribe(),null===(x=this.subsRevokeApiKey)||void 0===x||x.unsubscribe(),null===(T=this.subsGroupGet)||void 0===T||T.unsubscribe(),null===(C=this.subsUpdateSubDomain)||void 0===C||C.unsubscribe(),null===(Z=this.subsGetSubDomain)||void 0===Z||Z.unsubscribe()}getUserFeedComment(){var e,i;this.bs.busy(),this.subsFeedKomentar=this.us.getUserFeedComment(null===(i=null===(e=this.as.currentUserSubject)||void 0===e?void 0:e.value)||void 0===i?void 0:i.username,"",1,5).subscribe({next:n=>{this.gs.log("[USER_FEED_COMMENT_SUCCESS]",n),this.feedKomentarData=n.results,this.bs.idle()},error:n=>{this.gs.log("[USER_FEED_COMMENT_ERROR]",n,"error"),this.bs.idle()}})}getUserFeedLikeDislike(){var e,i;this.bs.busy(),this.subsFeedLikeDislike=this.us.getUserFeedLikeDislike(null===(i=null===(e=this.as.currentUserSubject)||void 0===e?void 0:e.value)||void 0===i?void 0:i.username,"",1,5).subscribe({next:n=>{this.gs.log("[USER_FEED_LIKEDISLIKE_SUCCESS]",n),this.feedLikeDislikeData=n.results,this.bs.idle()},error:n=>{this.gs.log("[USER_FEED_LIKEDISLIKE_ERROR]",n,"error"),this.bs.idle()}})}getUserFeedVisit(){var e,i;this.bs.busy(),this.subsFeedVisit=this.us.getUserFeedVisit(null===(i=null===(e=this.as.currentUserSubject)||void 0===e?void 0:e.value)||void 0===i?void 0:i.username,"",1,5).subscribe({next:n=>{this.gs.log("[USER_FEED_VISIT_SUCCESS]",n),this.feedVisitData=n.results,this.bs.idle()},error:n=>{this.gs.log("[USER_FEED_VISIT_ERROR]",n,"error"),this.bs.idle()}})}getUserApiKey(){var e,i;this.bs.busy(),this.subsGetApiKey=this.aks.getUserApiKey(null===(i=null===(e=this.as.currentUserSubject)||void 0===e?void 0:e.value)||void 0===i?void 0:i.username).subscribe({next:n=>{var r,u;this.gs.log("[USER_FEED_VISIT_SUCCESS]",n),this.apiKey=n.results[null===(u=null===(r=this.as.currentUserSubject)||void 0===r?void 0:r.value)||void 0===u?void 0:u.username],this.bs.idle()},error:n=>{this.gs.log("[USER_FEED_VISIT_ERROR]",n,"error"),this.bs.idle()}})}copyApiKey(e){this.clipboard.copy(e.api_key)&&this.snackBar.open("API Key :: Telah Di Salin Pada Clipboard","Ok")}generateNewApiKey(){var e,i;this.subsDialog=this.ds.openInputDialog({data:{title:"Tambah API Key Baru",input:{name:{inputLabel:"Nama / Deskripsi",inputPlaceholder:`${null===(i=null===(e=this.as.currentUserSubject)||void 0===e?void 0:e.value)||void 0===i?void 0:i.username}_${(new Date).getTime()}`,inputValue:null,inputRequired:!0},ip_domain:{inputLabel:"Origin Tanpa http://",inputPlaceholder:"example.com; 1.1.1.1; *",inputValue:null,inputRequired:!0}},confirmText:"OK",cancelText:"Batal",infoText:"Gunakan * Saja Untuk Perbolehkan Semua Dan Titik Koma ; Untuk Lebih Dari Satu"}}).afterClosed().subscribe({next:n=>{this.gs.log("[INPUT_DIALOG_CLOSED]",n),n&&(this.bs.busy(),this.subsCreateApiKey=this.aks.createApiKey({name:n.name,ip_domain:n.ip_domain}).subscribe({next:r=>{this.gs.log("[USER_CREATE_APIKEY_SUCCESS]",r),this.bs.idle(),this.getUserApiKey()},error:r=>{this.gs.log("[USER_CREATE_APIKEY_ERROR]",r,"error"),this.bs.idle(),this.getUserApiKey()}})),this.subsDialog.unsubscribe()}})}editApiKey(e){this.subsDialog=this.ds.openInputDialog({data:{title:"Ubah API Key",input:{name:{inputLabel:"Nama / Deskripsi",inputPlaceholder:e.name,inputValue:e.name,inputRequired:!0},ip_domain:{inputLabel:"Origin Tanpa http://",inputPlaceholder:e.ip_domain,inputValue:e.ip_domain,inputRequired:!0}},confirmText:"OK",cancelText:"Batal",infoText:"Gunakan * Saja Untuk Perbolehkan Semua Dan Titik Koma ; Untuk Lebih Dari Satu"}}).afterClosed().subscribe({next:i=>{this.gs.log("[INPUT_DIALOG_CLOSED]",i),i&&(this.bs.busy(),this.subsEditApiKey=this.aks.editApiKey(e.id,{name:i.name,ip_domain:i.ip_domain}).subscribe({next:n=>{this.gs.log("[USER_EDIT_APIKEY_SUCCESS]",n),this.bs.idle(),this.getUserApiKey()},error:n=>{this.gs.log("[USER_EDIT_APIKEY_ERROR]",n,"error"),this.bs.idle(),this.getUserApiKey()}})),this.subsDialog.unsubscribe()}})}revokeApiKey(e){this.bs.busy(),this.subsRevokeApiKey=this.aks.revokeApiKey(e.id).subscribe({next:i=>{this.gs.log("[USER_REVOKE_APIKEY_SUCCESS]",i),this.bs.idle(),this.getUserApiKey()},error:i=>{this.gs.log("[USER_REVOKE_APIKEY_ERROR]",i,"error"),this.bs.idle(),this.getUserApiKey()}})}getUserGroup(){var e,i;this.bs.busy(),this.subsGroupGet=this.us.getUserGroup(null===(i=null===(e=this.as.currentUserSubject)||void 0===e?void 0:e.value)||void 0===i?void 0:i.username).subscribe({next:n=>{this.gs.log("[USER_GROUP_LIST_SUCCESS]",n),this.groupFansub=n.results,this.bs.idle()},error:n=>{this.gs.log("[USER_GROUP_LIST_ERROR]",n,"error"),this.bs.idle()}})}editSubDomain(e){this.bs.busy(),this.subsGetSubDomain=this.fansub.getSubDomain(e.slug).subscribe({next:i=>{var n,r;this.gs.log("[USER_FANSUB_SUBDOMAIN_SUCCESS]",i),this.bs.idle();const u=i.result;this.subsDialog=this.ds.openInputDialog({data:{title:`Ubah CNAME / A Record IP v4 v6 :: '${e.slug}'`,input:{server_target:{inputLabel:"Server Target",inputPlaceholder:"ghs.google.com",inputValue:u.dns_id.content,inputRequired:!0},verification_name:{inputLabel:"Tambahan Khusus Blogger :: Name",inputPlaceholder:"blablabla-name",inputValue:null===(n=u.dns_id_alt)||void 0===n?void 0:n.name,inputRequired:!1},verification_target:{inputLabel:"Tambahan Khusus Blogger :: Target",inputPlaceholder:"blablabla-target.dv.googlehosted.com",inputValue:null===(r=u.dns_id_alt)||void 0===r?void 0:r.content,inputRequired:!1}},confirmText:"OK",cancelText:"Batal",infoText:"Abaikan 2 Input Terakhir Jika Bukan Blogger"}}).afterClosed().subscribe({next:p=>{this.gs.log("[INPUT_DIALOG_CLOSED]",p),p&&(this.bs.busy(),this.subsUpdateSubDomain=this.fansub.updateSubDomain(e.slug,{server_target:p.server_target,verification_name:p.verification_name,verification_target:p.verification_target}).subscribe({next:b=>{this.gs.log("[FANSUB_UPDATE_SUBDOMAIN_SUCCESS]",b),this.bs.idle(),this.getUserGroup()},error:b=>{this.gs.log("[FANSUB_UPDATE_SUBDOMAIN_ERROR]",b,"error"),this.bs.idle(),this.getUserGroup()}})),this.subsDialog.unsubscribe()}})},error:i=>{this.gs.log("[USER_FANSUB_SUBDOMAIN_ERROR]",i,"error"),this.bs.idle(),this.subsDialog=this.ds.openInfoDialog({data:{title:`Sepertinya Sub-Domain '${e.slug}' Belum Di Klaim`,htmlMessage:"Silahkan ambil sub-domain pada halaman fansub, ingin ke sana sekarang?",confirmText:"Ya",cancelText:"Tidak"},disableClose:!1}).afterClosed().subscribe({next:n=>{this.gs.log("[INFO_DIALOG_CLOSED]",n),!0===n?this.router.navigateByUrl(`/fansub/${e.slug}`):this.getUserGroup(),this.subsDialog.unsubscribe()}})}})}openComment(e){this.router.navigate([e.path],{queryParams:{comment:e.id}})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(mt.TU),t.Y36(l.F0),t.Y36(dt.ux),t.Y36(q.e),t.Y36(gt.x),t.Y36(k.U),t.Y36(F.r),t.Y36(L.z),t.Y36(N.K),t.Y36(_t.T),t.Y36(bt))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-user-list"]],decls:64,vars:12,consts:[[1,"container"],[1,"row","pb-3","px-0"],[1,"col-lg-8","col-xl-9"],[1,"row"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"float-end","text-warning",2,"font-size","small","cursor","pointer",3,"click"],[1,"text-bifeldy"],["class","col-12",4,"ngIf","ngIfElse"],[1,"col-lg-4","col-xl-3"],[1,"row","sticky-top"],[1,"col-12"],["matTooltip","Khusus Pengguna Terverifikasi",1,"text-bifeldy"],[1,"col-12","mb-2"],["mat-button","","color","accent","matTooltip","Buka Kotak Pesan","routerLink","/mailbox",1,"w-100"],[1,"me-1"],[1,"text-bifeldy",3,"matTooltip"],["mat-button","","color","accent",1,"w-100",3,"click"],["class","my-2 gradient-border",3,"click",4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"border-bottom-dotted"],["class","col-12 mb-2","style","max-height: 288px;",4,"ngIf","ngIfElse"],["noData",""],[3,"multiple"],["class","h-100",4,"ngFor","ngForOf"],[1,"h-100"],["mat-list-icon","",1,"ps-3"],[1,"text-truncate","text-decoration-none",3,"click"],[1,"bg-bifeldy","px-2","me-1","text-danger",2,"position","absolute","right","0"],[1,"text-warning"],[1,"text-truncate","text-decoration-none",3,"routerLink"],[1,"me-3","text-success"],[1,"me-3","text-info"],[1,"my-2","gradient-border",3,"click"],[1,"ps-2","pe-2","pt-2","text-truncate","my-0"],[1,"text-success"],[1,"ps-2","pe-2","pt-0","text-truncate","my-0"],[1,"ps-2","pe-2","pb-2","text-truncate","my-0"],[1,"col-12","mb-2",2,"max-height","288px"],[1,"h-100",2,"overflow-y","auto"],["class","h-100",3,"click",4,"ngFor","ngForOf"],[1,"h-100",3,"click"],["matListAvatar","",1,"ms-3",2,"border-radius","0",3,"src"],[1,"text-truncate","text-decoration-none"],[1,"bg-bifeldy","px-2","me-1","text-warning",2,"position","absolute","right","0"],[1,"col-12","p-3"]],template:function(e,i){if(1&e&&(t._UZ(0,"app-notifications"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5)(7,"span",6),t.NdJ("click",function(){return i.getUserFeedComment()}),t._uU(8," Refresh "),t.qZA(),t.TgZ(9,"b",7),t._uU(10,"Riwayat Komentar"),t.qZA()()(),t.YNc(11,Tt,4,6,"div",8),t.qZA(),t.TgZ(12,"div",3)(13,"div",4)(14,"h2",5)(15,"span",6),t.NdJ("click",function(){return i.getUserFeedLikeDislike()}),t._uU(16," Refresh "),t.qZA(),t.TgZ(17,"b",7),t._uU(18,"Riwayat Like & Dislike"),t.qZA()()(),t.YNc(19,At,4,6,"div",8),t.qZA(),t.TgZ(20,"div",3)(21,"div",4)(22,"h2",5)(23,"span",6),t.NdJ("click",function(){return i.getUserFeedVisit()}),t._uU(24," Refresh "),t.qZA(),t.TgZ(25,"b",7),t._uU(26,"Riwayat Kunjungan"),t.qZA()()(),t.YNc(27,Ct,4,6,"div",8),t.qZA()(),t.TgZ(28,"div",9)(29,"div",10)(30,"div",11)(31,"div",3)(32,"div",4)(33,"h2",5)(34,"b",12),t._uU(35,"Alamat Email"),t.qZA()()(),t.TgZ(36,"div",13)(37,"a",14)(38,"mat-icon",15),t._uU(39,"email"),t.qZA(),t._uU(40),t.qZA()()(),t.TgZ(41,"div",3)(42,"div",4)(43,"h2",5)(44,"span",6),t.NdJ("click",function(){return i.getUserApiKey()}),t._uU(45," Refresh "),t.qZA(),t.TgZ(46,"b",16),t._uU(47,"API Key"),t.qZA()()(),t.TgZ(48,"div",13)(49,"a",17),t.NdJ("click",function(){return i.generateNewApiKey()}),t.TgZ(50,"mat-icon",15),t._uU(51,"webhook"),t.qZA(),t._uU(52," Buat API Key Baru "),t.qZA(),t.YNc(53,Zt,17,3,"div",18),t.qZA()(),t.TgZ(54,"div",19)(55,"div",4)(56,"h2",20)(57,"span",6),t.NdJ("click",function(){return i.getUserGroup()}),t._uU(58," Refresh "),t.qZA(),t.TgZ(59,"b",7),t._uU(60,"DNS Fansub"),t.qZA()()(),t.YNc(61,yt,4,2,"div",21),t.qZA()()()()()(),t.YNc(62,It,1,0,"ng-template",null,22,t.W1O)),2&e){const n=t.MAs(63);t.xp6(11),t.Q6J("ngIf",i.feedKomentarData.length>0)("ngIfElse",n),t.xp6(8),t.Q6J("ngIf",i.feedLikeDislikeData.length>0)("ngIfElse",n),t.xp6(8),t.Q6J("ngIf",i.feedVisitData.length>0)("ngIfElse",n),t.xp6(13),t.AsE(" '",null==i.AS.currentUserSubject||null==i.AS.currentUserSubject.value?null:i.AS.currentUserSubject.value.username,"@",i.ENV.domain,"' "),t.xp6(6),t.MGl("matTooltip","Aktivitas Terakhir :: ",null==i.AS.currentUserSubject||null==i.AS.currentUserSubject.value?null:i.AS.currentUserSubject.value._session_origin,""),t.xp6(7),t.Q6J("ngForOf",i.apiKey),t.xp6(8),t.Q6J("ngIf",i.groupFansub.length>0)("ngIfElse",n)}},directives:[ft.t,d.O5,S.Ub,d.sg,S.vS,K.Hw,S.Nh,l.yS,M.gM,R.zs,S.eA,vt.d],pipes:[d.OU,Ut.R,d.uU],styles:[""]}),s})();var Rt=a(6925),Pt=a(7902),Ot=a(8379),P=a(7322),wt=a(2368),Lt=a(7531),Nt=a(3626);function Kt(s,o){if(1&s&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"bytes"),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij("Ukuran Upload Melebihi Batas ",t.lcZ(2,1,e.imagePhotoLimitExceeded)," !")}}function Mt(s,o){if(1&s&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.imagePhotoErrorText)}}function Bt(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",42)(1,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).submitPhotoImage()}),t.TgZ(2,"mat-icon",37),t._uU(3,"add_photo_alternate"),t.qZA(),t._uU(4," Unggah "),t.qZA()()}if(2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function Ft(s,o){1&s&&(t.TgZ(0,"div"),t._uU(1,"Nama Tidak Boleh Kosong"),t.qZA())}function Jt(s,o){1&s&&(t.TgZ(0,"div"),t._uU(1,"Nama Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function qt(s,o){if(1&s&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"bytes"),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij("Ukuran Upload Melebihi Batas ",t.lcZ(2,1,e.imageCoverLimitExceeded)," !")}}function Yt(s,o){if(1&s&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.imageCoverErrorText)}}function Qt(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",16)(1,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).submitCoverImage()}),t.TgZ(2,"mat-icon",37),t._uU(3,"add_photo_alternate"),t.qZA(),t._uU(4," Unggah "),t.qZA()()}if(2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function Gt(s,o){1&s&&(t.TgZ(0,"div"),t._uU(1,"Password Tidak Boleh Kosong"),t.qZA())}function Ht(s,o){1&s&&(t.TgZ(0,"div"),t._uU(1,"Password Minimal 8 Huruf"),t.qZA())}function Vt(s,o){1&s&&(t.TgZ(0,"div"),t._uU(1,"Password Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function jt(s,o){1&s&&(t.TgZ(0,"div"),t._uU(1,"Password Minimal 8 Huruf"),t.qZA())}function zt(s,o){1&s&&(t.TgZ(0,"div"),t._uU(1,"Password Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function $t(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("submit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7),t._UZ(7,"img",8),t.TgZ(8,"mat-form-field",9)(9,"mat-label"),t._uU(10,"Profile Image"),t.qZA(),t.TgZ(11,"ngx-mat-file-input",10,11),t.NdJ("change",function(n){t.CHM(e);const r=t.MAs(12);return t.oxw().uploadPhotoImage(n,r)}),t.qZA(),t.TgZ(13,"mat-icon",12),t._uU(14,"image"),t.qZA()(),t.TgZ(15,"mat-error",13)(16,"small"),t.YNc(17,Kt,3,3,"div",14),t.YNc(18,Mt,2,1,"div",14),t.qZA()()(),t.YNc(19,Bt,5,1,"div",15),t.TgZ(20,"div",16)(21,"mat-slide-toggle",17),t._uU(22," Jadikan Private, Sembunyikan Aktivitas "),t.qZA()()()(),t.TgZ(23,"div",18),t._UZ(24,"div",19),t.TgZ(25,"div",20)(26,"mat-form-field",21)(27,"mat-label"),t._uU(28,"Nama Lengkap"),t.qZA(),t._UZ(29,"input",22),t.TgZ(30,"mat-icon",12),t._uU(31,"wysiwyg"),t.qZA(),t.TgZ(32,"mat-error"),t.YNc(33,Ft,2,0,"div",14),t.YNc(34,Jt,2,0,"div",14),t.qZA()(),t.TgZ(35,"mat-form-field",23)(36,"mat-label"),t._uU(37,"Cover Image"),t.qZA(),t.TgZ(38,"ngx-mat-file-input",24,25),t.NdJ("change",function(n){t.CHM(e);const r=t.MAs(39);return t.oxw().uploadCoverImage(n,r)}),t.qZA(),t.TgZ(40,"mat-icon",12),t._uU(41,"image"),t.qZA()(),t.TgZ(42,"mat-error",13)(43,"small"),t.YNc(44,qt,3,3,"div",14),t.YNc(45,Yt,2,1,"div",14),t.qZA()(),t.YNc(46,Qt,5,1,"div",26),t._UZ(47,"angular-editor",27),t.TgZ(48,"mat-form-field",28)(49,"mat-label"),t._uU(50,"Konfirmasi Kata Sandi"),t.qZA(),t._UZ(51,"input",29),t.TgZ(52,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().togglePassword()}),t.TgZ(53,"mat-icon"),t._uU(54),t.qZA()(),t.TgZ(55,"mat-error"),t.YNc(56,Gt,2,0,"div",14),t.YNc(57,Ht,2,0,"div",14),t.YNc(58,Vt,2,0,"div",14),t.qZA()(),t.TgZ(59,"mat-form-field",28)(60,"mat-label"),t._uU(61,"Ubah Kata Sandi"),t.qZA(),t._UZ(62,"input",31),t.TgZ(63,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().togglePassword()}),t.TgZ(64,"mat-icon"),t._uU(65),t.qZA()(),t.TgZ(66,"mat-error"),t.YNc(67,jt,2,0,"div",14),t.YNc(68,zt,2,0,"div",14),t.qZA()()(),t.TgZ(69,"div",32)(70,"div",7)(71,"div",33),t._UZ(72,"div",34),t.TgZ(73,"div",35)(74,"a",36)(75,"mat-icon",37),t._uU(76,"undo"),t.qZA(),t._uU(77," Batal "),t.qZA()(),t.TgZ(78,"div",35)(79,"button",38),t._uU(80," Simpan "),t.TgZ(81,"mat-icon",39),t._uU(82,"save"),t.qZA()()()()()()()()(),t._UZ(83,"div",40)(84,"div",41),t.qZA()()}if(2&s){const e=t.oxw();t.Q6J("formGroup",e.fg),t.xp6(7),t.s9C("src",e.image_photo,t.LSH),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(6),t.Q6J("ngIf",e.imagePhotoLimitExceeded),t.xp6(1),t.Q6J("ngIf",e.imagePhotoErrorText),t.xp6(1),t.Q6J("ngIf",e.imagePhoto&&!e.fg.value.image_photo),t.xp6(7),t.Q6J("color","accent"),t.xp6(7),t.Q6J("ngIf",e.fg.get("nama").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg.get("nama").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(6),t.Q6J("ngIf",e.imageCoverLimitExceeded),t.xp6(1),t.Q6J("ngIf",e.imageCoverErrorText),t.xp6(1),t.Q6J("ngIf",e.imageCover&&!e.fg.value.image_cover),t.xp6(1),t.Q6J("config",e.GS.angularEditorConfig),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("type",e.passwordHide?"password":"text"),t.xp6(3),t.Oqu(e.passwordHide?"visibility_off":"visibility"),t.xp6(2),t.Q6J("ngIf",e.fg.get("old_password").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg.get("old_password").hasError("minlength")),t.xp6(1),t.Q6J("ngIf",e.fg.get("old_password").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("type",e.passwordHide?"password":"text"),t.xp6(3),t.Oqu(e.passwordHide?"visibility_off":"visibility"),t.xp6(2),t.Q6J("ngIf",e.fg.get("new_password").hasError("minlength")),t.xp6(1),t.Q6J("ngIf",e.fg.get("new_password").hasError("pattern")),t.xp6(6),t.Q6J("disabled",e.submitted),t.xp6(5),t.Q6J("disabled",e.submitted||e.fg.invalid||!e.fg.dirty),t.xp6(4),t.Udp("background-image","url("+e.image_cover+")")}}const Xt=[{path:"",pathMatch:"full",component:kt,canActivate:[y.t],data:{title:"User - Dashboard Overview",description:"Halaman Informasi Pengguna",keywords:"User",[_.t.decoratorRoles]:[h.yS.ADMIN,h.yS.MODERATOR,h.yS.FANSUBBER,h.yS.USER]}},{path:":username",children:[{path:"",pathMatch:"full",component:pt},{path:"edit",component:(()=>{class s{constructor(e,i,n,r,u,p,b,x,T,C,Z){this.router=e,this.activatedRoute=i,this.toast=n,this.bs=r,this.us=u,this.pi=p,this.fb=b,this.imgbb=x,this.gs=T,this.as=C,this.cs=Z,this.submitted=!1,this.username=null,this.userData=null,this.imagePhoto=null,this.imagePhotoErrorText=null,this.imagePhotoLimitExceeded=null,this.image_photo=null,this.image_photo_original=null,this.imageCover=null,this.imageCoverErrorText=null,this.imageCoverLimitExceeded=null,this.image_cover=null,this.image_cover_original=null,this.passwordHide=!0,this.photoImage=null,this.coverImage=null,this.subsUserDetail=null,this.subsImgbb1=null,this.subsImgbb2=null,this.subsUserUpdate=null,this.subsVerify=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get GS(){return this.gs}togglePassword(){this.passwordHide=!this.passwordHide}ngOnDestroy(){var e,i,n,r,u;null===(e=this.subsUserDetail)||void 0===e||e.unsubscribe(),null===(i=this.subsImgbb1)||void 0===i||i.unsubscribe(),null===(n=this.subsImgbb2)||void 0===n||n.unsubscribe(),null===(r=this.subsUserUpdate)||void 0===r||r.unsubscribe(),null===(u=this.subsVerify)||void 0===u||u.unsubscribe()}ngOnInit(){this.pi.updatePageMetaData("User - Ubah Profile","Halaman Pembaharuan Profile","Ubah Profile"),this.gs.isBrowser&&(this.username=this.activatedRoute.snapshot.paramMap.get("username"),this.bs.busy(),this.subsUserDetail=this.us.getUserData(this.username).subscribe({next:e=>{var i,n;this.gs.log("[USER_DETAIL_SUCCESS]",e),this.bs.idle(),(null===(n=null===(i=this.as.currentUserSubject)||void 0===i?void 0:i.value)||void 0===n?void 0:n.id)!==e.result.id?(this.toast.warning("Profile Ini Milik Orang Lain","Whoops!",null,!0),this.router.navigateByUrl(`/user/${this.username}`)):this.initForm(e.result)},error:e=>{this.gs.log("[USER_DETAIL_ERROR]",e,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:`/user/${this.username}`}})}}))}initForm(e){this.fg=this.fb.group({nama:[e.kartu_tanda_penduduk_.nama,[c.kI.required,c.kI.pattern("^[a-zA-Z. ]+$")]],description:[e.profile_.description,c.kI.compose([c.kI.pattern(_.t.regexEnglishKeyboardKeys)])],old_password:[null,c.kI.compose([c.kI.required,c.kI.minLength(8),c.kI.pattern(_.t.regexEnglishKeyboardKeys)])],new_password:[null,c.kI.compose([c.kI.minLength(8),c.kI.pattern(_.t.regexEnglishKeyboardKeys)])],image_photo:[null,c.kI.compose([c.kI.pattern(_.t.regexUrl)])],image_cover:[null,c.kI.compose([c.kI.pattern(_.t.regexUrl)])],private:[e.private,c.kI.compose([c.kI.required])]}),this.image_photo=e.image_url,this.image_photo_original=this.image_photo,this.image_cover=e.profile_.cover_url,this.image_cover_original=this.image_cover,this.userData=e}uploadPhotoImage(e,i){this.photoImage=i,this.imagePhoto=null,this.imagePhotoLimitExceeded=null,this.imagePhotoErrorText=null,this.fg.controls.image_photo.patchValue(null),this.fg.controls.image_photo.markAsPristine();const n=e.target.files[0];try{const r=new FileReader;r.readAsDataURL(n),r.onload=u=>{if(this.gs.log("[IMAGE_PHOTO_SELECTED]",u),n.size<=_.t.fileSizeImageLimit){const p=this.gs.document.createElement("img");p.onload=()=>{this.imagePhoto=n,this.image_photo=r.result.toString()},p.src=r.result.toString()}else this.imagePhoto=null,this.image_photo="/assets/img/form/image-error.png",this.imagePhotoLimitExceeded=_.t.fileSizeImageLimit,this.photoImage.clear(e)}}catch(r){this.imagePhoto=null,this.image_photo=this.image_photo_original,this.photoImage.clear(e)}}submitPhotoImage(){this.submitted=!0,this.subsImgbb1=this.imgbb.uploadImage({file:this.imagePhoto}).subscribe({next:e=>{this.gs.log("[IMAGE_PHOTO_SUCCESS]",e),this.fg.controls.image_photo.patchValue(e.result.url),this.fg.controls.image_photo.markAsDirty(),this.submitted=!1},error:e=>{var i;this.gs.log("[IMAGE_PHOTO_ERROR]",e,"error"),this.fg.controls.image_photo.patchValue(null),this.fg.controls.image_photo.markAsPristine(),this.submitted=!1,this.imagePhotoErrorText=(null===(i=e.result)||void 0===i?void 0:i.message)||e.info}})}uploadCoverImage(e,i){this.coverImage=i,this.imageCover=null,this.imageCoverLimitExceeded=null,this.imageCoverErrorText=null,this.fg.controls.image_cover.patchValue(null),this.fg.controls.image_cover.markAsPristine();const n=e.target.files[0];try{const r=new FileReader;r.readAsDataURL(n),r.onload=u=>{if(this.gs.log("[IMAGE_COVER_SELECTED]",u),n.size<=_.t.fileSizeImageLimit){const p=this.gs.document.createElement("img");p.onload=()=>{this.imageCover=n,this.image_cover=r.result.toString()},p.src=r.result.toString()}else this.imageCover=null,this.image_cover="/assets/img/form/image-error.png",this.imageCoverLimitExceeded=_.t.fileSizeImageLimit,this.coverImage.clear(e)}}catch(r){this.imageCover=null,this.image_cover=this.image_cover_original,this.coverImage.clear(e)}}submitCoverImage(){this.submitted=!0,this.subsImgbb2=this.imgbb.uploadImage({file:this.imageCover}).subscribe({next:e=>{this.gs.log("[IMAGE_COVER_SUCCESS]",e),this.fg.controls.image_cover.patchValue(e.result.url),this.fg.controls.image_cover.markAsDirty(),this.submitted=!1},error:e=>{var i;this.gs.log("[IMAGE_COVER_ERROR]",e,"error"),this.fg.controls.image_cover.patchValue(null),this.fg.controls.image_cover.markAsPristine(),this.submitted=!1,this.imageCoverErrorText=(null===(i=e.result)||void 0===i?void 0:i.message)||e.info}})}onSubmit(){this.bs.busy();const e=this.gs.getDirtyValues(this.fg);if(e.old_password=this.cs.hashPassword(this.fg.value.old_password),"new_password"in e&&e.new_password&&(e.new_password=this.cs.hashPassword(this.fg.value.new_password)),this.gs.log("[USER_EDIT_DIRTY]",e),this.submitted=!0,this.fg.invalid)return this.submitted=!1,void this.bs.idle();this.subsUserUpdate=this.us.updateUser(this.username,{...e}).subscribe({next:i=>{this.gs.log("[USER_EDIT_SUCCESS]",i),this.submitted=!1,this.bs.idle(),this.as.removeUser(),this.bs.busy(),this.subsVerify=this.as.verify(this.as.token).subscribe({next:n=>{this.gs.log("[VERIFY_LOGIN_SUCCESS]",n),this.bs.idle(),this.router.navigateByUrl(`/user/${this.username}`)},error:n=>{this.gs.log("[VERIFY_LOGIN_ERROR]",n,"error"),this.bs.idle(),this.as.removeUser(),this.router.navigateByUrl(`/user/${this.username}`)}})},error:i=>{this.gs.log("[USER_EDIT_ERROR]",i,"error"),this.submitted=!1,this.bs.idle()}})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(Rt.k),t.Y36(L.z),t.Y36(N.K),t.Y36(J.Z),t.Y36(c.qu),t.Y36(Pt.X),t.Y36(k.U),t.Y36(q.e),t.Y36(Ot.$))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-user-edit"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"container"],[1,"profile-info","align-items-center"],[1,"row","py-3","px-2"],[1,"col-md-4","col-xl-3","px-3"],[1,"row","sticky-top","pt-3"],[1,"col-12"],[1,"w-100","border","rounded-circle",3,"src"],["appearance","outline",1,"pt-3","w-100",3,"color"],[1,"w-100",3,"accept","change"],["photoImage",""],["matSuffix",""],[1,"px-3","w-100"],[4,"ngIf"],["class","col-12 mb-4",4,"ngIf"],[1,"col-12","p-3"],["formControlName","private","matTooltip","Hanya Tampilkan Informasi Profil"],[1,"col-md-8","col-xl-9","pt-3"],[1,"row","py-3","px-0","profile-height-large"],[1,"row","py-3"],["appearance","outline",1,"p-3","col-12",3,"color"],["matInput","","formControlName","nama","placeholder","Nama Lengkap"],["appearance","outline",1,"px-3","pt-3","w-100",3,"color"],["placeholder","Basic Input",1,"w-100",3,"accept","change"],["coverImage",""],["class","col-12 p-3",4,"ngIf"],["formControlName","description",1,"p-3","w-100",3,"config"],["appearance","outline",1,"p-3","w-100",3,"color"],["matInput","","formControlName","old_password","required","","placeholder","Password Sekarang","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","new_password","placeholder","Isi Jika Ingin Ubah Password Baru","autocomplete","new-password",3,"type"],[1,"row"],[1,"row","gy-3"],[1,"col","g-0"],[1,"col-12","col-md-3"],["mat-stroked-button","","routerLink","../",1,"w-100",3,"disabled"],[1,"me-1"],["mat-flat-button","","color","accent","type","submit",1,"w-100",3,"disabled"],[1,"ms-1"],[1,"profile-banner","profile-banner-1","align-items-center"],[1,"profile-banner","profile-banner-2","align-items-center"],[1,"col-12","mb-4"],["mat-raised-button","","color","primary","type","button",1,"w-100",3,"disabled","click"]],template:function(e,i){1&e&&t.YNc(0,$t,85,31,"form",0),2&e&&t.Q6J("ngIf",i.fg)},directives:[d.O5,c._Y,c.JL,c.sg,P.KE,P.hX,f.Yh,K.Hw,P.R9,P.TO,R.lW,wt.Rr,c.JJ,c.u,M.gM,Lt.Nt,c.Fj,E.s6,c.Q7,R.zs,l.yS],pipes:[Nt.$],styles:[".profile-banner[_ngcontent-%COMP%]{height:128px;width:100%;background-size:cover;background-position:center;background-repeat:no-repeat;opacity:.75}.profile-banner-1[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.profile-banner-2[_ngcontent-%COMP%]{position:absolute;top:128px;left:0}.profile-info[_ngcontent-%COMP%]{position:relative;height:256px;z-index:1}@media (min-width: 768px){.profile-height-large[_ngcontent-%COMP%]{height:100px}}"]}),s})(),canActivate:[y.t],data:{title:"User - Ubah Profil",description:"Halaman Pembaharuan Profil Pengguna",keywords:"Ubah Profil",[_.t.decoratorRoles]:[h.yS.ADMIN,h.yS.MODERATOR,h.yS.FANSUBBER,h.yS.USER]}}]}];let te=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[d.ez,l.Bz.forChild(Xt),w.m,g.$,v.L,c.u5,c.UX,f.Ad,E.UM,m.b,U.F,O.T,A.d]]}),s})()},7567:(B,D,a)=>{a.d(D,{Q:()=>w});var d=a(1125),l=a(5e3),c=a(8696),E=a(9808),f=a(7238),_=a(5245);function h(g,v){if(1&g&&l._UZ(0,"h3",8),2&g){const m=l.oxw().$implicit;l.Q6J("innerHTML",m.text,l.oJD)}}function y(g,v){if(1&g&&(l.TgZ(0,"mat-expansion-panel",3)(1,"mat-expansion-panel-header")(2,"mat-panel-title",4)(3,"span",5),l._uU(4),l.qZA()(),l.TgZ(5,"mat-panel-description")(6,"mat-icon",6),l._uU(7),l.qZA()()(),l.YNc(8,h,1,1,"ng-template",7),l.qZA()),2&g){const m=v.$implicit,U=v.first,A=l.oxw(2);l.Q6J("expanded",A.GS.isDesktop&&U),l.xp6(3),l.s9C("matTooltip",m.tooltip),l.Q6J("matTooltipPosition","above"),l.xp6(1),l.hij(" ",m.title," "),l.xp6(3),l.Oqu(m.icon)}}function O(g,v){if(1&g&&(l.TgZ(0,"mat-accordion",1),l.YNc(1,y,9,5,"mat-expansion-panel",2),l.qZA()),2&g){const m=l.oxw();l.xp6(1),l.Q6J("ngForOf",m.panelData)}}let w=(()=>{class g{constructor(m){this.gs=m,this.panelData=[{title:"Title",icon:"warning",text:"Lorem ipsum ...",tooltip:"Info"}]}onResize(m){this.gs.onResize(m,"MATERIAL_EXPANSION_PANEL"),this.gs.isDesktop?this.accordion.openAll():this.accordion.closeAll()}get GS(){return this.gs}ngOnInit(){}}return g.\u0275fac=function(m){return new(m||g)(l.Y36(c.U))},g.\u0275cmp=l.Xpm({type:g,selectors:[["app-material-expansion-panel"]],viewQuery:function(m,U){if(1&m&&l.Gf(d.pp,5),2&m){let A;l.iGM(A=l.CRH())&&(U.accordion=A.first)}},hostBindings:function(m,U){1&m&&l.NdJ("resize",function(I){return U.onResize(I)},!1,l.Jf7)},inputs:{panelData:"panelData"},decls:1,vars:1,consts:[["class","example-headers-align","multi","",4,"ngIf"],["multi","",1,"example-headers-align"],[3,"expanded",4,"ngFor","ngForOf"],[3,"expanded"],[1,"font-weight-bold"],[3,"matTooltip","matTooltipPosition"],[1,"ms-auto"],["matExpansionPanelContent",""],[1,"m-0","text-justify",2,"white-space","pre-line !important",3,"innerHTML"]],template:function(m,U){1&m&&l.YNc(0,O,2,1,"mat-accordion",0),2&m&&l.Q6J("ngIf",U.panelData.length>0)},directives:[E.O5,d.pp,E.sg,d.ib,d.yz,d.yK,f.gM,d.u4,_.Hw,d.HS],styles:[""]}),g})()},6020:(B,D,a)=>{a.d(D,{$:()=>E});var d=a(9808),l=a(210),c=a(5e3);let E=(()=>{class f{}return f.\u0275fac=function(h){return new(h||f)},f.\u0275mod=c.oAB({type:f}),f.\u0275inj=c.cJS({imports:[[d.ez,l.m]]}),f})()}}]);