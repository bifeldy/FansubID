"use strict";(self.webpackChunkmain_site=self.webpackChunkmain_site||[]).push([[38],{2007:(E,p,n)=>{n.r(p),n.d(p,{TicketModule:()=>H});var i=n(6895),l=n(1390),c=n(4006),f=n(5128),o=n(7375),u=n(3659),h=n(1741),d=n(5816),_=n(7357),T=n(2314),M=n(3811),r=n(6533),D=n(9736),a=n(6319),v=n(7032),m=n(859),x=n(4529),R=n(6356),t=n(4650);let A=(()=>{class e{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(g){return new(g||e)};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-ticket-list"]],decls:6,vars:0,template:function(g,O){1&g&&(t.TgZ(0,"p"),t._uU(1,"ticket-list works!"),t.qZA(),t.TgZ(2,"p"),t._uU(3,"cooming-soon!"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"please-come-back-later!"),t.qZA())}})}return e})();var I=n(4674),b=n(3322),k=n(9816),C=n(5141),P=n(3201),Z=n(2970),L=n(4758),y=n(8124),B=n(5882);function S(e,U){if(1&e&&(t.TgZ(0,"a",20),t._uU(1),t.qZA()),2&e){const s=t.oxw(2);t.MGl("routerLink","/user/",s.ticketData.user_.username,""),t.xp6(1),t.hij(" ",s.ticketData.user_.username," ")}}function W(e,U){1&e&&(t.TgZ(0,"span",21),t._uU(1,"Anonim!"),t.qZA())}function K(e,U){if(1&e&&(t.TgZ(0,"div",12),t._uU(1," Ekspektasi Tindakan :: "),t._UZ(2,"br"),t._uU(3),t.qZA()),2&e){const s=t.oxw(2);t.xp6(3),t.hij(" ",s.ticketData.expected_solution," ")}}function N(e,U){if(1&e&&(t.TgZ(0,"div",12),t._uU(1," Hasil Putusan :: "),t._UZ(2,"br"),t._uU(3),t.qZA()),2&e){const s=t.oxw(2);t.xp6(3),t.hij(" ",s.ticketData.final_decision," ")}}function Y(e,U){if(1&e&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",3)(6,"h2",6)(7,"b",7),t._uU(8),t.qZA()()(),t.TgZ(9,"div",3),t._UZ(10,"hr",8),t.qZA(),t.TgZ(11,"div",3)(12,"h5",9),t._uU(13," .: "),t.YNc(14,S,2,2,"a",10),t.YNc(15,W,2,0,"span",11),t._uU(16),t.ALo(17,"date"),t.qZA()()(),t.TgZ(18,"div",12),t._uU(19," URL Terkait :: "),t._UZ(20,"br"),t.TgZ(21,"a",13),t._uU(22),t.qZA()(),t.YNc(23,K,4,1,"div",14),t.YNc(24,N,4,1,"div",14),t.TgZ(25,"div",12),t._uU(26," Isi Laporan :: "),t._UZ(27,"br")(28,"div",15),t.ALo(29,"safeInnerHtml"),t.qZA()()()(),t.TgZ(30,"div",16)(31,"div",17)(32,"h2",18)(33,"b",7),t._uU(34,"Komentar"),t.qZA()()(),t.TgZ(35,"div",3)(36,"div",19),t._UZ(37,"app-discussion"),t.qZA()()()()),2&e){const s=t.oxw();t.xp6(8),t.hij("Ticket #",s.ticketData.id,""),t.xp6(6),t.Q6J("ngIf",s.ticketData.user_),t.xp6(1),t.Q6J("ngIf",!s.ticketData.user_),t.xp6(1),t.hij(" :: ",t.xi3(17,9,s.ticketData.created_at,"d MMMM y, hh:mm:ss a z")," :. "),t.xp6(5),t.s9C("href",s.ticketData.url,t.LSH),t.xp6(1),t.hij(" ",s.ticketData.url," "),t.xp6(1),t.Q6J("ngIf",s.ticketData.expected_solution),t.xp6(1),t.Q6J("ngIf",s.ticketData.final_decision),t.xp6(4),t.Q6J("innerHTML",t.lcZ(29,12,s.ticketData.reported_issue),t.oJD)}}const J=[{path:"",pathMatch:"full",component:A,canActivate:[_.H,d.t],data:{[u.t.decoratorRoles]:[h.yS.ADMIN,h.yS.MODERATOR,h.yS.FANSUBBER,h.yS.USER]}},{path:":ticketId",children:[{path:"",pathMatch:"full",component:(()=>{class e{constructor(s,g,O,j,z,Q,G){this.activatedRoute=s,this.router=g,this.bs=O,this.gs=j,this.pi=z,this.ticket=Q,this.ds=G,this.ticketId=0,this.ticketSecret="",this.ticketData=null,this.subsActRoute=null,this.subsTicket=null,this.subsParam=null,this.subsDialog=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}ngOnDestroy(){this.subsActRoute?.unsubscribe(),this.subsTicket?.unsubscribe(),this.subsParam?.unsubscribe(),this.subsDialog?.unsubscribe()}ngOnInit(){this.gs.isBrowser&&(this.ticketId=Number(this.activatedRoute.snapshot.paramMap.get("ticketId")||""),this.ticketSecret=this.activatedRoute.snapshot.queryParamMap.get("secret")||"",this.promptSecret())}promptSecret(){this.subsDialog=this.ds.openInputDialog({data:{title:"Masukkan Kata Sandi Secret Key",input:{secret:{inputLabel:"Secret",inputPlaceholder:I.N.apiKey,inputValue:this.ticketSecret,inputRequired:!0}},confirmText:"OK"}}).afterClosed().subscribe({next:s=>{this.gs.log("[INPUT_DIALOG_CLOSED]",s),s&&(this.ticketSecret=s.secret),this.getTicket(),this.subsDialog.unsubscribe()}})}getTicket(){this.bs.busy(),this.subsTicket=this.ticket.getTicket(this.ticketId,this.ticketSecret).subscribe({next:s=>{this.gs.log("[TICKET_DETAIL_SUCCESS]",s),this.ticketData=s.result,this.pi.updatePageMetaData(`Ticket #${this.ticketData.id}`,this.ticketData.reported_issue,this.ticketData.url),this.bs.idle()},error:s=>{this.gs.log("[TICKET_DETAIL_ERROR]",s,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:"/ticket"}})}})}static#t=this.\u0275fac=function(g){return new(g||e)(t.Y36(l.gz),t.Y36(l.F0),t.Y36(b.z),t.Y36(k.U),t.Y36(C.Z),t.Y36(P.w),t.Y36(Z.x))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-ticket-detail"]],decls:2,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row","pb-3","px-0"],[1,"col-12"],[1,"row"],[1,"sticky-top","bg-bifeldy"],[1,"pt-3","m-0"],[1,"text-bifeldy"],[1,"my-1","border-bottom-dotted",2,"height","4px","background","url('/assets/img/stripe.png')"],[1,"pb-3","m-0","text-bifeldy"],["class","text-warning text-decoration-none",3,"routerLink",4,"ngIf"],["class","text-warning",4,"ngIf"],[1,"col-12","pt-3","mt-3"],["target","_blank",1,"text-warning","text-decoration-none",3,"href"],["class","col-12 pt-3 mt-3",4,"ngIf"],[3,"innerHTML"],[1,"row","pt-3"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"p-3"],[1,"text-warning","text-decoration-none",3,"routerLink"],[1,"text-warning"]],template:function(g,O){1&g&&(t._UZ(0,"app-notifications"),t.YNc(1,Y,38,14,"div",0)),2&g&&(t.xp6(1),t.Q6J("ngIf",O.ticketData))},dependencies:[i.O5,l.rH,L.t,y.S,i.uU,B.H]})}return e})()}]}];let H=(()=>{class e{static#t=this.\u0275fac=function(g){return new(g||e)};static#i=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[i.ez,l.Bz.forChild(J),R.R,T.m,D.L,c.u5,c.UX,f.Ad,a.F,o.UM,m.R,v.A,r.P,x.R,M.T]})}return e})()},6533:(E,p,n)=>{n.d(p,{P:()=>f});var i=n(6895),l=n(2314),c=n(4650);let f=(()=>{class o{static#t=this.\u0275fac=function(d){return new(d||o)};static#i=this.\u0275mod=c.oAB({type:o});static#n=this.\u0275inj=c.cJS({imports:[i.ez,l.m]})}return o})()},7299:(E,p,n)=>{n.d(p,{H:()=>h});var i=n(6895),l=n(4006),c=n(2314),f=n(6533),o=n(3811),u=n(4650);let h=(()=>{class d{static#t=this.\u0275fac=function(M){return new(M||d)};static#i=this.\u0275mod=u.oAB({type:d});static#n=this.\u0275inj=u.cJS({imports:[i.ez,c.m,f.P,l.u5,o.T]})}return d})()},4758:(E,p,n)=>{n.d(p,{t:()=>M});var i=n(4650),l=n(1390),c=n(9816),f=n(8598),o=n(6895),u=n(5882);function h(r,D){if(1&r&&i._UZ(0,"div",4),2&r){const a=i.oxw();i.Udp("background-size",a.GS.sizeContain?"contain":"cover")("background-image","url("+a.GS.bannerImg+")")("background-repeat",a.GS.bgRepeat?"repeat-x":"no-repeat")("height",a.ROUTER.url.startsWith("/news")||a.ROUTER.url.startsWith("/berkas")||a.ROUTER.url.startsWith("/fansub")?"192px":"128px")("background-position-y",a.ROUTER.url.startsWith("/berkas")?"22.5%":"")}}function d(r,D){if(1&r&&(i.TgZ(0,"strong",10),i._uU(1," -- "),i.TgZ(2,"i")(3,"a",11),i._uU(4),i.qZA()()()),2&r){const a=i.oxw().$implicit;i.xp6(3),i.MGl("routerLink","/user/",a.notifCreator,""),i.xp6(1),i.hij(" ",a.notifCreator," ")}}function _(r,D){if(1&r){const a=i.EpF();i.TgZ(0,"button",12),i.NdJ("click",function(){i.CHM(a);const m=i.oxw().$implicit,x=i.oxw();return i.KtG(x.removeNotif(m.notifData.id))}),i.qZA()}}function T(r,D){if(1&r&&(i.TgZ(0,"div",5)(1,"div")(2,"strong",6),i._uU(3),i.qZA(),i._UZ(4,"span",7),i.ALo(5,"safeInnerHtml"),i.YNc(6,d,5,2,"strong",8),i.YNc(7,_,1,0,"button",9),i.qZA()()),2&r){const a=D.$implicit;i.xp6(1),i.Gre("alert alert-",a.notifData.type," alert-dismissible fade show"),i.xp6(2),i.Oqu(a.notifData.title),i.xp6(1),i.Q6J("innerHTML",i.lcZ(5,7,a.notifData.content),i.oJD),i.xp6(2),i.Q6J("ngIf",a.notifCreator),i.xp6(1),i.Q6J("ngIf",a.notifData.dismissible)}}let M=(()=>{class r{constructor(a,v,m){this.router=a,this.gs=v,this.notif=m}ngOnInit(){}get GS(){return this.gs}get ROUTER(){return this.router}get NOTIF(){return this.notif}removeNotif(a){this.notif.removeNotif(a)}static#t=this.\u0275fac=function(v){return new(v||r)(i.Y36(l.F0),i.Y36(c.U),i.Y36(f.T))};static#i=this.\u0275cmp=i.Xpm({type:r,selectors:[["app-notifications"]],decls:4,vars:2,consts:[["class","container-fluid notif-banner align-items-center",3,"background-size","background-image","background-repeat","height","background-position-y",4,"ngIf"],[1,"container"],[1,"row","pt-3"],["class","col-12",4,"ngFor","ngForOf"],[1,"container-fluid","notif-banner","align-items-center"],[1,"col-12"],[1,"me-1"],[3,"innerHTML"],["class","ms-1",4,"ngIf"],["type","button","class","btn-close","data-dismiss","alert",3,"click",4,"ngIf"],[1,"ms-1"],[1,"text-decoration-none",3,"routerLink"],["type","button","data-dismiss","alert",1,"btn-close",3,"click"]],template:function(v,m){1&v&&(i.YNc(0,h,1,10,"div",0),i.TgZ(1,"div",1)(2,"div",2),i.YNc(3,T,8,9,"div",3),i.qZA()()),2&v&&(i.Q6J("ngIf",m.GS.bannerImg&&(m.ROUTER.url.startsWith("/news")||m.ROUTER.url.startsWith("/berkas")||m.ROUTER.url.startsWith("/fansub")||m.ROUTER.url.startsWith("/anime")||m.ROUTER.url.startsWith("/dorama"))),i.xp6(3),i.Q6J("ngForOf",m.NOTIF.notifications))},dependencies:[o.sg,o.O5,l.rH,u.H],styles:[".notif-banner[_ngcontent-%COMP%]{width:100%;background-size:cover;background-position:75% 50%}"]})}return r})()},6319:(E,p,n)=>{n.d(p,{F:()=>o});var i=n(6895),l=n(1390),c=n(3811),f=n(4650);let o=(()=>{class u{static#t=this.\u0275fac=function(_){return new(_||u)};static#i=this.\u0275mod=f.oAB({type:u});static#n=this.\u0275inj=f.cJS({imports:[i.ez,l.Bz,c.T]})}return u})()},1105:(E,p,n)=>{n.d(p,{R:()=>l});var i=n(4650);let l=(()=>{class c{transform(o,u){if(o){const h=Math.floor((+new Date-+new Date(o))/1e3),d={tahun:31536e3,bulan:2592e3,minggu:604800,hari:86400,jam:3600,menit:60,detik:1};let _;for(const T of Object.keys(d))if(_=Math.floor(h/d[T]),_>0)return _+" "+T+" lalu"}return o}static#t=this.\u0275fac=function(u){return new(u||c)};static#i=this.\u0275pipe=i.Yjl({name:"dateAgo",type:c,pure:!0})}return c})()}}]);