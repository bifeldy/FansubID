"use strict";(self.webpackChunkmain_site=self.webpackChunkmain_site||[]).push([[38],{2007:(E,h,s)=>{s.r(h),s.d(h,{TicketModule:()=>j});var i=s(6895),l=s(1390),c=s(4006),f=s(5128),o=s(7375),u=s(3659),g=s(1741),d=s(5816),_=s(7357),T=s(2314),U=s(3811),r=s(6533),D=s(9736),e=s(6319),v=s(7032),m=s(859),R=s(4529),x=s(6356),t=s(4650);let A=(()=>{class a{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(p){return new(p||a)};static#i=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-ticket-list"]],decls:6,vars:0,template:function(p,M){1&p&&(t.TgZ(0,"p"),t._uU(1,"ticket-list works!"),t.qZA(),t.TgZ(2,"p"),t._uU(3,"cooming-soon!"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"please-come-back-later!"),t.qZA())}})}return a})();var I=s(4674),b=s(3322),k=s(9816),C=s(5141),P=s(3201),Z=s(2970),y=s(4758),L=s(8124),B=s(5882);function W(a,O){if(1&a&&(t.TgZ(0,"a",20),t._uU(1),t.qZA()),2&a){const n=t.oxw(2);t.MGl("routerLink","/user/",n.ticketData.user_.username,""),t.xp6(1),t.hij(" ",n.ticketData.user_.username," ")}}function S(a,O){1&a&&(t.TgZ(0,"span",21),t._uU(1,"Anonim!"),t.qZA())}function K(a,O){if(1&a&&(t.TgZ(0,"div",12),t._uU(1," Ekspektasi Tindakan :: "),t._UZ(2,"br"),t._uU(3),t.qZA()),2&a){const n=t.oxw(2);t.xp6(3),t.hij(" ",n.ticketData.expected_solution," ")}}function N(a,O){if(1&a&&(t.TgZ(0,"div",12),t._uU(1," Hasil Putusan :: "),t._UZ(2,"br"),t._uU(3),t.qZA()),2&a){const n=t.oxw(2);t.xp6(3),t.hij(" ",n.ticketData.final_decision," ")}}function Y(a,O){if(1&a&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",3)(6,"h2",6)(7,"b",7),t._uU(8),t.qZA()()(),t.TgZ(9,"div",3),t._UZ(10,"hr",8),t.qZA(),t.TgZ(11,"div",3)(12,"h5",9),t._uU(13," .: "),t.YNc(14,W,2,2,"a",10),t.YNc(15,S,2,0,"span",11),t._uU(16),t.ALo(17,"date"),t.qZA()()(),t.TgZ(18,"div",12),t._uU(19," URL Terkait :: "),t._UZ(20,"br"),t.TgZ(21,"a",13),t._uU(22),t.qZA()(),t.YNc(23,K,4,1,"div",14),t.YNc(24,N,4,1,"div",14),t.TgZ(25,"div",12),t._uU(26," Isi Laporan :: "),t._UZ(27,"br")(28,"div",15),t.ALo(29,"safeInnerHtml"),t.qZA()()()(),t.TgZ(30,"div",16)(31,"div",17)(32,"h2",18)(33,"b",7),t._uU(34,"Komentar"),t.qZA()()(),t.TgZ(35,"div",3)(36,"div",19),t._UZ(37,"app-discussion"),t.qZA()()()()),2&a){const n=t.oxw();t.xp6(8),t.hij("Ticket #",n.ticketData.id,""),t.xp6(6),t.Q6J("ngIf",n.ticketData.user_),t.xp6(1),t.Q6J("ngIf",!n.ticketData.user_),t.xp6(1),t.hij(" :: ",t.xi3(17,9,n.ticketData.created_at,"d MMMM y, hh:mm:ss a z")," :. "),t.xp6(5),t.s9C("href",n.ticketData.url,t.LSH),t.xp6(1),t.hij(" ",n.ticketData.url," "),t.xp6(1),t.Q6J("ngIf",n.ticketData.expected_solution),t.xp6(1),t.Q6J("ngIf",n.ticketData.final_decision),t.xp6(4),t.Q6J("innerHTML",t.lcZ(29,12,n.ticketData.reported_issue),t.oJD)}}const J=[{path:"",pathMatch:"full",component:A,canActivate:[_.H,d.t],data:{[u.t.decoratorRoles]:[g.yS.ADMIN,g.yS.MODERATOR,g.yS.FANSUBBER,g.yS.USER]}},{path:":ticketId",children:[{path:"",pathMatch:"full",component:(()=>{class a{constructor(n,p,M,H,z,Q,G){this.activatedRoute=n,this.router=p,this.bs=M,this.gs=H,this.pi=z,this.ticket=Q,this.ds=G,this.ticketId=0,this.ticketSecret="",this.ticketData=null,this.subsActRoute=null,this.subsTicket=null,this.subsParam=null,this.subsDialog=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}ngOnDestroy(){this.subsActRoute?.unsubscribe(),this.subsTicket?.unsubscribe(),this.subsParam?.unsubscribe(),this.subsDialog?.unsubscribe()}ngOnInit(){this.gs.isBrowser&&(this.ticketId=Number(this.activatedRoute.snapshot.paramMap.get("ticketId")||""),this.ticketSecret=this.activatedRoute.snapshot.queryParamMap.get("secret")||"",this.promptSecret())}promptSecret(){this.subsDialog=this.ds.openInputDialog({data:{title:"Masukkan Kata Sandi Secret Key",input:{secret:{inputLabel:"Secret",inputPlaceholder:I.N.apiKey,inputValue:this.ticketSecret,inputRequired:!0}},confirmText:"OK"}}).afterClosed().subscribe({next:n=>{this.gs.log("[INPUT_DIALOG_CLOSED]",n),n&&(this.ticketSecret=n.secret),this.getTicket(),this.subsDialog.unsubscribe()}})}getTicket(){this.bs.busy(),this.subsTicket=this.ticket.getTicket(this.ticketId,this.ticketSecret).subscribe({next:n=>{this.gs.log("[TICKET_DETAIL_SUCCESS]",n),this.ticketData=n.result,this.pi.updatePageMetaData(`Ticket #${this.ticketData.id}`,this.ticketData.reported_issue,this.ticketData.url),this.bs.idle()},error:n=>{this.gs.log("[TICKET_DETAIL_ERROR]",n,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{...this.activatedRoute.snapshot.queryParams,returnUrl:"/ticket"}})}})}static#t=this.\u0275fac=function(p){return new(p||a)(t.Y36(l.gz),t.Y36(l.F0),t.Y36(b.z),t.Y36(k.U),t.Y36(C.Z),t.Y36(P.w),t.Y36(Z.x))};static#i=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-ticket-detail"]],decls:2,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row","pb-3","px-0"],[1,"col-12"],[1,"row"],[1,"sticky-top","bg-bifeldy"],[1,"pt-3","m-0"],[1,"text-bifeldy"],[1,"my-1","border-bottom-dotted",2,"height","4px","background","url('/assets/img/stripe.png')"],[1,"pb-3","m-0","text-bifeldy"],["class","text-warning text-decoration-none",3,"routerLink",4,"ngIf"],["class","text-warning",4,"ngIf"],[1,"col-12","pt-3","mt-3"],["target","_blank",1,"text-warning","text-decoration-none",3,"href"],["class","col-12 pt-3 mt-3",4,"ngIf"],[3,"innerHTML"],[1,"row","pt-3"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"p-3"],[1,"text-warning","text-decoration-none",3,"routerLink"],[1,"text-warning"]],template:function(p,M){1&p&&(t._UZ(0,"app-notifications"),t.YNc(1,Y,38,14,"div",0)),2&p&&(t.xp6(1),t.Q6J("ngIf",M.ticketData))},dependencies:[i.O5,l.rH,y.t,L.S,i.uU,B.H]})}return a})()}]}];let j=(()=>{class a{static#t=this.\u0275fac=function(p){return new(p||a)};static#i=this.\u0275mod=t.oAB({type:a});static#s=this.\u0275inj=t.cJS({imports:[i.ez,l.Bz.forChild(J),x.R,T.m,D.L,c.u5,c.UX,f.Ad,e.F,o.UM,m.R,v.A,r.P,R.R,U.T]})}return a})()},6533:(E,h,s)=>{s.d(h,{P:()=>f});var i=s(6895),l=s(2314),c=s(4650);let f=(()=>{class o{static#t=this.\u0275fac=function(d){return new(d||o)};static#i=this.\u0275mod=c.oAB({type:o});static#s=this.\u0275inj=c.cJS({imports:[i.ez,l.m]})}return o})()},7299:(E,h,s)=>{s.d(h,{H:()=>g});var i=s(6895),l=s(4006),c=s(2314),f=s(6533),o=s(3811),u=s(4650);let g=(()=>{class d{static#t=this.\u0275fac=function(U){return new(U||d)};static#i=this.\u0275mod=u.oAB({type:d});static#s=this.\u0275inj=u.cJS({imports:[i.ez,c.m,f.P,l.u5,o.T]})}return d})()},4758:(E,h,s)=>{s.d(h,{t:()=>U});var i=s(4650),l=s(1390),c=s(9816),f=s(8598),o=s(6895),u=s(5882);function g(r,D){if(1&r&&i._UZ(0,"div",4),2&r){const e=i.oxw();i.Udp("background-size",e.GS.sizeContain?"contain":"cover")("background-image","url("+e.GS.bannerImg+")")("background-repeat",e.GS.bgRepeat?"repeat-x":"no-repeat")("height",e.ROUTER.url.startsWith("/news")||e.ROUTER.url.startsWith("/berkas")||e.ROUTER.url.startsWith("/search")||e.ROUTER.url.startsWith("/fansub")?"192px":"128px")("background-position-y",e.ROUTER.url.startsWith("/berkas")||e.ROUTER.url.startsWith("/search")?"22.5%":"")}}function d(r,D){if(1&r&&(i.TgZ(0,"strong",10),i._uU(1," -- "),i.TgZ(2,"i")(3,"a",11),i._uU(4),i.qZA()()()),2&r){const e=i.oxw().$implicit;i.xp6(3),i.MGl("routerLink","/user/",e.notifCreator,""),i.xp6(1),i.hij(" ",e.notifCreator," ")}}function _(r,D){if(1&r){const e=i.EpF();i.TgZ(0,"button",12),i.NdJ("click",function(){i.CHM(e);const m=i.oxw().$implicit,R=i.oxw();return i.KtG(R.removeNotif(m.notifData.id))}),i.qZA()}}function T(r,D){if(1&r&&(i.TgZ(0,"div",5)(1,"div")(2,"strong",6),i._uU(3),i.qZA(),i._UZ(4,"span",7),i.ALo(5,"safeInnerHtml"),i.YNc(6,d,5,2,"strong",8),i.YNc(7,_,1,0,"button",9),i.qZA()()),2&r){const e=D.$implicit;i.xp6(1),i.Gre("alert alert-",e.notifData.type," alert-dismissible fade show"),i.xp6(2),i.Oqu(e.notifData.title),i.xp6(1),i.Q6J("innerHTML",i.lcZ(5,7,e.notifData.content),i.oJD),i.xp6(2),i.Q6J("ngIf",e.notifCreator),i.xp6(1),i.Q6J("ngIf",e.notifData.dismissible)}}let U=(()=>{class r{constructor(e,v,m){this.router=e,this.gs=v,this.notif=m}ngOnInit(){}get GS(){return this.gs}get ROUTER(){return this.router}get NOTIF(){return this.notif}removeNotif(e){this.notif.removeNotif(e)}static#t=this.\u0275fac=function(v){return new(v||r)(i.Y36(l.F0),i.Y36(c.U),i.Y36(f.T))};static#i=this.\u0275cmp=i.Xpm({type:r,selectors:[["app-notifications"]],decls:4,vars:2,consts:[["class","container-fluid notif-banner align-items-center",3,"background-size","background-image","background-repeat","height","background-position-y",4,"ngIf"],[1,"container"],[1,"row","pt-3"],["class","col-12",4,"ngFor","ngForOf"],[1,"container-fluid","notif-banner","align-items-center"],[1,"col-12"],[1,"me-1"],[3,"innerHTML"],["class","ms-1",4,"ngIf"],["type","button","class","btn-close","data-dismiss","alert",3,"click",4,"ngIf"],[1,"ms-1"],[1,"text-decoration-none",3,"routerLink"],["type","button","data-dismiss","alert",1,"btn-close",3,"click"]],template:function(v,m){1&v&&(i.YNc(0,g,1,10,"div",0),i.TgZ(1,"div",1)(2,"div",2),i.YNc(3,T,8,9,"div",3),i.qZA()()),2&v&&(i.Q6J("ngIf",m.GS.bannerImg&&(m.ROUTER.url.startsWith("/news")||m.ROUTER.url.startsWith("/berkas")||m.ROUTER.url.startsWith("/search")||m.ROUTER.url.startsWith("/fansub")||m.ROUTER.url.startsWith("/anime")||m.ROUTER.url.startsWith("/dorama"))),i.xp6(3),i.Q6J("ngForOf",m.NOTIF.notifications))},dependencies:[o.sg,o.O5,l.rH,u.H],styles:[".notif-banner[_ngcontent-%COMP%]{width:100%;background-size:cover;background-position:75% 50%}"]})}return r})()},6319:(E,h,s)=>{s.d(h,{F:()=>o});var i=s(6895),l=s(1390),c=s(3811),f=s(4650);let o=(()=>{class u{static#t=this.\u0275fac=function(_){return new(_||u)};static#i=this.\u0275mod=f.oAB({type:u});static#s=this.\u0275inj=f.cJS({imports:[i.ez,l.Bz,c.T]})}return u})()},1105:(E,h,s)=>{s.d(h,{R:()=>l});var i=s(4650);let l=(()=>{class c{transform(o,u){if(o){const g=Math.floor((+new Date-+new Date(o))/1e3),d={tahun:31536e3,bulan:2592e3,minggu:604800,hari:86400,jam:3600,menit:60,detik:1};let _;for(const T of Object.keys(d))if(_=Math.floor(g/d[T]),_>0)return _+" "+T+" lalu"}return"Baru saja"}static#t=this.\u0275fac=function(u){return new(u||c)};static#i=this.\u0275pipe=i.Yjl({name:"dateAgo",type:c,pure:!0})}return c})()}}]);