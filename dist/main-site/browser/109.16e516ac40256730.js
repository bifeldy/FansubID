"use strict";(self.webpackChunkmain_site=self.webpackChunkmain_site||[]).push([[109],{9109:(M,E,o)=>{o.r(E),o.d(E,{UserModule:()=>ee});var p=o(6895),r=o(1390),u=o(4006),U=o(7375),x=o(5128),h=o(3659),d=o(1741),k=o(5816),K=o(3811),O=o(2314),_=o(9560),C=o(9736),m=o(8866),f=o(6319),v=o(5208),b=o(4674),t=o(4650),B=o(2972),y=o(9816),w=o(3322),F=o(5312),G=o(5141),P=o(1140),q=o(7396),Q=o(1428),Z=o(9818),H=o(3238),L=o(7392),T=o(9982),N=o(7462),j=o(801),V=o(1338),$=o(3710);function z(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",31),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.badgeClicked(n.userData.role))}),t.qZA()}if(2&i){const e=t.oxw(2);t.s9C("matTooltip",e.userData.role)}}function W(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",32),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.badgeClicked(n.userData.role))}),t.qZA()}if(2&i){const e=t.oxw(2);t.s9C("matTooltip",e.userData.role)}}function X(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",33),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.badgeClicked(n.userData.role))}),t.qZA()}if(2&i){const e=t.oxw(2);t.s9C("matTooltip",e.userData.role)}}function tt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.badgeClicked("Terverifikasi"))}),t.qZA()}}function et(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",35),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.badgeClicked("Banned :: "+n.userBanned.reason))}),t.qZA()}if(2&i){const e=t.oxw(2);t.MGl("matTooltip","Banned :: ",e.userBanned.reason,"")}}function it(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.badgeClicked(n.accountAge+" Years of Service"))}),t.qZA()}if(2&i){const e=t.oxw(2);t.MGl("matTooltip","",e.accountAge," Years of Service")}}function st(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.badgeClicked("Sharing is Caring"))}),t.qZA()}}function nt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.badgeClicked("Akun Private"))}),t.qZA()}}function ot(i,l){if(1&i&&(t.TgZ(0,"mat-list-option",47),t._UZ(1,"img",48),t.TgZ(2,"a",49)(3,"span",50),t._uU(4),t.qZA(),t.TgZ(5,"span",51),t._uU(6),t.qZA()()()),2&i){const e=l.$implicit;t.MGl("routerLink","/fansub/",e.fansub_.slug,""),t.xp6(1),t.s9C("src",e.fansub_.image_url,t.LSH),t.xp6(3),t.hij(" ",e.keterangan," "),t.xp6(2),t.Oqu(e.fansub_.slug)}}function at(i,l){if(1&i&&(t.TgZ(0,"div",6)(1,"div",39)(2,"div",40)(3,"h2",41)(4,"b",42),t._uU(5,"Group Fansub"),t.qZA()()(),t.TgZ(6,"div",43)(7,"div",44)(8,"mat-selection-list",45),t.YNc(9,ot,7,4,"mat-list-option",46),t.qZA()()()()()),2&i){const e=t.oxw(2);t.xp6(8),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",e.groupFansub)}}function rt(i,l){if(1&i&&(t.TgZ(0,"button",52),t._UZ(1,"mat-icon",53),t._uU(2),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",e.userData.id," ")}}function lt(i,l){if(1&i&&(t.TgZ(0,"button",54),t._UZ(1,"mat-icon",55),t._uU(2),t.ALo(3,"date"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.xi3(3,1,e.userData.created_at,"d/M/yyyy, hh:mm:ss a z")," ")}}function ut(i,l){if(1&i&&(t.TgZ(0,"div",39),t._UZ(1,"app-material-expansion-panel",56),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("panelData",e.panelData)}}function ct(i,l){1&i&&(t.TgZ(0,"div",39)(1,"div",6),t._UZ(2,"app-report"),t.qZA()())}function pt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),t._UZ(6,"img",7),t.qZA(),t.TgZ(7,"div",8),t.YNc(8,z,1,1,"mat-icon",9),t.YNc(9,W,1,1,"mat-icon",10),t.YNc(10,X,1,1,"mat-icon",11),t.YNc(11,tt,1,0,"mat-icon",12),t.YNc(12,et,1,1,"mat-icon",13),t.YNc(13,it,1,1,"mat-icon",14),t.YNc(14,st,1,0,"mat-icon",15),t.YNc(15,nt,1,0,"mat-icon",16),t.qZA(),t.YNc(16,at,10,2,"div",17),t.qZA()(),t.TgZ(17,"div",18)(18,"div",19)(19,"h1",20)(20,"b"),t._uU(21),t.qZA()()(),t.TgZ(22,"div",21),t.YNc(23,rt,3,1,"button",22),t.YNc(24,lt,4,4,"button",23),t.TgZ(25,"button",24),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.createMailbox())}),t._UZ(26,"mat-icon",25),t._uU(27),t.qZA()(),t.YNc(28,ut,2,1,"div",26),t.YNc(29,ct,3,0,"div",26),t.qZA()(),t.TgZ(30,"div",27)(31,"div",6)(32,"app-material-tab",28),t.NdJ("tableRowClicked",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.openBerkas(n))})("paginatorClicked",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.onPaginatorClicked(n))})("serverSideFilter",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.onServerSideFilter(n))})("serverSideOrder",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.onServerSideOrder(n))}),t.qZA()()()(),t._UZ(33,"div",29)(34,"div",30),t.qZA()}if(2&i){const e=t.oxw();t.xp6(6),t.s9C("src",e.userData.image_url,t.LSH),t.xp6(2),t.Q6J("ngIf",e.userData.role===e.ADMIN),t.xp6(1),t.Q6J("ngIf",e.userData.role===e.MODERATOR),t.xp6(1),t.Q6J("ngIf",e.userData.role===e.FANSUBBER),t.xp6(1),t.Q6J("ngIf",e.userData.verified),t.xp6(1),t.Q6J("ngIf",e.userBanned),t.xp6(1),t.Q6J("ngIf",e.accountAge>0),t.xp6(1),t.Q6J("ngIf",e.count>0),t.xp6(1),t.Q6J("ngIf",e.userData.private),t.xp6(1),t.Q6J("ngIf",e.groupFansub.length>0),t.xp6(5),t.Oqu(e.userData.kartu_tanda_penduduk_.nama),t.xp6(2),t.Q6J("ngIf",e.userData.id),t.xp6(1),t.Q6J("ngIf",e.userData.created_at),t.xp6(3),t.AsE(" ",e.userData.username,"@",e.ENV.domain," "),t.xp6(1),t.Q6J("ngIf",e.panelData.length>0),t.xp6(1),t.Q6J("ngIf",null==e.SS.mySocket?null:e.SS.mySocket.id),t.xp6(3),t.Q6J("tabData",e.tabData)("count",e.count)("serverSide",!0),t.xp6(1),t.Udp("background-image","url("+e.userData.profile_.cover_url+")")}}let mt=(()=>{class i{constructor(e,s,n,a,c,g,A,S,I,D){this.snackBar=e,this.router=s,this.activatedRoute=n,this.gs=a,this.bs=c,this.fs=g,this.pi=A,this.us=S,this.ss=I,this.berkas=D,this.username="",this.userData=null,this.userBanned=null,this.groupFansub=[],this.berkasUser=[],this.allBerkasUserId=[],this.panelData=[],this.tabData=[{name:"Berkas",icon:"file_copy",type:"table",data:{column:["Proyek","Nama Berkas","Tanggal","Kunjungan","Pemilik"],row:[]}}],this.count=0,this.page=1,this.row=10,this.q="",this.sort="",this.order="",this.subsUser=null,this.subsBerkas=null,this.subsBanned=null,this.subsParam=null,this.subsGroupGet=null,this.subsTrusted=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get SS(){return this.ss}ngOnDestroy(){this.subsUser?.unsubscribe(),this.subsBerkas?.unsubscribe(),this.subsBanned?.unsubscribe(),this.subsParam?.unsubscribe(),this.subsGroupGet?.unsubscribe(),this.subsTrusted?.unsubscribe()}get ADMIN(){return d.yS.ADMIN}get MODERATOR(){return d.yS.MODERATOR}get FANSUBBER(){return d.yS.FANSUBBER}get accountAge(){return Math.abs(new Date(Date.now()-new Date(this.userData.created_at).getTime()).getUTCFullYear()-1970)}get ENV(){return b.N}ngOnInit(){this.subsParam=this.activatedRoute.params.subscribe({next:e=>{this.username=e.username,this.bs.busy(),this.subsUser=this.us.getUserData(this.username).subscribe({next:s=>{this.gs.log("[USER_DETAIL_SUCCESS]",s),this.userData=s.result,this.pi.updatePageMetaData(this.userData.kartu_tanda_penduduk_.nama,this.userData.profile_.description,this.userData.username,this.userData.image_url,this.userData.username),this.bs.idle(),this.gs.isBrowser&&(this.panelData=[],this.panelData.push({title:"Tentang Saya",icon:"info",text:this.userData.profile_.description}),this.fs.initializeFab("edit",null,"Ubah Profil",`/user/${this.username}/edit`,!1),this.checkBanned(),this.getUserGroup(),this.getUserBerkas())},error:s=>{this.gs.log("[USER_DETAIL_ERROR]",s,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:"/"}})}})}})}checkBanned(){this.bs.busy(),this.subsBanned=this.us.checkBanned(this.userData.username).subscribe({next:e=>{this.gs.log("[USER_CHECK_BANNED_SUCCESS]",e),Object.keys(e.results[this.userData.username]).length>0&&(this.userBanned=e.results[this.userData.username]),this.bs.idle()},error:e=>{this.gs.log("[USER_CHECK_BANNED_ERROR]",e,"error"),this.bs.idle()}})}getUserBerkas(){this.bs.busy(),this.subsBerkas&&(this.subsBerkas.unsubscribe(),this.bs.idle()),this.subsBerkas=this.us.getUserBerkas(this.username,this.q,this.page,this.row,this.sort,this.order).subscribe({next:e=>{this.gs.log("[USER_BERKAS_LIST_SUCCESS]",e),this.count=e.count,this.berkasUser=[];for(const s of e.results)this.allBerkasUserId.push(s.id),this.berkasUser.push({id:s.id,private:s.private,foto:s.user_.image_url,Proyek:s.project_type_.name,Tanggal:s.created_at,Kunjungan:s.view_count,Pemilik:s.user_.username,"Nama Berkas":s.name,DARK:s.r18});this.tabData[0].data.row=this.berkasUser,this.allBerkasUserId.length>0&&this.checkTrusted(),this.bs.idle()},error:e=>{this.gs.log("[USER_BERKAS_LIST_ERROR]",e,"error"),this.bs.idle()}})}checkTrusted(){this.bs.busy(),this.subsTrusted&&(this.subsTrusted.unsubscribe(),this.bs.idle()),this.subsTrusted=this.berkas.checkTrusted(this.allBerkasUserId).subscribe({next:e=>{this.gs.log("[USER_BERKAS_TRUSTED_SUCCESS]",e);for(const s of this.berkasUser)s.trusted=e.results[s.id];this.bs.idle()},error:e=>{this.gs.log("[USER_BERKAS_TRUSTED_ERROR]",e,"error"),this.bs.idle()}})}openBerkas(e){this.gs.log("[USER_BERKAS_LIST_CLICK_BERKAS]",e),this.router.navigateByUrl(`/berkas/${e.id}`)}onPaginatorClicked(e){this.gs.log("[USER_BERKAS_LIST_CLICK_PAGINATOR]",e),this.page=e.pageIndex+1,this.row=e.pageSize,this.getUserBerkas()}onServerSideFilter(e){this.gs.log("[USER_BERKAS_LIST_ENTER_FILTER]",e),this.q=e,this.getUserBerkas()}onServerSideOrder(e){this.gs.log("[USER_BERKAS_CLICK_ORDER]",e),this.q=e.q,this.sort=e.active,this.order=e.direction,this.getUserBerkas()}getUserGroup(){this.bs.busy(),this.subsGroupGet=this.us.getUserGroup(this.username).subscribe({next:e=>{this.gs.log("[USER_DETAIL_GROUP_LIST_SUCCESS]",e),this.groupFansub=e.results,this.bs.idle()},error:e=>{this.gs.log("[USER_DETAIL_GROUP_LIST_ERROR]",e,"error"),this.bs.idle()}})}createMailbox(){this.router.navigate(["/create/mailbox"],{queryParams:{to:`${this.userData.username}@${b.N.domain}`}})}badgeClicked(e){this.snackBar.open(e,"OK")}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(B.pl),t.Y36(r.F0),t.Y36(r.gz),t.Y36(y.U),t.Y36(w.z),t.Y36(F.r),t.Y36(G.Z),t.Y36(P.K),t.Y36(q.R),t.Y36(Q.A))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-detail"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"profile-info","align-items-center",2,"top","64px","position","relative"],[1,"row","py-3","px-2"],[1,"col-md-4","col-xl-3","px-3"],[1,"row","sticky-top","pt-3"],[1,"col-12"],[1,"profile-image",3,"src"],[1,"col-12","my-3"],["fontIcon","handyman","class","mx-1","style","cursor: pointer;",3,"matTooltip","click",4,"ngIf"],["fontIcon","security","class","mx-1","style","cursor: pointer;",3,"matTooltip","click",4,"ngIf"],["fontIcon","rate_review","class","mx-1","style","cursor: pointer;",3,"matTooltip","click",4,"ngIf"],["fontIcon","verified","class","mx-1","matTooltip","Terverifikasi","style","cursor: pointer;",3,"click",4,"ngIf"],["fontIcon","lock","class","mx-1","style","cursor: pointer;",3,"matTooltip","click",4,"ngIf"],["fontIcon","military_tech","class","mx-1","style","cursor: pointer;",3,"matTooltip","click",4,"ngIf"],["fontIcon","volunteer_activism","class","mx-1","matTooltip","Sharing is Caring","style","cursor: pointer;",3,"click",4,"ngIf"],["fontIcon","sensor_occupied","class","mx-1","matTooltip","Akun Private","style","cursor: pointer;",3,"click",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-md-8","col-xl-9","pt-3"],[1,"row","py-3","px-0","profile-height-large"],[1,"m-0","mt-auto"],[1,"row","p-3"],["type","button","mat-stroked-button","","matLine","","class","col-12 col-md-4 text-truncate","matTooltip","Nomor ID Pengguna","color","accent","style","overflow: hidden;",4,"ngIf"],["type","button","mat-stroked-button","","matLine","","class","col-12 col-md-8 text-truncate","matTooltip","Tanggal Bergabung","color","accent","style","overflow: hidden;",4,"ngIf"],["type","button","mat-stroked-button","","matLine","","matTooltip","Alamat Surel","color","accent",1,"col","text-truncate",2,"overflow","hidden",3,"click"],["fontIcon","email",1,"me-1"],["class","row py-3",4,"ngIf"],[1,"row"],[3,"tabData","count","serverSide","tableRowClicked","paginatorClicked","serverSideFilter","serverSideOrder"],[1,"profile-banner","profile-banner-1","align-items-center"],[1,"profile-banner","profile-banner-2","align-items-center"],["fontIcon","handyman",1,"mx-1",2,"cursor","pointer",3,"matTooltip","click"],["fontIcon","security",1,"mx-1",2,"cursor","pointer",3,"matTooltip","click"],["fontIcon","rate_review",1,"mx-1",2,"cursor","pointer",3,"matTooltip","click"],["fontIcon","verified","matTooltip","Terverifikasi",1,"mx-1",2,"cursor","pointer",3,"click"],["fontIcon","lock",1,"mx-1",2,"cursor","pointer",3,"matTooltip","click"],["fontIcon","military_tech",1,"mx-1",2,"cursor","pointer",3,"matTooltip","click"],["fontIcon","volunteer_activism","matTooltip","Sharing is Caring",1,"mx-1",2,"cursor","pointer",3,"click"],["fontIcon","sensor_occupied","matTooltip","Akun Private",1,"mx-1",2,"cursor","pointer",3,"click"],[1,"row","py-3"],[1,"col-12","pt-3","sticky-top","bg-bifeldy"],[1,"border-bottom-dotted"],[1,"text-bifeldy"],[1,"col-12",2,"max-height","288px"],[1,"h-100",2,"overflow-y","auto"],[3,"multiple"],["class","h-100",3,"routerLink",4,"ngFor","ngForOf"],[1,"h-100",3,"routerLink"],["matListAvatar","",1,"ms-3",2,"border-radius","0",3,"src"],[1,"text-truncate","text-decoration-none"],[1,"bg-bifeldy","px-2","me-1","text-warning",2,"position","absolute","right","0"],[1,"text-success"],["type","button","mat-stroked-button","","matLine","","matTooltip","Nomor ID Pengguna","color","accent",1,"col-12","col-md-4","text-truncate",2,"overflow","hidden"],["fontIcon","accessibility_new",1,"me-1"],["type","button","mat-stroked-button","","matLine","","matTooltip","Tanggal Bergabung","color","accent",1,"col-12","col-md-8","text-truncate",2,"overflow","hidden"],["fontIcon","access_time",1,"me-1"],[3,"panelData"]],template:function(s,n){1&s&&t.YNc(0,pt,35,22,"div",0),2&s&&t.Q6J("ngIf",n.userData)},dependencies:[p.sg,p.O5,r.rH,Z.eB,H.X2,L.Hw,T.Wx,T.kh,T.O$,N.Kd,j.Q,V.H,$.Y,p.uU],styles:[".profile-banner[_ngcontent-%COMP%]{height:192px;width:100%;background-size:cover;background-position:center;background-repeat:no-repeat;opacity:.75}.profile-banner-1[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.profile-banner-2[_ngcontent-%COMP%]{position:absolute;top:192px;left:0}.profile-info[_ngcontent-%COMP%]{position:relative;height:256px;z-index:1}.profile-image[_ngcontent-%COMP%]{width:50%}@media only screen and (min-width: 769px){.profile-height-large[_ngcontent-%COMP%]{height:100px}.profile-image[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-width: 768px){.profile-image[_ngcontent-%COMP%]{padding-top:3rem}}"]})}return i})();var J=o(5861),_t=o(4425),Y=o(80),gt=o(2970),dt=o(3842),ht=o(9222);let ft=(()=>{class i{constructor(e,s){this.api=e,this.gs=s}getUserApiKey(e){return this.api.getData(`/api-key?username=${e}`)}createApiKey(e){return this.api.postData("/api-key",e)}editApiKey(e,s){return this.api.putData(`/api-key/${e}`,s)}revokeApiKey(e){return this.api.deleteData(`/api-key/${e}`)}static#t=this.\u0275fac=function(s){return new(s||i)(t.LFG(ht.s),t.LFG(y.U))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var bt=o(8151),xt=o(4758),vt=o(7397),Ut=o(1105);function Tt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-list-option",27),t._UZ(1,"mat-icon",28),t.TgZ(2,"a",29),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.openComment(a))}),t.TgZ(3,"span",30),t._uU(4),t.ALo(5,"dateAgo"),t.qZA(),t.TgZ(6,"span",31),t._uU(7),t.qZA()()()}if(2&i){const e=l.$implicit;t.xp6(4),t.Oqu(t.lcZ(5,2,e.created_at)),t.xp6(3),t.Oqu(e.comment)}}function Et(i,l){if(1&i&&(t.TgZ(0,"div",11)(1,"mat-selection-list",25),t.YNc(2,Tt,8,4,"mat-list-option",26),t.ALo(3,"slice"),t.qZA()()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",t.Dn7(3,2,e.feedKomentarData,0,5))}}function kt(i,l){if(1&i&&(t.TgZ(0,"mat-list-option",27),t._UZ(1,"mat-icon",32),t.TgZ(2,"a",33)(3,"span",30),t._uU(4),t.ALo(5,"dateAgo"),t.qZA(),t.TgZ(6,"span",34),t._uU(7),t.qZA(),t.TgZ(8,"span",35),t._uU(9),t.qZA(),t.TgZ(10,"span",31),t._uU(11),t.qZA()()()),2&i){const e=l.$implicit;t.xp6(2),t.Q6J("routerLink",e.berkas_?"/berkas/"+(null==e.berkas_?null:e.berkas_.id):e.fansub_?"/fansub/"+(null==e.fansub_?null:e.fansub_.slug):e.user_?"/user/"+(null==e.user_?null:e.user_.username):e.news_?"/news/"+(null==e.news_?null:e.news_.id):""),t.xp6(2),t.Oqu(t.lcZ(5,5,e.created_at)),t.xp6(3),t.Oqu(e.type),t.xp6(2),t.Oqu(e.berkas_?"Berkas":e.fansub_?"Fansub":e.user_?"User":e.news_?"News":""),t.xp6(2),t.Oqu((null==e.berkas_?null:e.berkas_.name)||(null==e.fansub_?null:e.fansub_.name)||(null==e.user_||null==e.user_.kartu_tanda_penduduk_?null:e.user_.kartu_tanda_penduduk_.nama)||(null==e.news_?null:e.news_.title))}}function Ct(i,l){if(1&i&&(t.TgZ(0,"div",11)(1,"mat-selection-list",25),t.YNc(2,kt,12,7,"mat-list-option",26),t.ALo(3,"slice"),t.qZA()()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",t.Dn7(3,2,e.feedLikeDislikeData,0,5))}}function At(i,l){if(1&i&&(t.TgZ(0,"mat-list-option",27),t._UZ(1,"mat-icon",36),t.TgZ(2,"a",33)(3,"span",30),t._uU(4),t.ALo(5,"dateAgo"),t.qZA(),t.TgZ(6,"span",35),t._uU(7),t.qZA(),t.TgZ(8,"span",31),t._uU(9),t.qZA()()()),2&i){const e=l.$implicit;t.xp6(2),t.Q6J("routerLink",e.berkas_?"/berkas/"+(null==e.berkas_?null:e.berkas_.id):e.fansub_?"/fansub/"+(null==e.fansub_?null:e.fansub_.slug):e.user_?"/user/"+(null==e.user_?null:e.user_.username):e.news_?"/news/"+(null==e.news_?null:e.news_.id):""),t.xp6(2),t.Oqu(t.lcZ(5,4,e.created_at)),t.xp6(3),t.Oqu(e.berkas_?"Berkas":e.fansub_?"Fansub":e.user_?"User":e.news_?"News":""),t.xp6(2),t.Oqu((null==e.berkas_?null:e.berkas_.name)||(null==e.fansub_?null:e.fansub_.name)||(null==e.user_||null==e.user_.kartu_tanda_penduduk_?null:e.user_.kartu_tanda_penduduk_.nama)||(null==e.news_?null:e.news_.title))}}function St(i,l){if(1&i&&(t.TgZ(0,"div",11)(1,"mat-selection-list",25),t.YNc(2,At,10,6,"mat-list-option",26),t.ALo(3,"slice"),t.qZA()()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",t.Dn7(3,2,e.feedVisitData,0,5))}}function It(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",37),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return c.copyApiKey(a),t.KtG(c.editApiKey(a))}),t.TgZ(1,"p",38),t._uU(2," Nama :: "),t.TgZ(3,"span",39),t._uU(4),t.qZA()(),t.TgZ(5,"p",40),t._uU(6," Origin :: "),t.TgZ(7,"span",39),t._uU(8),t.qZA()(),t.TgZ(9,"p",41),t._uU(10," Key :: "),t.TgZ(11,"span",39),t._uU(12),t.qZA()(),t.TgZ(13,"a",17),t.NdJ("click",function(n){const c=t.CHM(e).$implicit,g=t.oxw();return n.stopPropagation(),t.KtG(g.revokeApiKey(c))}),t._UZ(14,"mat-icon",42),t._uU(15," Hapus Akses "),t.qZA()()}if(2&i){const e=l.$implicit;t.xp6(4),t.hij(" ",e.name," "),t.xp6(4),t.hij(" ",e.ip_domain," "),t.xp6(4),t.hij(" ",e.api_key," ")}}function Dt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-list-option",46),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.editSubDomain(a.fansub_))}),t._UZ(1,"img",47),t.TgZ(2,"a",48),t.NdJ("click",function(n){const c=t.CHM(e).$implicit,g=t.oxw(2);return n.stopPropagation(),t.KtG(g.revokeDns(c.fansub_))}),t._UZ(3,"mat-icon",42),t.qZA(),t.TgZ(4,"a",49)(5,"span",50),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"span",39),t._uU(9),t.qZA()()()}if(2&i){const e=l.$implicit;t.xp6(1),t.s9C("src",e.fansub_.image_url,t.LSH),t.xp6(5),t.hij(" ",t.xi3(7,3,e.updated_at,"d-MM-y")," "),t.xp6(3),t.Oqu(e.fansub_.slug)}}function yt(i,l){if(1&i&&(t.TgZ(0,"div",43)(1,"div",44)(2,"mat-selection-list",25),t.YNc(3,Dt,10,6,"mat-list-option",45),t.qZA()()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",e.groupFansub)}}function Zt(i,l){1&i&&t._UZ(0,"app-no-data",51)}let Rt=(()=>{class i{constructor(e,s,n,a,c,g,A,S,I,D,ie,se){this.clipboard=e,this.router=s,this.snackBar=n,this.as=a,this.ds=c,this.gs=g,this.fs=A,this.bs=S,this.us=I,this.fansub=D,this.aks=ie,this.wb=se,this.feedKomentarData=[],this.feedLikeDislikeData=[],this.feedVisitData=[],this.subsFeedKomentar=null,this.subsFeedLikeDislike=null,this.subsFeedVisit=null,this.subsGetApiKey=null,this.subsDialog=null,this.subsCreateApiKey=null,this.subsEditApiKey=null,this.subsRevokeApiKey=null,this.subsGroupGet=null,this.subsUpdateSubDomain=null,this.subsGetSubDomain=null,this.apiKey=[],this.groupFansub=[],this.totalKomentar=0,this.totalLikeDislike=0,this.totalKunjungan=0,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get AS(){return this.as}get ENV(){return b.N}ngOnInit(){this.gs.isBrowser&&(this.getUserFeedComment(),this.getUserFeedLikeDislike(),this.getUserFeedVisit(),this.getUserApiKey(),this.getUserGroup(),this.fs.initializeFab("arrow_forward",null,"Menuju Halaman Profile",`/user/${this.as.currentUserSubject?.value?.username}`,!1))}ngOnDestroy(){this.subsFeedKomentar?.unsubscribe(),this.subsFeedLikeDislike?.unsubscribe(),this.subsFeedVisit?.unsubscribe(),this.subsGetApiKey?.unsubscribe(),this.subsDialog?.unsubscribe(),this.subsCreateApiKey?.unsubscribe(),this.subsEditApiKey?.unsubscribe(),this.subsRevokeApiKey?.unsubscribe(),this.subsGroupGet?.unsubscribe(),this.subsUpdateSubDomain?.unsubscribe(),this.subsGetSubDomain?.unsubscribe()}getUserFeedComment(){this.bs.busy(),this.subsFeedKomentar=this.us.getUserFeedComment(this.as.currentUserSubject?.value?.username,"",1,5).subscribe({next:e=>{this.gs.log("[USER_FEED_COMMENT_SUCCESS]",e),this.totalKomentar=e.count,this.feedKomentarData=e.results,this.bs.idle()},error:e=>{this.gs.log("[USER_FEED_COMMENT_ERROR]",e,"error"),this.bs.idle()}})}getUserFeedLikeDislike(){this.bs.busy(),this.subsFeedLikeDislike=this.us.getUserFeedLikeDislike(this.as.currentUserSubject?.value?.username,"",1,5).subscribe({next:e=>{this.gs.log("[USER_FEED_LIKEDISLIKE_SUCCESS]",e),this.totalLikeDislike=e.count,this.feedLikeDislikeData=e.results,this.bs.idle()},error:e=>{this.gs.log("[USER_FEED_LIKEDISLIKE_ERROR]",e,"error"),this.bs.idle()}})}getUserFeedVisit(){this.bs.busy(),this.subsFeedVisit=this.us.getUserFeedVisit(this.as.currentUserSubject?.value?.username,"",1,5).subscribe({next:e=>{this.gs.log("[USER_FEED_VISIT_SUCCESS]",e),this.totalKunjungan=e.count,this.feedVisitData=e.results,this.bs.idle()},error:e=>{this.gs.log("[USER_FEED_VISIT_ERROR]",e,"error"),this.bs.idle()}})}getUserApiKey(){this.bs.busy(),this.subsGetApiKey=this.aks.getUserApiKey(this.as.currentUserSubject?.value?.username).subscribe({next:e=>{this.gs.log("[USER_FEED_VISIT_SUCCESS]",e),this.apiKey=e.results[this.as.currentUserSubject?.value?.username],this.bs.idle()},error:e=>{this.gs.log("[USER_FEED_VISIT_ERROR]",e,"error"),this.bs.idle()}})}copyApiKey(e){this.clipboard.copy(e.api_key)&&this.snackBar.open("API Key :: Telah Di Salin Pada Clipboard","OK")}generateNewApiKey(){this.subsDialog=this.ds.openInputDialog({data:{title:"Tambah API Key Baru",input:{name:{inputLabel:"Nama / Deskripsi",inputPlaceholder:`${this.as.currentUserSubject?.value?.username}_${Date.now()}`,inputValue:null,inputRequired:!0},ip_domain:{inputLabel:"Origin Tanpa http://",inputPlaceholder:"example.com; 1.1.1.1; *",inputValue:null,inputRequired:!0}},confirmText:"OK",cancelText:"Batal",infoText:"Gunakan * Saja Untuk Perbolehkan Semua Dan Titik Koma ; Untuk Lebih Dari Satu"}}).afterClosed().subscribe({next:e=>{this.gs.log("[INPUT_DIALOG_CLOSED]",e),e&&(this.bs.busy(),this.subsCreateApiKey=this.aks.createApiKey({name:e.name,ip_domain:e.ip_domain}).subscribe({next:s=>{this.gs.log("[USER_CREATE_APIKEY_SUCCESS]",s),this.bs.idle(),this.getUserApiKey()},error:s=>{this.gs.log("[USER_CREATE_APIKEY_ERROR]",s,"error"),this.bs.idle(),this.getUserApiKey()}})),this.subsDialog.unsubscribe()}})}editApiKey(e){this.subsDialog=this.ds.openInputDialog({data:{title:"Ubah API Key",input:{name:{inputLabel:"Nama / Deskripsi",inputPlaceholder:e.name,inputValue:e.name,inputRequired:!0},ip_domain:{inputLabel:"Origin Tanpa http://",inputPlaceholder:e.ip_domain,inputValue:e.ip_domain,inputRequired:!0}},confirmText:"OK",cancelText:"Batal",infoText:"Gunakan * Saja Untuk Perbolehkan Semua Dan Titik Koma ; Untuk Lebih Dari Satu"}}).afterClosed().subscribe({next:s=>{this.gs.log("[INPUT_DIALOG_CLOSED]",s),s&&(this.bs.busy(),this.subsEditApiKey=this.aks.editApiKey(e.id,{name:s.name,ip_domain:s.ip_domain}).subscribe({next:n=>{this.gs.log("[USER_EDIT_APIKEY_SUCCESS]",n),this.bs.idle(),this.getUserApiKey()},error:n=>{this.gs.log("[USER_EDIT_APIKEY_ERROR]",n,"error"),this.bs.idle(),this.getUserApiKey()}})),this.subsDialog.unsubscribe()}})}revokeApiKey(e){var s=this;return(0,J.Z)(function*(){s.subsDialog=(yield s.ds.openKonfirmasiDialog(`Hapus API Key -- '${e.api_key}'`,`Apakah Yakin Akan Menghapus ${e.ip_domain} ?`,!1)).afterClosed().subscribe({next:n=>{s.gs.log("[INFO_DIALOG_CLOSED]",n),!0===n&&(s.bs.busy(),s.subsRevokeApiKey=s.aks.revokeApiKey(e.id).subscribe({next:a=>{s.gs.log("[USER_REVOKE_APIKEY_SUCCESS]",a),s.bs.idle(),s.getUserApiKey()},error:a=>{s.gs.log("[USER_REVOKE_APIKEY_ERROR]",a,"error"),s.bs.idle(),s.getUserApiKey()}})),s.subsDialog.unsubscribe()}})})()}getUserGroup(){this.bs.busy(),this.subsGroupGet=this.us.getUserGroup(this.as.currentUserSubject?.value?.username).subscribe({next:e=>{this.gs.log("[USER_GROUP_LIST_SUCCESS]",e),this.groupFansub=e.results.filter(s=>s.fansub_.dns_id),this.bs.idle()},error:e=>{this.gs.log("[USER_GROUP_LIST_ERROR]",e,"error"),this.bs.idle()}})}editSubDomain(e){this.bs.busy(),this.subsGetSubDomain=this.fansub.getSubDomain(e.slug).subscribe({next:s=>{this.gs.log("[USER_FANSUB_SUBDOMAIN_SUCCESS]",s),this.bs.idle();const n=s.result;this.subsDialog=this.ds.openInputDialog({data:{title:`Ubah CNAME / A Record IP v4 v6 :: '${e.slug}'`,input:{server_target:{inputLabel:"Server Target Domain IP Publik",inputPlaceholder:"127.0.0.1 | ghs.google.com | blablabla.id.repl.co",inputValue:n.dns_id.content,inputRequired:!0},verification_name:{inputLabel:"Tambahan Khusus Blogger / Replit",inputPlaceholder:"blablabla-name | slug-fs",inputValue:n.dns_id_alt?.name,inputRequired:!1},verification_target:{inputLabel:"Tambahan Khusus Blogger / Replit",inputPlaceholder:"blablabla-target.dv.googlehosted.com | replit-verify=blablabla",inputValue:n.dns_id_alt?.content,inputRequired:!1}},confirmText:"OK",cancelText:"Batal",infoText:"Abaikan 2 Input Terakhir Jika Bukan Blogger / Replit"}}).afterClosed().subscribe({next:a=>{this.gs.log("[INPUT_DIALOG_CLOSED]",a),a&&(this.bs.busy(),this.subsUpdateSubDomain=this.fansub.updateSubDomain(e.slug,{server_target:a.server_target,verification_name:a.verification_name,verification_target:a.verification_target}).subscribe({next:c=>{this.gs.log("[FANSUB_UPDATE_SUBDOMAIN_SUCCESS]",c),this.bs.idle(),this.getUserGroup()},error:c=>{this.gs.log("[FANSUB_UPDATE_SUBDOMAIN_ERROR]",c,"error"),this.bs.idle(),this.getUserGroup()}})),this.subsDialog.unsubscribe()}})},error:s=>{this.gs.log("[USER_FANSUB_SUBDOMAIN_ERROR]",s,"error"),this.bs.idle(),this.subsDialog=this.ds.openInfoDialog({data:{title:`Sepertinya Sub-Domain '${e.slug}' Belum Di Klaim`,htmlMessage:"Silahkan ambil sub-domain pada halaman fansub, ingin ke sana sekarang?",confirmText:"Ya",cancelText:"Tidak"},disableClose:!1}).afterClosed().subscribe({next:n=>{this.gs.log("[INFO_DIALOG_CLOSED]",n),!0===n?this.router.navigateByUrl(`/fansub/${e.slug}`):this.getUserGroup(),this.subsDialog.unsubscribe()}})}})}openComment(e){this.router.navigate([e.path],{queryParams:{comment:e.id}})}openApiDocs(){this.wb.winboxOpenUri(`${b.N.baseUrl}/api`,"_self",!0)}revokeDns(e){var s=this;return(0,J.Z)(function*(){s.subsDialog=(yield s.ds.openKonfirmasiDialog(`Hapus Sub-Domain -- '${e.slug}'`,"Apakah Yakin Ingin Menghapus / Nonaktifkan Sub-Domain ?",!1)).afterClosed().subscribe({next:n=>{s.gs.log("[INFO_DIALOG_CLOSED]",n),!0===n&&(s.bs.busy(),s.subsRevokeApiKey=s.fansub.revokeDomain(e.slug).subscribe({next:a=>{s.gs.log("[USER_REVOKE_DNS_SUCCESS]",a),s.bs.idle()},error:a=>{s.gs.log("[USER_REVOKE_DNS_ERROR]",a,"error"),s.bs.idle()}})),s.subsDialog.unsubscribe()}})})()}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(_t.TU),t.Y36(r.F0),t.Y36(B.pl),t.Y36(Y.e),t.Y36(gt.x),t.Y36(y.U),t.Y36(F.r),t.Y36(w.z),t.Y36(P.K),t.Y36(dt.T),t.Y36(ft),t.Y36(bt.N))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-list"]],decls:65,vars:15,consts:[[1,"container"],[1,"row","pb-3","px-0"],[1,"col-lg-8","col-xl-9"],[1,"row"],[1,"col-12","sticky-top","bg-bifeldy"],[1,"pt-3","border-bottom-dotted"],[1,"float-end","text-warning",2,"font-size","small","cursor","pointer",3,"click"],[1,"text-bifeldy"],["class","col-12",4,"ngIf","ngIfElse"],[1,"col-lg-4","col-xl-3"],[1,"row","sticky-top"],[1,"col-12"],["matTooltip","Khusus Pengguna Terverifikasi",1,"text-bifeldy"],[1,"col-12","mb-2"],["mat-button","","color","accent","matTooltip","Buka Kotak Pesan","routerLink","/mailbox",1,"w-100"],["fontIcon","email",1,"me-1"],[1,"text-bifeldy",3,"matTooltip"],["mat-button","","color","accent",1,"w-100",3,"click"],["fontIcon","api",1,"me-1"],["fontIcon","webhook",1,"me-1"],["class","my-2 gradient-border",3,"click",4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"border-bottom-dotted"],["class","col-12 mb-2","style","max-height: 288px;",4,"ngIf","ngIfElse"],["noData",""],[3,"multiple"],["class","h-100",4,"ngFor","ngForOf"],[1,"h-100"],["fontIcon","add_comment","mat-list-icon","",1,"ps-3"],[1,"text-truncate","text-decoration-none",3,"click"],[1,"bg-bifeldy","px-2","me-1","text-danger",2,"position","absolute","right","0"],[1,"text-warning"],["fontIcon","volunteer_activism","mat-list-icon","",1,"ps-3"],[1,"text-truncate","text-decoration-none",3,"routerLink"],[1,"me-3","text-success"],[1,"me-3","text-info"],["fontIcon","directions_run","mat-list-icon","",1,"ps-3"],[1,"my-2","gradient-border",3,"click"],[1,"ps-2","pe-2","pt-2","text-truncate","my-0"],[1,"text-success"],[1,"ps-2","pe-2","pt-0","text-truncate","my-0"],[1,"ps-2","pe-2","pb-2","text-truncate","my-0"],["fontIcon","delete_sweep",1,"me-1"],[1,"col-12","mb-2",2,"max-height","288px"],[1,"h-100",2,"overflow-y","auto"],["class","h-100",3,"click",4,"ngFor","ngForOf"],[1,"h-100",3,"click"],["matListAvatar","",2,"border-radius","0",3,"src"],["mat-button","","matListAvatar","","color","accent",2,"border-radius","0",3,"click"],[1,"text-truncate","text-decoration-none"],[1,"bg-bifeldy","px-2","me-1","text-warning",2,"position","absolute","right","0"],[1,"col-12","p-3"]],template:function(s,n){if(1&s&&(t._UZ(0,"app-notifications"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5)(7,"span",6),t.NdJ("click",function(){return n.getUserFeedComment()}),t._uU(8," Refresh "),t.qZA(),t.TgZ(9,"b",7),t._uU(10),t.qZA()()(),t.YNc(11,Et,4,6,"div",8),t.qZA(),t.TgZ(12,"div",3)(13,"div",4)(14,"h2",5)(15,"span",6),t.NdJ("click",function(){return n.getUserFeedLikeDislike()}),t._uU(16," Refresh "),t.qZA(),t.TgZ(17,"b",7),t._uU(18),t.qZA()()(),t.YNc(19,Ct,4,6,"div",8),t.qZA(),t.TgZ(20,"div",3)(21,"div",4)(22,"h2",5)(23,"span",6),t.NdJ("click",function(){return n.getUserFeedVisit()}),t._uU(24," Refresh "),t.qZA(),t.TgZ(25,"b",7),t._uU(26),t.qZA()()(),t.YNc(27,St,4,6,"div",8),t.qZA()(),t.TgZ(28,"div",9)(29,"div",10)(30,"div",11)(31,"div",3)(32,"div",4)(33,"h2",5)(34,"b",12),t._uU(35,"Alamat Email"),t.qZA()()(),t.TgZ(36,"div",13)(37,"a",14),t._UZ(38,"mat-icon",15),t._uU(39),t.qZA()()(),t.TgZ(40,"div",3)(41,"div",4)(42,"h2",5)(43,"span",6),t.NdJ("click",function(){return n.getUserApiKey()}),t._uU(44," Refresh "),t.qZA(),t.TgZ(45,"b",16),t._uU(46,"API Key"),t.qZA()()(),t.TgZ(47,"div",13)(48,"a",17),t.NdJ("click",function(){return n.openApiDocs()}),t._UZ(49,"mat-icon",18),t._uU(50," Lihat API Endpoint "),t.qZA(),t.TgZ(51,"a",17),t.NdJ("click",function(){return n.generateNewApiKey()}),t._UZ(52,"mat-icon",19),t._uU(53," Buat API Key Baru "),t.qZA(),t.YNc(54,It,16,3,"div",20),t.qZA()(),t.TgZ(55,"div",21)(56,"div",4)(57,"h2",22)(58,"span",6),t.NdJ("click",function(){return n.getUserGroup()}),t._uU(59," Refresh "),t.qZA(),t.TgZ(60,"b",7),t._uU(61,"DNS Fansub"),t.qZA()()(),t.YNc(62,yt,4,2,"div",23),t.qZA()()()()()(),t.YNc(63,Zt,1,0,"ng-template",null,24,t.W1O)),2&s){const a=t.MAs(64);t.xp6(10),t.hij("Riwayat Komentar :: ",n.totalKomentar,""),t.xp6(1),t.Q6J("ngIf",n.feedKomentarData.length>0)("ngIfElse",a),t.xp6(7),t.hij("Riwayat Like & Dislike :: ",n.totalLikeDislike,""),t.xp6(1),t.Q6J("ngIf",n.feedLikeDislikeData.length>0)("ngIfElse",a),t.xp6(7),t.hij("Riwayat Kunjungan :: ",n.totalKunjungan,""),t.xp6(1),t.Q6J("ngIf",n.feedVisitData.length>0)("ngIfElse",a),t.xp6(12),t.AsE(" '",null==n.AS.currentUserSubject||null==n.AS.currentUserSubject.value?null:n.AS.currentUserSubject.value.username,"@",n.ENV.domain,"' "),t.xp6(6),t.MGl("matTooltip","Aktivitas Terakhir :: ",null==n.AS.currentUserSubject||null==n.AS.currentUserSubject.value?null:n.AS.currentUserSubject.value._session_origin,""),t.xp6(9),t.Q6J("ngForOf",n.apiKey),t.xp6(8),t.Q6J("ngIf",n.groupFansub.length>0)("ngIfElse",a)}},dependencies:[p.sg,p.O5,r.rH,Z.Nr,L.Hw,T.Wx,T.ap,T.kh,T.O$,N.Kd,xt.t,vt.d,p.OU,p.uU,Ut.R]})}return i})();var Kt=o(2693),Ot=o(7245),wt=o(5643),R=o(8455),Pt=o(9203),Lt=o(7732),Nt=o(7443);function Mt(i,l){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"bytes"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("Ukuran Upload Melebihi Batas ",t.lcZ(2,1,e.imagePhotoLimitExceeded)," !")}}function Bt(i,l){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Oqu(e.imagePhotoErrorText)}}function Ft(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",45)(1,"button",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.submitPhotoImage())}),t._UZ(2,"mat-icon",47),t._uU(3," Unggah "),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function Jt(i,l){1&i&&(t.TgZ(0,"div"),t._uU(1,"Nama Tidak Boleh Kosong"),t.qZA())}function Yt(i,l){1&i&&(t.TgZ(0,"div"),t._uU(1,"Nama Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function Gt(i,l){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"bytes"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("Ukuran Upload Melebihi Batas ",t.lcZ(2,1,e.imageCoverLimitExceeded)," !")}}function qt(i,l){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Oqu(e.imageCoverErrorText)}}function Qt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",16)(1,"button",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.submitCoverImage())}),t._UZ(2,"mat-icon",47),t._uU(3," Unggah "),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.submitted)}}function Ht(i,l){1&i&&(t.TgZ(0,"div"),t._uU(1,"Password Tidak Boleh Kosong"),t.qZA())}function jt(i,l){1&i&&(t.TgZ(0,"div"),t._uU(1,"Password Minimal 6 Huruf"),t.qZA())}function Vt(i,l){1&i&&(t.TgZ(0,"div"),t._uU(1,"Password Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function $t(i,l){1&i&&(t.TgZ(0,"div"),t._uU(1,"Password Minimal 6 Huruf"),t.qZA())}function zt(i,l){1&i&&(t.TgZ(0,"div"),t._uU(1,"Password Hanya Boleh Huruf Standar Papan Ketik"),t.qZA())}function Wt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("submit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onSubmit())}),t.TgZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7),t._UZ(7,"img",8),t.TgZ(8,"mat-form-field",9)(9,"mat-label"),t._uU(10,"Profile Image"),t.qZA(),t.TgZ(11,"ngx-mat-file-input",10,11),t.NdJ("change",function(n){t.CHM(e);const a=t.MAs(12),c=t.oxw();return t.KtG(c.uploadPhotoImage(n,a))}),t.qZA(),t._UZ(13,"mat-icon",12),t.qZA(),t.TgZ(14,"mat-error",13)(15,"small"),t.YNc(16,Mt,3,3,"div",14),t.YNc(17,Bt,2,1,"div",14),t.qZA()()(),t.YNc(18,Ft,4,1,"div",15),t.TgZ(19,"div",16)(20,"mat-slide-toggle",17),t._uU(21," Jadikan Private, Sembunyikan Aktivitas "),t.qZA()(),t.TgZ(22,"div",18),t._uU(23," * Jika ingin mengubah "),t.TgZ(24,"i"),t._uU(25,"username"),t.qZA(),t._uU(26," silahkan menghubungi Admin menggunakan surel "),t.TgZ(27,"span",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeUname())}),t._uU(28),t.qZA()()()(),t.TgZ(29,"div",20),t._UZ(30,"div",21),t.TgZ(31,"div",22)(32,"mat-form-field",23)(33,"mat-label"),t._uU(34,"Nama Lengkap"),t.qZA(),t._UZ(35,"input",24)(36,"mat-icon",25),t.TgZ(37,"mat-error"),t.YNc(38,Jt,2,0,"div",14),t.YNc(39,Yt,2,0,"div",14),t.qZA()(),t.TgZ(40,"mat-form-field",9)(41,"mat-label"),t._uU(42,"Cover Image"),t.qZA(),t.TgZ(43,"ngx-mat-file-input",26,27),t.NdJ("change",function(n){t.CHM(e);const a=t.MAs(44),c=t.oxw();return t.KtG(c.uploadCoverImage(n,a))}),t.qZA(),t._UZ(45,"mat-icon",12),t.qZA(),t.TgZ(46,"mat-error",13)(47,"small"),t.YNc(48,Gt,3,3,"div",14),t.YNc(49,qt,2,1,"div",14),t.qZA()(),t.YNc(50,Qt,4,1,"div",28),t._UZ(51,"angular-editor",29),t.TgZ(52,"mat-form-field",30)(53,"mat-label"),t._uU(54,"Konfirmasi Kata Sandi"),t.qZA(),t._UZ(55,"input",31),t.TgZ(56,"button",32),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.togglePassword())}),t._UZ(57,"mat-icon",33),t.qZA(),t.TgZ(58,"mat-error"),t.YNc(59,Ht,2,0,"div",14),t.YNc(60,jt,2,0,"div",14),t.YNc(61,Vt,2,0,"div",14),t.qZA()(),t.TgZ(62,"mat-form-field",30)(63,"mat-label"),t._uU(64,"Ubah Kata Sandi"),t.qZA(),t._UZ(65,"input",34),t.TgZ(66,"button",32),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.togglePassword())}),t._UZ(67,"mat-icon",33),t.qZA(),t.TgZ(68,"mat-error"),t.YNc(69,$t,2,0,"div",14),t.YNc(70,zt,2,0,"div",14),t.qZA()()(),t.TgZ(71,"div",35)(72,"div",7)(73,"div",36),t._UZ(74,"div",37),t.TgZ(75,"div",38)(76,"a",39),t._UZ(77,"mat-icon",40),t._uU(78," Batal "),t.qZA()(),t.TgZ(79,"div",38)(80,"button",41),t._uU(81," Simpan "),t._UZ(82,"mat-icon",42),t.qZA()()()()()()()(),t._UZ(83,"div",43)(84,"div",44),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.fg),t.xp6(7),t.s9C("src",e.image_photo,t.LSH),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(5),t.Q6J("ngIf",e.imagePhotoLimitExceeded),t.xp6(1),t.Q6J("ngIf",e.imagePhotoErrorText),t.xp6(1),t.Q6J("ngIf",e.imagePhoto&&!e.fg.value.image_photo),t.xp6(10),t.AsE("",e.userData.username,"@",e.ENV.domain,""),t.xp6(4),t.Q6J("color","accent"),t.xp6(6),t.Q6J("ngIf",e.fg.get("nama").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg.get("nama").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("accept","image/gif, image/jpeg, image/jpg, image/png"),t.xp6(5),t.Q6J("ngIf",e.imageCoverLimitExceeded),t.xp6(1),t.Q6J("ngIf",e.imageCoverErrorText),t.xp6(1),t.Q6J("ngIf",e.imageCover&&!e.fg.value.image_cover),t.xp6(1),t.Q6J("config",e.GS.angularEditorConfig),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("type",e.passwordHide?"password":"text"),t.xp6(2),t.Q6J("fontIcon",e.passwordHide?"visibility_off":"visibility"),t.xp6(2),t.Q6J("ngIf",e.fg.get("old_password").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fg.get("old_password").hasError("minlength")),t.xp6(1),t.Q6J("ngIf",e.fg.get("old_password").hasError("pattern")),t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("type",e.passwordHide?"password":"text"),t.xp6(2),t.Q6J("fontIcon",e.passwordHide?"visibility_off":"visibility"),t.xp6(2),t.Q6J("ngIf",e.fg.get("new_password").hasError("minlength")),t.xp6(1),t.Q6J("ngIf",e.fg.get("new_password").hasError("pattern")),t.xp6(6),t.Q6J("disabled",e.submitted),t.xp6(4),t.Q6J("disabled",e.submitted||e.fg.invalid||!e.fg.dirty),t.xp6(3),t.Udp("background-image","url("+e.image_cover+")")}}const te=[{path:"",pathMatch:"full",component:Rt,canActivate:[k.t],data:{[h.t.decoratorRoles]:[d.yS.ADMIN,d.yS.MODERATOR,d.yS.FANSUBBER,d.yS.USER]}},{path:":username",children:[{path:"",pathMatch:"full",component:mt},{path:"edit",component:(()=>{class i{constructor(e,s,n,a,c,g,A,S,I,D){this.router=e,this.activatedRoute=s,this.toast=n,this.bs=a,this.us=c,this.fb=g,this.imgbb=A,this.gs=S,this.as=I,this.cs=D,this.submitted=!1,this.username=null,this.userData=null,this.imagePhoto=null,this.imagePhotoErrorText=null,this.imagePhotoLimitExceeded=null,this.image_photo=null,this.image_photo_original=null,this.imageCover=null,this.imageCoverErrorText=null,this.imageCoverLimitExceeded=null,this.image_cover=null,this.image_cover_original=null,this.passwordHide=!0,this.photoImage=null,this.coverImage=null,this.subsUserDetail=null,this.subsImgbb1=null,this.subsImgbb2=null,this.subsUserUpdate=null,this.subsVerify=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get ENV(){return b.N}get GS(){return this.gs}togglePassword(){this.passwordHide=!this.passwordHide}ngOnDestroy(){this.subsUserDetail?.unsubscribe(),this.subsImgbb1?.unsubscribe(),this.subsImgbb2?.unsubscribe(),this.subsUserUpdate?.unsubscribe(),this.subsVerify?.unsubscribe()}ngOnInit(){this.gs.isBrowser&&(this.username=this.activatedRoute.snapshot.paramMap.get("username"),this.bs.busy(),this.subsUserDetail=this.us.getUserData(this.username).subscribe({next:e=>{this.gs.log("[USER_DETAIL_SUCCESS]",e),this.bs.idle(),this.as.currentUserSubject?.value?.id!==e.result.id?(this.toast.warning("Profile Ini Milik Orang Lain","Whoops!",null,!0),this.router.navigateByUrl(`/user/${this.username}`)):this.initForm(e.result)},error:e=>{this.gs.log("[USER_DETAIL_ERROR]",e,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:`/user/${this.username}`}})}}))}initForm(e){this.fg=this.fb.group({nama:[e.kartu_tanda_penduduk_.nama,[u.kI.required,u.kI.pattern(/^[a-zA-Z. ]+$/)]],description:[e.profile_.description,u.kI.compose([u.kI.pattern(h.t.regexEnglishKeyboardKeys)])],old_password:[null,u.kI.compose([u.kI.required,u.kI.minLength(6),u.kI.pattern(h.t.regexEnglishKeyboardKeys)])],new_password:[null,u.kI.compose([u.kI.minLength(6),u.kI.pattern(h.t.regexEnglishKeyboardKeys)])],image_photo:[null,u.kI.compose([u.kI.pattern(h.t.regexUrl)])],image_cover:[null,u.kI.compose([u.kI.pattern(h.t.regexUrl)])],private:[e.private,u.kI.compose([u.kI.required])]}),this.image_photo=e.image_url,this.image_photo_original=this.image_photo,this.image_cover=e.profile_.cover_url,this.image_cover_original=this.image_cover,this.userData=e}uploadPhotoImage(e,s){this.photoImage=s,this.imagePhoto=null,this.imagePhotoLimitExceeded=null,this.imagePhotoErrorText=null,this.fg.controls.image_photo.patchValue(null),this.fg.controls.image_photo.markAsPristine();const n=e.target.files[0];try{const a=new FileReader;a.readAsDataURL(n),a.onload=c=>{if(this.gs.log("[IMAGE_PHOTO_SELECTED]",c),n.size<=h.t.fileSizeImageLimit){const g=this.gs.document.createElement("img");g.onload=()=>{this.imagePhoto=n,this.image_photo=a.result.toString()},g.src=a.result.toString()}else this.imagePhoto=null,this.image_photo="/assets/img/form/image-error.png",this.imagePhotoLimitExceeded=h.t.fileSizeImageLimit,this.photoImage.clear(e)}}catch{this.imagePhoto=null,this.image_photo=this.image_photo_original,this.photoImage.clear(e)}}submitPhotoImage(){this.submitted=!0,this.subsImgbb1=this.imgbb.uploadImage({file:this.imagePhoto}).subscribe({next:e=>{this.gs.log("[IMAGE_PHOTO_SUCCESS]",e),this.fg.controls.image_photo.patchValue(e.result.url),this.fg.controls.image_photo.markAsDirty(),this.submitted=!1},error:e=>{this.gs.log("[IMAGE_PHOTO_ERROR]",e,"error"),this.fg.controls.image_photo.patchValue(null),this.fg.controls.image_photo.markAsPristine(),this.submitted=!1,this.imagePhotoErrorText=e.result?.message||e.info}})}uploadCoverImage(e,s){this.coverImage=s,this.imageCover=null,this.imageCoverLimitExceeded=null,this.imageCoverErrorText=null,this.fg.controls.image_cover.patchValue(null),this.fg.controls.image_cover.markAsPristine();const n=e.target.files[0];try{const a=new FileReader;a.readAsDataURL(n),a.onload=c=>{if(this.gs.log("[IMAGE_COVER_SELECTED]",c),n.size<=h.t.fileSizeImageLimit){const g=this.gs.document.createElement("img");g.onload=()=>{this.imageCover=n,this.image_cover=a.result.toString()},g.src=a.result.toString()}else this.imageCover=null,this.image_cover="/assets/img/form/image-error.png",this.imageCoverLimitExceeded=h.t.fileSizeImageLimit,this.coverImage.clear(e)}}catch{this.imageCover=null,this.image_cover=this.image_cover_original,this.coverImage.clear(e)}}submitCoverImage(){this.submitted=!0,this.subsImgbb2=this.imgbb.uploadImage({file:this.imageCover}).subscribe({next:e=>{this.gs.log("[IMAGE_COVER_SUCCESS]",e),this.fg.controls.image_cover.patchValue(e.result.url),this.fg.controls.image_cover.markAsDirty(),this.submitted=!1},error:e=>{this.gs.log("[IMAGE_COVER_ERROR]",e,"error"),this.fg.controls.image_cover.patchValue(null),this.fg.controls.image_cover.markAsPristine(),this.submitted=!1,this.imageCoverErrorText=e.result?.message||e.info}})}onSubmit(){this.bs.busy();const e=this.gs.getDirtyValues(this.fg);if(e.old_password=this.cs.hashPassword(this.fg.value.old_password),"new_password"in e&&e.new_password&&(e.new_password=this.cs.hashPassword(this.fg.value.new_password)),this.gs.log("[USER_EDIT_DIRTY]",e),this.submitted=!0,this.fg.invalid)return this.submitted=!1,void this.bs.idle();this.subsUserUpdate=this.us.updateUser(this.username,{...e}).subscribe({next:s=>{this.gs.log("[USER_EDIT_SUCCESS]",s),this.submitted=!1,this.bs.idle(),this.as.removeUser(),this.bs.busy(),this.subsVerify=this.as.verify(this.as.token).subscribe({next:n=>{this.gs.log("[VERIFY_LOGIN_SUCCESS]",n),this.bs.idle(),this.router.navigateByUrl(`/user/${this.username}`)},error:n=>{this.gs.log("[VERIFY_LOGIN_ERROR]",n,"error"),this.bs.idle(),this.as.removeUser(),this.router.navigateByUrl(`/user/${this.username}`)}})},error:s=>{this.gs.log("[USER_EDIT_ERROR]",s,"error"),this.submitted=!1,this.bs.idle()}})}changeUname(){this.router.navigate(["/create/mailbox"],{queryParams:{subject:"[ReqUName] Pengajuan Ganti Username",to:["bifeldy"].map(s=>`${s}@${b.N.domain}`).join(",")}})}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(r.F0),t.Y36(r.gz),t.Y36(Kt.k),t.Y36(w.z),t.Y36(P.K),t.Y36(u.QS),t.Y36(Ot.X),t.Y36(y.U),t.Y36(Y.e),t.Y36(wt.$))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-edit"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"container"],[1,"profile-info","align-items-center",2,"top","64px","position","relative"],[1,"row","py-3","px-2"],[1,"col-md-4","col-xl-3","p-3"],[1,"row","sticky-top","pt-3"],[1,"col-12"],[1,"w-100",3,"src"],["appearance","outline",1,"pt-3","w-100",3,"color"],[1,"w-100",3,"accept","change"],["photoImage",""],["fontIcon","image","matSuffix",""],[1,"px-3","pb-3","w-100"],[4,"ngIf"],["class","col-12 mb-4",4,"ngIf"],[1,"col-12","py-3"],["formControlName","private","matTooltip","Hanya Tampilkan Informasi Profil"],[1,"col-12","py-3","text-warning"],[1,"text-success",2,"cursor","pointer",3,"click"],[1,"col-md-8","col-xl-9","p-3"],[1,"row","py-3","px-0","profile-height-large"],[1,"row","py-3"],["appearance","outline",1,"py-3","col-12",3,"color"],["matInput","","formControlName","nama","placeholder","Nama Lengkap"],["fontIcon","wysiwyg","matSuffix",""],["placeholder","Basic Input",1,"w-100",3,"accept","change"],["coverImage",""],["class","col-12 py-3",4,"ngIf"],["formControlName","description",1,"py-3","w-100",3,"config"],["appearance","outline",1,"py-3","w-100",3,"color"],["matInput","","formControlName","old_password","required","","placeholder","Password Sekarang","autocomplete","current-password",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[3,"fontIcon"],["matInput","","formControlName","new_password","placeholder","Isi Jika Ingin Ubah Password Baru","autocomplete","new-password",3,"type"],[1,"row"],[1,"row","gy-3"],[1,"col","g-0"],[1,"col-12","col-md-3"],["mat-stroked-button","","routerLink","../",1,"w-100",3,"disabled"],["fontIcon","undo",1,"me-1"],["type","submit","mat-flat-button","","color","accent",1,"w-100",3,"disabled"],["fontIcon","save",1,"ms-1"],[1,"profile-banner","profile-banner-1","align-items-center"],[1,"profile-banner","profile-banner-2","align-items-center"],[1,"col-12","mb-4"],["type","button","mat-raised-button","","color","primary",1,"w-100",3,"disabled","click"],["fontIcon","add_photo_alternate",1,"me-1"]],template:function(s,n){1&s&&t.YNc(0,Wt,85,33,"form",0),2&s&&t.Q6J("ngIf",n.fg)},dependencies:[p.O5,r.rH,Z.eB,Z.Nr,L.Hw,R.nI,R.v_,R.$V,R.nX,Pt.k0,Lt.iZ,N.Kd,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u,x.Yh,U.s6,Nt.$],styles:[".profile-banner[_ngcontent-%COMP%]{height:192px;width:100%;background-size:cover;background-position:center;background-repeat:no-repeat;opacity:.75}.profile-banner-1[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.profile-banner-2[_ngcontent-%COMP%]{position:absolute;top:192px;left:0}.profile-info[_ngcontent-%COMP%]{position:relative;height:256px;z-index:1}@media only screen and (min-width: 769px){.profile-height-large[_ngcontent-%COMP%]{height:100px}}@media only screen and (max-width: 768px){.profile-image[_ngcontent-%COMP%]{padding-top:3rem}}"]})}return i})(),canActivate:[k.t],data:{title:"User - Ubah Profil",description:"Halaman Pembaharuan Profil Pengguna",keywords:"Ubah Profil",[h.t.decoratorRoles]:[d.yS.ADMIN,d.yS.MODERATOR,d.yS.FANSUBBER,d.yS.USER]}}]}];let ee=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[p.ez,r.Bz.forChild(te),O.m,_.$,C.L,u.u5,u.UX,x.Ad,U.UM,m.b,f.F,K.T,v.d]})}return i})()},801:(M,E,o)=>{o.d(E,{Q:()=>O});var p=o(7084),r=o(4650),u=o(9816),U=o(6895),x=o(7392),h=o(7462);function d(_,C){if(1&_&&r._UZ(0,"h3",8),2&_){const m=r.oxw().$implicit;r.Q6J("innerHTML",m.text,r.oJD)}}function k(_,C){if(1&_&&(r.TgZ(0,"mat-expansion-panel",3)(1,"mat-expansion-panel-header")(2,"mat-panel-title",4)(3,"span",5),r._uU(4),r.qZA()(),r.TgZ(5,"mat-panel-description"),r._UZ(6,"mat-icon",6),r.qZA()(),r.YNc(7,d,1,1,"ng-template",7),r.qZA()),2&_){const m=C.$implicit,f=C.first,v=r.oxw(2);r.Q6J("expanded",v.GS.isDesktop&&f),r.xp6(3),r.s9C("matTooltip",m.tooltip),r.Q6J("matTooltipPosition","above"),r.xp6(1),r.hij(" ",m.title," "),r.xp6(2),r.Q6J("fontIcon",m.icon)}}function K(_,C){if(1&_&&(r.TgZ(0,"mat-accordion",1),r.YNc(1,k,8,5,"mat-expansion-panel",2),r.qZA()),2&_){const m=r.oxw();r.xp6(1),r.Q6J("ngForOf",m.panelData)}}let O=(()=>{class _{onResize(m){this.gs.onResize(m,"MATERIAL_EXPANSION_PANEL"),this.gs.isDesktop?this.accordion.openAll():this.accordion.closeAll()}constructor(m){this.gs=m,this.panelData=[{title:"Title",icon:"warning",text:"Lorem ipsum ...",tooltip:"Info"}]}get GS(){return this.gs}ngOnInit(){}static#t=this.\u0275fac=function(f){return new(f||_)(r.Y36(u.U))};static#e=this.\u0275cmp=r.Xpm({type:_,selectors:[["app-material-expansion-panel"]],viewQuery:function(f,v){if(1&f&&r.Gf(p.pp,5),2&f){let b;r.iGM(b=r.CRH())&&(v.accordion=b.first)}},hostBindings:function(f,v){1&f&&r.NdJ("resize",function(t){return v.onResize(t)},!1,r.Jf7)},inputs:{panelData:"panelData"},decls:1,vars:1,consts:[["class","example-headers-align","multi","",4,"ngIf"],["multi","",1,"example-headers-align"],[3,"expanded",4,"ngFor","ngForOf"],[3,"expanded"],[1,"font-weight-bold"],[3,"matTooltip","matTooltipPosition"],[1,"ms-auto",3,"fontIcon"],["matExpansionPanelContent",""],[1,"m-0","text-justify",2,"white-space","pre-line !important",3,"innerHTML"]],template:function(f,v){1&f&&r.YNc(0,K,2,1,"mat-accordion",0),2&f&&r.Q6J("ngIf",v.panelData.length>0)},dependencies:[U.sg,U.O5,p.pp,p.ib,p.yz,p.yK,p.u4,p.HS,x.Hw,h.Kd]})}return _})()},9560:(M,E,o)=>{o.d(E,{$:()=>U});var p=o(6895),r=o(2314),u=o(4650);let U=(()=>{class x{static#t=this.\u0275fac=function(k){return new(k||x)};static#e=this.\u0275mod=u.oAB({type:x});static#i=this.\u0275inj=u.cJS({imports:[p.ez,r.m]})}return x})()}}]);