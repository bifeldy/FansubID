"use strict";(self.webpackChunkmain_site=self.webpackChunkmain_site||[]).push([[794],{8794:(W,b,n)=>{n.r(b),n.d(b,{AnimeModule:()=>H});var A=n(6895),u=n(1390),m=n(4006),I=n(2314),x=n(9736),T=n(6533),E=n(9560),F=n(1010),M=n(6319),f=n(8277),c=n(3238),d=n(91),e=n(4650),_=n(3322),v=n(9816),D=n(5312),C=n(6841),k=n(4363),h=n(9602),S=n(7392),p=n(8455),U=n(9203),R=n(6289),y=n(1338),Z=n(1708),N=n(4758);let B=(()=>{class r{constructor(t,a,i,s,o,l){this.activatedRoute=t,this.router=a,this.bs=i,this.gs=s,this.fs=o,this.anime=l,this.currentMonth=null,this.currentYear=null,this.selectedSeasonName=null,this.seasonalAnimeCard=[],this.seasonalAnime=[],this.tabData=[{name:"Info Garapan",icon:"closed_caption",type:"table",data:{column:["Jenis","Poster","Judul Anime","Nama Fansub"],row:[]}}],this.subsQueryParam=null,this.subsSeasonalAnime=null,this.subsFansubAnime=null,this.gs.bannerImg="/assets/img/season/winter.png",this.gs.bgRepeat=!0,this.gs.sizeContain=!0}ngOnDestroy(){this.subsQueryParam?.unsubscribe(),this.subsSeasonalAnime?.unsubscribe(),this.subsFansubAnime?.unsubscribe()}ngOnInit(){this.fg=new m.nJ({currentDate:new m.p4({value:(0,d._7)(),disabled:!0},m.kI.required)}),this.currentMonth=new Date(this.fg.value.currentDate.format()).getMonth()+1,this.currentYear=new Date(this.fg.value.currentDate.format()).getFullYear(),this.minDate=new Date("1917-01-01"),this.maxDate=new Date(this.currentYear+1,11,31),this.gs.isBrowser&&this.watchUrlRoute()}watchUrlRoute(){this.subsQueryParam=this.activatedRoute.queryParams.subscribe({next:t=>{this.bs.busy(),this.currentYear=t.year?Number.isNaN(parseInt(t.year,10))?this.currentYear:parseInt(t.year,10):(new Date).getFullYear(),this.fg.controls.currentDate.patchValue((0,d._7)(new Date(`${this.currentYear}-${this.currentMonth}-01`))),this.currentYear=new Date(this.fg.value.currentDate.format()).getFullYear(),this.selectedSeasonName=t.season&&this.gs.seasonalWeather.map(a=>a.name).indexOf(t.season)>=0?t.season:this.findSeasonNameByMonthNumber(this.currentMonth),this.gs.bannerImg=this.gs.seasonalWeather.find(a=>a.name===this.selectedSeasonName).img,this.bs.idle(),this.getSeasonalAnime(t.year&&t.season)}})}findSeasonNameByMonthNumber(t){return this.gs.seasonalWeather.find(a=>a.id===Math.ceil(t/3)).name}chosenYearHandler(t,a){const i=this.fg.value.currentDate;i.year(t.year()),this.fg.controls.currentDate.setValue(i),this.currentMonth=new Date(this.fg.value.currentDate.format()).getMonth()+1,this.currentYear=new Date(this.fg.value.currentDate.format()).getFullYear(),a.close(),this.changeSeasonalAnime()}getSeasonalAnime(t=!1){this.bs.busy(),this.subsSeasonalAnime=this.anime.getSeasonalAnime(this.currentYear,this.selectedSeasonName).subscribe({next:a=>{this.gs.log("[ANIME_SEASONAL_SUCCESS]",a),this.seasonalAnime=a.results.sort((i,s)=>(s.mean||0)-(i.mean||0)),t&&this.fs.initializeFab("settings_backup_restore",null,"Kembali Ke Musim Sekarang","/anime",!1),this.bs.idle(),this.getFansubAnime()},error:a=>{this.gs.log("[ANIME_SEASONAL_ERROR]",a,"error"),this.bs.idle()}})}getFansubAnime(){this.bs.busy();const t=[];for(const a of this.seasonalAnime)t.push(a.id);this.subsFansubAnime=this.anime.getFansubAnime(t).subscribe({next:a=>{this.gs.log("[FANSUB_ANIME_SUCCESS]",a);let i=[];for(const s of this.seasonalAnime){s.namaFansubs=a.results[s.id];for(const o of s.namaFansubs)o.selected=!0,o.type="chip";i.push({id:s.id,Jenis:`${s.media_type?.toUpperCase()} \u2022 ${s.mean||0}`,Poster:s.image_url,"Judul Anime":s.title,"Nama Fansub":s.namaFansubs})}i=i.sort((s,o)=>o["Nama Fansub"].length-s["Nama Fansub"].length),this.tabData[0].data.row=i,this.seasonalAnimeCard=this.seasonalAnime,this.bs.idle()},error:a=>{this.gs.log("[FANSUB_ANIME_ERROR]",a,"error"),this.bs.idle()}})}changeSeasonalAnime(){this.router.navigate(["/anime"],{queryParams:{season:this.selectedSeasonName,year:this.currentYear}})}openAnimePage(t){this.gs.log("[ANIME_SEASONAL_CLICK_ANIME]",t);let a=null;try{a=t.title.replace(/[^a-zA-Z0-9]/g,"-")}catch{a=t["Judul Anime"].replace(/[^a-zA-Z0-9]/g,"-")}this.router.navigateByUrl(`/anime/${t.id}-${a}`)}openFansub(t){this.gs.log("[ANIME_SEASONAL_CLICK_FANSUB]",t),this.router.navigateByUrl(`/fansub/${t.slug}`)}static#e=this.\u0275fac=function(a){return new(a||r)(e.Y36(u.gz),e.Y36(u.F0),e.Y36(_.z),e.Y36(v.U),e.Y36(D.r),e.Y36(C.o))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-anime-list"]],features:[e._Bn([{provide:c._A,useClass:f.t7,deps:[c.Ad,f.o8]},{provide:c.sG,useValue:d.Gs}])],decls:31,vars:9,consts:[[1,"container"],[1,"row","pb-3"],[1,"col-12"],[1,"row"],[1,"col-12","pb-3","sticky-top","bg-bifeldy",3,"formGroup"],[1,"m-0","border-bottom","border-primary","row"],[1,"pt-3","col-6","col-md-4","col-lg-2",3,"color"],[3,"value","valueChange"],["value","winter"],["value","spring"],["value","summer"],["value","fall"],[1,"pt-3","col-6","col-md-4","col-lg-2"],["matInput","","formControlName","currentDate",3,"matDatepicker","min","max"],["matSuffix","",1,"shiny",3,"for"],["fontIcon","today","matDatepickerToggleIcon","",1,"animate__animated","animate__swing","animate__infinite","animate__slower"],["startView","multi-year","disabled","false",3,"yearSelected"],["picker",""],[3,"animeDoramaData","cardClicked"],[1,"row","pt-3"],[3,"tabData","chipClicked","tableRowClicked"]],template:function(a,i){if(1&a){const s=e.EpF();e._UZ(0,"app-notifications"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Tema Musim"),e.qZA(),e.TgZ(10,"mat-select",7),e.NdJ("valueChange",function(l){return i.selectedSeasonName=l})("valueChange",function(){return i.changeSeasonalAnime()}),e.TgZ(11,"mat-option",8),e._uU(12,"Winter"),e.qZA(),e.TgZ(13,"mat-option",9),e._uU(14,"Spring"),e.qZA(),e.TgZ(15,"mat-option",10),e._uU(16,"Summer"),e.qZA(),e.TgZ(17,"mat-option",11),e._uU(18,"Fall"),e.qZA()()(),e.TgZ(19,"mat-form-field",12)(20,"mat-label"),e._uU(21,"Tahun"),e.qZA(),e._UZ(22,"input",13),e.TgZ(23,"mat-datepicker-toggle",14),e._UZ(24,"mat-icon",15),e.qZA(),e.TgZ(25,"mat-datepicker",16,17),e.NdJ("yearSelected",function(l){e.CHM(s);const g=e.MAs(26);return e.KtG(i.chosenYearHandler(l,g))}),e.qZA()()()(),e.TgZ(27,"div",2)(28,"app-card-anime-dorama",18),e.NdJ("cardClicked",function(l){return i.openAnimePage(l)}),e.qZA()()()()(),e.TgZ(29,"div",19)(30,"app-material-tab",20),e.NdJ("chipClicked",function(l){return i.openFansub(l)})("tableRowClicked",function(l){return i.openAnimePage(l)}),e.qZA()()()}if(2&a){const s=e.MAs(26);e.xp6(5),e.Q6J("formGroup",i.fg),e.xp6(2),e.Q6J("color","accent"),e.xp6(3),e.Q6J("value",i.selectedSeasonName),e.xp6(12),e.Q6J("matDatepicker",s)("min",i.minDate)("max",i.maxDate),e.xp6(1),e.Q6J("for",s),e.xp6(5),e.Q6J("animeDoramaData",i.seasonalAnimeCard),e.xp6(2),e.Q6J("tabData",i.tabData)}},dependencies:[m.Fj,m.JJ,m.JL,m.sg,m.u,k.CK,h.Mq,h.hl,h.nW,h.Q0,S.Hw,p.v_,p.$V,p.nX,U.k0,R.x8,y.H,Z.L,N.t]})}return r})();var P=n(4520),L=n(5141),w=n(8151),Y=n(1428),O=n(9818),J=n(7462),K=n(801),G=n(291);function $(r,X){if(1&r){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h1",6)(6,"b"),e._uU(7),e.qZA()()(),e.TgZ(8,"div",7)(9,"app-material-chip",8),e.NdJ("chipClicked",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.openGenre(i))}),e.qZA()(),e.TgZ(10,"div",9),e._UZ(11,"app-notifications",10),e.qZA(),e.TgZ(12,"div",7),e._UZ(13,"app-material-expansion-panel",11),e.qZA()(),e.TgZ(14,"div",12)(15,"div",13)(16,"div",14),e._UZ(17,"img",15),e.qZA(),e.TgZ(18,"div",16)(19,"button",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openSeasonalAnime())}),e._UZ(20,"mat-icon",18),e._uU(21),e._UZ(22,"mat-icon",19),e._uU(23),e._UZ(24,"br")(25,"mat-icon",20),e._uU(26),e.qZA()(),e.TgZ(27,"div",16)(28,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openRank())}),e._UZ(29,"mat-icon",22),e._uU(30),e._UZ(31,"mat-icon",23),e._uU(32),e._UZ(33,"br")(34,"mat-icon",24),e._uU(35),e.qZA()()()()(),e.TgZ(36,"div",9)(37,"div",25)(38,"app-material-tab",26),e.NdJ("gridClicked",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.openFansub(i))})("tableRowClicked",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.openFile(i))})("paginatorClicked",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onPaginatorClicked(i))})("serverSideFilter",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onServerSideFilter(i))})("serverSideOrder",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onServerSideOrder(i))})("gridLoadNextPage",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onFansubLoadNextPage())}),e.qZA()()()(),e._UZ(39,"div",27)(40,"div",28),e.qZA()}if(2&r){const t=e.oxw();e.xp6(7),e.Oqu((null==t.animeData.alternative_titles?null:t.animeData.alternative_titles.ja)||t.animeData.alternative_titles.en||t.animeData.title),e.xp6(2),e.Q6J("chipData",t.chipData),e.xp6(4),e.Q6J("panelData",t.panelData),e.xp6(4),e.Q6J("src",t.animeData.image_url,e.LSH),e.xp6(2),e.hYB("matTooltip","Lihat Semua Anime Pada Musim '",t.SEASON," ",t.YEAR,"'"),e.xp6(2),e.hij(" ",t.animeData.num_episodes||"?"," Eps \xa0 "),e.xp6(2),e.hij(" ",t.animeData.mean||"?"," "),e.xp6(3),e.AsE(" ",t.animeData.start_date||"?"," \u30fc ",t.animeData.end_date||"?"," "),e.xp6(4),e.hij(" ",t.animeData.rank||"?"," \xa0 "),e.xp6(2),e.hij(" ",t.animeData.popularity||"?"," "),e.xp6(3),e.AsE(" ",(null==t.animeData.status?null:t.animeData.status.split("_").join(" ").toUpperCase())||"?"," - ",null==t.animeData.media_type?null:t.animeData.media_type.toUpperCase()," "),e.xp6(3),e.Q6J("tabData",t.tabData)("count",t.count)("serverSide",!0)("gridPageFinished",t.fansubPageFinished),e.xp6(1),e.Udp("background-image","url("+t.animeData.image_url+")")}}const Q=[{path:"",pathMatch:"full",component:B},{path:":animeId",component:(()=>{class r{constructor(t,a,i,s,o,l,g,z,j){this.router=t,this.activatedRoute=a,this.gs=i,this.bs=s,this.pi=o,this.anime=l,this.fs=g,this.wb=z,this.berkas=j,this.malDomain="https://myanimelist.net",this.animeId="",this.animeData=null,this.count=0,this.page=1,this.row=10,this.q="",this.sort="",this.order="",this.fansubAnime=[],this.berkasAnime=[],this.allBerkasAnimeId=[],this.fansubPageFinished=!1,this.fansubPage=1,this.chipData=[],this.panelData=[],this.tabData=[{name:"Daftar Fansub",icon:"closed_caption",type:"grid",data:[]},{name:"Berkas Terkait",icon:"file_copy",type:"table",data:{column:["Proyek","Nama Berkas","Tanggal","Pemilik"],row:[]}}],this.subsAnime=null,this.subsBerkas=null,this.subsFansub=null,this.subsParam=null,this.subsTrusted=null,this.gs.bannerImg=null,this.gs.bgRepeat=!0,this.gs.sizeContain=!0}get SEASON(){return this.findSeasonNameByMonthNumber(new Date(this.animeData.start_date).getMonth()+1)}get YEAR(){return new Date(this.animeData.start_date).getFullYear()}ngOnDestroy(){this.subsAnime?.unsubscribe(),this.subsBerkas?.unsubscribe(),this.subsFansub?.unsubscribe(),this.subsParam?.unsubscribe(),this.subsTrusted?.unsubscribe()}ngOnInit(){this.subsParam=this.activatedRoute.params.subscribe({next:t=>{const a=t.animeId;this.animeId=a.split("-")[0],this.bs.busy(),this.subsAnime=this.anime.getAnime(a).subscribe({next:i=>{if(this.gs.log("[ANIME_DETAIL_SUCCESS]",i),this.animeData=i.result,this.pi.updatePageMetaData(this.animeData.title,this.animeData.synopsis,this.animeData.alternative_titles?.synonyms?.join(", "),this.animeData.image_url),this.bs.idle(),this.gs.isBrowser){const s=this.animeData.genres;for(const o of s)this.chipData.push({id:o.id,name:o.name,selected:!0,color:P.Q.PINK});this.panelData=[],this.panelData.push({title:"Ringkasan Cerita",icon:"history_edu",text:this.animeData.synopsis,tooltip:"Alih Bahasa Oleh 'Google Translate' \u{1f618}"}),this.fs.initializeFab(null,"/assets/img/logo/mal.png","Buka Di MyAnimeList",`${this.malDomain}/anime/${this.animeId}`,!0),this.getFansubAnime(),this.getBerkasAnime()}},error:i=>{this.gs.log("[ANIME_DETAIL_ERROR]",i,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:"/anime"}})}})}})}openRank(){this.wb.winboxOpenUri(`${this.malDomain}/topanime.php?limit=${this.animeData.rank-1}`)}findSeasonNameByMonthNumber(t){return this.gs.seasonalWeather.find(a=>a.id===Math.ceil(t/3)).name}openSeasonalAnime(){this.router.navigate(["/anime"],{queryParams:{season:this.SEASON,year:this.YEAR}})}onServerSideFilter(t){this.gs.log("[BERKAS_ANIME_ENTER_FILTER]",t),this.q=t,this.getBerkasAnime()}onServerSideOrder(t){this.gs.log("[BERKAS_ANIME_CLICK_ORDER]",t),this.q=t.q,this.sort=t.active,this.order=t.direction,this.getBerkasAnime()}getBerkasAnime(){this.bs.busy(),this.subsBerkas&&(this.subsBerkas.unsubscribe(),this.bs.idle()),this.subsBerkas=this.anime.getBerkasAnime([this.animeId],this.q,this.page,this.row,this.sort,this.order).subscribe({next:t=>{this.gs.log("[ANIME_BERKAS_LIST_SUCCESS]",t),this.count=t.count,this.berkasAnime=[];for(const a of t.results[this.animeId])this.allBerkasAnimeId.push(a.id),this.berkasAnime.push({id:a.id,private:a.private,foto:a.user_.image_url,Pemilik:a.user_.username,Proyek:a.project_type_.name,Tanggal:a.created_at,"Nama Berkas":a.name,DARK:a.r18});this.tabData[1].data.row=this.berkasAnime,this.allBerkasAnimeId.length>0&&this.checkTrusted(),this.bs.idle()},error:t=>{this.gs.log("[ANIME_BERKAS_LIST_ERROR]",t,"error"),this.bs.idle()}})}checkTrusted(){this.bs.busy(),this.subsTrusted&&(this.subsTrusted.unsubscribe(),this.bs.idle()),this.subsTrusted=this.berkas.checkTrusted(this.allBerkasAnimeId).subscribe({next:t=>{this.gs.log("[ANIME_BERKAS_TRUSTED_SUCCESS]",t);for(const a of this.berkasAnime)a.trusted=t.results[a.id];this.bs.idle()},error:t=>{this.gs.log("[ANIME_BERKAS_TRUSTED_ERROR]",t,"error"),this.bs.idle()}})}getFansubAnime(){this.bs.busy(),this.subsFansub=this.anime.getFansubAnime([this.animeId],this.fansubPage).subscribe({next:t=>{this.gs.log("[FANSUB_ANIME_SUCCESS]",t);for(const a of t.results[this.animeId])this.fansubAnime.push({id:a.id,image:a.image_url,title:a.name,slug:a.slug,description:`${a.slug} :: ${a.active?"Aktif":"Non-Aktif"}`});this.tabData[0].data=this.fansubAnime,t.results[this.animeId].length<=0&&(this.fansubPageFinished=!0),this.bs.idle()},error:t=>{this.gs.log("[FANSUB_ANIME_ERROR]",t,"error"),this.bs.idle()}})}openGenre(t){this.gs.log("[ANIME_DETAIL_CLICK_GENRE]",t),this.wb.winboxOpenUri(`${this.malDomain}/anime/genre/${t.id}`)}openFansub(t){this.gs.log("[ANIME_DETAIL_CLICK_FANSUB]",t),this.router.navigateByUrl(`/fansub/${t.slug}`)}onPaginatorClicked(t){this.gs.log("[ANIME_DETAIL_CLICK_PAGINATOR]",t),this.page=t.pageIndex+1,this.row=t.pageSize,this.getBerkasAnime()}openFile(t){this.gs.log("[ANIME_DETAIL_CLICK_BERKAS]",t),this.router.navigateByUrl(`/berkas/${t.id}`)}onFansubLoadNextPage(){this.fansubPageFinished||(this.fansubPage++,this.getFansubAnime())}static#e=this.\u0275fac=function(a){return new(a||r)(e.Y36(u.F0),e.Y36(u.gz),e.Y36(v.U),e.Y36(_.z),e.Y36(L.Z),e.Y36(C.o),e.Y36(D.r),e.Y36(w.N),e.Y36(Y.A))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-anime-detail"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"anime-info","align-items-center"],[1,"row","py-3","px-2","d-flex"],[1,"col-md-8","col-xl-9","pt-3","order-2","order-md-1"],[1,"row","py-3","px-0","mt-auto"],[1,"m-0"],[1,"row","py-3"],[3,"chipData","chipClicked"],[1,"row"],[1,"px-0"],[3,"panelData"],[1,"col-md-4","col-xl-3","px-3","order-1","order-md-2"],[1,"row","sticky-top","pt-3"],[1,"col-12","pt-4"],[1,"anime-image",3,"src"],[1,"col-12","text-center","pt-3"],["type","button","mat-stroked-button","","color","accent",1,"w-100",3,"matTooltip","click"],["fontIcon","dynamic_feed",1,"me-1"],["fontIcon","star_half",1,"me-1"],["fontIcon","date_range",1,"me-1"],["type","button","mat-stroked-button","","color","warn","matTooltip","Buka Ranking Di MyAnimeList",1,"w-100",3,"click"],["fontIcon","timeline",1,"me-1"],["fontIcon","local_fire_department",1,"me-1"],["fontIcon","label",1,"me-1"],[1,"col-12"],[3,"tabData","count","serverSide","gridPageFinished","gridClicked","tableRowClicked","paginatorClicked","serverSideFilter","serverSideOrder","gridLoadNextPage"],[1,"anime-banner","anime-banner-1","align-items-center"],[1,"anime-banner","anime-banner-2","align-items-center"]],template:function(a,i){1&a&&e.YNc(0,$,41,20,"div",0),2&a&&e.Q6J("ngIf",i.animeData)},dependencies:[A.O5,O.eB,S.Hw,J.Kd,y.H,K.Q,G.G,N.t],styles:[".anime-banner[_ngcontent-%COMP%]{height:128px;width:100%;background-size:cover;background-position:center;background-repeat:no-repeat;filter:blur(10px) brightness(100%);opacity:.5}.anime-banner-1[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.anime-banner-2[_ngcontent-%COMP%]{position:absolute;top:128px;left:0}.anime-info[_ngcontent-%COMP%]{position:relative;height:256px;z-index:1}.anime-image[_ngcontent-%COMP%]{width:100%}"]})}return r})()}];let H=(()=>{class r{static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275mod=e.oAB({type:r});static#a=this.\u0275inj=e.cJS({imports:[A.ez,u.Bz.forChild(Q),m.u5,m.UX,I.m,x.L,E.$,T.P,F._,M.F]})}return r})()}}]);