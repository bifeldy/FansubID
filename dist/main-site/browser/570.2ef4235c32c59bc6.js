"use strict";(self.webpackChunkmain_site=self.webpackChunkmain_site||[]).push([[570],{4570:(K,h,a)=>{a.r(h),a.d(h,{MailboxModule:()=>j});var c=a(6895),d=a(1390),b=a(4006),O=a(2314),Z=a(3811),u=a(4674),t=a(4650),p=a(3322),f=a(5312),x=a(9816),_=a(217),T=a(8151),P=a(3238),v=a(7392),m=a(9982),M=a(4758),A=a(7443),y=a(5882);function D(n,s){if(1&n&&(t.TgZ(0,"mat-list-option"),t._UZ(1,"mat-icon",21),t.TgZ(2,"h4"),t._uU(3),t.qZA()()),2&n){const i=s.$implicit;t.xp6(3),t.Oqu(i)}}function U(n,s){if(1&n&&(t.TgZ(0,"div",15)(1,"div",16)(2,"h2",17)(3,"b",18),t._uU(4,"Penerima Utama"),t.qZA()()(),t.TgZ(5,"div",19)(6,"mat-selection-list",20),t.YNc(7,D,4,1,"mat-list-option",25),t.qZA()()()),2&n){const i=t.oxw(2);t.xp6(6),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",i.filterAddress(i.mailData.to))}}function w(n,s){if(1&n&&(t.TgZ(0,"mat-list-option"),t._UZ(1,"mat-icon",21),t.TgZ(2,"h4"),t._uU(3),t.qZA()()),2&n){const i=s.$implicit;t.xp6(3),t.Oqu(i)}}function I(n,s){if(1&n&&(t.TgZ(0,"div",15)(1,"div",16)(2,"h2",17)(3,"b",18),t._uU(4,"Penerima CC"),t.qZA()()(),t.TgZ(5,"div",19)(6,"mat-selection-list",20),t.YNc(7,w,4,1,"mat-list-option",25),t.qZA()()()),2&n){const i=t.oxw(2);t.xp6(6),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",i.filterAddress(i.mailData.cc))}}function S(n,s){if(1&n&&(t.TgZ(0,"mat-list-option"),t._UZ(1,"mat-icon",21),t.TgZ(2,"h4"),t._uU(3),t.qZA()()),2&n){const i=s.$implicit;t.xp6(3),t.Oqu(i)}}function L(n,s){if(1&n&&(t.TgZ(0,"div",15)(1,"div",16)(2,"h2",17)(3,"b",18),t._uU(4,"Penerima BCC"),t.qZA()()(),t.TgZ(5,"div",19)(6,"mat-selection-list",20),t.YNc(7,S,4,1,"mat-list-option",25),t.qZA()()()),2&n){const i=t.oxw(2);t.xp6(6),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",i.filterAddress(i.mailData.bcc))}}function k(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"mat-list-option",27),t.NdJ("click",function(){const r=t.CHM(i).$implicit,l=t.oxw(3);return t.KtG(l.downloadAttachment(r.id))}),t._UZ(1,"mat-icon",28),t.TgZ(2,"div",29),t._uU(3),t.qZA(),t.TgZ(4,"div",29),t._uU(5),t.ALo(6,"bytes"),t.qZA()()}if(2&n){const i=s.$implicit;t.xp6(3),t.Oqu(i.name),t.xp6(2),t.Oqu(t.lcZ(6,2,i.size))}}function Y(n,s){if(1&n&&(t.TgZ(0,"div",15)(1,"div",16)(2,"h2",17)(3,"b",18),t._uU(4,"Lampiran"),t.qZA()()(),t.TgZ(5,"div",19)(6,"mat-selection-list",20),t.YNc(7,k,7,4,"mat-list-option",26),t.qZA()()()),2&n){const i=t.oxw(2);t.xp6(6),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",i.mailData.attachment_)}}function B(n,s){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"ul",4),t._UZ(4,"li")(5,"li")(6,"li")(7,"li")(8,"li")(9,"li")(10,"li")(11,"li")(12,"li")(13,"li"),t.TgZ(14,"div",5)(15,"div",6)(16,"div",7)(17,"h2",8),t._uU(18),t.qZA(),t.TgZ(19,"p",9),t._uU(20),t.ALo(21,"date"),t.qZA()()()()()()(),t._UZ(22,"app-notifications"),t.TgZ(23,"div",10)(24,"div",11)(25,"div",12)(26,"div",13)(27,"div",14)(28,"div",15)(29,"div",16)(30,"h2",17)(31,"b",18),t._uU(32,"Pengirim"),t.qZA()()(),t.TgZ(33,"div",19)(34,"mat-selection-list",20)(35,"mat-list-option"),t._UZ(36,"mat-icon",21),t.TgZ(37,"h4"),t._uU(38),t.qZA()()()()(),t.YNc(39,U,8,2,"div",22),t.YNc(40,I,8,2,"div",22),t.YNc(41,L,8,2,"div",22),t.YNc(42,Y,8,2,"div",22),t.qZA()()(),t.TgZ(43,"div",23)(44,"div",13)(45,"div",14)(46,"div",15)(47,"div",16)(48,"h2",17)(49,"b",18),t._uU(50,"Isi Konten Pesan"),t.qZA()()(),t.TgZ(51,"div",19),t._UZ(52,"div",24),t.ALo(53,"safeInnerHtml"),t.qZA()()()()()()()()),2&n){const i=t.oxw();t.xp6(2),t.Udp("background","url(/assets/img/banner/mailbox-detail.png), linear-gradient(to bottom, "+(i.GS.isDarkMode?"#673ab7":"#3f51b5")+" 0%, #ee0dfd 100%)"),t.xp6(16),t.hij(" ",i.mailData.subject," "),t.xp6(2),t.Oqu(t.xi3(21,11,i.mailData.date,"d MMMM y, hh:mm:ss a z")),t.xp6(14),t.Q6J("multiple",!1),t.xp6(4),t.Oqu(i.mailData.from),t.xp6(1),t.Q6J("ngIf",i.mailData.to),t.xp6(1),t.Q6J("ngIf",i.mailData.cc),t.xp6(1),t.Q6J("ngIf",i.mailData.bcc),t.xp6(1),t.Q6J("ngIf",i.mailData.attachment_.length>0),t.xp6(10),t.Q6J("innerHTML",t.lcZ(53,14,i.mailData.html||i.mailData.text),t.oJD)}}let J=(()=>{class n{constructor(i,e,o,r,l,g,H){this.activatedRoute=i,this.router=e,this.bs=o,this.fs=r,this.gs=l,this.ms=g,this.wb=H,this.mailId="",this.mailData=null,this.subsParam=null,this.subsMail=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get GS(){return this.gs}ngOnInit(){this.gs.isBrowser&&this.getMail()}ngOnDestroy(){this.subsParam?.unsubscribe(),this.subsMail?.unsubscribe()}filterAddress(i){return i?i.split(",").map(e=>e.trim()):[]}getMail(){this.subsParam=this.activatedRoute.params.subscribe({next:i=>{this.mailId=i.mailId,this.bs.busy(),this.subsMail&&(this.subsMail.unsubscribe(),this.bs.idle()),this.subsMail=this.ms.getMail(this.mailId).subscribe({next:e=>{this.gs.log("[MAIL_DETAIL_SUCCESS]",e),this.mailData=e.result,this.fs.initializeFab("outgoing_mail",null,"Balas Email","/create/mailbox",!1),this.bs.idle()},error:e=>{this.gs.log("[MAIL_DETAIL_ERROR]",e,"error"),this.bs.idle(),this.router.navigate(["/error"],{queryParams:{returnUrl:"/mailbox"}})}})}})}downloadAttachment(i){this.wb.winboxOpenUri(`${u.N.apiUrl}/attachment/${i}?ngsw-bypass=true`)}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(d.gz),t.Y36(d.F0),t.Y36(p.z),t.Y36(f.r),t.Y36(x.U),t.Y36(_.Y),t.Y36(T.N))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-mailbox-detail"]],decls:1,vars:1,consts:[["class","p-0 m-0",4,"ngIf"],[1,"p-0","m-0"],[1,"container-fluid","p-0"],[1,"wrapper"],[1,"bg-bubbles","align-items-center","p-0"],[1,"row","align-items-center","h-100"],[1,"col-12","mx-auto"],[1,"container","text-light"],[1,"mb-1",2,"line-height","normal"],[1,"mb-0"],[1,"container"],[1,"row"],[1,"col-md-5","col-xl-4","p-3"],[1,"row","sticky-top"],[1,"col"],[1,"row","py-3"],[1,"col-12","pt-3","sticky-top","bg-bifeldy"],[1,"border-bottom-dotted"],[1,"text-bifeldy"],[1,"col-12"],[3,"multiple"],["fontIcon","account_circle","mat-list-icon","",1,"ms-3"],["class","row py-3",4,"ngIf"],[1,"col-md-7","col-xl-8","p-3","sticky-top"],[1,"m-3",3,"innerHTML"],[4,"ngFor","ngForOf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["fontIcon","attach_file","mat-list-icon","",1,"ms-3"],["mat-line",""]],template:function(e,o){1&e&&t.YNc(0,B,54,16,"div",0),2&e&&t.Q6J("ngIf",o.mailData)},dependencies:[c.sg,c.O5,P.X2,v.Hw,m.ap,m.kh,m.O$,M.t,c.uU,A.$,y.H],styles:[".wrapper[_ngcontent-%COMP%]{position:sticky;left:0;width:100%;height:128px;overflow:hidden;background-size:128px,auto!important;background-repeat:no-repeat,repeat!important;background-position-x:100%,0%!important}.bg-bubbles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:absolute;list-style:none;display:block;width:40px;height:40px;background-color:#ffffff26;bottom:-160px;animation:_ngcontent-%COMP%_square 25s infinite;transition-timing-function:linear}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1){left:10%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){left:20%;width:80px;height:80px;animation-delay:2s;animation-duration:17s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){left:25%;animation-delay:4s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){left:40%;width:60px;height:60px;animation-duration:22s;background-color:#ffffff40}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){left:70%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){left:80%;width:120px;height:120px;animation-delay:3s;background-color:#fff3}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7){left:32%;width:160px;height:160px;animation-delay:7s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(8){left:55%;width:20px;height:20px;animation-delay:15s;animation-duration:40s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(9){left:25%;width:10px;height:10px;animation-delay:2s;animation-duration:40s;background-color:#ffffff4d}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(10){left:90%;width:160px;height:160px;animation-delay:11s}@keyframes _ngcontent-%COMP%_square{0%{transform:translateY(0)}to{transform:translateY(-512px) rotate(512deg)}}"]})}return n})();var F=a(80),N=a(4363),R=a(9818),C=a(8455),E=a(6289),Q=a(9558);let q=(()=>{class n{constructor(i,e,o,r,l,g){this.router=i,this.as=e,this.bs=o,this.fs=r,this.gs=l,this.ms=g,this.mailData={inbox:{column:["Tanggal","Pengirim","Topik","Lampiran"],row:[],count:0},outbox:{column:["Tanggal","Penerima","Topik","Lampiran"],row:[],count:0}},this.selectedMailBox="inbox",this.page=1,this.row=10,this.q="",this.sort="",this.order="",this.subsMailbox=null,this.gs.bannerImg=null,this.gs.sizeContain=!1,this.gs.bgRepeat=!1}get GS(){return this.gs}get AS(){return this.as}get ENV(){return u.N}ngOnInit(){this.gs.isBrowser&&this.getMailbox()}ngOnDestroy(){this.subsMailbox?.unsubscribe()}filterAddress(i){let e="";if(i)for(const o of i.split(","))e&&(e+=", "),o.includes("<")&&o.includes(">")?e+=o.split("<")[1].split(">")[0].trim():e+=o.trim();return e}getMailbox(){this.bs.busy(),this.subsMailbox&&(this.subsMailbox.unsubscribe(),this.bs.idle()),this.subsMailbox=this.ms.getMailbox(this.selectedMailBox,this.q,this.page,this.row,this.sort,this.order).subscribe({next:i=>{this.gs.log("[MAILBOX_LIST_SUCCESS]",i),this.mailData[this.selectedMailBox].count=i.count,this.mailData[this.selectedMailBox].row=[];for(const e of i.results)this.mailData[this.selectedMailBox].row.push({id:e.id,Tanggal:e.date,Pengirim:this.filterAddress(e.from),Penerima:this.filterAddress(e.to),Topik:e.subject,Lampiran:`${e.attachment_count} Berkas`});this.fs.initializeFab("outgoing_mail",null,"Buat Email Baru","/create/mailbox",!1),this.bs.idle()},error:i=>{this.gs.log("[MAILBOX_LIST_ERROR]",i,"error"),this.bs.idle()}})}changeMailbox(){this.getMailbox()}onRowClicked(i){this.gs.log("[MAILBOX_LIST_CLICK_EMAIL]",i),this.router.navigateByUrl(`/mailbox/${i.id}`)}onPaginatorClicked(i){this.gs.log("[MAILBOX_LIST_CLICK_PAGINATOR]",i),this.page=i.pageIndex+1,this.row=i.pageSize,this.getMailbox()}onServerSideFilter(i){this.gs.log("[MAILBOX_LIST_ENTER_FILTER]",i),this.q=i,this.getMailbox()}onServerSideOrder(i){this.gs.log("[MAILBOX_LIST_CLICK_ORDER]",i),this.q=i.q,this.sort=i.active,"created_at"===this.sort?this.sort="date":"title"===this.sort&&(this.sort="subject"),this.order=i.direction,this.getMailbox()}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(d.F0),t.Y36(F.e),t.Y36(p.z),t.Y36(f.r),t.Y36(x.U),t.Y36(_.Y))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-mailbox-list"]],decls:41,vars:12,consts:[[1,"container-fluid","p-0"],[1,"wrapper"],[1,"bg-bubbles","align-items-center","p-0"],[1,"row","align-items-center","h-100"],[1,"col-12","mx-auto"],[1,"container","text-light"],[1,"mb-1",2,"line-height","normal"],[1,"mb-0"],[1,"container"],[1,"row","sticky-top","bg-bifeldy"],[1,"col-12"],[1,"row"],[1,"col-12","pb-3"],[1,"m-0","border-bottom","border-primary","row"],[1,"pt-3","col-6","col-md-4","col-lg-2",3,"color"],[3,"value","valueChange"],["value","inbox"],["value","outbox"],[1,"ms-auto","p-3","col-6","col-md-4","col-lg-2"],["type","button","mat-flat-button","","color","accent",1,"w-100","h-100",3,"click"],["fontIcon","loop",1,"me-1"],[1,"row","p-3"],[3,"tableDataColumn","tableDataRow","count","serverSide","serverSideFilter","rowClicked","paginatorClicked","serverSideOrder"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"ul",2),t._UZ(3,"li")(4,"li")(5,"li")(6,"li")(7,"li")(8,"li")(9,"li")(10,"li")(11,"li")(12,"li"),t.TgZ(13,"div",3)(14,"div",4)(15,"div",5)(16,"h2",6),t._uU(17),t.qZA(),t.TgZ(18,"p",7),t._uU(19),t.qZA()()()()()()(),t._UZ(20,"app-notifications"),t.TgZ(21,"div",8)(22,"div",9)(23,"div",10)(24,"div",11)(25,"div",12)(26,"h3",13)(27,"mat-form-field",14)(28,"mat-label"),t._uU(29,"Kotak Pesan"),t.qZA(),t.TgZ(30,"mat-select",15),t.NdJ("valueChange",function(l){return o.selectedMailBox=l})("valueChange",function(){return o.changeMailbox()}),t.TgZ(31,"mat-option",16),t._uU(32,"Masuk"),t.qZA(),t.TgZ(33,"mat-option",17),t._uU(34,"Keluar"),t.qZA()()(),t.TgZ(35,"div",18)(36,"button",19),t.NdJ("click",function(){return o.changeMailbox()}),t._UZ(37,"mat-icon",20),t._uU(38," Refresh "),t.qZA()()()()()()(),t.TgZ(39,"div",21)(40,"app-material-table",22),t.NdJ("serverSideFilter",function(l){return o.onServerSideFilter(l)})("rowClicked",function(l){return o.onRowClicked(l)})("paginatorClicked",function(l){return o.onPaginatorClicked(l)})("serverSideOrder",function(l){return o.onServerSideOrder(l)}),t.qZA()()()),2&e&&(t.xp6(1),t.Udp("background","url(/assets/img/banner/mailbox.png), linear-gradient(to bottom, "+(o.GS.isDarkMode?"#673ab7":"#3f51b5")+" 0%, #ee0dfd 100%)"),t.xp6(16),t.AsE(" ",null==o.AS.currentUserSubject||null==o.AS.currentUserSubject.value?null:o.AS.currentUserSubject.value.username," @ ",o.ENV.domain," "),t.xp6(2),t.AsE(" ",o.mailData.inbox.count," Inbox ~ ",o.mailData.outbox.count," Outbox "),t.xp6(8),t.Q6J("color","accent"),t.xp6(3),t.Q6J("value",o.selectedMailBox),t.xp6(10),t.Q6J("tableDataColumn",o.mailData[o.selectedMailBox].column)("tableDataRow",o.mailData[o.selectedMailBox].row)("count",o.mailData[o.selectedMailBox].count)("serverSide",!0))},dependencies:[N.CK,R.eB,v.Hw,C.v_,C.$V,E.x8,M.t,Q.I],styles:[".wrapper[_ngcontent-%COMP%]{position:sticky;left:0;width:100%;height:128px;overflow:hidden;background-size:200px,auto!important;background-repeat:no-repeat,repeat!important;background-position-x:100%,0%!important}.bg-bubbles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:absolute;list-style:none;display:block;width:40px;height:40px;background-color:#ffffff26;bottom:-160px;animation:_ngcontent-%COMP%_square 25s infinite;transition-timing-function:linear}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1){left:10%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){left:20%;width:80px;height:80px;animation-delay:2s;animation-duration:17s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){left:25%;animation-delay:4s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){left:40%;width:60px;height:60px;animation-duration:22s;background-color:#ffffff40}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){left:70%}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){left:80%;width:120px;height:120px;animation-delay:3s;background-color:#fff3}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7){left:32%;width:160px;height:160px;animation-delay:7s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(8){left:55%;width:20px;height:20px;animation-delay:15s;animation-duration:40s}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(9){left:25%;width:10px;height:10px;animation-delay:2s;animation-duration:40s;background-color:#ffffff4d}.bg-bubbles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(10){left:90%;width:160px;height:160px;animation-delay:11s}@keyframes _ngcontent-%COMP%_square{0%{transform:translateY(0)}to{transform:translateY(-512px) rotate(512deg)}}"]})}return n})();var z=a(6319),$=a(7299);const X=[{path:"",pathMatch:"full",component:q},{path:":mailId",children:[{path:"",pathMatch:"full",component:J}]}];let j=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#i=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[c.ez,d.Bz.forChild(X),b.u5,b.UX,O.m,z.F,$.H,Z.T]})}return n})()}}]);